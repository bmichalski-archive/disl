!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(1),i=r(o),u=n(7),a=r(u),c=n(8),f=r(c),s=n(5),l=r(s),p=n(6),h=r(p),y=n(3),d=r(y),v=n(9),g=r(v),b={Container:i.default,ClassConstructorDefinition:a.default,FactoryDefinition:f.default,Reference:l.default,Parameter:h.default,MethodCall:d.default};for(var m in g.default)g.default.hasOwnProperty(m)&&(b[m]=g.default[m]);t.exports=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":u(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":u(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(2),f=r(c),s=n(7),l=r(s),p=n(8),h=r(p),y=n(5),d=r(y),v=n(6),g=r(v),b=n(3),m=r(b),w=n(9),_=n(4),E=_.InjectableArguments,j=function(){function t(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null==t}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}(),O=function(){function t(t){return null!=t&&t.obj instanceof Object&&Array.isArray(t.arr)&&t.arr.every(function(t){return"string"==typeof t})}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}(),S=function(){function t(t){return"function"==typeof t}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}(),A=function(){function t(){o(this,t),this._servicesByIdentifier={},this._serviceDefinitionsByIdentifier={},this._parametersByIdentifier={},this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier={},this._classConstructorLocators=[],this._instanceLocators=[]}return a(t,[{key:"get",value:function(){function t(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Array<Object | Function>>\n\nGot:\n"+i(t));return t}for(var e=this,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!Array.isArray(r)||!r.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "identifiers" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(r));var u=[];return r.forEach(function(t){u.push(e._doGetService(t,{obj:{},arr:[]}))}),t(Promise.all(u))}},{key:"set",value:function(e,n){function r(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!(n instanceof Object||"function"==typeof n))throw new TypeError('Value of argument "instance" violates contract.\n\nExpected:\nObject | Function\n\nGot:\n'+i(n));return this._servicesByIdentifier[e]=n,r(this)}},{key:"has",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(this.hasDefinition(t)||this.hasInstance(t))}},{key:"hasDefinition",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(void 0!==this._serviceDefinitionsByIdentifier[t])}},{key:"hasInstance",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(void 0!==this._servicesByIdentifier[t])}},{key:"getDefinition",value:function(t){function e(t){if(!(t instanceof f.default))throw new TypeError("Function return value violates contract.\n\nExpected:\nDefinition\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));var n=this._serviceDefinitionsByIdentifier[t];if(void 0===n)throw w.UndefinedServiceDefinitionError.createError(t);return e(n)}},{key:"setDefinition",value:function(e,n){function r(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!(n instanceof f.default))throw new TypeError('Value of argument "definition" violates contract.\n\nExpected:\nDefinition\n\nGot:\n'+i(n));if(this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[e])throw w.ServiceDefinitionAlreadyUsedError.createError(e);return this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[e]=!1,this._serviceDefinitionsByIdentifier[e]=n,r(this)}},{key:"getParameter",value:function(t){function e(t){if(!j(t))throw new TypeError("Function return value violates contract.\n\nExpected:\nscalar\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(void 0===this._parametersByIdentifier[t])throw w.UndefinedParameterError.createError(t);return e(this._parametersByIdentifier[t])}},{key:"setParameter",value:function(e,n){function r(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!j(n))throw new TypeError('Value of argument "value" violates contract.\n\nExpected:\nscalar\n\nGot:\n'+i(n));return this._parametersByIdentifier[e]=n,r(this)}},{key:"hasParameter",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(void 0!==this._parametersByIdentifier[t])}},{key:"registerClassConstructorLocator",value:function(e){function n(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if(!S(e))throw new TypeError('Value of argument "locator" violates contract.\n\nExpected:\nLocatorCallback\n\nGot:\n'+i(e));return this._classConstructorLocators.push(e),n(this)}},{key:"registerInstanceLocator",value:function(e){function n(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if(!S(e))throw new TypeError('Value of argument "locator" violates contract.\n\nExpected:\nLocatorCallback\n\nGot:\n'+i(e));return this._instanceLocators.push(e),n(this)}},{key:"_instantiate",value:function(t,e,n){function r(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Object>\n\nGot:\n"+i(t));return t}var o=this;if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!(e instanceof f.default))throw new TypeError('Value of argument "definition" violates contract.\n\nExpected:\nDefinition\n\nGot:\n'+i(e));if(!O(n))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(n));return r(this._resolveArgs(e.args,n).then(function(r){function u(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise\n\nGot:\n"+i(t));return t}if(!Array.isArray(r))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nArray\n\nGot:\n'+i(r));var a=void 0;if(e instanceof l.default){var c=o._locateServiceClassConstructor(e.classConstructorIdentifier);a=new(Function.prototype.bind.apply(c,[void 0].concat(r)))}else if(e instanceof h.default&&(a=e.factory.apply(void 0,r),void 0===a))return u(Promise.reject(w.FactoryMethodReturnsNothingError.createError(t)));return new Promise(function(t,r){function u(t){function n(t){if(!(t instanceof m.default))throw new TypeError('Function "getMethodCall" return value violates contract.\n\nExpected:\nMethodCall\n\nGot:\n'+i(t));return t}return n(e.methodCalls[t])}var c=[],f=void 0,s=void 0,l=function(t){if("function"!=typeof t)throw new TypeError('Value of argument "methodToCall" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+i(t));c.push(o._resolveArgs(s.args,n).then(function(e){function n(t){if(!(null==t||t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\n?Promise | mixed\n\nGot:\n"+i(t));return t}if(!Array.isArray(e))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nArray\n\nGot:\n'+i(e));return n(t.apply(a,e))}))};for(f in e.methodCalls)if(e.methodCalls.hasOwnProperty(f)){s=u(f);var p=s.name,h=a[p];if(void 0===h)return r(w.MethodDoesNotExistError.createError(p));l(h)}return t(Promise.all(c).then(function(){function t(t){if(!(t instanceof Object))throw new TypeError("Function return value violates contract.\n\nExpected:\nObject\n\nGot:\n"+i(t));return t}return t(a)}))})}))}},{key:"_locateServiceClassConstructor",value:function(t){function e(t){if("function"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nFunction\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));var n=void 0,r=void 0;for(n in this._classConstructorLocators)if(this._classConstructorLocators.hasOwnProperty(n)&&(r=this._classConstructorLocators[n](t),void 0!==r))return e(r);throw w.CannotLocateServiceClassConstructorError.createError(t)}},{key:"_locateInstance",value:function(t){function e(t){if(!(t instanceof Object||null==t))throw new TypeError("Function return value violates contract.\n\nExpected:\nObject | void\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));var n=void 0,r=void 0;for(n in this._instanceLocators)if(this._instanceLocators.hasOwnProperty(n)&&(r=this._instanceLocators[n](t),void 0!==r))return e(r)}},{key:"_resolveArgs",value:function(e,n){var r=this;if(!E(e))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n'+i(e));if(!O(n))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(n));var o=[];return new Promise(function(i,u){var a=void 0,c=void 0;for(a in e)if(e.hasOwnProperty(a))if(c=e[a],c instanceof d.default){var f=c.id;o.push(r._doGetService(f,t._deepCopyLoading(n)))}else{if(!(c instanceof g.default))return u(w.UnsupportedArgumentTypeError.createError(c));o.push(r.getParameter(c.id))}return i(Promise.all(o))})}},{key:"_doGetService",value:function(t,e){function n(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!O(e))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(e));if(void 0!==e.obj[t]){var r=[].concat(e.arr).concat([t]);return n(Promise.reject(w.CircularDependencyError.createError(r)))}if(!this.hasInstance(t)){if(!this.hasDefinition(t)){var o=this._locateInstance(t);return n(void 0!==o?Promise.resolve(o).then(function(e){return void 0===e?Promise.reject(w.UndefinedServiceDefinitionAndInstanceError.createError(t)):Promise.resolve(e)}):Promise.reject(w.UndefinedServiceDefinitionAndInstanceError.createError(t)))}e.obj[t]=!0,e.arr.push(t);try{var u=this._instantiate(t,this.getDefinition(t),e);this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[t]=!0,this._servicesByIdentifier[t]=u}catch(t){return n(Promise.reject(t))}}return n(Promise.resolve(this._servicesByIdentifier[t]))}}],[{key:"_deepCopyLoading",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e={obj:{},arr:[].concat(t.arr)};for(var n in t.obj)t.obj.hasOwnProperty(n)&&(e.obj[n]=t.obj[n]);return e}}]),t}();e.default=A},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":u(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":u(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(3),f=r(c),s=n(4),l=s.InjectableArguments,p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(o(this,t),null!=e&&!l(e))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+i(e));this._methodCalls=[],this._args=e}return a(t,[{key:"methodCalls",set:function(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof f.default}))throw new TypeError('Value of argument "methodCalls" violates contract.\n\nExpected:\nArray<MethodCall>\n\nGot:\n'+i(t));this._methodCalls=t},get:function(){function t(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof f.default}))throw new TypeError("Function return value violates contract.\n\nExpected:\nArray<MethodCall>\n\nGot:\n"+i(t));return t}return t(this._methodCalls)}},{key:"args",get:function(){function t(t){if(!l(t))throw new TypeError("Function return value violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n"+i(t));return t}return t(this._args)}}]),t}();e.default=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":i(t);if(!Array.isArray(t)){var u=Object.keys(t);if(!u.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=u.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return u.length>=r&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":i(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),c=a.InjectableArguments,f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(this,t),"string"!=typeof e)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(e));if(null!=n&&!c(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+o(n));this._name=e,this._args=n}return u(t,[{key:"name",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+o(t));return t}return t(this._name)}},{key:"args",get:function(){function t(t){if(!c(t))throw new TypeError("Function return value violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n"+o(t));return t}return t(this._args)}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.InjectableArguments=void 0;var o=n(5),i=r(o),u=n(6),a=r(u);e.InjectableArguments=function(){function t(t){return Array.isArray(t)&&t.every(function(t){return t instanceof i.default||t instanceof a.default})}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var n=4,i=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":o(t);if(!Array.isArray(t)){var u=Object.keys(t);if(!u.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=u.slice(0,i).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(t[n],e)+";"}).join("\n  "+a);return u.length>=i&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=r(t[0],e);return t.every(function(t){return r(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,i).map(function(t){return r(t,e)}).join(", ")+(t.length>=i?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":o(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e){if(n(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(e));this._id=e}return i(t,[{key:"id",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+r(t));return t}return t(this._id)}}]),t}();e.default=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var n=4,i=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":o(t);if(!Array.isArray(t)){var u=Object.keys(t);if(!u.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=u.slice(0,i).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(t[n],e)+";"}).join("\n  "+a);return u.length>=i&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=r(t[0],e);return t.every(function(t){return r(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,i).map(function(t){return r(t,e)}).join(", ")+(t.length>=i?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":o(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e){if(n(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(e));this._id=e}return i(t,[{key:"id",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+r(t));return t}return t(this._id)}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),p=n(4),h=p.InjectableArguments,y=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o(this,e),"string"!=typeof t)throw new TypeError('Value of argument "classConstructorIdentifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if(null!=n&&!h(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+a(n));var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r._classConstructorIdentifier=t,r}return u(e,t),f(e,[{key:"classConstructorIdentifier",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+a(t));return t}return t(this._classConstructorIdentifier)}}]),e}(l.default);e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),p=n(4),h=p.InjectableArguments,y=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o(this,e),"function"!=typeof t)throw new TypeError('Value of argument "factory" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+a(t));if(null!=n&&!h(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+a(n));var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r._factory=t,r}return u(e,t),f(e,[{key:"factory",get:function(){function t(t){if("function"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nFunction\n\nGot:\n"+a(t));return t}return t(this._factory)}}]),e}(l.default);e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(10),i=r(o),u=n(43),a=r(u),c=n(11),f=r(c),s=n(44),l=r(s),p=n(45),h=r(p),y=n(46),d=r(y),v=n(47),g=r(v),b=n(48),m=r(b),w=n(49),_=r(w),E=n(50),j=r(E);t.exports={CannotLocateServiceClassConstructorError:i.default,CircularDependencyError:a.default,DislError:f.default,FactoryMethodReturnsNothingError:l.default,MethodDoesNotExistError:h.default,ServiceDefinitionAlreadyUsedError:d.default,UndefinedParameterError:g.default,UndefinedServiceDefinitionAndInstanceError:m.default,UndefinedServiceDefinitionError:_.default,UnsupportedArgumentTypeError:j.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){
return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "className" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({className:t},'Cannot locate service class constructor for class "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),c=r(a),f=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),e}(c.default);e.default=f},function(t,e,n){function r(t){var e,n,r,o,i;if(c.object(t,"args"),c.bool(t.strict,"args.strict"),c.array(t.argv,"args.argv"),e=t.argv,0===e.length)n={},r=[];else if(l(e[0]))n={cause:e[0]},r=e.slice(1);else if("object"==typeof e[0]){n={};for(i in e[0])n[i]=e[0][i];r=e.slice(1)}else c.string(e[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),n={},r=e;return c.object(n),n.strict||t.strict||(r=r.map(function(t){return null===t?"null":void 0===t?"undefined":t})),o=0===r.length?"":p.apply(null,r),{options:n,shortmessage:o}}function o(){var t,e,n,i,u,a,f;if(t=Array.prototype.slice.call(arguments,0),!(this instanceof o))return e=Object.create(o.prototype),o.apply(e,arguments),e;if(n=r({argv:t,strict:!1}),n.options.name&&(c.string(n.options.name,'error\'s "name" must be a string'),this.name=n.options.name),this.jse_shortmsg=n.shortmessage,a=n.shortmessage,i=n.options.cause,i&&(c.ok(l(i),"cause is not an Error"),this.jse_cause=i,n.options.skipCauseMessage||(a+=": "+i.message)),this.jse_info={},n.options.info)for(f in n.options.info)this.jse_info[f]=n.options.info[f];return this.message=a,Error.call(this,a),Error.captureStackTrace&&(u=n.options.constructorOpt||this.constructor,Error.captureStackTrace(this,u)),this}function i(){var t,e,n,u;return t=Array.prototype.slice.call(arguments,0),this instanceof i?(n=r({argv:t,strict:!0}),u=n.options,o.call(this,u,"%s",n.shortmessage),this):(e=Object.create(i.prototype),i.apply(e,arguments),e)}function u(t){c.array(t,"list of errors"),c.ok(t.length>0,"must be at least one error"),this.ase_errors=t,o.call(this,{cause:t[0]},"first of %d error%s",t.length,1==t.length?"":"s")}function a(){var t,e,n,i;return t=Array.prototype.slice.call(arguments,0),this instanceof a?(n=r({argv:t,strict:!1}),i=n.options,i.skipCauseMessage=!0,o.call(this,i,"%s",n.shortmessage),this):(e=Object.create(a.prototype),a.apply(e,t),e)}var c=n(13),f=n(20),s=n(41),l=n(42).isError,p=s.sprintf;t.exports=o,o.VError=o,o.SError=i,o.WError=a,o.MultiError=u,f.inherits(o,Error),o.prototype.name="VError",o.prototype.toString=function(){var t=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t+=": "+this.message),t},o.prototype.cause=function(){var t=o.cause(this);return null===t?void 0:t},o.cause=function(t){return c.ok(l(t),"err must be an Error"),l(t.jse_cause)?t.jse_cause:null},o.info=function(t){var e,n,r;if(c.ok(l(t),"err must be an Error"),n=o.cause(t),e=null!==n?o.info(n):{},"object"==typeof t.jse_info&&null!==t.jse_info)for(r in t.jse_info)e[r]=t.jse_info[r];return e},o.findCauseByName=function(t,e){var n;for(c.ok(l(t),"err must be an Error"),c.string(e),c.ok(e.length>0,"name cannot be empty"),n=t;null!==n;n=o.cause(n))if(c.ok(l(n)),n.name==e)return n;return null},o.fullStack=function(t){c.ok(l(t),"err must be an Error");var e=o.cause(t);return e?t.stack+"\ncaused by: "+o.fullStack(e):t.stack},f.inherits(i,o),f.inherits(u,o),u.prototype.name="MultiError",u.prototype.errors=function(){return this.ase_errors.slice(0)},f.inherits(a,o),a.prototype.name="WError",a.prototype.toString=function(){var t=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(t+="; caused by "+this.jse_cause.toString()),t},a.prototype.cause=function(t){return l(t)&&(this.jse_cause=t),this.jse_cause}},function(t,e,n){(function(e,r){function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function i(t,e,n,r,o){throw new f.AssertionError({message:l.format("%s (%s) is required",t,e),actual:void 0===o?typeof r:o(r),expected:e,operator:n||"===",stackStartFunction:i.caller})}function u(t){return Object.prototype.toString.call(t).slice(8,-1)}function a(){}function c(t){var e,n=Object.keys(h);return e=r.env.NODE_NDEBUG?a:function(t,e){t||i(e,"true",t)},n.forEach(function(n){if(t)return void(e[n]=a);var r=h[n];e[n]=function(t,e){r.check(t)||i(e,n,r.operator,t,r.actual)}}),n.forEach(function(n){var r="optional"+o(n);if(t)return void(e[r]=a);var u=h[n];e[r]=function(t,e){void 0!==t&&null!==t&&(u.check(t)||i(e,n,u.operator,t,u.actual))}}),n.forEach(function(n){var r="arrayOf"+o(n);if(t)return void(e[r]=a);var u=h[n],c="["+n+"]";e[r]=function(t,e){Array.isArray(t)||i(e,c,u.operator,t,u.actual);var n;for(n=0;n<t.length;n++)u.check(t[n])||i(e,c,u.operator,t,u.actual)}}),n.forEach(function(n){var r="optionalArrayOf"+o(n);if(t)return void(e[r]=a);var u=h[n],c="["+n+"]";e[r]=function(t,e){if(void 0!==t&&null!==t){Array.isArray(t)||i(e,c,u.operator,t,u.actual);var n;for(n=0;n<t.length;n++)u.check(t[n])||i(e,c,u.operator,t,u.actual)}}}),Object.keys(f).forEach(function(n){return"AssertionError"===n?void(e[n]=f[n]):t?void(e[n]=a):void(e[n]=f[n])}),e._setExports=c,e}var f=n(19),s=n(23).Stream,l=n(20),p=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,h={bool:{check:function(t){return"boolean"==typeof t}},func:{check:function(t){return"function"==typeof t}},string:{check:function(t){return"string"==typeof t}},object:{check:function(t){return"object"==typeof t&&null!==t}},number:{check:function(t){return"number"==typeof t&&!isNaN(t)}},finite:{check:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}},buffer:{check:function(t){return e.isBuffer(t)},operator:"Buffer.isBuffer"},array:{check:function(t){return Array.isArray(t)},operator:"Array.isArray"},stream:{check:function(t){return t instanceof s},operator:"instanceof",actual:u},date:{check:function(t){return t instanceof Date},operator:"instanceof",actual:u},regexp:{check:function(t){return t instanceof RegExp},operator:"instanceof",actual:u},uuid:{check:function(t){return"string"==typeof t&&p.test(t)},operator:"isUUID"}};t.exports=c(r.env.NODE_NDEBUG)}).call(e,n(14).Buffer,n(18))},function(t,e,n){(function(t,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function o(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,n){if(i()<n)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n),e.__proto__=t.prototype):(null===e&&(e=new t(n)),e.length=n),e}function t(e,n,r){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,n,r);if("number"==typeof e){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return s(this,e)}return a(this,e,n,r)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,n,r):"string"==typeof e?l(t,e,n):y(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function s(e,n){if(c(n),e=u(e,n<0?0:0|d(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)e[r]=0;return e}function l(e,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|g(n,r);e=u(e,o);var i=e.write(n,r);return i!==o&&(e=e.slice(0,i)),e}function p(t,e){var n=e.length<0?0:0|d(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(e,n,r,o){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===o?new Uint8Array(n):void 0===o?new Uint8Array(n,r):new Uint8Array(n,r,o),t.TYPED_ARRAY_SUPPORT?(e=n,e.__proto__=t.prototype):e=p(e,n),e}function y(e,n){if(t.isBuffer(n)){var r=0|d(n.length);return e=u(e,r),0===e.length?e:(n.copy(e,0,0,r),e)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||H(n.length)?u(e,0):p(e,n);if("Buffer"===n.type&&Q(n.data))return p(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(e){return+e!=e&&(e=0),t.alloc(+e)}function g(e,n){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(o)return z(e).length;n=(""+n).toLowerCase(),o=!0}}function b(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function w(e,n,r,o,i){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=t.from(n,o)),t.isBuffer(n))return 0===n.length?-1:_(e,n,r,o,i);if("number"==typeof n)return n&=255,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):_(e,[n],r,o,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,o){function i(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}var u=1,a=t.length,c=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;u=2,a/=2,c/=2,n/=2}var f;if(o){var s=-1;for(f=n;f<a;f++)if(i(t,f)===i(e,s===-1?0:f-s)){if(s===-1&&(s=f),f-s+1===c)return s*u}else s!==-1&&(f-=f-s),s=-1}else for(n+c>a&&(n=a-c),f=n;f>=0;f--){for(var l=!0,p=0;p<c;p++)if(i(t,f+p)!==i(e,p)){l=!1;break}if(l)return f}return-1}function E(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var u=0;u<r;++u){var a=parseInt(e.substr(2*u,2),16);if(isNaN(a))return u;t[n+u]=a}return u}function j(t,e,n,r){return J(z(e,t.length-n),t,n,r)}function O(t,e,n,r){return J(Z(e),t,n,r)}function S(t,e,n,r){return O(t,e,n,r)}function A(t,e,n,r){return J(q(e),t,n,r)}function T(t,e,n,r){return J(W(e,t.length-n),t,n,r)}function x(t,e,n){return 0===e&&n===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],u=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c,f,s,l;switch(a){case 1:i<128&&(u=i);break;case 2:c=t[o+1],128===(192&c)&&(l=(31&i)<<6|63&c,l>127&&(u=l));break;case 3:c=t[o+1],f=t[o+2],128===(192&c)&&128===(192&f)&&(l=(15&i)<<12|(63&c)<<6|63&f,l>2047&&(l<55296||l>57343)&&(u=l));break;case 4:c=t[o+1],f=t[o+2],s=t[o+3],128===(192&c)&&128===(192&f)&&128===(192&s)&&(l=(15&i)<<18|(63&c)<<12|(63&f)<<6|63&s,l>65535&&l<1114112&&(u=l))}}null===u?(u=65533,a=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=a}return P(r)}function P(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=Y(t[i]);return o}function B(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function L(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,n,r,o,i,u){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<u)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function G(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return o||G(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||G(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,r,52,8),n+8}function V(t){if(t=$(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function $(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],u=0;u<r;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(u+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Z(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,r,o,i=[],u=0;u<t.length&&!((e-=2)<0);++u)n=t.charCodeAt(u),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function q(t){return X.toByteArray(V(t))}function J(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function H(t){return t!==t}var X=n(15),K=n(16),Q=n(17);e.Buffer=t,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),e.kMaxLength=i(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,n){return a(null,t,e,n)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,n){return f(null,t,e,n)},t.allocUnsafe=function(t){return s(null,t)},t.allocUnsafeSlow=function(t){return s(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,i=0,u=Math.min(r,o);i<u;++i)if(e[i]!==n[i]){r=e[i],o=n[i];break}return r<o?-1:o<r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var o=t.allocUnsafe(n),i=0;for(r=0;r<e.length;++r){var u=e[r];if(!t.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(o,i),i+=u.length}return o},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,n,r,o,i){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),n<0||r>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&n>=r)return 0;if(o>=i)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,o>>>=0,i>>>=0,this===e)return 0;for(var u=i-o,a=r-n,c=Math.min(u,a),f=this.slice(o,i),s=e.slice(n,r),l=0;l<c;++l)if(f[l]!==s[l]){u=f[l],a=s[l];break}return u<a?-1:a<u?1:0},t.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},t.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},t.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return j(this,t,e,n);case"ascii":return O(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var o;if(t.TYPED_ARRAY_SUPPORT)o=this.subarray(e,n),o.__proto__=t.prototype;else{var i=n-e;o=new t(i,void 0);for(var u=0;u<i;++u)o[u]=this[u+e]}return o},t.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},t.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},t.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},t.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),K.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),K.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),K.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),K.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;I(this,t,e,n,o,0)}var i=1,u=0;for(this[e]=255&t;++u<n&&(i*=256);)this[e+u]=t/i&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;I(this,t,e,n,o,0)}var i=n-1,u=1;for(this[e+i]=255&t;--i>=0&&(u*=256);)this[e+i]=t/u&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):U(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):U(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);I(this,t,e,n,o-1,-o)}var i=0,u=1,a=0;for(this[e]=255&t;++i<n&&(u*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/u>>0)-a&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);I(this,t,e,n,o-1,-o)}var i=n-1,u=1,a=0;for(this[e+i]=255&t;--i>=0&&(u*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/u>>0)-a&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):U(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):U(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i,u=o-r;if(this===e&&r<n&&n<o)for(i=u-1;i>=0;--i)e[i+n]=this[i+r];else if(u<1e3||!t.TYPED_ARRAY_SUPPORT)for(i=0;i<u;++i)e[i+n]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+u),n);return u},t.prototype.fill=function(e,n,r,o){if("string"==typeof e){if("string"==typeof n?(o=n,n=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var u;if("number"==typeof e)for(u=n;u<r;++u)this[u]=e;else{var a=t.isBuffer(e)?e:z(new t(e,o).toString()),c=a.length;for(u=0;u<r-n;++u)this[u+n]=a[u%c]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,n(14).Buffer,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function o(t){var e,r,o,i,u,a,c=t.length;u=n(t),a=new s(3*c/4-u),o=u>0?c-4:c;var l=0;for(e=0,r=0;e<o;e+=4,r+=3)i=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===u?(i=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,a[l++]=255&i):1===u&&(i=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}function i(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function u(t,e,n){for(var r,o=[],u=e;u<n;u+=3)r=(t[u]<<16)+(t[u+1]<<8)+t[u+2],o.push(i(r));return o.join("")}function a(t){for(var e,n=t.length,r=n%3,o="",i=[],a=16383,f=0,s=n-r;f<s;f+=a)i.push(u(t,f,f+a>s?s:f+a));return 1===r?(e=t[n-1],o+=c[e>>2],o+=c[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=c[e>>10],o+=c[e>>4&63],o+=c[e<<2&63],o+="="),i.push(o),i.join("")}e.byteLength=r,e.toByteArray=o,e.fromByteArray=a;for(var c=[],f=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=l.length;p<h;++p)c[p]=l[p],f[l.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,u,a=8*o-r-1,c=(1<<a)-1,f=c>>1,s=-7,l=n?o-1:0,p=n?-1:1,h=t[e+l];for(l+=p,i=h&(1<<-s)-1,h>>=-s,s+=a;s>0;i=256*i+t[e+l],l+=p,s-=8);for(u=i&(1<<-s)-1,i>>=-s,s+=r;s>0;u=256*u+t[e+l],l+=p,s-=8);if(0===i)i=1-f;else{if(i===c)return u?NaN:(h?-1:1)*(1/0);u+=Math.pow(2,r),i-=f}return(h?-1:1)*u*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var u,a,c,f=8*i-o-1,s=(1<<f)-1,l=s>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=s):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),e+=u+l>=1?p/c:p*Math.pow(2,1-l),e*c>=2&&(u++,c/=2),u+l>=s?(a=0,u=s):u+l>=1?(a=(e*c-1)*Math.pow(2,o),u+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),u=0));o>=8;t[n+h]=255&a,h+=y,a/=256,o-=8);for(u=u<<o|a,f+=o;f>0;t[n+h]=255&u,h+=y,u/=256,f-=8);t[n+h-y]|=128*d}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(s===setTimeout)return setTimeout(t,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function u(){d&&h&&(d=!1,h.length?y=h.concat(y):v=-1,y.length&&a())}function a(){if(!d){var t=o(u);d=!0;for(var e=y.length;e;){for(h=y,y=[];++v<e;)h&&h[v].run();v=-1,e=y.length}h=null,d=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function f(){}var s,l,p=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(t){s=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var h,y=[],d=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.push(new c(t,e)),1!==y.length||d||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){(function(e){"use strict";/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function i(t){return Object.prototype.toString.call(t)}function u(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function a(t){if(w.isFunction(t)){if(j)return t.name;var e=t.toString(),n=e.match(S);return n&&n[1]}}function c(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function f(t){if(j||!w.isFunction(t))return w.inspect(t);var e=a(t),n=e?": "+e:"";return"[Function"+n+"]"}function s(t){return c(f(t.actual),128)+" "+t.operator+" "+c(f(t.expected),128)}function l(t,e,n,r,o){throw new O.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function p(t,e){t||l(t,!0,e,"==",O.ok)}function h(t,e,n,a){if(t===e)return!0;if(o(t)&&o(e))return 0===r(t,e);if(w.isDate(t)&&w.isDate(e))return t.getTime()===e.getTime();if(w.isRegExp(t)&&w.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&i(t)===i(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;a=a||{actual:[],expected:[]};var c=a.actual.indexOf(t);return c!==-1&&c===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),d(t,e,n,a))}return n?t===e:t==e}function y(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function d(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(w.isPrimitive(t)||w.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=y(t),i=y(e);if(o&&!i||!o&&i)return!1;if(o)return t=E.call(t),e=E.call(e),h(t,e,n);var u,a,c=A(t),f=A(e);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),a=c.length-1;a>=0;a--)if(c[a]!==f[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!h(t[u],e[u],n,r))return!1;return!0}function v(t,e,n){h(t,e,!0)&&l(t,e,n,"notDeepStrictEqual",v)}function g(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&e.call({},t)===!0}function b(t){var e;try{t()}catch(t){e=t}return e}function m(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=b(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&l(o,n,"Missing expected exception"+r);var i="string"==typeof r,u=!t&&w.isError(o),a=!t&&o&&!n;if((u&&i&&g(o,n)||a)&&l(o,n,"Got unwanted exception"+r),t&&o&&n&&!g(o,n)||!t&&o)throw o}var w=n(20),_=Object.prototype.hasOwnProperty,E=Array.prototype.slice,j=function(){return"foo"===function(){}.name}(),O=t.exports=p,S=/\s*function\s+([^\(\s]*)\s*/;O.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var e=t.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,o=a(e),i=r.indexOf("\n"+o);if(i>=0){var u=r.indexOf("\n",i+1);r=r.substring(u+1)}this.stack=r}}},w.inherits(O.AssertionError,Error),O.fail=l,O.ok=p,O.equal=function(t,e,n){t!=e&&l(t,e,n,"==",O.equal)},O.notEqual=function(t,e,n){t==e&&l(t,e,n,"!=",O.notEqual)},O.deepEqual=function(t,e,n){h(t,e,!1)||l(t,e,n,"deepEqual",O.deepEqual)},O.deepStrictEqual=function(t,e,n){h(t,e,!0)||l(t,e,n,"deepStrictEqual",O.deepStrictEqual)},O.notDeepEqual=function(t,e,n){h(t,e,!1)&&l(t,e,n,"notDeepEqual",O.notDeepEqual)},O.notDeepStrictEqual=v,O.strictEqual=function(t,e,n){t!==e&&l(t,e,n,"===",O.strictEqual)},O.notStrictEqual=function(t,e,n){t===e&&l(t,e,n,"!==",O.notStrictEqual)},O.throws=function(t,e,n){m(!0,t,e,n)},O.doesNotThrow=function(t,e,n){m(!1,t,e,n)},O.ifError=function(t){if(t)throw t};var A=Object.keys||function(t){var e=[];for(var n in t)_.call(t,n)&&e.push(n);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t,r){function o(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),c(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function u(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,n,r){if(t.customInspect&&n&&A(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return m(o)||(o=c(t,o,r)),o}var i=f(t,n);if(i)return i;var u=Object.keys(n),d=a(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(n)),S(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return s(n);if(0===u.length){if(A(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return s(n)}var g="",b=!1,w=["{","}"];if(y(n)&&(b=!0,w=["[","]"]),A(n)){var _=n.name?": "+n.name:"";g=" [Function"+_+"]"}if(E(n)&&(g=" "+RegExp.prototype.toString.call(n)),O(n)&&(g=" "+Date.prototype.toUTCString.call(n)),S(n)&&(g=" "+s(n)),0===u.length&&(!b||0==n.length))return w[0]+g+w[1];if(r<0)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var j;return j=b?l(t,n,r,d,u):u.map(function(e){return p(t,n,r,d,e,b)}),t.seen.pop(),h(j,g,w)}function f(t,e){if(_(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return b(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,o){for(var i=[],u=0,a=e.length;u<a;++u)R(e,String(u))?i.push(p(t,e,n,r,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(t,e,n,r,o,!0))}),i}function p(t,e,n,r,o,i){var u,a,f;if(f=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},f.get?a=f.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):f.set&&(a=t.stylize("[Setter]","special")),R(r,o)||(u="["+o+"]"),a||(t.seen.indexOf(f.value)<0?(a=v(n)?c(t,f.value,null):c(t,f.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),_(u)){if(i&&o.match(/^\d+$/))return a;u=JSON.stringify(""+o),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function h(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function y(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function E(t){return j(t)&&"[object RegExp]"===x(t)}function j(t){return"object"==typeof t&&null!==t}function O(t){return j(t)&&"[object Date]"===x(t)}function S(t){return j(t)&&("[object Error]"===x(t)||t instanceof Error)}function A(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function x(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var M=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,u=String(t).replace(M,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),a=r[n];n<i;a=r[++n])u+=v(a)||!j(a)?" "+a:" "+o(a);return u},e.deprecate=function(n,o){function i(){if(!u){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),u=!0}return n.apply(this,arguments)}if(_(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var u=!1;return i};var C,B={};e.debuglog=function(t){if(_(C)&&(C=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(C)){var n=r.pid;B[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else B[t]=function(){};return B[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=b,e.isString=m,e.isSymbol=w,e.isUndefined=_,e.isRegExp=E,e.isObject=j,e.isDate=O,e.isError=S,e.isFunction=A,e.isPrimitive=T,e.isBuffer=n(21);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(22),e._extend=function(t,e){if(!e||!j(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(18))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(){o.call(this)}t.exports=r;var o=n(24).EventEmitter,i=n(25);i(r,o),r.Readable=n(26),r.Writable=n(37),r.Duplex=n(38),r.Transform=n(39),r.PassThrough=n(40),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&f.pause&&f.pause()}function r(){f.readable&&f.resume&&f.resume()}function i(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(c(),0===o.listenerCount(this,"error"))throw t}function c(){f.removeListener("data",n),t.removeListener("drain",r),f.removeListener("end",i),f.removeListener("close",u),f.removeListener("error",a),t.removeListener("error",a),f.removeListener("end",c),f.removeListener("close",c),t.removeListener("close",c)}var f=this;f.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(f.on("end",i),f.on("close",u));var s=!1;return f.on("error",a),t.on("error",a),f.on("end",c),f.on("close",c),t.on("close",c),t.emit("pipe",f),t}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,a,c,f;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}if(n=this._events[t],u(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),f=n.slice(),o=f.length,c=0;c<o;c++)f[c].apply(this,a);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,u,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],u=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=u;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(r){e=t.exports=n(27),e.Stream=n(23),e.Readable=e,e.Writable=n(33),e.Duplex=n(32),e.Transform=n(35),e.PassThrough=n(36),r.browser||"disable"!==r.env.READABLE_STREAM||(t.exports=n(23))}).call(e,n(18))},function(t,e,n){(function(e){function r(t,e){var r=n(32);t=t||{};var o=t.highWaterMark,i=t.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(x||(x=n(34).StringDecoder),this.decoder=new x(t.encoding),this.encoding=t.encoding)}function o(t){n(32);return this instanceof o?(this._readableState=new r(t,this),this.readable=!0,void A.call(this)):new o(t)}function i(t,e,n,r,o){var i=f(e,n);if(i)t.emit("error",i);else if(T.isNullOrUndefined(n))e.reading=!1,e.ended||s(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&o){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||o||r||(n=e.decoder.write(n)),o||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),h(t,e);else o||(e.reading=!1);return u(e)}function u(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=P)t=P;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||T.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function f(t,e){var n=null;return T.isBuffer(e)||T.isString(e)||T.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function s(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}function l(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(k("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?e.nextTick(function(){p(t)}):p(t))}function p(t){k("emit readable"),t.emit("readable"),b(t)}function h(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){y(t,n)}))}function y(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(k("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function d(t){return function(){var e=t._readableState;k("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&S.listenerCount(t,"data")&&(e.flowing=!0,b(t))}}function v(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(function(){g(t,n)}))}function g(t,e){e.resumeScheduled=!1,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;if(k("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function m(t,e){var n,r=e.buffer,o=e.length,i=!!e.decoder,u=!!e.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(u)n=r.shift();else if(!t||t>=o)n=i?r.join(""):O.concat(r,o),r.length=0;else if(t<r[0].length){var a=r[0];n=a.slice(0,t),r[0]=a.slice(t)}else if(t===r[0].length)n=r.shift();else{n=i?"":new O(t);for(var c=0,f=0,s=r.length;f<s&&c<t;f++){var a=r[0],l=Math.min(t-c,a.length);i?n+=a.slice(0,l):a.copy(n,c,0,l),l<a.length?r[0]=a.slice(l):r.shift(),c+=l}}return n}function w(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function _(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function E(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}t.exports=o;var j=n(28),O=n(14).Buffer;o.ReadableState=r;var S=n(24).EventEmitter;S.listenerCount||(S.listenerCount=function(t,e){return t.listeners(e).length});var A=n(23),T=n(29);T.inherits=n(30);var x,k=n(31);k=k&&k.debuglog?k.debuglog("stream"):function(){},T.inherits(o,A),o.prototype.push=function(t,e){var n=this._readableState;return T.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new O(t,e),e="")),i(this,n,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return i(this,e,t,"",!0)},o.prototype.setEncoding=function(t){return x||(x=n(34).StringDecoder),this._readableState.decoder=new x(t),this._readableState.encoding=t,this};var P=8388608;o.prototype.read=function(t){k("read",t);var e=this._readableState,n=t;if((!T.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return k("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?w(this):l(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var r=e.needReadable;k("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,k("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,k("reading or ended",r)),r&&(k("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=c(n,e));var o;return o=t>0?m(t,e):null,T.isNull(o)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&w(this),T.isNull(o)||this.emit("data",o),o},o.prototype._read=function(t){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(t,n){function r(t){k("onunpipe"),t===l&&i()}function o(){k("onend"),t.end()}function i(){k("cleanup"),t.removeListener("close",c),t.removeListener("finish",f),t.removeListener("drain",v),t.removeListener("error",a),t.removeListener("unpipe",r),l.removeListener("end",o),l.removeListener("end",i),l.removeListener("data",u),!p.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function u(e){k("ondata");var n=t.write(e);!1===n&&(k("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(e){k("onerror",e),s(),t.removeListener("error",a),0===S.listenerCount(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",f),s()}function f(){k("onfinish"),t.removeListener("close",c),s()}function s(){k("unpipe"),l.unpipe(t)}var l=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,k("pipe count=%d opts=%j",p.pipesCount,n);var h=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,y=h?o:i;p.endEmitted?e.nextTick(y):l.once("end",y),t.on("unpipe",r);var v=d(l);return t.on("drain",v),l.on("data",u),t._events&&t._events.error?j(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",c),t.once("finish",f),t.emit("pipe",l),p.flowing||(k("pipe resume"),l.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}var o=E(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,n){var r=A.prototype.on.call(this,t,n);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var o=this._readableState;if(!o.readableListening)if(o.readableListening=!0,o.emittedReadable=!1,o.needReadable=!0,o.reading)o.length&&l(this,o);else{var i=this;e.nextTick(function(){k("readable nexttick read 0"),i.read(0)})}}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(k("resume"),t.flowing=!0,t.reading||(k("resume read 0"),this.read(0)),v(this,t)),this},o.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(k("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(o){if(k("wrapped data"),e.decoder&&(o=e.decoder.write(o)),o&&(e.objectMode||o.length)){var i=r.push(o);i||(n=!0,t.pause())}});for(var o in t)T.isFunction(t[o])&&T.isUndefined(this[o])&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return _(i,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){k("wrapped _read",e),n&&(n=!1,t.resume())},r},o._fromList=m}).call(e,n(18))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function r(t){return"boolean"==typeof t}function o(t){return null===t}function i(t){return null==t}function u(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function f(t){return void 0===t}function s(t){return"[object RegExp]"===v(t)}function l(t){return"object"==typeof t&&null!==t}function p(t){return"[object Date]"===v(t)}function h(t){return"[object Error]"===v(t)||t instanceof Error}function y(t){return"function"==typeof t}function d(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=o,e.isNullOrUndefined=i,e.isNumber=u,e.isString=a,e.isSymbol=c,e.isUndefined=f,e.isRegExp=s,e.isObject=l,e.isDate=p,e.isError=h,e.isFunction=y,e.isPrimitive=d,e.isBuffer=t.isBuffer}).call(e,n(14).Buffer)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){},function(t,e,n){(function(e){function r(t){return this instanceof r?(c.call(this,t),f.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new r(t)}function o(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function i(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}t.exports=r;var u=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=n(29);a.inherits=n(30);var c=n(27),f=n(33);a.inherits(r,c),i(u(f.prototype),function(t){r.prototype[t]||(r.prototype[t]=f.prototype[t])})}).call(e,n(18))},function(t,e,n){(function(e){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function o(t,e){var r=n(32);t=t||{};var o=t.highWaterMark,i=t.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.objectMode=!!t.objectMode,e instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var u=t.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){h(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function i(t){var e=n(32);return this instanceof i||this instanceof e?(this._writableState=new o(t,this),this.writable=!0,void j.call(this)):new i(t)}function u(t,n,r){var o=new Error("write after end");t.emit("error",o),e.nextTick(function(){r(o)})}function a(t,n,r,o){var i=!0;if(!(E.isBuffer(r)||E.isString(r)||E.isNullOrUndefined(r)||n.objectMode)){var u=new TypeError("Invalid non-string/buffer chunk");t.emit("error",u),e.nextTick(function(){o(u)}),i=!1}return i}function c(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&E.isString(e)&&(e=new _(e,n)),e}function f(t,e,n,o,i){n=c(e,n,o),E.isBuffer(n)&&(o="buffer");var u=e.objectMode?1:n.length;e.length+=u;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,o,i)):s(t,e,!1,u,n,o,i),a}function s(t,e,n,r,o,i,u){e.writelen=r,e.writecb=u,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function l(t,n,r,o,i){r?e.nextTick(function(){n.pendingcb--,i(o)}):(n.pendingcb--,i(o)),t._writableState.errorEmitted=!0,t.emit("error",o)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function h(t,n){var r=t._writableState,o=r.sync,i=r.writecb;if(p(r),n)l(t,r,o,n,i);else{var u=g(t,r);u||r.corked||r.bufferProcessing||!r.buffer.length||v(t,r),o?e.nextTick(function(){y(t,r,u,i)}):y(t,r,u,i)}}function y(t,e,n,r){n||d(t,e),e.pendingcb--,r(),m(t,e)}function d(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,s(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var o=e.buffer[r],i=o.chunk,u=o.encoding,a=o.callback,c=e.objectMode?1:i.length;if(s(t,e,!1,c,i,u,a),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function g(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function b(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function m(t,e){var n=g(t,e);return n&&(0===e.pendingcb?(b(t,e),e.finished=!0,t.emit("finish")):b(t,e)),n}function w(t,n,r){n.ending=!0,m(t,n),r&&(n.finished?e.nextTick(r):t.once("finish",r)),n.ended=!0}t.exports=i;var _=n(14).Buffer;i.WritableState=o;var E=n(29);E.inherits=n(30);var j=n(23);E.inherits(i,j),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(t,e,n){var r=this._writableState,o=!1;return E.isFunction(e)&&(n=e,e=null),E.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),E.isFunction(n)||(n=function(){}),r.ended?u(this,r,n):a(this,r,t,n)&&(r.pendingcb++,o=f(this,r,t,e,n)),o},i.prototype.cork=function(){var t=this._writableState;t.corked++},i.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||v(this,t))},i.prototype._write=function(t,e,n){n(new Error("not implemented"))},i.prototype._writev=null,i.prototype.end=function(t,e,n){var r=this._writableState;E.isFunction(t)?(n=t,t=null,e=null):E.isFunction(e)&&(n=e,e=null),E.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(e,n(18))},function(t,e,n){function r(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function o(t){return t.toString(this.encoding)}function i(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function u(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(14).Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;
break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=o)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var o=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,o),o-=this.charReceived),e+=t.toString(this.encoding,0,o);var o=e.length-1,r=e.charCodeAt(o);if(r>=55296&&r<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,o)}return e},f.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},f.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;e+=r.slice(0,n).toString(o)}return e}},function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(t,e,n){var r=t._transformState;r.transforming=!1;var o=r.writecb;if(!o)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,c.isNullOrUndefined(n)||t.push(n),o&&o(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);a.call(this,t),this._transformState=new r(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(t){u(e,t)}):u(e)})}function u(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=i;var a=n(32),c=n(29);c.inherits=n(30),c.inherits(i,a),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;c.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,n){function r(t){return this instanceof r?void o.call(this,t):new r(t)}t.exports=r;var o=n(35),i=n(29);i.inherits=n(30),i.inherits(r,o),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(33)},function(t,e,n){t.exports=n(32)},function(t,e,n){t.exports=n(35)},function(t,e,n){t.exports=n(36)},function(t,e,n){(function(t){function r(t){var e,n,r,o,i,s,l,p,h,y=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),d=new RegExp(y),v=Array.prototype.slice.call(arguments,1),g="",b=1;for(c.equal("string",typeof t);null!==(h=d.exec(t));)if(g+=h[1],t=t.substring(h[0].length),e=h[2]||"",n=h[3]||0,r=h[4]||"",o=h[6],i=!1,l=!1,s=" ","%"!=o){if(0===v.length)throw new Error("too few args to sprintf");if(p=v.shift(),b++,e.match(/[\' #]/))throw new Error("unsupported flags: "+e);if(r.length>0)throw new Error("non-zero precision not supported");switch(e.match(/-/)&&(i=!0),e.match(/0/)&&(s="0"),e.match(/\+/)&&(l=!0),o){case"s":if(void 0===p||null===p)throw new Error("argument "+b+": attempted to print undefined or null as a string");g+=u(s,n,i,p.toString());break;case"d":p=Math.floor(p);case"f":l=l&&p>0?"+":"",g+=l+u(s,n,i,p.toString());break;case"x":g+=u(s,n,i,p.toString(16));break;case"j":0===n&&(n=10),g+=f.inspect(p,!1,n);break;case"r":g+=a(p);break;default:throw new Error("unsupported conversion: "+o)}}else g+="%";return g+=t}function o(){var e=Array.prototype.slice.call(arguments);e.unshift(t.stdout),i.apply(null,e)}function i(t){var e=Array.prototype.slice.call(arguments,1);return t.write(r.apply(this,e))}function u(t,e,n,r){for(var o=r;o.length<e;)n?o+=t:o=t+o;return o}function a(t){var e;if(!(t instanceof Error))throw new Error(r("invalid type for %%r: %j",t));if(e="EXCEPTION: "+t.constructor.name+": "+t.stack,t.cause&&"function"==typeof t.cause){var n=t.cause();n&&(e+="\nCaused by: "+a(n))}return e}var c=n(19),f=n(20);e.sprintf=r,e.printf=o,e.fprintf=i}).call(e,n(18))},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function r(t){return"boolean"==typeof t}function o(t){return null===t}function i(t){return null==t}function u(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function f(t){return void 0===t}function s(t){return"[object RegExp]"===v(t)}function l(t){return"object"==typeof t&&null!==t}function p(t){return"[object Date]"===v(t)}function h(t){return"[object Error]"===v(t)||t instanceof Error}function y(t){return"function"==typeof t}function d(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=o,e.isNullOrUndefined=i,e.isNumber=u,e.isString=a,e.isSymbol=c,e.isUndefined=f,e.isRegExp=s,e.isObject=l,e.isDate=p,e.isError=h,e.isFunction=y,e.isPrimitive=d,e.isBuffer=t.isBuffer}).call(e,n(14).Buffer)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "services" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));var n=[].concat(t).reverse().join(" <- ");return new e({services:t},"Circular dependency found: %s",n)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Factory method for identifier "%s" returns nothing',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "methodName" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({methodName:t},'Method "%s" does not exist',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Service definition for "%s" has already been used to instantiate a service, refusing to modify it',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Undefined parameter for identifier "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Undefined service definition and instance for identifier "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Undefined service definition for identifier "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(11),s=r(f),l=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),c(e,null,[{key:"createError",value:function(t){return new e({arg:t},'Unsupported arg of type "%s"',"undefined"==typeof t?"undefined":a(t))}}]),e}(s.default);e.default=l}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9kaS1kZXYuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGExODJhMTg2OWJmM2JkMjBkYjM1Iiwid2VicGFjazovLy8uL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlZmluaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21ldGhvZC1jYWxsLmpzIiwid2VicGFjazovLy8uL3NyYy90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVmZXJlbmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXJhbWV0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzLWNvbnN0cnVjdG9yLWRlZmluaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZhY3RvcnktZGVmaW5pdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvY2Fubm90LWxvY2F0ZS1zZXJ2aWNlLWNsYXNzLWNvbnN0cnVjdG9yLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZGlzbC1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZlcnJvci9saWIvdmVycm9yLmpzIiwid2VicGFjazovLy8uL34vdmVycm9yL34vYXNzZXJ0LXBsdXMvYXNzZXJ0LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9iYXNlNjQtanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaWVlZTc1NC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9hc3NlcnQvYXNzZXJ0LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvdXRpbC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi91dGlsL3N1cHBvcnQvaXNCdWZmZXJCcm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3N0cmVhbS1icm93c2VyaWZ5L2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyZWFtLWJyb3dzZXJpZnkvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcmVhZGFibGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vfi9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9zdHJpbmdfZGVjb2Rlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2R1cGxleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZlcnJvci9+L2V4dHNwcmludGYvbGliL2V4dHNwcmludGYuanMiLCJ3ZWJwYWNrOi8vLy4vfi92ZXJyb3Ivfi9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy9jaXJjdWxhci1kZXBlbmRlbmN5LWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZmFjdG9yeS1tZXRob2QtcmV0dXJucy1ub3RoaW5nLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvbWV0aG9kLWRvZXMtbm90LWV4aXN0LWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvc2VydmljZS1kZWZpbml0aW9uLWFscmVhZHktdXNlZC1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1wYXJhbWV0ZXItZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy91bmRlZmluZWQtc2VydmljZS1kZWZpbml0aW9uLWFuZC1pbnN0YW5jZS1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1zZXJ2aWNlLWRlZmluaXRpb24tZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy91bnN1cHBvcnRlZC1hcmd1bWVudC10eXBlLWVycm9yLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwidGhpcyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2NvbnRhaW5lciIsIl9jb250YWluZXIyIiwiX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uIiwiX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uMiIsIl9mYWN0b3J5RGVmaW5pdGlvbiIsIl9mYWN0b3J5RGVmaW5pdGlvbjIiLCJfcmVmZXJlbmNlIiwiX3JlZmVyZW5jZTIiLCJfcGFyYW1ldGVyIiwiX3BhcmFtZXRlcjIiLCJfbWV0aG9kQ2FsbCIsIl9tZXRob2RDYWxsMiIsIl9lcnJvcnMiLCJfZXJyb3JzMiIsIkNvbnRhaW5lciIsIkNsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uIiwiRmFjdG9yeURlZmluaXRpb24iLCJSZWZlcmVuY2UiLCJQYXJhbWV0ZXIiLCJNZXRob2RDYWxsIiwiaGFzT3duUHJvcGVydHkiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2luc3BlY3QiLCJpbnB1dCIsImRlcHRoIiwibWF4RGVwdGgiLCJtYXhLZXlzIiwidW5kZWZpbmVkIiwiX3R5cGVvZiIsIkFycmF5IiwiaXNBcnJheSIsImtleXMiLCJPYmplY3QiLCJsZW5ndGgiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpbmRlbnQiLCJyZXBlYXQiLCJlbnRyaWVzIiwic2xpY2UiLCJtYXAiLCJrZXkiLCJ0ZXN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJfcmV0IiwidiIsImZpcnN0IiwiZXZlcnkiLCJpdGVtIiwidHJpbSIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJTeW1ib2wiLCJpdGVyYXRvciIsInByb3RvdHlwZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfZGVmaW5pdGlvbiIsIl9kZWZpbml0aW9uMiIsIl9pbmplY3RhYmxlQXJndW1lbnRzIiwiSW5qZWN0YWJsZUFyZ3VtZW50cyIsInNjYWxhciIsImhhc0luc3RhbmNlIiwiTG9hZGluZ09iamVjdCIsImFyciIsIkxvY2F0b3JDYWxsYmFjayIsIl9zZXJ2aWNlc0J5SWRlbnRpZmllciIsIl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXIiLCJfcGFyYW1ldGVyc0J5SWRlbnRpZmllciIsIl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXIiLCJfY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzIiwiX2luc3RhbmNlTG9jYXRvcnMiLCJfcmVmIiwiX2lkIiwiUHJvbWlzZSIsIl90aGlzIiwiX2xlbiIsImFyZ3VtZW50cyIsImlkZW50aWZpZXJzIiwiX2tleSIsInByb21pc2VzIiwiZm9yRWFjaCIsImlkZW50aWZpZXIiLCJwdXNoIiwiX2RvR2V0U2VydmljZSIsImFsbCIsIl9yZWYyIiwiX2lkMiIsIl9yZWYzIiwiX2lkMyIsImhhc0RlZmluaXRpb24iLCJfcmVmNCIsIl9pZDQiLCJfcmVmNSIsIl9pZDUiLCJfcmVmNiIsIl9pZDYiLCJkZWZpbml0aW9uIiwiVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciIsImNyZWF0ZUVycm9yIiwiX3JlZjciLCJfaWQ3IiwiU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yIiwiX3JlZjgiLCJfaWQ4IiwiVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IiLCJfcmVmOSIsIl9pZDkiLCJfcmVmMTAiLCJfaWQxMCIsImxvY2F0b3IiLCJfcmVmMTEiLCJfaWQxMSIsIl9yZWYxMiIsIl9pZDEyIiwibG9hZGluZyIsIl9yZWYxMyIsIl9pZDEzIiwiX3RoaXMyIiwiX3Jlc29sdmVBcmdzIiwiYXJncyIsInRoZW4iLCJfcmVmMTQiLCJfaWQxNCIsImNsYXNzQ29uc3RydWN0b3IiLCJfbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IiLCJjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciIsIkZ1bmN0aW9uIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwicmVqZWN0IiwiRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IiLCJyZXNvbHZlIiwiZ2V0TWV0aG9kQ2FsbCIsIl9yZWYxNiIsIl9pZDE2IiwibWV0aG9kQ2FsbHMiLCJtZXRob2RDYWxsc1Byb21pc2VzIiwibWV0aG9kQ2FsbCIsImNhbGxNZXRob2QiLCJtZXRob2RUb0NhbGwiLCJfcmVmMTUiLCJfaWQxNSIsIm1ldGhvZE5hbWUiLCJNZXRob2REb2VzTm90RXhpc3RFcnJvciIsIl9yZWYxNyIsIl9pZDE3IiwiX3JlZjE4IiwiX2lkMTgiLCJDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yIiwiX3JlZjE5IiwiX2lkMTkiLCJfdGhpczMiLCJhcmciLCJfZGVlcENvcHlMb2FkaW5nIiwiVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciIsImdldFBhcmFtZXRlciIsIl9yZWYyMSIsIl9pZDIxIiwic2VydmljZXMiLCJDaXJjdWxhckRlcGVuZGVuY3lFcnJvciIsInJlc3VsdCIsIl9sb2NhdGVJbnN0YW5jZSIsIlVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciIsInByb21pc2UiLCJfaW5zdGFudGlhdGUiLCJnZXREZWZpbml0aW9uIiwiZSIsIm5ld0xvYWRpbmciLCJEZWZpbml0aW9uIiwiX21ldGhvZENhbGxzIiwiX2FyZ3MiLCJzZXQiLCJnZXQiLCJfbmFtZSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfRGVmaW5pdGlvbiIsImdldFByb3RvdHlwZU9mIiwiX2NsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyIiwiX2ZhY3RvcnkiLCJfY2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciIsIl9jYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yMiIsIl9jaXJjdWxhckRlcGVuZGVuY3lFcnJvciIsIl9jaXJjdWxhckRlcGVuZGVuY3lFcnJvcjIiLCJfZGlzbEVycm9yIiwiX2Rpc2xFcnJvcjIiLCJfZmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IiLCJfZmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IyIiwiX21ldGhvZERvZXNOb3RFeGlzdEVycm9yIiwiX21ldGhvZERvZXNOb3RFeGlzdEVycm9yMiIsIl9zZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IiLCJfc2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yMiIsIl91bmRlZmluZWRQYXJhbWV0ZXJFcnJvciIsIl91bmRlZmluZWRQYXJhbWV0ZXJFcnJvcjIiLCJfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yIiwiX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcjIiLCJfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciIsIl91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yMiIsIl91bnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yIiwiX3Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IyIiwiRGlzbEVycm9yIiwiX0Rpc2xFcnJvciIsImNsYXNzTmFtZSIsIl92ZXJyb3IiLCJfdmVycm9yMiIsIl9WRXJyb3IiLCJwYXJzZUNvbnN0cnVjdG9yQXJndW1lbnRzIiwiYXJndiIsIm9wdGlvbnMiLCJzcHJpbnRmX2FyZ3MiLCJzaG9ydG1lc3NhZ2UiLCJrIiwibW9kX2Fzc2VydHBsdXMiLCJvYmplY3QiLCJib29sIiwic3RyaWN0IiwiYXJyYXkiLCJtb2RfaXNFcnJvciIsImNhdXNlIiwic3RyaW5nIiwic3ByaW50ZiIsIlZFcnJvciIsInBhcnNlZCIsImN0b3IiLCJtZXNzYWdlIiwianNlX3Nob3J0bXNnIiwib2siLCJqc2VfY2F1c2UiLCJza2lwQ2F1c2VNZXNzYWdlIiwianNlX2luZm8iLCJpbmZvIiwiRXJyb3IiLCJjYXB0dXJlU3RhY2tUcmFjZSIsImNvbnN0cnVjdG9yT3B0IiwiU0Vycm9yIiwiTXVsdGlFcnJvciIsImVycm9ycyIsImFzZV9lcnJvcnMiLCJXRXJyb3IiLCJtb2RfdXRpbCIsIm1vZF9leHRzcHJpbnRmIiwiaXNFcnJvciIsImluaGVyaXRzIiwidG9TdHJpbmciLCJzdHIiLCJlcnIiLCJydiIsImZpbmRDYXVzZUJ5TmFtZSIsImZ1bGxTdGFjayIsInN0YWNrIiwiQnVmZmVyIiwicHJvY2VzcyIsIl9jYXBpdGFsaXplIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJfdG9zcyIsImV4cGVjdGVkIiwib3BlciIsImFjdHVhbCIsImFzc2VydCIsIkFzc2VydGlvbkVycm9yIiwidXRpbCIsImZvcm1hdCIsIm9wZXJhdG9yIiwic3RhY2tTdGFydEZ1bmN0aW9uIiwiY2FsbGVyIiwiX2dldENsYXNzIiwibm9vcCIsIl9zZXRFeHBvcnRzIiwibmRlYnVnIiwib3V0IiwidHlwZXMiLCJlbnYiLCJOT0RFX05ERUJVRyIsIm1zZyIsInR5cGUiLCJjaGVjayIsIlN0cmVhbSIsIlVVSURfUkVHRVhQIiwiZnVuYyIsIm51bWJlciIsImlzTmFOIiwiZmluaXRlIiwiaXNGaW5pdGUiLCJidWZmZXIiLCJpc0J1ZmZlciIsInN0cmVhbSIsImRhdGUiLCJEYXRlIiwicmVnZXhwIiwiUmVnRXhwIiwidXVpZCIsImdsb2JhbCIsInR5cGVkQXJyYXlTdXBwb3J0IiwiVWludDhBcnJheSIsImZvbyIsInN1YmFycmF5IiwiYnl0ZUxlbmd0aCIsImtNYXhMZW5ndGgiLCJUWVBFRF9BUlJBWV9TVVBQT1JUIiwiY3JlYXRlQnVmZmVyIiwidGhhdCIsIlJhbmdlRXJyb3IiLCJlbmNvZGluZ09yT2Zmc2V0IiwiYWxsb2NVbnNhZmUiLCJmcm9tIiwiQXJyYXlCdWZmZXIiLCJmcm9tQXJyYXlCdWZmZXIiLCJmcm9tU3RyaW5nIiwiZnJvbU9iamVjdCIsImFzc2VydFNpemUiLCJzaXplIiwiYWxsb2MiLCJmaWxsIiwiZW5jb2RpbmciLCJjaGVja2VkIiwiaXNFbmNvZGluZyIsIndyaXRlIiwiZnJvbUFycmF5TGlrZSIsImJ5dGVPZmZzZXQiLCJsZW4iLCJjb3B5IiwiaXNuYW4iLCJkYXRhIiwiU2xvd0J1ZmZlciIsImlzVmlldyIsImxvd2VyZWRDYXNlIiwidXRmOFRvQnl0ZXMiLCJiYXNlNjRUb0J5dGVzIiwidG9Mb3dlckNhc2UiLCJzbG93VG9TdHJpbmciLCJzdGFydCIsImVuZCIsImhleFNsaWNlIiwidXRmOFNsaWNlIiwiYXNjaWlTbGljZSIsImxhdGluMVNsaWNlIiwiYmFzZTY0U2xpY2UiLCJ1dGYxNmxlU2xpY2UiLCJzd2FwIiwiYiIsIm4iLCJiaWRpcmVjdGlvbmFsSW5kZXhPZiIsInZhbCIsImRpciIsImFycmF5SW5kZXhPZiIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsInJlYWQiLCJidWYiLCJpbmRleFNpemUiLCJyZWFkVUludDE2QkUiLCJhcnJMZW5ndGgiLCJ2YWxMZW5ndGgiLCJTdHJpbmciLCJmb3VuZEluZGV4IiwiZm91bmQiLCJqIiwiaGV4V3JpdGUiLCJvZmZzZXQiLCJOdW1iZXIiLCJyZW1haW5pbmciLCJzdHJMZW4iLCJwYXJzZUludCIsInN1YnN0ciIsInV0ZjhXcml0ZSIsImJsaXRCdWZmZXIiLCJhc2NpaVdyaXRlIiwiYXNjaWlUb0J5dGVzIiwibGF0aW4xV3JpdGUiLCJiYXNlNjRXcml0ZSIsInVjczJXcml0ZSIsInV0ZjE2bGVUb0J5dGVzIiwiYmFzZTY0IiwiZnJvbUJ5dGVBcnJheSIsIk1hdGgiLCJtaW4iLCJyZXMiLCJmaXJzdEJ5dGUiLCJjb2RlUG9pbnQiLCJieXRlc1BlclNlcXVlbmNlIiwic2Vjb25kQnl0ZSIsInRoaXJkQnl0ZSIsImZvdXJ0aEJ5dGUiLCJ0ZW1wQ29kZVBvaW50IiwiZGVjb2RlQ29kZVBvaW50c0FycmF5IiwiY29kZVBvaW50cyIsIk1BWF9BUkdVTUVOVFNfTEVOR1RIIiwiZnJvbUNoYXJDb2RlIiwicmV0IiwidG9IZXgiLCJieXRlcyIsImNoZWNrT2Zmc2V0IiwiZXh0IiwiY2hlY2tJbnQiLCJtYXgiLCJvYmplY3RXcml0ZVVJbnQxNiIsImxpdHRsZUVuZGlhbiIsIm9iamVjdFdyaXRlVUludDMyIiwiY2hlY2tJRUVFNzU0Iiwid3JpdGVGbG9hdCIsIm5vQXNzZXJ0IiwiaWVlZTc1NCIsIndyaXRlRG91YmxlIiwiYmFzZTY0Y2xlYW4iLCJzdHJpbmd0cmltIiwicmVwbGFjZSIsIklOVkFMSURfQkFTRTY0X1JFIiwidW5pdHMiLCJJbmZpbml0eSIsImxlYWRTdXJyb2dhdGUiLCJjaGFyQ29kZUF0IiwiYnl0ZUFycmF5IiwiaGkiLCJsbyIsInRvQnl0ZUFycmF5Iiwic3JjIiwiZHN0IiwiSU5TUEVDVF9NQVhfQllURVMiLCJwb29sU2l6ZSIsIl9hdWdtZW50Iiwic3BlY2llcyIsImFsbG9jVW5zYWZlU2xvdyIsIl9pc0J1ZmZlciIsImNvbXBhcmUiLCJ4IiwieSIsImxpc3QiLCJwb3MiLCJzd2FwMTYiLCJzd2FwMzIiLCJzd2FwNjQiLCJlcXVhbHMiLCJpbnNwZWN0IiwibWF0Y2giLCJ0aGlzU3RhcnQiLCJ0aGlzRW5kIiwidGhpc0NvcHkiLCJ0YXJnZXRDb3B5IiwiaW5jbHVkZXMiLCJ0b0pTT04iLCJfYXJyIiwibmV3QnVmIiwic2xpY2VMZW4iLCJyZWFkVUludExFIiwibXVsIiwicmVhZFVJbnRCRSIsInJlYWRVSW50OCIsInJlYWRVSW50MTZMRSIsInJlYWRVSW50MzJMRSIsInJlYWRVSW50MzJCRSIsInJlYWRJbnRMRSIsInBvdyIsInJlYWRJbnRCRSIsInJlYWRJbnQ4IiwicmVhZEludDE2TEUiLCJyZWFkSW50MTZCRSIsInJlYWRJbnQzMkxFIiwicmVhZEludDMyQkUiLCJyZWFkRmxvYXRMRSIsInJlYWRGbG9hdEJFIiwicmVhZERvdWJsZUxFIiwicmVhZERvdWJsZUJFIiwid3JpdGVVSW50TEUiLCJtYXhCeXRlcyIsIndyaXRlVUludEJFIiwid3JpdGVVSW50OCIsImZsb29yIiwid3JpdGVVSW50MTZMRSIsIndyaXRlVUludDE2QkUiLCJ3cml0ZVVJbnQzMkxFIiwid3JpdGVVSW50MzJCRSIsIndyaXRlSW50TEUiLCJsaW1pdCIsInN1YiIsIndyaXRlSW50QkUiLCJ3cml0ZUludDgiLCJ3cml0ZUludDE2TEUiLCJ3cml0ZUludDE2QkUiLCJ3cml0ZUludDMyTEUiLCJ3cml0ZUludDMyQkUiLCJ3cml0ZUZsb2F0TEUiLCJ3cml0ZUZsb2F0QkUiLCJ3cml0ZURvdWJsZUxFIiwid3JpdGVEb3VibGVCRSIsInRhcmdldFN0YXJ0IiwiY29kZSIsInBsYWNlSG9sZGVyc0NvdW50IiwiYjY0IiwibCIsInRtcCIsInBsYWNlSG9sZGVycyIsIkFyciIsIkwiLCJyZXZMb29rdXAiLCJ0cmlwbGV0VG9CYXNlNjQiLCJudW0iLCJsb29rdXAiLCJlbmNvZGVDaHVuayIsInVpbnQ4Iiwib3V0cHV0IiwiZXh0cmFCeXRlcyIsInBhcnRzIiwibWF4Q2h1bmtMZW5ndGgiLCJsZW4yIiwiaXNMRSIsIm1MZW4iLCJuQnl0ZXMiLCJlTGVuIiwiZU1heCIsImVCaWFzIiwibkJpdHMiLCJkIiwicyIsIk5hTiIsInJ0IiwiYWJzIiwibG9nIiwiTE4yIiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwicnVuIiwiSXRlbSIsIm5leHRUaWNrIiwidGl0bGUiLCJicm93c2VyIiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJ1bWFzayIsInBUb1N0cmluZyIsImFycmJ1ZiIsIkRhdGFWaWV3IiwiZ2V0TmFtZSIsImlzRnVuY3Rpb24iLCJmdW5jdGlvbnNIYXZlTmFtZXMiLCJyZWdleCIsInRydW5jYXRlIiwic29tZXRoaW5nIiwicmF3bmFtZSIsImdldE1lc3NhZ2UiLCJmYWlsIiwiX2RlZXBFcXVhbCIsIm1lbW9zIiwiaXNEYXRlIiwiZ2V0VGltZSIsImlzUmVnRXhwIiwic291cmNlIiwibXVsdGlsaW5lIiwibGFzdEluZGV4IiwiaWdub3JlQ2FzZSIsIkZsb2F0MzJBcnJheSIsIkZsb2F0NjRBcnJheSIsImFjdHVhbEluZGV4Iiwib2JqRXF1aXYiLCJpc0FyZ3VtZW50cyIsImFjdHVhbFZpc2l0ZWRPYmplY3RzIiwiaXNQcmltaXRpdmUiLCJhSXNBcmdzIiwiYklzQXJncyIsInBTbGljZSIsImthIiwib2JqZWN0S2V5cyIsImtiIiwic29ydCIsIm5vdERlZXBTdHJpY3RFcXVhbCIsImV4cGVjdGVkRXhjZXB0aW9uIiwiaXNQcm90b3R5cGVPZiIsIl90cnlCbG9jayIsImJsb2NrIiwiZXJyb3IiLCJfdGhyb3dzIiwic2hvdWxkVGhyb3ciLCJ1c2VyUHJvdmlkZWRNZXNzYWdlIiwiaXNVbndhbnRlZEV4Y2VwdGlvbiIsImlzVW5leHBlY3RlZEV4Y2VwdGlvbiIsImhhc093biIsImdlbmVyYXRlZE1lc3NhZ2UiLCJmbl9uYW1lIiwiaWR4IiwibmV4dF9saW5lIiwic3Vic3RyaW5nIiwiZXF1YWwiLCJub3RFcXVhbCIsImRlZXBFcXVhbCIsImRlZXBTdHJpY3RFcXVhbCIsIm5vdERlZXBFcXVhbCIsInN0cmljdEVxdWFsIiwibm90U3RyaWN0RXF1YWwiLCJ0aHJvd3MiLCJkb2VzTm90VGhyb3ciLCJpZkVycm9yIiwib3B0cyIsImN0eCIsInNlZW4iLCJzdHlsaXplIiwic3R5bGl6ZU5vQ29sb3IiLCJjb2xvcnMiLCJpc0Jvb2xlYW4iLCJzaG93SGlkZGVuIiwiX2V4dGVuZCIsImlzVW5kZWZpbmVkIiwiY3VzdG9tSW5zcGVjdCIsInN0eWxpemVXaXRoQ29sb3IiLCJmb3JtYXRWYWx1ZSIsInN0eWxlVHlwZSIsInN0eWxlIiwic3R5bGVzIiwiYXJyYXlUb0hhc2giLCJoYXNoIiwicmVjdXJzZVRpbWVzIiwiaXNTdHJpbmciLCJwcmltaXRpdmUiLCJmb3JtYXRQcmltaXRpdmUiLCJ2aXNpYmxlS2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJmb3JtYXRFcnJvciIsImJhc2UiLCJicmFjZXMiLCJ0b1VUQ1N0cmluZyIsImZvcm1hdEFycmF5IiwiZm9ybWF0UHJvcGVydHkiLCJwb3AiLCJyZWR1Y2VUb1NpbmdsZVN0cmluZyIsInNpbXBsZSIsImlzTnVtYmVyIiwiaXNOdWxsIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInNwbGl0IiwibGluZSIsIm51bUxpbmVzRXN0IiwicmVkdWNlIiwicHJldiIsImN1ciIsImFyIiwiaXNOdWxsT3JVbmRlZmluZWQiLCJpc1N5bWJvbCIsInJlIiwiaXNPYmplY3QiLCJvYmplY3RUb1N0cmluZyIsIm8iLCJwYWQiLCJ0aW1lc3RhbXAiLCJ0aW1lIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImdldERhdGUiLCJtb250aHMiLCJnZXRNb250aCIsInByb3AiLCJmb3JtYXRSZWdFeHAiLCJmIiwib2JqZWN0cyIsIl8iLCJkZXByZWNhdGUiLCJmbiIsImRlcHJlY2F0ZWQiLCJ3YXJuZWQiLCJ0aHJvd0RlcHJlY2F0aW9uIiwidHJhY2VEZXByZWNhdGlvbiIsImNvbnNvbGUiLCJ0cmFjZSIsIm5vRGVwcmVjYXRpb24iLCJkZWJ1Z0Vudmlyb24iLCJkZWJ1Z3MiLCJkZWJ1Z2xvZyIsIk5PREVfREVCVUciLCJwaWQiLCJib2xkIiwiaXRhbGljIiwidW5kZXJsaW5lIiwiaW52ZXJzZSIsIndoaXRlIiwiZ3JleSIsImJsYWNrIiwiYmx1ZSIsImN5YW4iLCJncmVlbiIsIm1hZ2VudGEiLCJyZWQiLCJ5ZWxsb3ciLCJzcGVjaWFsIiwiYm9vbGVhbiIsIm51bGwiLCJvcmlnaW4iLCJhZGQiLCJzdXBlckN0b3IiLCJzdXBlcl8iLCJUZW1wQ3RvciIsIkVFIiwiRXZlbnRFbWl0dGVyIiwiUmVhZGFibGUiLCJXcml0YWJsZSIsIkR1cGxleCIsIlRyYW5zZm9ybSIsIlBhc3NUaHJvdWdoIiwicGlwZSIsImRlc3QiLCJvbmRhdGEiLCJjaHVuayIsInBhdXNlIiwib25kcmFpbiIsInJlYWRhYmxlIiwicmVzdW1lIiwib25lbmQiLCJkaWRPbkVuZCIsIm9uY2xvc2UiLCJkZXN0cm95Iiwib25lcnJvciIsImVyIiwiY2xlYW51cCIsImxpc3RlbmVyQ291bnQiLCJfaXNTdGRpbyIsIl9ldmVudHMiLCJfbWF4TGlzdGVuZXJzIiwiZGVmYXVsdE1heExpc3RlbmVycyIsInNldE1heExpc3RlbmVycyIsImhhbmRsZXIiLCJsaXN0ZW5lcnMiLCJjb250ZXh0IiwibGlzdGVuZXIiLCJuZXdMaXN0ZW5lciIsImciLCJmaXJlZCIsInBvc2l0aW9uIiwic3BsaWNlIiwiZXZsaXN0ZW5lciIsImVtaXR0ZXIiLCJSRUFEQUJMRV9TVFJFQU0iLCJSZWFkYWJsZVN0YXRlIiwiaHdtIiwiaGlnaFdhdGVyTWFyayIsImRlZmF1bHRId20iLCJvYmplY3RNb2RlIiwicGlwZXMiLCJwaXBlc0NvdW50IiwiZmxvd2luZyIsImVuZGVkIiwiZW5kRW1pdHRlZCIsInJlYWRpbmciLCJzeW5jIiwibmVlZFJlYWRhYmxlIiwiZW1pdHRlZFJlYWRhYmxlIiwicmVhZGFibGVMaXN0ZW5pbmciLCJyZWFkYWJsZU9iamVjdE1vZGUiLCJkZWZhdWx0RW5jb2RpbmciLCJyYW5PdXQiLCJhd2FpdERyYWluIiwicmVhZGluZ01vcmUiLCJkZWNvZGVyIiwiU3RyaW5nRGVjb2RlciIsIl9yZWFkYWJsZVN0YXRlIiwicmVhZGFibGVBZGRDaHVuayIsInN0YXRlIiwiYWRkVG9Gcm9udCIsImNodW5rSW52YWxpZCIsIm9uRW9mQ2h1bmsiLCJ1bnNoaWZ0IiwiZW1pdFJlYWRhYmxlIiwibWF5YmVSZWFkTW9yZSIsIm5lZWRNb3JlRGF0YSIsInJvdW5kVXBUb05leHRQb3dlck9mMiIsIk1BWF9IV00iLCJob3dNdWNoVG9SZWFkIiwiZGVidWciLCJlbWl0UmVhZGFibGVfIiwiZmxvdyIsIm1heWJlUmVhZE1vcmVfIiwicGlwZU9uRHJhaW4iLCJyZXN1bWVTY2hlZHVsZWQiLCJyZXN1bWVfIiwiZnJvbUxpc3QiLCJzdHJpbmdNb2RlIiwic2hpZnQiLCJjcHkiLCJlbmRSZWFkYWJsZSIsInhzIiwic2V0RW5jb2RpbmciLCJlbmMiLCJuT3JpZyIsImRvUmVhZCIsIl9yZWFkIiwicGlwZU9wdHMiLCJvbnVucGlwZSIsIm9uZmluaXNoIiwiX3dyaXRhYmxlU3RhdGUiLCJuZWVkRHJhaW4iLCJ1bnBpcGUiLCJkb0VuZCIsInN0ZG91dCIsInN0ZGVyciIsImVuZEZuIiwiZGVzdHMiLCJldiIsIndyYXAiLCJwYXVzZWQiLCJtZXRob2QiLCJldmVudHMiLCJfZnJvbUxpc3QiLCJhbGxvd0hhbGZPcGVuIiwiV3JpdGVSZXEiLCJjYiIsImNhbGxiYWNrIiwiV3JpdGFibGVTdGF0ZSIsIndyaXRhYmxlT2JqZWN0TW9kZSIsImVuZGluZyIsImZpbmlzaGVkIiwibm9EZWNvZGUiLCJkZWNvZGVTdHJpbmdzIiwid3JpdGluZyIsImNvcmtlZCIsImJ1ZmZlclByb2Nlc3NpbmciLCJvbndyaXRlIiwid3JpdGVjYiIsIndyaXRlbGVuIiwicGVuZGluZ2NiIiwicHJlZmluaXNoZWQiLCJlcnJvckVtaXR0ZWQiLCJ3cml0ZUFmdGVyRW5kIiwidmFsaWRDaHVuayIsInZhbGlkIiwiZGVjb2RlQ2h1bmsiLCJ3cml0ZU9yQnVmZmVyIiwiZG9Xcml0ZSIsIndyaXRldiIsIl93cml0ZXYiLCJfd3JpdGUiLCJvbndyaXRlRXJyb3IiLCJvbndyaXRlU3RhdGVVcGRhdGUiLCJuZWVkRmluaXNoIiwiY2xlYXJCdWZmZXIiLCJhZnRlcldyaXRlIiwib253cml0ZURyYWluIiwiZmluaXNoTWF5YmUiLCJjYnMiLCJlbnRyeSIsInByZWZpbmlzaCIsIm5lZWQiLCJlbmRXcml0YWJsZSIsImNvcmsiLCJ1bmNvcmsiLCJhc3NlcnRFbmNvZGluZyIsImlzQnVmZmVyRW5jb2RpbmciLCJwYXNzVGhyb3VnaFdyaXRlIiwidXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhciIsImNoYXJSZWNlaXZlZCIsImNoYXJMZW5ndGgiLCJiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhciIsInN1cnJvZ2F0ZVNpemUiLCJkZXRlY3RJbmNvbXBsZXRlQ2hhciIsImNoYXJCdWZmZXIiLCJjaGFyU3RyIiwiYXZhaWxhYmxlIiwiY2hhckNvZGUiLCJjciIsIlRyYW5zZm9ybVN0YXRlIiwiYWZ0ZXJUcmFuc2Zvcm0iLCJuZWVkVHJhbnNmb3JtIiwidHJhbnNmb3JtaW5nIiwid3JpdGVjaHVuayIsInRzIiwiX3RyYW5zZm9ybVN0YXRlIiwicnMiLCJfZmx1c2giLCJkb25lIiwid3MiLCJfdHJhbnNmb3JtIiwid3JpdGVlbmNvZGluZyIsImpzU3ByaW50ZiIsImZtdCIsImZsYWdzIiwid2lkdGgiLCJwcmVjaXNpb24iLCJjb252ZXJzaW9uIiwibGVmdCIsInNpZ24iLCJhcmduIiwibW9kX2Fzc2VydCIsImV4ZWMiLCJkb1BhZCIsImR1bXBFeGNlcHRpb24iLCJqc1ByaW50ZiIsImpzRnByaW50ZiIsImNociIsImV4IiwiY2V4IiwicHJpbnRmIiwiZnByaW50ZiIsInBhdGgiLCJyZXZlcnNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLG1CQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxRQUNBLHNCQUFBRyxnQkFBQUMsSUFDQUQsVUFBQUgsT0FDQSxDQUNBLEdBQUFLLEdBQUFMLEdBQ0EsUUFBQU0sS0FBQUQsSUFBQSxnQkFBQUosaUJBQUFGLEdBQUFPLEdBQUFELEVBQUFDLEtBRUNDLEtBQUEsV0FDRCxNQ0FnQixVQUFVQyxHQ04xQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQVQsT0FHQSxJQUFBQyxHQUFBUyxFQUFBRCxJQUNBVCxXQUNBVyxHQUFBRixFQUNBRyxRQUFBLEVBVUEsT0FOQUws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QXNHLEdBQVV2QixFQUE4QnNELEdBUXhDbkssRUFBYTZHLEVBQThCLE9BQ3pDN0gsSUFBSyxjQVFMWSxNQUFPLFNtRC9rVVMrRyxHQUNqQixNQUFPLElBQUlFLElBRVBGLE9BRUYsK0JBSkssbUJBS0VBLEdBTEYsWUFBQXhJLEVBS0V3SSxRbkRnbFVIRSxHQUNQc0MsRUFBWWhOLFFBRWRwQixHQUFRb0IsUW1EOWtVTTBLIiwiZmlsZSI6ImRpLWRldi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IGZhY3RvcnkoKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jb250YWluZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9jb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29udGFpbmVyKTtcblx0XG5cdHZhciBfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbik7XG5cdFxuXHR2YXIgX2ZhY3RvcnlEZWZpbml0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfZmFjdG9yeURlZmluaXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmFjdG9yeURlZmluaXRpb24pO1xuXHRcblx0dmFyIF9yZWZlcmVuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9yZWZlcmVuY2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVmZXJlbmNlKTtcblx0XG5cdHZhciBfcGFyYW1ldGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfcGFyYW1ldGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcmFtZXRlcik7XG5cdFxuXHR2YXIgX21ldGhvZENhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9tZXRob2RDYWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZENhbGwpO1xuXHRcblx0dmFyIF9lcnJvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF9lcnJvcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXJyb3JzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgX2V4cG9ydHMgPSB7XG5cdCAgQ29udGFpbmVyOiBfY29udGFpbmVyMi5kZWZhdWx0LFxuXHQgIENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uOiBfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24yLmRlZmF1bHQsXG5cdCAgRmFjdG9yeURlZmluaXRpb246IF9mYWN0b3J5RGVmaW5pdGlvbjIuZGVmYXVsdCxcblx0ICBSZWZlcmVuY2U6IF9yZWZlcmVuY2UyLmRlZmF1bHQsXG5cdCAgUGFyYW1ldGVyOiBfcGFyYW1ldGVyMi5kZWZhdWx0LFxuXHQgIE1ldGhvZENhbGw6IF9tZXRob2RDYWxsMi5kZWZhdWx0XG5cdH07XG5cdFxuXHRmb3IgKHZhciBpIGluIF9lcnJvcnMyLmRlZmF1bHQpIHtcblx0ICBpZiAoX2Vycm9yczIuZGVmYXVsdC5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHQgICAgX2V4cG9ydHNbaV0gPSBfZXJyb3JzMi5kZWZhdWx0W2ldO1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfZXhwb3J0cztcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGVmaW5pdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2RlZmluaXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5pdGlvbik7XG5cdFxuXHR2YXIgX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pO1xuXHRcblx0dmFyIF9mYWN0b3J5RGVmaW5pdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX2ZhY3RvcnlEZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZhY3RvcnlEZWZpbml0aW9uKTtcblx0XG5cdHZhciBfcmVmZXJlbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfcmVmZXJlbmNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlZmVyZW5jZSk7XG5cdFxuXHR2YXIgX3BhcmFtZXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX3BhcmFtZXRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXJhbWV0ZXIpO1xuXHRcblx0dmFyIF9tZXRob2RDYWxsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfbWV0aG9kQ2FsbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tZXRob2RDYWxsKTtcblx0XG5cdHZhciBfZXJyb3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfaW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBJbmplY3RhYmxlQXJndW1lbnRzID0gX2luamVjdGFibGVBcmd1bWVudHMuSW5qZWN0YWJsZUFyZ3VtZW50cztcblx0XG5cdHZhciBzY2FsYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gc2NhbGFyKGlucHV0KSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nIHx8IGlucHV0ID09IG51bGw7XG5cdCAgfVxuXHRcblx0ICA7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNjYWxhciwgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoaW5wdXQpIHtcblx0ICAgICAgcmV0dXJuIHNjYWxhcihpbnB1dCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHNjYWxhcjtcblx0fSgpO1xuXHRcblx0dmFyIExvYWRpbmdPYmplY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gTG9hZGluZ09iamVjdChpbnB1dCkge1xuXHQgICAgcmV0dXJuIGlucHV0ICE9IG51bGwgJiYgaW5wdXQub2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmIEFycmF5LmlzQXJyYXkoaW5wdXQuYXJyKSAmJiBpbnB1dC5hcnIuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJztcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2FkaW5nT2JqZWN0LCBTeW1ib2wuaGFzSW5zdGFuY2UsIHtcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShpbnB1dCkge1xuXHQgICAgICByZXR1cm4gTG9hZGluZ09iamVjdChpbnB1dCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIExvYWRpbmdPYmplY3Q7XG5cdH0oKTtcblx0XG5cdHZhciBMb2NhdG9yQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gTG9jYXRvckNhbGxiYWNrKGlucHV0KSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnZnVuY3Rpb24nO1xuXHQgIH1cblx0XG5cdCAgO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2NhdG9yQ2FsbGJhY2ssIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGlucHV0KSB7XG5cdCAgICAgIHJldHVybiBMb2NhdG9yQ2FsbGJhY2soaW5wdXQpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiBMb2NhdG9yQ2FsbGJhY2s7XG5cdH0oKTtcblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdFxuXHR2YXIgQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIENvbnRhaW5lcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250YWluZXIpO1xuXHRcblx0ICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyID0ge307XG5cdCAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXIgPSB7fTtcblx0ICAgIHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXIgPSB7fTtcblx0ICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllciA9IHt9O1xuXHQgICAgdGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzID0gW107XG5cdCAgICB0aGlzLl9pbnN0YW5jZUxvY2F0b3JzID0gW107XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIHNlcnZpY2UgYXNzb2NpYXRlZCB3aXRoIGlkZW50aWZpZXJcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Li4uc3RyaW5nfSBpZGVudGlmaWVyc1xuXHQgICAqXG5cdCAgICogQHByb21pc2Vcblx0ICAgKiBAcmVzb2x2ZSB7QXJyYXk8T2JqZWN0fEZ1bmN0aW9uPn0gYSBzZXJ2aWNlXG5cdCAgICogQHJlamVjdCB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yfSBpbiBjYXNlIHRoZSBzZXJ2aWNlIGlzIHVuZGVmaW5lZFxuXHQgICAqIEByZWplY3Qge0NpcmN1bGFyRGVwZW5kZW5jeUVycm9yfSBpbiBjYXNlIG9mIGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKENvbnRhaW5lciwgW3tcblx0ICAgIGtleTogJ2dldCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoIShfaWQgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcblByb21pc2U8QXJyYXk8T2JqZWN0IHwgRnVuY3Rpb24+PlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgaWRlbnRpZmllcnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICBpZGVudGlmaWVyc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEoQXJyYXkuaXNBcnJheShpZGVudGlmaWVycykgJiYgaWRlbnRpZmllcnMuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnO1xuXHQgICAgICB9KSkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuQXJyYXk8c3RyaW5nPlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcnMpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHByb21pc2VzID0gW107XG5cdFxuXHQgICAgICBpZGVudGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XG5cdCAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5fZG9HZXRTZXJ2aWNlKGlkZW50aWZpZXIsIHsgb2JqOiB7fSwgYXJyOiBbXSB9KSk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYoUHJvbWlzZS5hbGwocHJvbWlzZXMpKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFzc29jaWF0ZXMgc2VydmljZSB3aXRoIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGluc3RhbmNlIHNlcnZpY2UgaW5zdGFuY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldChpZGVudGlmaWVyLCBpbnN0YW5jZSkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMihfaWQyKSB7XG5cdCAgICAgICAgaWYgKCEoX2lkMiBpbnN0YW5jZW9mIENvbnRhaW5lcikpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Db250YWluZXJcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDIpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgT2JqZWN0IHx8IHR5cGVvZiBpbnN0YW5jZSA9PT0gJ2Z1bmN0aW9uJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImluc3RhbmNlXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0IHwgRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGluc3RhbmNlKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gaW5zdGFuY2U7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjIodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm5zIHRydWUgaWYgY29udGFpbmVyIGhhcyBzZXJ2aWNlLCB0aGF0IGlzIGVpdGhlciBpZjpcblx0ICAgICAqICogaXQgaGFzIGEge0BsaW5rIERlZmluaXRpb259XG5cdCAgICAgKiAqIGl0IGhhcyBiZWVuIGluc3RhbnRpYXRlZFxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYXMoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMyhfaWQzKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDMgPT09ICdib29sZWFuJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5ib29sZWFuXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQzKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjModGhpcy5oYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpIHx8IHRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXJ2aWNlIGhhcyBhIGRlZmluaXRpb25cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYXNEZWZpbml0aW9uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjQoX2lkNCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQ0ID09PSAnYm9vbGVhbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuYm9vbGVhblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkNCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWY0KHVuZGVmaW5lZCAhPT0gdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2VydmljZSBoYXMgYW4gaW5zdGFuY2UsIGVpdGhlciBiZWNhdXNlOlxuXHQgICAgICogKiBpdCBoYXMgYmVlbiBpbnN0YW50aWF0ZWQgdmlhIGl0cyB7QGxpbmsgRGVmaW5pdGlvbn1cblx0ICAgICAqICogaXQgaGFzIGJlZW4gc2V0IGRpcmVjdGx5IHZpYSB7QGxpbmsgc2V0fSBtZXRob2Rcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYXNJbnN0YW5jZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFzSW5zdGFuY2UoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmNShfaWQ1KSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDUgPT09ICdib29sZWFuJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5ib29sZWFuXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQ1KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkNTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjUodW5kZWZpbmVkICE9PSB0aGlzLl9zZXJ2aWNlc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7RGVmaW5pdGlvbn1cblx0ICAgICAqXG5cdCAgICAgKiBAdGhyb3dzIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yfSBpZiB0aGVyZSBpcyBubyBzZXJ2aWNlIGRlZmluaXRpb24gZm9yIGdpdmVuIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0RGVmaW5pdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVmaW5pdGlvbihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY2KF9pZDYpIHtcblx0ICAgICAgICBpZiAoIShfaWQ2IGluc3RhbmNlb2YgX2RlZmluaXRpb24yLmRlZmF1bHQpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRGVmaW5pdGlvblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkNikpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDY7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGRlZmluaXRpb24gPSB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl07XG5cdFxuXHQgICAgICBpZiAodW5kZWZpbmVkID09PSBkZWZpbml0aW9uKSB7XG5cdCAgICAgICAgdGhyb3cgX2Vycm9ycy5VbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjYoZGVmaW5pdGlvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBc3NvY2lhdGVzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IHdpdGggaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIHNlcnZpY2UgaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uIHNlcnZpY2UgZGVmaW5pdGlvblxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG5cdCAgICAgKlxuXHQgICAgICogQHRocm93cyB7U2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yfSBpZiB0aGUgc2VydmljZSBkZWZpbml0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0RGVmaW5pdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVmaW5pdGlvbihpZGVudGlmaWVyLCBkZWZpbml0aW9uKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY3KF9pZDcpIHtcblx0ICAgICAgICBpZiAoIShfaWQ3IGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkNykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9kZWZpbml0aW9uMi5kZWZhdWx0KSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiZGVmaW5pdGlvblwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkRlZmluaXRpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGRlZmluaXRpb24pKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllcltpZGVudGlmaWVyXSkge1xuXHQgICAgICAgIHRocm93IF9lcnJvcnMuU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSBmYWxzZTtcblx0ICAgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gZGVmaW5pdGlvbjtcblx0XG5cdCAgICAgIHJldHVybiBfcmVmNyh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdldHMgcGFyYW1ldGVyIGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXIgcGFyYW1ldGVyIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7c2NhbGFyfSBwYXJhbWV0ZXIgdmFsdWVcblx0ICAgICAqXG5cdCAgICAgKiBAdGhyb3dzIHtVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcn0gaWYgdGhlcmUgaXMgbm8gcGFyYW1ldGVyIGZvciBnaXZlbiBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldFBhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1ldGVyKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjgoX2lkOCkge1xuXHQgICAgICAgIGlmICghc2NhbGFyKF9pZDgpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc2NhbGFyXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQ4KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkODtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKSB7XG5cdCAgICAgICAgdGhyb3cgX2Vycm9ycy5VbmRlZmluZWRQYXJhbWV0ZXJFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWY4KHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQXNzb2NpYXRlcyBwYXJhbWV0ZXIgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqIEBwYXJhbSB7c2NhbGFyfSB2YWx1ZVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG5cdCAgICAgKlxuXHQgICAgICogQHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldFBhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UGFyYW1ldGVyKGlkZW50aWZpZXIsIHZhbHVlKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY5KF9pZDkpIHtcblx0ICAgICAgICBpZiAoIShfaWQ5IGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkOSkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFzY2FsYXIodmFsdWUpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJ2YWx1ZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnNjYWxhclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QodmFsdWUpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSA9IHZhbHVlO1xuXHRcblx0ICAgICAgcmV0dXJuIF9yZWY5KHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyB0cnVlIGlmIGNvbnRhaW5lciBoYXMgcGFyYW1ldGVyLCBmYWxzZSBvdGhlcndpc2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhc1BhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFzUGFyYW1ldGVyKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjEwKF9pZDEwKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDEwID09PSAnYm9vbGVhbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuYm9vbGVhblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTApKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxMDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjEwKHVuZGVmaW5lZCAhPT0gdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZWdpc3RlcnMgXG5cdCAgICAgKiBcblx0ICAgICAqIEBwYXJhbSB7TG9jYXRvckNhbGxiYWNrfSBsb2NhdG9yXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0NvbnRhaW5lcn0gY3VycmVudCBDb250YWluZXIgaW5zdGFuY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVnaXN0ZXJDbGFzc0NvbnN0cnVjdG9yTG9jYXRvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJDbGFzc0NvbnN0cnVjdG9yTG9jYXRvcihsb2NhdG9yKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYxMShfaWQxMSkge1xuXHQgICAgICAgIGlmICghKF9pZDExIGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTEpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxMTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFMb2NhdG9yQ2FsbGJhY2sobG9jYXRvcikpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvY2F0b3JcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2NhdG9yQ2FsbGJhY2tcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGxvY2F0b3IpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzLnB1c2gobG9jYXRvcik7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjExKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtMb2NhdG9yQ2FsbGJhY2t9IGxvY2F0b3Jcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZWdpc3Rlckluc3RhbmNlTG9jYXRvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YW5jZUxvY2F0b3IobG9jYXRvcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMTIoX2lkMTIpIHtcblx0ICAgICAgICBpZiAoIShfaWQxMiBpbnN0YW5jZW9mIENvbnRhaW5lcikpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Db250YWluZXJcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDEyKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMTI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghTG9jYXRvckNhbGxiYWNrKGxvY2F0b3IpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJsb2NhdG9yXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuTG9jYXRvckNhbGxiYWNrXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2NhdG9yKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMucHVzaChsb2NhdG9yKTtcblx0XG5cdCAgICAgIHJldHVybiBfcmVmMTIodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXNvbHZlcyBzZXJ2aWNlIGRlZmluaXRpb24gYXJndW1lbnRzLCB0aGVuIHVzZXMgdGhlbSB0byBpbnN0YW50aWF0ZSB0aGUgc2VydmljZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcblx0ICAgICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcblx0ICAgICAqXG5cdCAgICAgKiBAcHJvbWlzZVxuXHQgICAgICogQHJlc29sdmUge09iamVjdH1cblx0ICAgICAqIEByZWplY3Qge0ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yfSBpbiBjYXNlIGEgZmFjdG9yeSBtZXRob2QgcmV0dXJucyBub3RoaW5nXG5cdCAgICAgKiBAcmVqZWN0IHtNZXRob2REb2VzTm90RXhpc3RFcnJvcn0gaW4gY2FzZSBhIG1ldGhvZCBjYWxsIGNhbGxzIGEgbWV0aG9kIHRoYXQgZG9lcyBub3QgZXhpc3Rcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19pbnN0YW50aWF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX2luc3RhbnRpYXRlKGlkZW50aWZpZXIsIGRlZmluaXRpb24sIGxvYWRpbmcpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICBmdW5jdGlvbiBfcmVmMTMoX2lkMTMpIHtcblx0ICAgICAgICBpZiAoIShfaWQxMyBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuUHJvbWlzZTxPYmplY3Q+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQxMykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDEzO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKGRlZmluaXRpb24gaW5zdGFuY2VvZiBfZGVmaW5pdGlvbjIuZGVmYXVsdCkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImRlZmluaXRpb25cIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5EZWZpbml0aW9uXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChkZWZpbml0aW9uKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghTG9hZGluZ09iamVjdChsb2FkaW5nKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibG9hZGluZ1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkxvYWRpbmdPYmplY3RcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGxvYWRpbmcpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYxMyh0aGlzLl9yZXNvbHZlQXJncyhkZWZpbml0aW9uLmFyZ3MsIGxvYWRpbmcpLnRoZW4oZnVuY3Rpb24gKGFyZ3MpIHtcblx0ICAgICAgICBmdW5jdGlvbiBfcmVmMTQoX2lkMTQpIHtcblx0ICAgICAgICAgIGlmICghKF9pZDE0IGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcblByb21pc2VcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE0KSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgcmV0dXJuIF9pZDE0O1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFyZ3MpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImFyZ3NcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheVxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoYXJncykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGluc3RhbmNlID0gdm9pZCAwO1xuXHRcblx0ICAgICAgICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbjIuZGVmYXVsdCkge1xuXHQgICAgICAgICAgdmFyIGNsYXNzQ29uc3RydWN0b3IgPSBfdGhpczIuX2xvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yKGRlZmluaXRpb24uY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGluc3RhbmNlID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjbGFzc0NvbnN0cnVjdG9yLCBbdW5kZWZpbmVkXS5jb25jYXQoYXJncykpKSgpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9mYWN0b3J5RGVmaW5pdGlvbjIuZGVmYXVsdCkge1xuXHQgICAgICAgICAgaW5zdGFuY2UgPSBkZWZpbml0aW9uLmZhY3RvcnkuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0XG5cdCAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBpbnN0YW5jZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjE0KFByb21pc2UucmVqZWN0KF9lcnJvcnMuRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcikpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICB2YXIgbWV0aG9kQ2FsbHNQcm9taXNlcyA9IFtdO1xuXHRcblx0ICAgICAgICAgIHZhciBpID0gdm9pZCAwLFxuXHQgICAgICAgICAgICAgIG1ldGhvZENhbGwgPSB2b2lkIDA7XG5cdFxuXHQgICAgICAgICAgdmFyIGNhbGxNZXRob2QgPSBmdW5jdGlvbiBjYWxsTWV0aG9kKG1ldGhvZFRvQ2FsbCkge1xuXHQgICAgICAgICAgICBpZiAoISh0eXBlb2YgbWV0aG9kVG9DYWxsID09PSAnZnVuY3Rpb24nKSkge1xuXHQgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibWV0aG9kVG9DYWxsXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KG1ldGhvZFRvQ2FsbCkpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBtZXRob2RDYWxsc1Byb21pc2VzLnB1c2goX3RoaXMyLl9yZXNvbHZlQXJncyhtZXRob2RDYWxsLmFyZ3MsIGxvYWRpbmcpLnRoZW4oZnVuY3Rpb24gKGFyZ3MpIHtcblx0ICAgICAgICAgICAgICBmdW5jdGlvbiBfcmVmMTUoX2lkMTUpIHtcblx0ICAgICAgICAgICAgICAgIGlmICghKF9pZDE1ID09IG51bGwgfHwgX2lkMTUgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuP1Byb21pc2UgfCBtaXhlZFxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTUpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX2lkMTU7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJncykpIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkFycmF5XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICByZXR1cm4gX3JlZjE1KG1ldGhvZFRvQ2FsbC5hcHBseShpbnN0YW5jZSwgYXJncykpO1xuXHQgICAgICAgICAgICB9KSk7XG5cdCAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgIGZ1bmN0aW9uIGdldE1ldGhvZENhbGwoaSkge1xuXHQgICAgICAgICAgICBmdW5jdGlvbiBfcmVmMTYoX2lkMTYpIHtcblx0ICAgICAgICAgICAgICBpZiAoIShfaWQxNiBpbnN0YW5jZW9mIF9tZXRob2RDYWxsMi5kZWZhdWx0KSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gXCJnZXRNZXRob2RDYWxsXCIgcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbk1ldGhvZENhbGxcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE2KSk7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICByZXR1cm4gX2lkMTY7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMTYoZGVmaW5pdGlvbi5tZXRob2RDYWxsc1tpXSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgZm9yIChpIGluIGRlZmluaXRpb24ubWV0aG9kQ2FsbHMpIHtcblx0ICAgICAgICAgICAgaWYgKGRlZmluaXRpb24ubWV0aG9kQ2FsbHMuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0ICAgICAgICAgICAgICBtZXRob2RDYWxsID0gZ2V0TWV0aG9kQ2FsbChpKTtcblx0XG5cdCAgICAgICAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSBtZXRob2RDYWxsLm5hbWU7XG5cdCAgICAgICAgICAgICAgdmFyIG1ldGhvZFRvQ2FsbCA9IGluc3RhbmNlW21ldGhvZE5hbWVdO1xuXHRcblx0ICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBtZXRob2RUb0NhbGwpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX2Vycm9ycy5NZXRob2REb2VzTm90RXhpc3RFcnJvci5jcmVhdGVFcnJvcihtZXRob2ROYW1lKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBjYWxsTWV0aG9kKG1ldGhvZFRvQ2FsbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICByZXR1cm4gcmVzb2x2ZShQcm9taXNlLmFsbChtZXRob2RDYWxsc1Byb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZnVuY3Rpb24gX3JlZjE3KF9pZDE3KSB7XG5cdCAgICAgICAgICAgICAgaWYgKCEoX2lkMTcgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQxNykpO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pZDE3O1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjE3KGluc3RhbmNlKTtcblx0ICAgICAgICAgIH0pKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSkpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVXNlZCBpbnRlcm5hbGx5IHRvIGxvY2F0ZSBhIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3IsIGlmIGl0IGhhcyBiZWVuIG1hZGUgYXZhaWxhYmxlIHRvIHRoZSBjb250YWluZXIgaW5zdGFuY2UuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvclxuXHQgICAgICpcblx0ICAgICAqIEB0aHJvd3Mge0Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3J9IGlmIHRoZSBzZXJ2aWNlIGNsYXNzIGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBmb3VuZFxuXHQgICAgICpcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnX2xvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMTgoX2lkMTgpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkMTggPT09ICdmdW5jdGlvbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE4KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMTg7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGkgPSB2b2lkIDAsXG5cdCAgICAgICAgICBjbGFzc0NvbnN0cnVjdG9yID0gdm9pZCAwO1xuXHRcblx0ICAgICAgZm9yIChpIGluIHRoaXMuX2NsYXNzQ29uc3RydWN0b3JMb2NhdG9ycykge1xuXHQgICAgICAgIGlmICh0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0ICAgICAgICAgIGNsYXNzQ29uc3RydWN0b3IgPSB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnNbaV0oaWRlbnRpZmllcik7XG5cdFxuXHQgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gY2xhc3NDb25zdHJ1Y3Rvcikge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjE4KGNsYXNzQ29uc3RydWN0b3IpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhyb3cgX2Vycm9ycy5DYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7T2JqZWN0fHZvaWR9XG5cdCAgICAgKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfbG9jYXRlSW5zdGFuY2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9sb2NhdGVJbnN0YW5jZShpZGVudGlmaWVyKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYxOShfaWQxOSkge1xuXHQgICAgICAgIGlmICghKF9pZDE5IGluc3RhbmNlb2YgT2JqZWN0IHx8IF9pZDE5ID09IG51bGwpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0IHwgdm9pZFxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTkpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxOTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgaSA9IHZvaWQgMDtcblx0ICAgICAgdmFyIGluc3RhbmNlID0gdm9pZCAwO1xuXHRcblx0ICAgICAgZm9yIChpIGluIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMpIHtcblx0ICAgICAgICBpZiAodGhpcy5faW5zdGFuY2VMb2NhdG9ycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHQgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLl9pbnN0YW5jZUxvY2F0b3JzW2ldKGlkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IGluc3RhbmNlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMTkoaW5zdGFuY2UpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmVzb2x2ZXMgZ2l2ZW4gYXJndW1lbnRzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gYXJnc1xuXHQgICAgICogQHBhcmFtIHtMb2FkaW5nT2JqZWN0fSBsb2FkaW5nIGFuIG9iamVjdCB0aGF0IGtlZXBzIHRyYWNrIG9mIHNlcnZpY2UgaW5zdGFudGlhdGlvbnMsXG5cdCAgICAgKiB1c2VkIHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwZW5kZW5jeSByZWxhdGVkIGluZmluaXRlIGxvb3BzXG5cdCAgICAgKlxuXHQgICAgICogQHByb21pc2Uge0FycmF5PGFueT59IGFyZ3VtZW50cyBvZiBhbnkgdHlwZVxuXHQgICAgICogQHJlamVjdCB7VW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcn1cblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19yZXNvbHZlQXJncycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc29sdmVBcmdzKGFyZ3MsIGxvYWRpbmcpIHtcblx0ICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoIUluamVjdGFibGVBcmd1bWVudHMoYXJncykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImFyZ3NcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghTG9hZGluZ09iamVjdChsb2FkaW5nKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibG9hZGluZ1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkxvYWRpbmdPYmplY3RcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGxvYWRpbmcpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHByb21pc2VzID0gW107XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIHZhciBpID0gdm9pZCAwLFxuXHQgICAgICAgICAgICBhcmcgPSB2b2lkIDA7XG5cdFxuXHQgICAgICAgIGZvciAoaSBpbiBhcmdzKSB7XG5cdCAgICAgICAgICBpZiAoYXJncy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHQgICAgICAgICAgICBhcmcgPSBhcmdzW2ldO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGFyZyBpbnN0YW5jZW9mIF9yZWZlcmVuY2UyLmRlZmF1bHQpIHtcblx0ICAgICAgICAgICAgICB2YXIgaWQgPSBhcmcuaWQ7XG5cdFxuXHQgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMzLl9kb0dldFNlcnZpY2UoaWQsIENvbnRhaW5lci5fZGVlcENvcHlMb2FkaW5nKGxvYWRpbmcpKSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgX3BhcmFtZXRlcjIuZGVmYXVsdCkge1xuXHQgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMzLmdldFBhcmFtZXRlcihhcmcuaWQpKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF9lcnJvcnMuVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvci5jcmVhdGVFcnJvcihhcmcpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHJlc29sdmUoUHJvbWlzZS5hbGwocHJvbWlzZXMpKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBVc2VkIGludGVybmFsbHkgdG8gcmV0cmlldmUgYSBzZXJ2aWNlIGJ5IGl0cyBpZGVudGlmaWVyLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBzZXJ2aWNlXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcblx0ICAgICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcblx0ICAgICAqXG5cdCAgICAgKiBAcHJvbWlzZVxuXHQgICAgICogQHJlc29sdmUge09iamVjdHxGdW5jdGlvbn0gYSBzZXJ2aWNlXG5cdCAgICAgKiBAcmVqZWN0IHtDaXJjdWxhckRlcGVuZGVuY3lFcnJvcn0gaW4gY2FzZSBvZiBhIGNpcmN1bGFyIGRlcGVuZGVuY3lcblx0ICAgICAqIEByZWplY3Qge1VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcn0gaW4gY2FzZSBuZWl0aGVyIGFuIGluc3RhbmNlIG5vciBhIGRlZmluaXRpb24gaXMgZm91bmRcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19kb0dldFNlcnZpY2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9kb0dldFNlcnZpY2UoaWRlbnRpZmllciwgbG9hZGluZykge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMjEoX2lkMjEpIHtcblx0ICAgICAgICBpZiAoIShfaWQyMSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuUHJvbWlzZVxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMjEpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyMTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIUxvYWRpbmdPYmplY3QobG9hZGluZykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvYWRpbmdcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2FkaW5nT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2FkaW5nKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh1bmRlZmluZWQgIT09IGxvYWRpbmcub2JqW2lkZW50aWZpZXJdKSB7XG5cdCAgICAgICAgdmFyIHNlcnZpY2VzID0gW10uY29uY2F0KGxvYWRpbmcuYXJyKS5jb25jYXQoW2lkZW50aWZpZXJdKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWYyMShQcm9taXNlLnJlamVjdChfZXJyb3JzLkNpcmN1bGFyRGVwZW5kZW5jeUVycm9yLmNyZWF0ZUVycm9yKHNlcnZpY2VzKSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaGFzRGVmaW5pdGlvbihpZGVudGlmaWVyKSkge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2xvY2F0ZUluc3RhbmNlKGlkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IHJlc3VsdCkge1xuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogSW4gY2FzZSBsb2NhdGUgaW5zdGFuY2UgcmV0dXJucyBhIHByb21pc2UsIHJlc29sdmUgcHJvbWlzZVxuXHQgICAgICAgICAgICAgKi9cblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyMShQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuXHQgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGluc3RhbmNlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX2Vycm9ycy5VbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcikpO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpbnN0YW5jZSk7XG5cdCAgICAgICAgICAgIH0pKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICByZXR1cm4gX3JlZjIxKFByb21pc2UucmVqZWN0KF9lcnJvcnMuVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBsb2FkaW5nLm9ialtpZGVudGlmaWVyXSA9IHRydWU7XG5cdCAgICAgICAgbG9hZGluZy5hcnIucHVzaChpZGVudGlmaWVyKTtcblx0XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5faW5zdGFudGlhdGUoaWRlbnRpZmllciwgdGhpcy5nZXREZWZpbml0aW9uKGlkZW50aWZpZXIpLCBsb2FkaW5nKTtcblx0XG5cdCAgICAgICAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSB0cnVlO1xuXHRcblx0ICAgICAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gcHJvbWlzZTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICByZXR1cm4gX3JlZjIxKFByb21pc2UucmVqZWN0KGUpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMjEoUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBNYWtlcyBhIGRlZXAgY29weSBvZiBsb2FkaW5nIG9iamVjdCBzbyBhcyBub3QgdG8gbW9kaWZ5IGl0IGJ5IHJlZmVyZW5jZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9hZGluZ1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtPYmplY3R9IGxvYWRpbmcgYSBkZWVwIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGxvYWRpbmcgcGFyYW1ldGVyXG5cdCAgICAgKiBAcmV0dXJucyB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IGxvYWRpbmcub2JqXG5cdCAgICAgKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gbG9hZGluZy5hcnJcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH1dLCBbe1xuXHQgICAga2V5OiAnX2RlZXBDb3B5TG9hZGluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX2RlZXBDb3B5TG9hZGluZyhsb2FkaW5nKSB7XG5cdCAgICAgIGlmICghKGxvYWRpbmcgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJsb2FkaW5nXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2FkaW5nKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBuZXdMb2FkaW5nID0ge1xuXHQgICAgICAgIG9iajoge30sXG5cdCAgICAgICAgYXJyOiBbXS5jb25jYXQobG9hZGluZy5hcnIpXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBmb3IgKHZhciBpIGluIGxvYWRpbmcub2JqKSB7XG5cdCAgICAgICAgaWYgKGxvYWRpbmcub2JqLmhhc093blByb3BlcnR5KGkpKSB7XG5cdCAgICAgICAgICBuZXdMb2FkaW5nLm9ialtpXSA9IGxvYWRpbmcub2JqW2ldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ld0xvYWRpbmc7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQ29udGFpbmVyO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBDb250YWluZXI7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX21ldGhvZENhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9tZXRob2RDYWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZENhbGwpO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIEluamVjdGFibGVBcmd1bWVudHMgPSBfaW5qZWN0YWJsZUFyZ3VtZW50cy5JbmplY3RhYmxlQXJndW1lbnRzO1xuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0XG5cdHZhciBEZWZpbml0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gRGVmaW5pdGlvbigpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVmaW5pdGlvbik7XG5cdFxuXHQgICAgaWYgKCEoYXJncyA9PSBudWxsIHx8IEluamVjdGFibGVBcmd1bWVudHMoYXJncykpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fbWV0aG9kQ2FsbHMgPSBbXTtcblx0ICAgIHRoaXMuX2FyZ3MgPSBhcmdzO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0cyBtZXRob2RDYWxsc1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtBcnJheTxNZXRob2RDYWxsPn0gbWV0aG9kQ2FsbHNcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhEZWZpbml0aW9uLCBbe1xuXHQgICAga2V5OiAnbWV0aG9kQ2FsbHMnLFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQobWV0aG9kQ2FsbHMpIHtcblx0ICAgICAgaWYgKCEoQXJyYXkuaXNBcnJheShtZXRob2RDYWxscykgJiYgbWV0aG9kQ2FsbHMuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICByZXR1cm4gaXRlbSBpbnN0YW5jZW9mIF9tZXRob2RDYWxsMi5kZWZhdWx0O1xuXHQgICAgICB9KSkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcIm1ldGhvZENhbGxzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuQXJyYXk8TWV0aG9kQ2FsbD5cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KG1ldGhvZENhbGxzKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX21ldGhvZENhbGxzID0gbWV0aG9kQ2FsbHM7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIG1ldGhvZENhbGxzXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0FycmF5PE1ldGhvZENhbGw+fVxuXHQgICAgICovXG5cdCAgICAsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjIoX2lkMikge1xuXHQgICAgICAgIGlmICghKEFycmF5LmlzQXJyYXkoX2lkMikgJiYgX2lkMi5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIGl0ZW0gaW5zdGFuY2VvZiBfbWV0aG9kQ2FsbDIuZGVmYXVsdDtcblx0ICAgICAgICB9KSkpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheTxNZXRob2RDYWxsPlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMikpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMih0aGlzLl9tZXRob2RDYWxscyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIGFyZ3Ncblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7SW5qZWN0YWJsZUFyZ3VtZW50c31cblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdhcmdzJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMyhfaWQzKSB7XG5cdCAgICAgICAgaWYgKCFJbmplY3RhYmxlQXJndW1lbnRzKF9pZDMpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuSW5qZWN0YWJsZUFyZ3VtZW50c1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMyh0aGlzLl9hcmdzKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBEZWZpbml0aW9uO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBEZWZpbml0aW9uO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9pbmplY3RhYmxlQXJndW1lbnRzLkluamVjdGFibGVBcmd1bWVudHM7XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHR2YXIgTWV0aG9kQ2FsbCA9IGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogQ29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG1ldGhvZCBuYW1lXG5cdCAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG5cdCAgICpcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gTWV0aG9kQ2FsbChuYW1lKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1ldGhvZENhbGwpO1xuXHRcblx0ICAgIGlmICghKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJuYW1lXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChuYW1lKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEoYXJncyA9PSBudWxsIHx8IEluamVjdGFibGVBcmd1bWVudHMoYXJncykpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG5cdCAgICB0aGlzLl9hcmdzID0gYXJncztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgbmFtZVxuXHQgICAqXG5cdCAgICogQHJldHVybnMge3N0cmluZ31cblx0ICAgKlxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhNZXRob2RDYWxsLCBbe1xuXHQgICAga2V5OiAnbmFtZScsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5fbmFtZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIGFyZ3Ncblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7SW5qZWN0YWJsZUFyZ3VtZW50c31cblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnYXJncycsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjIoX2lkMikge1xuXHQgICAgICAgIGlmICghSW5qZWN0YWJsZUFyZ3VtZW50cyhfaWQyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkluamVjdGFibGVBcmd1bWVudHNcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDIpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjIodGhpcy5fYXJncyk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gTWV0aG9kQ2FsbDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTWV0aG9kQ2FsbDtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkluamVjdGFibGVBcmd1bWVudHMgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWZlcmVuY2UpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyYW1ldGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IGV4cG9ydHMuSW5qZWN0YWJsZUFyZ3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBJbmplY3RhYmxlQXJndW1lbnRzKGlucHV0KSB7XG5cdCAgICByZXR1cm4gQXJyYXkuaXNBcnJheShpbnB1dCkgJiYgaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgcmV0dXJuIGl0ZW0gaW5zdGFuY2VvZiBfcmVmZXJlbmNlMi5kZWZhdWx0IHx8IGl0ZW0gaW5zdGFuY2VvZiBfcGFyYW1ldGVyMi5kZWZhdWx0O1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICA7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEluamVjdGFibGVBcmd1bWVudHMsIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGlucHV0KSB7XG5cdCAgICAgIHJldHVybiBJbmplY3RhYmxlQXJndW1lbnRzKGlucHV0KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gSW5qZWN0YWJsZUFyZ3VtZW50cztcblx0fSgpO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgUmVmZXJlbmNlID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqIFxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIFJlZmVyZW5jZShpZCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZmVyZW5jZSk7XG5cdFxuXHQgICAgaWYgKCEodHlwZW9mIGlkID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlZhbHVlIG9mIGFyZ3VtZW50IFxcXCJpZFxcXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcblwiICsgX2luc3BlY3QoaWQpKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9pZCA9IGlkO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogR2V0cyBpZFxuXHQgICAqXG5cdCAgICogQHJldHVybnMge3N0cmluZ31cblx0ICAgKlxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhSZWZlcmVuY2UsIFt7XG5cdCAgICBrZXk6IFwiaWRcIixcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmKF9pZCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuXCIgKyBfaW5zcGVjdChfaWQpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmKHRoaXMuX2lkKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSZWZlcmVuY2U7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlZmVyZW5jZTtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgUGFyYW1ldGVyID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG5cdCAgICpcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gUGFyYW1ldGVyKGlkKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFyYW1ldGVyKTtcblx0XG5cdCAgICBpZiAoISh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVmFsdWUgb2YgYXJndW1lbnQgXFxcImlkXFxcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuXCIgKyBfaW5zcGVjdChpZCkpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2lkID0gaWQ7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIGlkXG5cdCAgICpcblx0ICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFBhcmFtZXRlciwgW3tcblx0ICAgIGtleTogXCJpZFwiLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYoX2lkKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZCA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG5cIiArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5faWQpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFBhcmFtZXRlcjtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUGFyYW1ldGVyO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2RlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9kZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluaXRpb24pO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBJbmplY3RhYmxlQXJndW1lbnRzID0gX2luamVjdGFibGVBcmd1bWVudHMuSW5qZWN0YWJsZUFyZ3VtZW50cztcblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdHZhciBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChfRGVmaW5pdGlvbikge1xuXHQgIF9pbmhlcml0cyhDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiwgX0RlZmluaXRpb24pO1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyXG5cdCAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24oY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pO1xuXHRcblx0ICAgIGlmICghKHR5cGVvZiBjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEoYXJncyA9PSBudWxsIHx8IEluamVjdGFibGVBcmd1bWVudHMoYXJncykpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pKS5jYWxsKHRoaXMsIGFyZ3MpKTtcblx0XG5cdCAgICBfdGhpcy5fY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIgPSBjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcjtcblx0ICAgIHJldHVybiBfdGhpcztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcblx0ICAgKlxuXHQgICAqIEByZXR1cm5zIHtzdHJpbmd9XG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24sIFt7XG5cdCAgICBrZXk6ICdjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcicsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5fY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uO1xuXHR9KF9kZWZpbml0aW9uMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kZWZpbml0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZGVmaW5pdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbml0aW9uKTtcblx0XG5cdHZhciBfaW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9pbmplY3RhYmxlQXJndW1lbnRzLkluamVjdGFibGVBcmd1bWVudHM7XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHR2YXIgRmFjdG9yeURlZmluaXRpb24gPSBmdW5jdGlvbiAoX0RlZmluaXRpb24pIHtcblx0ICBfaW5oZXJpdHMoRmFjdG9yeURlZmluaXRpb24sIF9EZWZpbml0aW9uKTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3Rvcnlcblx0ICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBGYWN0b3J5RGVmaW5pdGlvbihmYWN0b3J5KSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZhY3RvcnlEZWZpbml0aW9uKTtcblx0XG5cdCAgICBpZiAoISh0eXBlb2YgZmFjdG9yeSA9PT0gJ2Z1bmN0aW9uJykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJmYWN0b3J5XCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGZhY3RvcnkpKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIShhcmdzID09IG51bGwgfHwgSW5qZWN0YWJsZUFyZ3VtZW50cyhhcmdzKSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJhcmdzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuP0luamVjdGFibGVBcmd1bWVudHNcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGFyZ3MpKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRmFjdG9yeURlZmluaXRpb24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGYWN0b3J5RGVmaW5pdGlvbikpLmNhbGwodGhpcywgYXJncykpO1xuXHRcblx0ICAgIF90aGlzLl9mYWN0b3J5ID0gZmFjdG9yeTtcblx0ICAgIHJldHVybiBfdGhpcztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgZmFjdG9yeVxuXHQgICAqXG5cdCAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEZhY3RvcnlEZWZpbml0aW9uLCBbe1xuXHQgICAga2V5OiAnZmFjdG9yeScsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkID09PSAnZnVuY3Rpb24nKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkZ1bmN0aW9uXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmKHRoaXMuX2ZhY3RvcnkpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEZhY3RvcnlEZWZpbml0aW9uO1xuXHR9KF9kZWZpbml0aW9uMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEZhY3RvcnlEZWZpbml0aW9uO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHR2YXIgX2Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcik7XG5cdFxuXHR2YXIgX2NpcmN1bGFyRGVwZW5kZW5jeUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdFxuXHR2YXIgX2NpcmN1bGFyRGVwZW5kZW5jeUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NpcmN1bGFyRGVwZW5kZW5jeUVycm9yKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0dmFyIF9mYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHRcblx0dmFyIF9mYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcik7XG5cdFxuXHR2YXIgX21ldGhvZERvZXNOb3RFeGlzdEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdFxuXHR2YXIgX21ldGhvZERvZXNOb3RFeGlzdEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZERvZXNOb3RFeGlzdEVycm9yKTtcblx0XG5cdHZhciBfc2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdFxuXHR2YXIgX3NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IpO1xuXHRcblx0dmFyIF91bmRlZmluZWRQYXJhbWV0ZXJFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHRcblx0dmFyIF91bmRlZmluZWRQYXJhbWV0ZXJFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bmRlZmluZWRQYXJhbWV0ZXJFcnJvcik7XG5cdFxuXHR2YXIgX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHRcblx0dmFyIF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKTtcblx0XG5cdHZhciBfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHRcblx0dmFyIF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IpO1xuXHRcblx0dmFyIF91bnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHR2YXIgX3Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcjogX2Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IyLmRlZmF1bHQsXG5cdCAgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3I6IF9jaXJjdWxhckRlcGVuZGVuY3lFcnJvcjIuZGVmYXVsdCxcblx0ICBEaXNsRXJyb3I6IF9kaXNsRXJyb3IyLmRlZmF1bHQsXG5cdCAgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3I6IF9mYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcjIuZGVmYXVsdCxcblx0ICBNZXRob2REb2VzTm90RXhpc3RFcnJvcjogX21ldGhvZERvZXNOb3RFeGlzdEVycm9yMi5kZWZhdWx0LFxuXHQgIFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjogX3NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjIuZGVmYXVsdCxcblx0ICBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcjogX3VuZGVmaW5lZFBhcmFtZXRlckVycm9yMi5kZWZhdWx0LFxuXHQgIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcjogX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcjIuZGVmYXVsdCxcblx0ICBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yOiBfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcjIuZGVmYXVsdCxcblx0ICBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yOiBfdW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcjIuZGVmYXVsdFxuXHR9O1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciA9IGZ1bmN0aW9uIChfRGlzbEVycm9yKSB7XG5cdCAgX2luaGVyaXRzKENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yLCBudWxsLCBbe1xuXHQgICAga2V5OiAnY3JlYXRlRXJyb3InLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKGNsYXNzTmFtZSkge1xuXHQgICAgICBpZiAoISh0eXBlb2YgY2xhc3NOYW1lID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImNsYXNzTmFtZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoY2xhc3NOYW1lKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcih7XG5cdCAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcblx0ICAgICAgfSwgJ0Nhbm5vdCBsb2NhdGUgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvciBmb3IgY2xhc3MgXCIlc1wiJywgY2xhc3NOYW1lKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdmVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX3ZlcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92ZXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IgPSBmdW5jdGlvbiAoX1ZFcnJvcikge1xuXHQgIF9pbmhlcml0cyhDaXJjdWxhckRlcGVuZGVuY3lFcnJvciwgX1ZFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENpcmN1bGFyRGVwZW5kZW5jeUVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcjtcblx0fShfdmVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yO1xuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIHZlcnJvci5qczogcmljaGVyIEphdmFTY3JpcHQgZXJyb3JzXG5cdCAqL1xuXHRcblx0dmFyIG1vZF9hc3NlcnRwbHVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciBtb2RfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0dmFyIG1vZF9leHRzcHJpbnRmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBtb2RfaXNFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpLmlzRXJyb3I7XG5cdHZhciBzcHJpbnRmID0gbW9kX2V4dHNwcmludGYuc3ByaW50Zjtcblx0XG5cdC8qXG5cdCAqIFB1YmxpYyBpbnRlcmZhY2Vcblx0ICovXG5cdFxuXHQvKiBTbyB5b3UgY2FuICd2YXIgVkVycm9yID0gcmVxdWlyZSgndmVycm9yJyknICovXG5cdG1vZHVsZS5leHBvcnRzID0gVkVycm9yO1xuXHQvKiBGb3IgY29tcGF0aWJpbGl0eSAqL1xuXHRWRXJyb3IuVkVycm9yID0gVkVycm9yO1xuXHQvKiBPdGhlciBleHBvcnRlZCBjbGFzc2VzICovXG5cdFZFcnJvci5TRXJyb3IgPSBTRXJyb3I7XG5cdFZFcnJvci5XRXJyb3IgPSBXRXJyb3I7XG5cdFZFcnJvci5NdWx0aUVycm9yID0gTXVsdGlFcnJvcjtcblx0XG5cdC8qXG5cdCAqIENvbW1vbiBmdW5jdGlvbiB1c2VkIHRvIHBhcnNlIGNvbnN0cnVjdG9yIGFyZ3VtZW50cyBmb3IgVkVycm9yLCBXRXJyb3IsIGFuZFxuXHQgKiBTRXJyb3IuICBOYW1lZCBhcmd1bWVudHMgdG8gdGhpcyBmdW5jdGlvbjpcblx0ICpcblx0ICogICAgIHN0cmljdFx0XHRmb3JjZSBzdHJpY3QgaW50ZXJwcmV0YXRpb24gb2Ygc3ByaW50ZiBhcmd1bWVudHMsIGV2ZW5cblx0ICogICAgIFx0XHRcdGlmIHRoZSBvcHRpb25zIGluIFwiYXJndlwiIGRvbid0IHNheSBzb1xuXHQgKlxuXHQgKiAgICAgYXJndlx0XHRlcnJvcidzIGNvbnN0cnVjdG9yIGFyZ3VtZW50cywgd2hpY2ggYXJlIHRvIGJlXG5cdCAqICAgICBcdFx0XHRpbnRlcnByZXRlZCBhcyBkZXNjcmliZWQgaW4gUkVBRE1FLm1kLiAgRm9yIHF1aWNrXG5cdCAqICAgICBcdFx0XHRyZWZlcmVuY2UsIFwiYXJndlwiIGhhcyBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3Jtczpcblx0ICpcblx0ICogICAgICAgICAgWyBzcHJpbnRmX2FyZ3MuLi4gXSAgICAgICAgICAgKGFyZ3ZbMF0gaXMgYSBzdHJpbmcpXG5cdCAqICAgICAgICAgIFsgY2F1c2UsIHNwcmludGZfYXJncy4uLiBdICAgIChhcmd2WzBdIGlzIGFuIEVycm9yKVxuXHQgKiAgICAgICAgICBbIG9wdGlvbnMsIHNwcmludGZfYXJncy4uLiBdICAoYXJndlswXSBpcyBhbiBvYmplY3QpXG5cdCAqXG5cdCAqIFRoaXMgZnVuY3Rpb24gbm9ybWFsaXplcyB0aGVzZSBmb3JtcywgcHJvZHVjaW5nIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmdcblx0ICogcHJvcGVydGllczpcblx0ICpcblx0ICogICAgb3B0aW9ucyAgICAgICAgICAgZXF1aXZhbGVudCB0byBcIm9wdGlvbnNcIiBpbiB0aGlyZCBmb3JtLiAgVGhpcyB3aWxsIG5ldmVyXG5cdCAqICAgIFx0XHRcdGJlIGEgZGlyZWN0IHJlZmVyZW5jZSB0byB3aGF0IHRoZSBjYWxsZXIgcGFzc2VkIGluXG5cdCAqICAgIFx0XHRcdChpLmUuLCBpdCBtYXkgYmUgYSBzaGFsbG93IGNvcHkpLCBzbyBpdCBjYW4gYmUgZnJlZWx5XG5cdCAqICAgIFx0XHRcdG1vZGlmaWVkLlxuXHQgKlxuXHQgKiAgICBzaG9ydG1lc3NhZ2UgICAgICByZXN1bHQgb2Ygc3ByaW50ZihzcHJpbnRmX2FyZ3MpLCB0YWtpbmcgb3B0aW9ucy5zdHJpY3Rcblx0ICogICAgXHRcdFx0aW50byBhY2NvdW50IGFzIGRlc2NyaWJlZCBpbiBSRUFETUUubWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBwYXJzZUNvbnN0cnVjdG9yQXJndW1lbnRzKGFyZ3MpXG5cdHtcblx0XHR2YXIgYXJndiwgb3B0aW9ucywgc3ByaW50Zl9hcmdzLCBzaG9ydG1lc3NhZ2UsIGs7XG5cdFxuXHRcdG1vZF9hc3NlcnRwbHVzLm9iamVjdChhcmdzLCAnYXJncycpO1xuXHRcdG1vZF9hc3NlcnRwbHVzLmJvb2woYXJncy5zdHJpY3QsICdhcmdzLnN0cmljdCcpO1xuXHRcdG1vZF9hc3NlcnRwbHVzLmFycmF5KGFyZ3MuYXJndiwgJ2FyZ3MuYXJndicpO1xuXHRcdGFyZ3YgPSBhcmdzLmFyZ3Y7XG5cdFxuXHRcdC8qXG5cdFx0ICogRmlyc3QsIGZpZ3VyZSBvdXQgd2hpY2ggZm9ybSBvZiBpbnZvY2F0aW9uIHdlJ3ZlIGJlZW4gZ2l2ZW4uXG5cdFx0ICovXG5cdFx0aWYgKGFyZ3YubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRvcHRpb25zID0ge307XG5cdFx0XHRzcHJpbnRmX2FyZ3MgPSBbXTtcblx0XHR9IGVsc2UgaWYgKG1vZF9pc0Vycm9yKGFyZ3ZbMF0pKSB7XG5cdFx0XHRvcHRpb25zID0geyAnY2F1c2UnOiBhcmd2WzBdIH07XG5cdFx0XHRzcHJpbnRmX2FyZ3MgPSBhcmd2LnNsaWNlKDEpO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIChhcmd2WzBdKSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdG9wdGlvbnMgPSB7fTtcblx0XHRcdGZvciAoayBpbiBhcmd2WzBdKSB7XG5cdFx0XHRcdG9wdGlvbnNba10gPSBhcmd2WzBdW2tdO1xuXHRcdFx0fVxuXHRcdFx0c3ByaW50Zl9hcmdzID0gYXJndi5zbGljZSgxKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bW9kX2Fzc2VydHBsdXMuc3RyaW5nKGFyZ3ZbMF0sXG5cdFx0XHQgICAgJ2ZpcnN0IGFyZ3VtZW50IHRvIFZFcnJvciwgU0Vycm9yLCBvciBXRXJyb3IgJyArXG5cdFx0XHQgICAgJ2NvbnN0cnVjdG9yIG11c3QgYmUgYSBzdHJpbmcsIG9iamVjdCwgb3IgRXJyb3InKTtcblx0XHRcdG9wdGlvbnMgPSB7fTtcblx0XHRcdHNwcmludGZfYXJncyA9IGFyZ3Y7XG5cdFx0fVxuXHRcblx0XHQvKlxuXHRcdCAqIE5vdyBjb25zdHJ1Y3QgdGhlIGVycm9yJ3MgbWVzc2FnZS5cblx0XHQgKlxuXHRcdCAqIGV4dHNwcmludGYgKHdoaWNoIHdlIGludm9rZSBoZXJlIHdpdGggb3VyIGNhbGxlcidzIGFyZ3VtZW50cyBpbiBvcmRlclxuXHRcdCAqIHRvIGNvbnN0cnVjdCB0aGlzIEVycm9yJ3MgbWVzc2FnZSkgaXMgc3RyaWN0IGluIGl0cyBpbnRlcnByZXRhdGlvbiBvZlxuXHRcdCAqIHZhbHVlcyB0byBiZSBwcm9jZXNzZWQgYnkgdGhlIFwiJXNcIiBzcGVjaWZpZXIuICBUaGUgdmFsdWUgcGFzc2VkIHRvXG5cdFx0ICogZXh0c3ByaW50ZiBtdXN0IGFjdHVhbGx5IGJlIGEgc3RyaW5nIG9yIHNvbWV0aGluZyBjb252ZXJ0aWJsZSB0byBhXG5cdFx0ICogU3RyaW5nIHVzaW5nIC50b1N0cmluZygpLiAgUGFzc2luZyBvdGhlciB2YWx1ZXMgKG5vdGFibHkgXCJudWxsXCIgYW5kXG5cdFx0ICogXCJ1bmRlZmluZWRcIikgaXMgY29uc2lkZXJlZCBhIHByb2dyYW1tZXIgZXJyb3IuICBUaGUgYXNzdW1wdGlvbiBpc1xuXHRcdCAqIHRoYXQgaWYgeW91IGFjdHVhbGx5IHdhbnQgdG8gcHJpbnQgdGhlIHN0cmluZyBcIm51bGxcIiBvciBcInVuZGVmaW5lZFwiLFxuXHRcdCAqIHRoZW4gdGhhdCdzIGVhc3kgdG8gZG8gdGhhdCB3aGVuIHlvdSdyZSBjYWxsaW5nIGV4dHNwcmludGY7IG9uIHRoZVxuXHRcdCAqIG90aGVyIGhhbmQsIGlmIHlvdSBkaWQgTk9UIHdhbnQgdGhhdCAoaS5lLiwgdGhlcmUncyBhY3R1YWxseSBhIGJ1Z1xuXHRcdCAqIHdoZXJlIHRoZSBwcm9ncmFtIGFzc3VtZXMgc29tZSB2YXJpYWJsZSBpcyBub24tbnVsbCBhbmQgdHJpZXMgdG9cblx0XHQgKiBwcmludCBpdCwgd2hpY2ggbWlnaHQgaGFwcGVuIHdoZW4gY29uc3RydWN0aW5nIGEgcGFja2V0IG9yIGZpbGUgaW5cblx0XHQgKiBzb21lIHNwZWNpZmljIGZvcm1hdCksIHRoZW4gaXQncyBiZXR0ZXIgdG8gc3RvcCBpbW1lZGlhdGVseSB0aGFuXG5cdFx0ICogcHJvZHVjZSBib2d1cyBvdXRwdXQuXG5cdFx0ICpcblx0XHQgKiBIb3dldmVyLCBzb21ldGltZXMgdGhlIGJ1ZyBpcyBvbmx5IGluIHRoZSBjb2RlIGNhbGxpbmcgVkVycm9yLCBhbmQgYVxuXHRcdCAqIHByb2dyYW1tZXIgbWlnaHQgcHJlZmVyIHRvIGhhdmUgdGhlIGVycm9yIG1lc3NhZ2UgY29udGFpbiBcIm51bGxcIiBvclxuXHRcdCAqIFwidW5kZWZpbmVkXCIgcmF0aGVyIHRoYW4gaGF2ZSB0aGUgYnVnIGluIHRoZSBlcnJvciBwYXRoIGNyYXNoIHRoZVxuXHRcdCAqIHByb2dyYW0gKG1ha2luZyB0aGUgZmlyc3QgYnVnIGhhcmRlciB0byBpZGVudGlmeSkuICBGb3IgdGhhdCByZWFzb24sXG5cdFx0ICogYnkgZGVmYXVsdCBWRXJyb3IgY29udmVydHMgXCJudWxsXCIgb3IgXCJ1bmRlZmluZWRcIiBhcmd1bWVudHMgdG8gdGhlaXJcblx0XHQgKiBzdHJpbmcgcmVwcmVzZW50YXRpb25zIGFuZCBwYXNzZXMgdGhvc2UgdG8gZXh0c3ByaW50Zi4gIFByb2dyYW1tZXJzXG5cdFx0ICogZGVzaXJpbmcgdGhlIHN0cmljdCBiZWhhdmlvciBjYW4gdXNlIHRoZSBTRXJyb3IgY2xhc3Mgb3IgcGFzcyB0aGVcblx0XHQgKiBcInN0cmljdFwiIG9wdGlvbiB0byB0aGUgVkVycm9yIGNvbnN0cnVjdG9yLlxuXHRcdCAqL1xuXHRcdG1vZF9hc3NlcnRwbHVzLm9iamVjdChvcHRpb25zKTtcblx0XHRpZiAoIW9wdGlvbnMuc3RyaWN0ICYmICFhcmdzLnN0cmljdCkge1xuXHRcdFx0c3ByaW50Zl9hcmdzID0gc3ByaW50Zl9hcmdzLm1hcChmdW5jdGlvbiAoYSkge1xuXHRcdFx0XHRyZXR1cm4gKGEgPT09IG51bGwgPyAnbnVsbCcgOlxuXHRcdFx0XHQgICAgYSA9PT0gdW5kZWZpbmVkID8gJ3VuZGVmaW5lZCcgOiBhKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XG5cdFx0aWYgKHNwcmludGZfYXJncy5sZW5ndGggPT09IDApIHtcblx0XHRcdHNob3J0bWVzc2FnZSA9ICcnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzaG9ydG1lc3NhZ2UgPSBzcHJpbnRmLmFwcGx5KG51bGwsIHNwcmludGZfYXJncyk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKHtcblx0XHQgICAgJ29wdGlvbnMnOiBvcHRpb25zLFxuXHRcdCAgICAnc2hvcnRtZXNzYWdlJzogc2hvcnRtZXNzYWdlXG5cdFx0fSk7XG5cdH1cblx0XG5cdC8qXG5cdCAqIFNlZSBSRUFETUUubWQgZm9yIHJlZmVyZW5jZSBkb2N1bWVudGF0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gVkVycm9yKClcblx0e1xuXHRcdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgY2F1c2UsIGN0b3IsIG1lc3NhZ2UsIGs7XG5cdFxuXHRcdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXHRcblx0XHQvKlxuXHRcdCAqIFRoaXMgaXMgYSByZWdyZXR0YWJsZSBwYXR0ZXJuLCBidXQgSmF2YVNjcmlwdCdzIGJ1aWx0LWluIEVycm9yIGNsYXNzXG5cdFx0ICogaXMgZGVmaW5lZCB0byB3b3JrIHRoaXMgd2F5LCBzbyB3ZSBhbGxvdyB0aGUgY29uc3RydWN0b3IgdG8gYmUgY2FsbGVkXG5cdFx0ICogd2l0aG91dCBcIm5ld1wiLlxuXHRcdCAqL1xuXHRcdGlmICghKHRoaXMgaW5zdGFuY2VvZiBWRXJyb3IpKSB7XG5cdFx0XHRvYmogPSBPYmplY3QuY3JlYXRlKFZFcnJvci5wcm90b3R5cGUpO1xuXHRcdFx0VkVycm9yLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcblx0XHRcdHJldHVybiAob2JqKTtcblx0XHR9XG5cdFxuXHRcdC8qXG5cdFx0ICogRm9yIGNvbnZlbmllbmNlIGFuZCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgd2Ugc3VwcG9ydCBzZXZlcmFsXG5cdFx0ICogZGlmZmVyZW50IGNhbGxpbmcgZm9ybXMuICBOb3JtYWxpemUgdGhlbSBoZXJlLlxuXHRcdCAqL1xuXHRcdHBhcnNlZCA9IHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoe1xuXHRcdCAgICAnYXJndic6IGFyZ3MsXG5cdFx0ICAgICdzdHJpY3QnOiBmYWxzZVxuXHRcdH0pO1xuXHRcblx0XHQvKlxuXHRcdCAqIElmIHdlJ3ZlIGJlZW4gZ2l2ZW4gYSBuYW1lLCBhcHBseSBpdCBub3cuXG5cdFx0ICovXG5cdFx0aWYgKHBhcnNlZC5vcHRpb25zLm5hbWUpIHtcblx0XHRcdG1vZF9hc3NlcnRwbHVzLnN0cmluZyhwYXJzZWQub3B0aW9ucy5uYW1lLFxuXHRcdFx0ICAgICdlcnJvclxcJ3MgXCJuYW1lXCIgbXVzdCBiZSBhIHN0cmluZycpO1xuXHRcdFx0dGhpcy5uYW1lID0gcGFyc2VkLm9wdGlvbnMubmFtZTtcblx0XHR9XG5cdFxuXHRcdC8qXG5cdFx0ICogRm9yIGRlYnVnZ2luZywgd2Uga2VlcCB0cmFjayBvZiB0aGUgb3JpZ2luYWwgc2hvcnQgbWVzc2FnZSAoYXR0YWNoZWRcblx0XHQgKiB0aGlzIEVycm9yIHBhcnRpY3VsYXJseSkgc2VwYXJhdGVseSBmcm9tIHRoZSBjb21wbGV0ZSBtZXNzYWdlICh3aGljaFxuXHRcdCAqIGluY2x1ZGVzIHRoZSBtZXNzYWdlcyBvZiBvdXIgY2F1c2UgY2hhaW4pLlxuXHRcdCAqL1xuXHRcdHRoaXMuanNlX3Nob3J0bXNnID0gcGFyc2VkLnNob3J0bWVzc2FnZTtcblx0XHRtZXNzYWdlID0gcGFyc2VkLnNob3J0bWVzc2FnZTtcblx0XG5cdFx0Lypcblx0XHQgKiBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgY2F1c2UsIHJlY29yZCBhIHJlZmVyZW5jZSB0byBpdCBhbmQgdXBkYXRlIG91clxuXHRcdCAqIG1lc3NhZ2UgYXBwcm9wcmlhdGVseS5cblx0XHQgKi9cblx0XHRjYXVzZSA9IHBhcnNlZC5vcHRpb25zLmNhdXNlO1xuXHRcdGlmIChjYXVzZSkge1xuXHRcdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoY2F1c2UpLCAnY2F1c2UgaXMgbm90IGFuIEVycm9yJyk7XG5cdFx0XHR0aGlzLmpzZV9jYXVzZSA9IGNhdXNlO1xuXHRcblx0XHRcdGlmICghcGFyc2VkLm9wdGlvbnMuc2tpcENhdXNlTWVzc2FnZSkge1xuXHRcdFx0XHRtZXNzYWdlICs9ICc6ICcgKyBjYXVzZS5tZXNzYWdlO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0Lypcblx0XHQgKiBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMsIHNoYWxsb3ctY29weSB0aGF0XG5cdFx0ICogaGVyZS4gIFdlIGRvbid0IHdhbnQgdG8gdXNlIGEgZGVlcCBjb3B5IGluIGNhc2UgdGhlcmUgYXJlIG5vbi1wbGFpblxuXHRcdCAqIG9iamVjdHMgaGVyZSwgYnV0IHdlIGRvbid0IHdhbnQgdG8gdXNlIHRoZSBvcmlnaW5hbCBvYmplY3QgaW4gY2FzZVxuXHRcdCAqIHRoZSBjYWxsZXIgbW9kaWZpZXMgaXQgbGF0ZXIuXG5cdFx0ICovXG5cdFx0dGhpcy5qc2VfaW5mbyA9IHt9O1xuXHRcdGlmIChwYXJzZWQub3B0aW9ucy5pbmZvKSB7XG5cdFx0XHRmb3IgKGsgaW4gcGFyc2VkLm9wdGlvbnMuaW5mbykge1xuXHRcdFx0XHR0aGlzLmpzZV9pbmZvW2tdID0gcGFyc2VkLm9wdGlvbnMuaW5mb1trXTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0RXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblx0XG5cdFx0aWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG5cdFx0XHRjdG9yID0gcGFyc2VkLm9wdGlvbnMuY29uc3RydWN0b3JPcHQgfHwgdGhpcy5jb25zdHJ1Y3Rvcjtcblx0XHRcdEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIGN0b3IpO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuICh0aGlzKTtcblx0fVxuXHRcblx0bW9kX3V0aWwuaW5oZXJpdHMoVkVycm9yLCBFcnJvcik7XG5cdFZFcnJvci5wcm90b3R5cGUubmFtZSA9ICdWRXJyb3InO1xuXHRcblx0VkVycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHZlX3RvU3RyaW5nKClcblx0e1xuXHRcdHZhciBzdHIgPSAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpICYmIHRoaXMubmFtZSB8fFxuXHRcdFx0dGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlLm5hbWUpO1xuXHRcdGlmICh0aGlzLm1lc3NhZ2UpXG5cdFx0XHRzdHIgKz0gJzogJyArIHRoaXMubWVzc2FnZTtcblx0XG5cdFx0cmV0dXJuIChzdHIpO1xuXHR9O1xuXHRcblx0Lypcblx0ICogVGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgZm9yIGNvbXBhdGliaWxpdHkuICBOZXcgY2FsbGVycyBzaG91bGQgdXNlXG5cdCAqIFZFcnJvci5jYXVzZSgpIGluc3RlYWQuICBUaGF0IG1ldGhvZCBhbHNvIHVzZXMgdGhlIHNhbmVyIGBudWxsYCByZXR1cm4gdmFsdWVcblx0ICogd2hlbiB0aGVyZSBpcyBubyBjYXVzZS5cblx0ICovXG5cdFZFcnJvci5wcm90b3R5cGUuY2F1c2UgPSBmdW5jdGlvbiB2ZV9jYXVzZSgpXG5cdHtcblx0XHR2YXIgY2F1c2UgPSBWRXJyb3IuY2F1c2UodGhpcyk7XG5cdFx0cmV0dXJuIChjYXVzZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNhdXNlKTtcblx0fTtcblx0XG5cdC8qXG5cdCAqIFN0YXRpYyBtZXRob2RzXG5cdCAqXG5cdCAqIFRoZXNlIGNsYXNzLWxldmVsIG1ldGhvZHMgYXJlIHByb3ZpZGVkIHNvIHRoYXQgY2FsbGVycyBjYW4gdXNlIHRoZW0gb25cblx0ICogaW5zdGFuY2VzIG9mIEVycm9ycyB0aGF0IGFyZSBub3QgVkVycm9ycy4gIE5ldyBpbnRlcmZhY2VzIHNob3VsZCBiZSBwcm92aWRlZFxuXHQgKiBvbmx5IHVzaW5nIHN0YXRpYyBtZXRob2RzIHRvIGVsaW1pbmF0ZSB0aGUgY2xhc3Mgb2YgcHJvZ3JhbW1pbmcgbWlzdGFrZSB3aGVyZVxuXHQgKiBwZW9wbGUgZmFpbCB0byBjaGVjayB3aGV0aGVyIHRoZSBFcnJvciBvYmplY3QgaGFzIHRoZSBjb3JyZXNwb25kaW5nIG1ldGhvZHMuXG5cdCAqL1xuXHRcblx0VkVycm9yLmNhdXNlID0gZnVuY3Rpb24gKGVycilcblx0e1xuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRcdHJldHVybiAobW9kX2lzRXJyb3IoZXJyLmpzZV9jYXVzZSkgPyBlcnIuanNlX2NhdXNlIDogbnVsbCk7XG5cdH07XG5cdFxuXHRWRXJyb3IuaW5mbyA9IGZ1bmN0aW9uIChlcnIpXG5cdHtcblx0XHR2YXIgcnYsIGNhdXNlLCBrO1xuXHRcblx0XHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0XHRjYXVzZSA9IFZFcnJvci5jYXVzZShlcnIpO1xuXHRcdGlmIChjYXVzZSAhPT0gbnVsbCkge1xuXHRcdFx0cnYgPSBWRXJyb3IuaW5mbyhjYXVzZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJ2ID0ge307XG5cdFx0fVxuXHRcblx0XHRpZiAodHlwZW9mIChlcnIuanNlX2luZm8pID09ICdvYmplY3QnICYmIGVyci5qc2VfaW5mbyAhPT0gbnVsbCkge1xuXHRcdFx0Zm9yIChrIGluIGVyci5qc2VfaW5mbykge1xuXHRcdFx0XHRydltrXSA9IGVyci5qc2VfaW5mb1trXTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiAocnYpO1xuXHR9O1xuXHRcblx0VkVycm9yLmZpbmRDYXVzZUJ5TmFtZSA9IGZ1bmN0aW9uIChlcnIsIG5hbWUpXG5cdHtcblx0XHR2YXIgY2F1c2U7XG5cdFxuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRcdG1vZF9hc3NlcnRwbHVzLnN0cmluZyhuYW1lKTtcblx0XHRtb2RfYXNzZXJ0cGx1cy5vayhuYW1lLmxlbmd0aCA+IDAsICduYW1lIGNhbm5vdCBiZSBlbXB0eScpO1xuXHRcblx0XHRmb3IgKGNhdXNlID0gZXJyOyBjYXVzZSAhPT0gbnVsbDsgY2F1c2UgPSBWRXJyb3IuY2F1c2UoY2F1c2UpKSB7XG5cdFx0XHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihjYXVzZSkpO1xuXHRcdFx0aWYgKGNhdXNlLm5hbWUgPT0gbmFtZSkge1xuXHRcdFx0XHRyZXR1cm4gKGNhdXNlKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiAobnVsbCk7XG5cdH07XG5cdFxuXHRWRXJyb3IuZnVsbFN0YWNrID0gZnVuY3Rpb24gKGVycilcblx0e1xuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRcblx0XHR2YXIgY2F1c2UgPSBWRXJyb3IuY2F1c2UoZXJyKTtcblx0XG5cdFx0aWYgKGNhdXNlKSB7XG5cdFx0XHRyZXR1cm4gKGVyci5zdGFjayArICdcXG5jYXVzZWQgYnk6ICcgKyBWRXJyb3IuZnVsbFN0YWNrKGNhdXNlKSk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKGVyci5zdGFjayk7XG5cdH07XG5cdFxuXHRcblx0Lypcblx0ICogU0Vycm9yIGlzIGxpa2UgVkVycm9yLCBidXQgc3RyaWN0ZXIgYWJvdXQgdHlwZXMuICBZb3UgY2Fubm90IHBhc3MgXCJudWxsXCIgb3Jcblx0ICogXCJ1bmRlZmluZWRcIiBhcyBzdHJpbmcgYXJndW1lbnRzIHRvIHRoZSBmb3JtYXR0ZXIuXG5cdCAqL1xuXHRmdW5jdGlvbiBTRXJyb3IoKVxuXHR7XG5cdFx0dmFyIGFyZ3MsIG9iaiwgcGFyc2VkLCBvcHRpb25zO1xuXHRcblx0XHRhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0XHRpZiAoISh0aGlzIGluc3RhbmNlb2YgU0Vycm9yKSkge1xuXHRcdFx0b2JqID0gT2JqZWN0LmNyZWF0ZShTRXJyb3IucHJvdG90eXBlKTtcblx0XHRcdFNFcnJvci5hcHBseShvYmosIGFyZ3VtZW50cyk7XG5cdFx0XHRyZXR1cm4gKG9iaik7XG5cdFx0fVxuXHRcblx0XHRwYXJzZWQgPSBwYXJzZUNvbnN0cnVjdG9yQXJndW1lbnRzKHtcblx0XHQgICAgJ2FyZ3YnOiBhcmdzLFxuXHRcdCAgICAnc3RyaWN0JzogdHJ1ZVxuXHRcdH0pO1xuXHRcblx0XHRvcHRpb25zID0gcGFyc2VkLm9wdGlvbnM7XG5cdFx0VkVycm9yLmNhbGwodGhpcywgb3B0aW9ucywgJyVzJywgcGFyc2VkLnNob3J0bWVzc2FnZSk7XG5cdFxuXHRcdHJldHVybiAodGhpcyk7XG5cdH1cblx0XG5cdC8qXG5cdCAqIFdlIGRvbid0IGJvdGhlciBzZXR0aW5nIFNFcnJvci5wcm90b3R5cGUubmFtZSBiZWNhdXNlIG9uY2UgY29uc3RydWN0ZWQsXG5cdCAqIFNFcnJvcnMgYXJlIGp1c3QgbGlrZSBWRXJyb3JzLlxuXHQgKi9cblx0bW9kX3V0aWwuaW5oZXJpdHMoU0Vycm9yLCBWRXJyb3IpO1xuXHRcblx0XG5cdC8qXG5cdCAqIFJlcHJlc2VudHMgYSBjb2xsZWN0aW9uIG9mIGVycm9ycyBmb3IgdGhlIHB1cnBvc2Ugb2YgY29uc3VtZXJzIHRoYXQgZ2VuZXJhbGx5XG5cdCAqIG9ubHkgZGVhbCB3aXRoIG9uZSBlcnJvci4gIENhbGxlcnMgY2FuIGV4dHJhY3QgdGhlIGluZGl2aWR1YWwgZXJyb3JzXG5cdCAqIGNvbnRhaW5lZCBpbiB0aGlzIG9iamVjdCwgYnV0IG1heSBhbHNvIGp1c3QgdHJlYXQgaXQgYXMgYSBub3JtYWwgc2luZ2xlXG5cdCAqIGVycm9yLCBpbiB3aGljaCBjYXNlIGEgc3VtbWFyeSBtZXNzYWdlIHdpbGwgYmUgcHJpbnRlZC5cblx0ICovXG5cdGZ1bmN0aW9uIE11bHRpRXJyb3IoZXJyb3JzKVxuXHR7XG5cdFx0bW9kX2Fzc2VydHBsdXMuYXJyYXkoZXJyb3JzLCAnbGlzdCBvZiBlcnJvcnMnKTtcblx0XHRtb2RfYXNzZXJ0cGx1cy5vayhlcnJvcnMubGVuZ3RoID4gMCwgJ211c3QgYmUgYXQgbGVhc3Qgb25lIGVycm9yJyk7XG5cdFx0dGhpcy5hc2VfZXJyb3JzID0gZXJyb3JzO1xuXHRcblx0XHRWRXJyb3IuY2FsbCh0aGlzLCB7XG5cdFx0ICAgICdjYXVzZSc6IGVycm9yc1swXVxuXHRcdH0sICdmaXJzdCBvZiAlZCBlcnJvciVzJywgZXJyb3JzLmxlbmd0aCwgZXJyb3JzLmxlbmd0aCA9PSAxID8gJycgOiAncycpO1xuXHR9XG5cdFxuXHRtb2RfdXRpbC5pbmhlcml0cyhNdWx0aUVycm9yLCBWRXJyb3IpO1xuXHRNdWx0aUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ011bHRpRXJyb3InO1xuXHRcblx0TXVsdGlFcnJvci5wcm90b3R5cGUuZXJyb3JzID0gZnVuY3Rpb24gbWVfZXJyb3JzKClcblx0e1xuXHRcdHJldHVybiAodGhpcy5hc2VfZXJyb3JzLnNsaWNlKDApKTtcblx0fTtcblx0XG5cdFxuXHQvKlxuXHQgKiBTZWUgUkVBRE1FLm1kIGZvciByZWZlcmVuY2UgZGV0YWlscy5cblx0ICovXG5cdGZ1bmN0aW9uIFdFcnJvcigpXG5cdHtcblx0XHR2YXIgYXJncywgb2JqLCBwYXJzZWQsIG9wdGlvbnM7XG5cdFxuXHRcdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXHRcdGlmICghKHRoaXMgaW5zdGFuY2VvZiBXRXJyb3IpKSB7XG5cdFx0XHRvYmogPSBPYmplY3QuY3JlYXRlKFdFcnJvci5wcm90b3R5cGUpO1xuXHRcdFx0V0Vycm9yLmFwcGx5KG9iaiwgYXJncyk7XG5cdFx0XHRyZXR1cm4gKG9iaik7XG5cdFx0fVxuXHRcblx0XHRwYXJzZWQgPSBwYXJzZUNvbnN0cnVjdG9yQXJndW1lbnRzKHtcblx0XHQgICAgJ2FyZ3YnOiBhcmdzLFxuXHRcdCAgICAnc3RyaWN0JzogZmFsc2Vcblx0XHR9KTtcblx0XG5cdFx0b3B0aW9ucyA9IHBhcnNlZC5vcHRpb25zO1xuXHRcdG9wdGlvbnNbJ3NraXBDYXVzZU1lc3NhZ2UnXSA9IHRydWU7XG5cdFx0VkVycm9yLmNhbGwodGhpcywgb3B0aW9ucywgJyVzJywgcGFyc2VkLnNob3J0bWVzc2FnZSk7XG5cdFxuXHRcdHJldHVybiAodGhpcyk7XG5cdH1cblx0XG5cdG1vZF91dGlsLmluaGVyaXRzKFdFcnJvciwgVkVycm9yKTtcblx0V0Vycm9yLnByb3RvdHlwZS5uYW1lID0gJ1dFcnJvcic7XG5cdFxuXHRXRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gd2VfdG9TdHJpbmcoKVxuXHR7XG5cdFx0dmFyIHN0ciA9ICh0aGlzLmhhc093blByb3BlcnR5KCduYW1lJykgJiYgdGhpcy5uYW1lIHx8XG5cdFx0XHR0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUubmFtZSk7XG5cdFx0aWYgKHRoaXMubWVzc2FnZSlcblx0XHRcdHN0ciArPSAnOiAnICsgdGhpcy5tZXNzYWdlO1xuXHRcdGlmICh0aGlzLmpzZV9jYXVzZSAmJiB0aGlzLmpzZV9jYXVzZS5tZXNzYWdlKVxuXHRcdFx0c3RyICs9ICc7IGNhdXNlZCBieSAnICsgdGhpcy5qc2VfY2F1c2UudG9TdHJpbmcoKTtcblx0XG5cdFx0cmV0dXJuIChzdHIpO1xuXHR9O1xuXHRcblx0Lypcblx0ICogRm9yIHB1cmVseSBoaXN0b3JpY2FsIHJlYXNvbnMsIFdFcnJvcidzIGNhdXNlKCkgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXRcblx0ICogdGhlIGNhdXNlLlxuXHQgKi9cblx0V0Vycm9yLnByb3RvdHlwZS5jYXVzZSA9IGZ1bmN0aW9uIHdlX2NhdXNlKGMpXG5cdHtcblx0XHRpZiAobW9kX2lzRXJyb3IoYykpXG5cdFx0XHR0aGlzLmpzZV9jYXVzZSA9IGM7XG5cdFxuXHRcdHJldHVybiAodGhpcy5qc2VfY2F1c2UpO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlciwgcHJvY2Vzcykgey8vIENvcHlyaWdodCAoYykgMjAxMiwgTWFyayBDYXZhZ2UuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdC8vIENvcHlyaWdodCAyMDE1IEpveWVudCwgSW5jLlxuXHRcblx0dmFyIGFzc2VydCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykuU3RyZWFtO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0XG5cdC8vLy0tLSBHbG9iYWxzXG5cdFxuXHQvKiBKU1NUWUxFRCAqL1xuXHR2YXIgVVVJRF9SRUdFWFAgPSAvXlthLWZBLUYwLTldezh9LVthLWZBLUYwLTldezR9LVthLWZBLUYwLTldezR9LVthLWZBLUYwLTldezR9LVthLWZBLUYwLTldezEyfSQvO1xuXHRcblx0XG5cdC8vLy0tLSBJbnRlcm5hbFxuXHRcblx0ZnVuY3Rpb24gX2NhcGl0YWxpemUoc3RyKSB7XG5cdCAgICByZXR1cm4gKHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF90b3NzKG5hbWUsIGV4cGVjdGVkLCBvcGVyLCBhcmcsIGFjdHVhbCkge1xuXHQgICAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7XG5cdCAgICAgICAgbWVzc2FnZTogdXRpbC5mb3JtYXQoJyVzICglcykgaXMgcmVxdWlyZWQnLCBuYW1lLCBleHBlY3RlZCksXG5cdCAgICAgICAgYWN0dWFsOiAoYWN0dWFsID09PSB1bmRlZmluZWQpID8gdHlwZW9mIChhcmcpIDogYWN0dWFsKGFyZyksXG5cdCAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkLFxuXHQgICAgICAgIG9wZXJhdG9yOiBvcGVyIHx8ICc9PT0nLFxuXHQgICAgICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogX3Rvc3MuY2FsbGVyXG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2dldENsYXNzKGFyZykge1xuXHQgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKS5zbGljZSg4LCAtMSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge1xuXHQgICAgLy8gV2h5IGV2ZW4gYm90aGVyIHdpdGggYXNzZXJ0cz9cblx0fVxuXHRcblx0XG5cdC8vLy0tLSBFeHBvcnRzXG5cdFxuXHR2YXIgdHlwZXMgPSB7XG5cdCAgICBib29sOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ2Jvb2xlYW4nOyB9XG5cdCAgICB9LFxuXHQgICAgZnVuYzoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdmdW5jdGlvbic7IH1cblx0ICAgIH0sXG5cdCAgICBzdHJpbmc6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnc3RyaW5nJzsgfVxuXHQgICAgfSxcblx0ICAgIG9iamVjdDoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgbnVtYmVyOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGFyZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGZpbml0ZToge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdudW1iZXInICYmICFpc05hTihhcmcpICYmIGlzRmluaXRlKGFyZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGJ1ZmZlcjoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBCdWZmZXIuaXNCdWZmZXIoYXJnKTsgfSxcblx0ICAgICAgICBvcGVyYXRvcjogJ0J1ZmZlci5pc0J1ZmZlcidcblx0ICAgIH0sXG5cdCAgICBhcnJheToge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7IH0sXG5cdCAgICAgICAgb3BlcmF0b3I6ICdBcnJheS5pc0FycmF5J1xuXHQgICAgfSxcblx0ICAgIHN0cmVhbToge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBhcmcgaW5zdGFuY2VvZiBTdHJlYW07IH0sXG5cdCAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcblx0ICAgICAgICBhY3R1YWw6IF9nZXRDbGFzc1xuXHQgICAgfSxcblx0ICAgIGRhdGU6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnIGluc3RhbmNlb2YgRGF0ZTsgfSxcblx0ICAgICAgICBvcGVyYXRvcjogJ2luc3RhbmNlb2YnLFxuXHQgICAgICAgIGFjdHVhbDogX2dldENsYXNzXG5cdCAgICB9LFxuXHQgICAgcmVnZXhwOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIFJlZ0V4cDsgfSxcblx0ICAgICAgICBvcGVyYXRvcjogJ2luc3RhbmNlb2YnLFxuXHQgICAgICAgIGFjdHVhbDogX2dldENsYXNzXG5cdCAgICB9LFxuXHQgICAgdXVpZDoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdzdHJpbmcnICYmIFVVSURfUkVHRVhQLnRlc3QoYXJnKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIG9wZXJhdG9yOiAnaXNVVUlEJ1xuXHQgICAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX3NldEV4cG9ydHMobmRlYnVnKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHR5cGVzKTtcblx0ICAgIHZhciBvdXQ7XG5cdFxuXHQgICAgLyogcmUtZXhwb3J0IHN0YW5kYXJkIGFzc2VydCAqL1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfTkRFQlVHKSB7XG5cdCAgICAgICAgb3V0ID0gbm9vcDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgb3V0ID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG5cdCAgICAgICAgICAgIGlmICghYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBfdG9zcyhtc2csICd0cnVlJywgYXJnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLyogc3RhbmRhcmQgY2hlY2tzICovXG5cdCAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcblx0ICAgICAgICBpZiAobmRlYnVnKSB7XG5cdCAgICAgICAgICAgIG91dFtrXSA9IG5vb3A7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcblx0ICAgICAgICBvdXRba10gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcblx0ICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZykpIHtcblx0ICAgICAgICAgICAgICAgIF90b3NzKG1zZywgaywgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyogb3B0aW9uYWwgY2hlY2tzICovXG5cdCAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcblx0ICAgICAgICB2YXIgbmFtZSA9ICdvcHRpb25hbCcgKyBfY2FwaXRhbGl6ZShrKTtcblx0ICAgICAgICBpZiAobmRlYnVnKSB7XG5cdCAgICAgICAgICAgIG91dFtuYW1lXSA9IG5vb3A7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcblx0ICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcblx0ICAgICAgICAgICAgaWYgKGFyZyA9PT0gdW5kZWZpbmVkIHx8IGFyZyA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICghdHlwZS5jaGVjayhhcmcpKSB7XG5cdCAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGssIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qIGFycmF5T2YgY2hlY2tzICovXG5cdCAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcblx0ICAgICAgICB2YXIgbmFtZSA9ICdhcnJheU9mJyArIF9jYXBpdGFsaXplKGspO1xuXHQgICAgICAgIGlmIChuZGVidWcpIHtcblx0ICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuXHQgICAgICAgIHZhciBleHBlY3RlZCA9ICdbJyArIGsgKyAnXSc7XG5cdCAgICAgICAgb3V0W25hbWVdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG5cdCAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdCAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgaTtcblx0ICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZ1tpXSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKiBvcHRpb25hbEFycmF5T2YgY2hlY2tzICovXG5cdCAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcblx0ICAgICAgICB2YXIgbmFtZSA9ICdvcHRpb25hbEFycmF5T2YnICsgX2NhcGl0YWxpemUoayk7XG5cdCAgICAgICAgaWYgKG5kZWJ1Zykge1xuXHQgICAgICAgICAgICBvdXRbbmFtZV0gPSBub29wO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB0eXBlID0gdHlwZXNba107XG5cdCAgICAgICAgdmFyIGV4cGVjdGVkID0gJ1snICsgayArICddJztcblx0ICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcblx0ICAgICAgICAgICAgaWYgKGFyZyA9PT0gdW5kZWZpbmVkIHx8IGFyZyA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdCAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgaTtcblx0ICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZ1tpXSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKiByZS1leHBvcnQgYnVpbHQtaW4gYXNzZXJ0aW9ucyAqL1xuXHQgICAgT2JqZWN0LmtleXMoYXNzZXJ0KS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG5cdCAgICAgICAgaWYgKGsgPT09ICdBc3NlcnRpb25FcnJvcicpIHtcblx0ICAgICAgICAgICAgb3V0W2tdID0gYXNzZXJ0W2tdO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChuZGVidWcpIHtcblx0ICAgICAgICAgICAgb3V0W2tdID0gbm9vcDtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBvdXRba10gPSBhc3NlcnRba107XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKiBleHBvcnQgb3Vyc2VsdmVzIChmb3IgdW5pdCB0ZXN0cyBfb25seV8pICovXG5cdCAgICBvdXQuX3NldEV4cG9ydHMgPSBfc2V0RXhwb3J0cztcblx0XG5cdCAgICByZXR1cm4gb3V0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9zZXRFeHBvcnRzKHByb2Nlc3MuZW52Lk5PREVfTkRFQlVHKTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KS5CdWZmZXIsIF9fd2VicGFja19yZXF1aXJlX18oMTgpKSlcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oQnVmZmVyLCBnbG9iYWwpIHsvKiFcblx0ICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG5cdCAqXG5cdCAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuXHQgKiBAbGljZW5zZSAgTUlUXG5cdCAqL1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXHRcblx0J3VzZSBzdHJpY3QnXG5cdFxuXHR2YXIgYmFzZTY0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSlcblx0dmFyIGllZWU3NTQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KVxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpXG5cdFxuXHRleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuXHRleHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5cdGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXHRcblx0LyoqXG5cdCAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG5cdCAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG5cdCAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcblx0ICpcblx0ICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuXHQgKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG5cdCAqXG5cdCAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW5cblx0ICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG5cdCAqXG5cdCAqIE5vdGU6XG5cdCAqXG5cdCAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG5cdCAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cblx0ICpcblx0ICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG5cdCAqXG5cdCAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG5cdCAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblx0XG5cdCAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG5cdCAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuXHQgKi9cblx0QnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG5cdCAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuXHQgIDogdHlwZWRBcnJheVN1cHBvcnQoKVxuXHRcblx0Lypcblx0ICogRXhwb3J0IGtNYXhMZW5ndGggYWZ0ZXIgdHlwZWQgYXJyYXkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkLlxuXHQgKi9cblx0ZXhwb3J0cy5rTWF4TGVuZ3RoID0ga01heExlbmd0aCgpXG5cdFxuXHRmdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuXHQgICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG5cdCAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuXHQgICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG5cdCAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuXHQgIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuXHQgICAgPyAweDdmZmZmZmZmXG5cdCAgICA6IDB4M2ZmZmZmZmZcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcblx0ICBpZiAoa01heExlbmd0aCgpIDwgbGVuZ3RoKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKVxuXHQgIH1cblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuXHQgICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcblx0ICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG5cdCAgICBpZiAodGhhdCA9PT0gbnVsbCkge1xuXHQgICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG5cdCAgICB9XG5cdCAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgaGF2ZSB0aGVpclxuXHQgKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG5cdCAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcblx0ICogYW5kIHRoZSBgVWludDhBcnJheWAgbWV0aG9kcy4gU3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXRcblx0ICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cblx0ICpcblx0ICogVGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUgcmVtYWlucyB1bm1vZGlmaWVkLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcblx0ICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuXHQgIH1cblx0XG5cdCAgLy8gQ29tbW9uIGNhc2UuXG5cdCAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG5cdCAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcihcblx0ICAgICAgICAnSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnXG5cdCAgICAgIClcblx0ICAgIH1cblx0ICAgIHJldHVybiBhbGxvY1Vuc2FmZSh0aGlzLCBhcmcpXG5cdCAgfVxuXHQgIHJldHVybiBmcm9tKHRoaXMsIGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRCdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblx0XG5cdC8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuXHRCdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICByZXR1cm4gYXJyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcblx0ICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmcm9tT2JqZWN0KHRoYXQsIHZhbHVlKVxuXHR9XG5cdFxuXHQvKipcblx0ICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3Jcblx0ICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG5cdCAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcblx0ICogQnVmZmVyLmZyb20oYXJyYXkpXG5cdCAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcblx0ICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG5cdCAqKi9cblx0QnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcblx0ICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuXHQgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxuXHQgICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHtcblx0ICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuXHQgICAgICB2YWx1ZTogbnVsbCxcblx0ICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkge1xuXHQgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuXHQgIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbGxvYyAodGhhdCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcblx0ICBhc3NlcnRTaXplKHNpemUpXG5cdCAgaWYgKHNpemUgPD0gMCkge1xuXHQgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuXHQgIH1cblx0ICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuXHQgICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZFxuXHQgICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuXHQgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcblx0ICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZylcblx0ICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuXHQgIH1cblx0ICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG5cdCAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcblx0ICoqL1xuXHRCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcblx0ICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XG5cdCAgYXNzZXJ0U2l6ZShzaXplKVxuXHQgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG5cdCAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHtcblx0ICAgICAgdGhhdFtpXSA9IDBcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG5cdCAqICovXG5cdEJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG5cdCAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG5cdH1cblx0LyoqXG5cdCAqIEVxdWl2YWxlbnQgdG8gU2xvd0J1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuXHQgKi9cblx0QnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG5cdCAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcblx0ICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcblx0ICAgIGVuY29kaW5nID0gJ3V0ZjgnXG5cdCAgfVxuXHRcblx0ICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuXHQgIH1cblx0XG5cdCAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG5cdCAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cdFxuXHQgIHZhciBhY3R1YWwgPSB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cdFxuXHQgIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuXHQgICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG5cdCAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLlxuXHQgICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG5cdCAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGggPCAwID8gMCA6IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcblx0ICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG5cdCAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyXG5cdFxuXHQgIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ29mZnNldFxcJyBpcyBvdXQgb2YgYm91bmRzJylcblx0ICB9XG5cdFxuXHQgIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuXHQgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG5cdCAgfSBlbHNlIHtcblx0ICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aClcblx0ICB9XG5cdFxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG5cdCAgICB0aGF0ID0gYXJyYXlcblx0ICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG5cdCAgICB0aGF0ID0gZnJvbUFycmF5TGlrZSh0aGF0LCBhcnJheSlcblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqKSB7XG5cdCAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG5cdCAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcblx0ICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuKVxuXHRcblx0ICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICByZXR1cm4gdGhhdFxuXHQgICAgfVxuXHRcblx0ICAgIG9iai5jb3B5KHRoYXQsIDAsIDAsIGxlbilcblx0ICAgIHJldHVybiB0aGF0XG5cdCAgfVxuXHRcblx0ICBpZiAob2JqKSB7XG5cdCAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikge1xuXHQgICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IGlzbmFuKG9iai5sZW5ndGgpKSB7XG5cdCAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iailcblx0ICAgIH1cblx0XG5cdCAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqLmRhdGEpKSB7XG5cdCAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuXHQgIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGgoKWAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuXHQgIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuXHQgIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG5cdCAgfVxuXHQgIHJldHVybiBsZW5ndGggfCAwXG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkge1xuXHQgIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuXHQgICAgbGVuZ3RoID0gMFxuXHQgIH1cblx0ICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG5cdH1cblx0XG5cdEJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG5cdCAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcblx0fVxuXHRcblx0QnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG5cdCAgfVxuXHRcblx0ICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblx0XG5cdCAgdmFyIHggPSBhLmxlbmd0aFxuXHQgIHZhciB5ID0gYi5sZW5ndGhcblx0XG5cdCAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG5cdCAgICAgIHggPSBhW2ldXG5cdCAgICAgIHkgPSBiW2ldXG5cdCAgICAgIGJyZWFrXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoeCA8IHkpIHJldHVybiAtMVxuXHQgIGlmICh5IDwgeCkgcmV0dXJuIDFcblx0ICByZXR1cm4gMFxuXHR9XG5cdFxuXHRCdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG5cdCAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcblx0ICAgIGNhc2UgJ2hleCc6XG5cdCAgICBjYXNlICd1dGY4Jzpcblx0ICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgIGNhc2UgJ2FzY2lpJzpcblx0ICAgIGNhc2UgJ2xhdGluMSc6XG5cdCAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgIGNhc2UgJ3VjczInOlxuXHQgICAgY2FzZSAndWNzLTInOlxuXHQgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICBjYXNlICd1dGYtMTZsZSc6XG5cdCAgICAgIHJldHVybiB0cnVlXG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICByZXR1cm4gZmFsc2Vcblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuXHQgIGlmICghaXNBcnJheShsaXN0KSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcblx0ICB9XG5cdFxuXHQgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuXHQgICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuXHQgIH1cblx0XG5cdCAgdmFyIGlcblx0ICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGxlbmd0aCA9IDBcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG5cdCAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG5cdCAgdmFyIHBvcyA9IDBcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuXHQgICAgdmFyIGJ1ZiA9IGxpc3RbaV1cblx0ICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcblx0ICAgIH1cblx0ICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKVxuXHQgICAgcG9zICs9IGJ1Zi5sZW5ndGhcblx0ICB9XG5cdCAgcmV0dXJuIGJ1ZmZlclxuXHR9XG5cdFxuXHRmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG5cdCAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuXHQgIH1cblx0ICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmXG5cdCAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcblx0ICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aFxuXHQgIH1cblx0ICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHN0cmluZyA9ICcnICsgc3RyaW5nXG5cdCAgfVxuXHRcblx0ICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuXHQgIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cdFxuXHQgIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuXHQgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cdCAgZm9yICg7Oykge1xuXHQgICAgc3dpdGNoIChlbmNvZGluZykge1xuXHQgICAgICBjYXNlICdhc2NpaSc6XG5cdCAgICAgIGNhc2UgJ2xhdGluMSc6XG5cdCAgICAgIGNhc2UgJ2JpbmFyeSc6XG5cdCAgICAgICAgcmV0dXJuIGxlblxuXHQgICAgICBjYXNlICd1dGY4Jzpcblx0ICAgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gbGVuICogMlxuXHQgICAgICBjYXNlICdoZXgnOlxuXHQgICAgICAgIHJldHVybiBsZW4gPj4+IDFcblx0ICAgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG5cdCAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuXHQgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRCdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblx0XG5cdGZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHRcblx0ICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcblx0ICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXHRcblx0ICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmRcblx0ICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG5cdCAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcblx0ICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi5cblx0ICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcblx0ICAgIHN0YXJ0ID0gMFxuXHQgIH1cblx0ICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMlxuXHQgIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG5cdCAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHJldHVybiAnJ1xuXHQgIH1cblx0XG5cdCAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICBlbmQgPSB0aGlzLmxlbmd0aFxuXHQgIH1cblx0XG5cdCAgaWYgKGVuZCA8PSAwKSB7XG5cdCAgICByZXR1cm4gJydcblx0ICB9XG5cdFxuXHQgIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXG5cdCAgZW5kID4+Pj0gMFxuXHQgIHN0YXJ0ID4+Pj0gMFxuXHRcblx0ICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG5cdCAgICByZXR1cm4gJydcblx0ICB9XG5cdFxuXHQgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cdFxuXHQgIHdoaWxlICh0cnVlKSB7XG5cdCAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG5cdCAgICAgIGNhc2UgJ2hleCc6XG5cdCAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICd1dGY4Jzpcblx0ICAgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2FzY2lpJzpcblx0ICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAnbGF0aW4xJzpcblx0ICAgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICd1Y3MyJzpcblx0ICAgICAgY2FzZSAndWNzLTInOlxuXHQgICAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG5cdCAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuXHQgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0Ly8gVGhlIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgYW5kIGBpcy1idWZmZXJgIChpbiBTYWZhcmkgNS03KSB0byBkZXRlY3Rcblx0Ly8gQnVmZmVyIGluc3RhbmNlcy5cblx0QnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cdFxuXHRmdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG5cdCAgdmFyIGkgPSBiW25dXG5cdCAgYltuXSA9IGJbbV1cblx0ICBiW21dID0gaVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKGxlbiAlIDIgIT09IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcblx0ICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG5cdCAgfVxuXHQgIHJldHVybiB0aGlzXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHtcblx0ICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcblx0ICBpZiAobGVuICUgNCAhPT0gMCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcblx0ICB9XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuXHQgICAgc3dhcCh0aGlzLCBpLCBpICsgMylcblx0ICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuXHQgIH1cblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKGxlbiAlIDggIT09IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcblx0ICAgIHN3YXAodGhpcywgaSwgaSArIDcpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcblx0ICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KVxuXHQgICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpXG5cdCAgfVxuXHQgIHJldHVybiB0aGlzXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG5cdCAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuXHQgIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcblx0ICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG5cdCAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG5cdCAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuXHQgIHZhciBzdHIgPSAnJ1xuXHQgIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG5cdCAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuXHQgICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcblx0ICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcblx0ICB9XG5cdCAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcblx0ICB9XG5cdFxuXHQgIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBzdGFydCA9IDBcblx0ICB9XG5cdCAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuXHQgIH1cblx0ICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHRoaXNTdGFydCA9IDBcblx0ICB9XG5cdCAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG5cdCAgfVxuXHRcblx0ICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuXHQgIH1cblx0XG5cdCAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuXHQgICAgcmV0dXJuIDBcblx0ICB9XG5cdCAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG5cdCAgICByZXR1cm4gLTFcblx0ICB9XG5cdCAgaWYgKHN0YXJ0ID49IGVuZCkge1xuXHQgICAgcmV0dXJuIDFcblx0ICB9XG5cdFxuXHQgIHN0YXJ0ID4+Pj0gMFxuXHQgIGVuZCA+Pj49IDBcblx0ICB0aGlzU3RhcnQgPj4+PSAwXG5cdCAgdGhpc0VuZCA+Pj49IDBcblx0XG5cdCAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblx0XG5cdCAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG5cdCAgdmFyIHkgPSBlbmQgLSBzdGFydFxuXHQgIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuXHRcblx0ICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcblx0ICB2YXIgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcblx0ICAgICAgeCA9IHRoaXNDb3B5W2ldXG5cdCAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG5cdCAgICAgIGJyZWFrXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoeCA8IHkpIHJldHVybiAtMVxuXHQgIGlmICh5IDwgeCkgcmV0dXJuIDFcblx0ICByZXR1cm4gMFxuXHR9XG5cdFxuXHQvLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsXG5cdC8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG5cdC8vXG5cdC8vIEFyZ3VtZW50czpcblx0Ly8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcblx0Ly8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcblx0Ly8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyXG5cdC8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG5cdC8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5cdGZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuXHQgIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuXHQgIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblx0XG5cdCAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcblx0ICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXRcblx0ICAgIGJ5dGVPZmZzZXQgPSAwXG5cdCAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuXHQgICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcblx0ICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuXHQgICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG5cdCAgfVxuXHQgIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cblx0ICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHtcblx0ICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxuXHQgICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG5cdCAgfVxuXHRcblx0ICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuXHQgIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG5cdCAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xuXHQgICAgaWYgKGRpcikgcmV0dXJuIC0xXG5cdCAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuXHQgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IDApIHtcblx0ICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG5cdCAgICBlbHNlIHJldHVybiAtMVxuXHQgIH1cblx0XG5cdCAgLy8gTm9ybWFsaXplIHZhbFxuXHQgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcblx0ICB9XG5cdFxuXHQgIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG5cdCAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG5cdCAgICAvLyBTcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZy9idWZmZXIgYWx3YXlzIGZhaWxzXG5cdCAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICByZXR1cm4gLTFcblx0ICAgIH1cblx0ICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuXHQgICAgdmFsID0gdmFsICYgMHhGRiAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXG5cdCAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcblx0ICAgICAgICB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBpZiAoZGlyKSB7XG5cdCAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG5cdCAgfVxuXHRcblx0ICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG5cdCAgdmFyIGluZGV4U2l6ZSA9IDFcblx0ICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aFxuXHQgIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoXG5cdFxuXHQgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuXHQgICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcblx0ICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG5cdCAgICAgIGlmIChhcnIubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoIDwgMikge1xuXHQgICAgICAgIHJldHVybiAtMVxuXHQgICAgICB9XG5cdCAgICAgIGluZGV4U2l6ZSA9IDJcblx0ICAgICAgYXJyTGVuZ3RoIC89IDJcblx0ICAgICAgdmFsTGVuZ3RoIC89IDJcblx0ICAgICAgYnl0ZU9mZnNldCAvPSAyXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcblx0ICAgIGlmIChpbmRleFNpemUgPT09IDEpIHtcblx0ICAgICAgcmV0dXJuIGJ1ZltpXVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSlcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBpXG5cdCAgaWYgKGRpcikge1xuXHQgICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuXHQgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcblx0ICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG5cdCAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleFxuXHQgICAgICAgIGZvdW5kSW5kZXggPSAtMVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG5cdCAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuXHQgICAgICB2YXIgZm91bmQgPSB0cnVlXG5cdCAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7XG5cdCAgICAgICAgICBmb3VuZCA9IGZhbHNlXG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoZm91bmQpIHJldHVybiBpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gLTFcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSAhPT0gLTFcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuXHQgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcblx0ICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG5cdCAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcblx0ICBpZiAoIWxlbmd0aCkge1xuXHQgICAgbGVuZ3RoID0gcmVtYWluaW5nXG5cdCAgfSBlbHNlIHtcblx0ICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG5cdCAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG5cdCAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcblx0ICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuXHQgIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXHRcblx0ICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuXHQgICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG5cdCAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuXHQgICAgaWYgKGlzTmFOKHBhcnNlZCkpIHJldHVybiBpXG5cdCAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcblx0ICB9XG5cdCAgcmV0dXJuIGlcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0ZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0ZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG5cdCAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcblx0ICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGVuY29kaW5nID0gJ3V0ZjgnXG5cdCAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuXHQgICAgb2Zmc2V0ID0gMFxuXHQgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXHQgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIGVuY29kaW5nID0gb2Zmc2V0XG5cdCAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuXHQgICAgb2Zmc2V0ID0gMFxuXHQgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG5cdCAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG5cdCAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuXHQgICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG5cdCAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcblx0ICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG5cdCAgICB9XG5cdCAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoXG5cdCAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcblx0ICAgIClcblx0ICB9XG5cdFxuXHQgIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuXHQgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXHRcblx0ICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcblx0ICB9XG5cdFxuXHQgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cdFxuXHQgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cdCAgZm9yICg7Oykge1xuXHQgICAgc3dpdGNoIChlbmNvZGluZykge1xuXHQgICAgICBjYXNlICdoZXgnOlxuXHQgICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICdhc2NpaSc6XG5cdCAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ2xhdGluMSc6XG5cdCAgICAgIGNhc2UgJ2JpbmFyeSc6XG5cdCAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG5cdCAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICd1Y3MyJzpcblx0ICAgICAgY2FzZSAndWNzLTInOlxuXHQgICAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG5cdCAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuXHQgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICB0eXBlOiAnQnVmZmVyJyxcblx0ICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblx0ICB2YXIgcmVzID0gW11cblx0XG5cdCAgdmFyIGkgPSBzdGFydFxuXHQgIHdoaWxlIChpIDwgZW5kKSB7XG5cdCAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG5cdCAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuXHQgICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG5cdCAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuXHQgICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcblx0ICAgICAgOiAxXG5cdFxuXHQgICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuXHQgICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cdFxuXHQgICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcblx0ICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuXHQgICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cblx0ICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG5cdCAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuXHQgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcblx0ICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cblx0ICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cblx0ICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuXHQgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuXHQgICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuXHQgICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cblx0ICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG5cdCAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuXHQgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcblx0ICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcblx0ICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuXHQgICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG5cdCAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuXHQgICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcblx0ICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcblx0ICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcblx0ICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuXHQgICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuXHQgICAgfVxuXHRcblx0ICAgIHJlcy5wdXNoKGNvZGVQb2ludClcblx0ICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG5cdH1cblx0XG5cdC8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuXHQvLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG5cdC8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcblx0dmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cdFxuXHRmdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcblx0ICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcblx0ICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG5cdCAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcblx0ICB9XG5cdFxuXHQgIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cblx0ICB2YXIgcmVzID0gJydcblx0ICB2YXIgaSA9IDBcblx0ICB3aGlsZSAoaSA8IGxlbikge1xuXHQgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG5cdCAgICAgIFN0cmluZyxcblx0ICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuXHQgICAgKVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciByZXQgPSAnJ1xuXHQgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblx0XG5cdCAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcblx0ICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciByZXQgPSAnJ1xuXHQgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblx0XG5cdCAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcblx0ICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcblx0ICB9XG5cdCAgcmV0dXJuIHJldFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblx0XG5cdCAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuXHQgIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblx0XG5cdCAgdmFyIG91dCA9ICcnXG5cdCAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcblx0ICAgIG91dCArPSB0b0hleChidWZbaV0pXG5cdCAgfVxuXHQgIHJldHVybiBvdXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcblx0ICB2YXIgcmVzID0gJydcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG5cdCAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1Nilcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcblx0ICBzdGFydCA9IH5+c3RhcnRcblx0ICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cdFxuXHQgIGlmIChzdGFydCA8IDApIHtcblx0ICAgIHN0YXJ0ICs9IGxlblxuXHQgICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG5cdCAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuXHQgICAgc3RhcnQgPSBsZW5cblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPCAwKSB7XG5cdCAgICBlbmQgKz0gbGVuXG5cdCAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuXHQgIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG5cdCAgICBlbmQgPSBsZW5cblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblx0XG5cdCAgdmFyIG5ld0J1ZlxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxuXHQgICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcblx0ICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xuXHQgICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBuZXdCdWZcblx0fVxuXHRcblx0Lypcblx0ICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuXHQgIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG5cdCAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF1cblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBpID0gMFxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdCAgfVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcblx0ICB9XG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiB0aGlzW29mZnNldF1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0XG5cdCAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG5cdCAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcblx0ICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG5cdCAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG5cdCAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10pXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF1cblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBpID0gMFxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuXHQgIH1cblx0ICBtdWwgKj0gMHg4MFxuXHRcblx0ICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciBpID0gYnl0ZUxlbmd0aFxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuXHQgIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuXHQgIH1cblx0ICBtdWwgKj0gMHg4MFxuXHRcblx0ICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG5cdCAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuXHQgIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuXHQgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcblx0ICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgM10pXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcblx0ICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG5cdCAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG5cdCAgfVxuXHRcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBpID0gMFxuXHQgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG5cdCAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcblx0ICB9XG5cdFxuXHQgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcblx0ICB2YXIgbXVsID0gMVxuXHQgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcblx0ICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgIHJldHVybiBvZmZzZXQgKyAxXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG5cdCAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuXHQgICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cblx0ICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG5cdCAgfVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0ZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG5cdCAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xuXHQgICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblx0XG5cdCAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcblx0ICB9XG5cdFxuXHQgIHZhciBpID0gMFxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIHN1YiA9IDBcblx0ICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcblx0ICAgICAgc3ViID0gMVxuXHQgICAgfVxuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cdFxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgc3ViID0gMFxuXHQgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG5cdCAgICAgIHN1YiA9IDFcblx0ICAgIH1cblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcblx0ICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgIHJldHVybiBvZmZzZXQgKyAxXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG5cdCAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuXHQgIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG5cdCAgfVxuXHQgIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuXHQgIH1cblx0ICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcblx0ICByZXR1cm4gb2Zmc2V0ICsgOFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHQvLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5cdEJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuXHQgIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuXHQgIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXHRcblx0ICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcblx0ICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcblx0ICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblx0XG5cdCAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuXHQgIGlmICh0YXJnZXRTdGFydCA8IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcblx0ICB9XG5cdCAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXHRcblx0ICAvLyBBcmUgd2Ugb29iP1xuXHQgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcblx0ICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcblx0ICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG5cdCAgfVxuXHRcblx0ICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcblx0ICB2YXIgaVxuXHRcblx0ICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcblx0ICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuXHQgICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcblx0ICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG5cdCAgICAgIHRhcmdldCxcblx0ICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLFxuXHQgICAgICB0YXJnZXRTdGFydFxuXHQgICAgKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGxlblxuXHR9XG5cdFxuXHQvLyBVc2FnZTpcblx0Ly8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG5cdC8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuXHQvLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcblx0QnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuXHQgIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG5cdCAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuXHQgICAgICBlbmNvZGluZyA9IHN0YXJ0XG5cdCAgICAgIHN0YXJ0ID0gMFxuXHQgICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuXHQgICAgICBlbmNvZGluZyA9IGVuZFxuXHQgICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuXHQgICAgfVxuXHQgICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgdmFyIGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKVxuXHQgICAgICBpZiAoY29kZSA8IDI1Nikge1xuXHQgICAgICAgIHZhbCA9IGNvZGVcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcblx0ICAgIH1cblx0ICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIHZhbCA9IHZhbCAmIDI1NVxuXHQgIH1cblx0XG5cdCAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuXG5cdCAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4Jylcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPD0gc3RhcnQpIHtcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfVxuXHRcblx0ICBzdGFydCA9IHN0YXJ0ID4+PiAwXG5cdCAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXHRcblx0ICBpZiAoIXZhbCkgdmFsID0gMFxuXHRcblx0ICB2YXIgaVxuXHQgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuXHQgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuXHQgICAgICB0aGlzW2ldID0gdmFsXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG5cdCAgICAgID8gdmFsXG5cdCAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuXHQgICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcblx0ICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGlzXG5cdH1cblx0XG5cdC8vIEhFTFBFUiBGVU5DVElPTlNcblx0Ly8gPT09PT09PT09PT09PT09PVxuXHRcblx0dmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG5cdCAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG5cdCAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuXHQgIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcblx0ICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuXHQgIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuXHQgIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuXHQgICAgc3RyID0gc3RyICsgJz0nXG5cdCAgfVxuXHQgIHJldHVybiBzdHJcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG5cdCAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuXHQgIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvSGV4IChuKSB7XG5cdCAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG5cdCAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG5cdCAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuXHQgIHZhciBjb2RlUG9pbnRcblx0ICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuXHQgIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXHQgIHZhciBieXRlcyA9IFtdXG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0ICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cdFxuXHQgICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuXHQgICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcblx0ICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcblx0ICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG5cdCAgICAgICAgLy8gbm8gbGVhZCB5ZXRcblx0ICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG5cdCAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG5cdCAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG5cdCAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG5cdCAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB2YWxpZCBsZWFkXG5cdCAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXHRcblx0ICAgICAgICBjb250aW51ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG5cdCAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcblx0ICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcblx0ICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cdCAgICAgICAgY29udGludWVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcblx0ICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuXHQgICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG5cdCAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcblx0ICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICB9XG5cdFxuXHQgICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblx0XG5cdCAgICAvLyBlbmNvZGUgdXRmOFxuXHQgICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuXHQgICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblx0ICAgICAgYnl0ZXMucHVzaChcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcblx0ICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuXHQgICAgICApXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuXHQgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG5cdCAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJ5dGVzXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG5cdCAgdmFyIGJ5dGVBcnJheSA9IFtdXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcblx0ICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuXHQgICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuXHQgIH1cblx0ICByZXR1cm4gYnl0ZUFycmF5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG5cdCAgdmFyIGMsIGhpLCBsb1xuXHQgIHZhciBieXRlQXJyYXkgPSBbXVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG5cdCAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblx0XG5cdCAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcblx0ICAgIGhpID0gYyA+PiA4XG5cdCAgICBsbyA9IGMgJSAyNTZcblx0ICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuXHQgICAgYnl0ZUFycmF5LnB1c2goaGkpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYnl0ZUFycmF5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuXHQgIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuXHQgICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuXHQgICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG5cdCAgfVxuXHQgIHJldHVybiBpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzbmFuICh2YWwpIHtcblx0ICByZXR1cm4gdmFsICE9PSB2YWwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTQpLkJ1ZmZlciwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnXG5cdFxuXHRleHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cdGV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuXHRleHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5XG5cdFxuXHR2YXIgbG9va3VwID0gW11cblx0dmFyIHJldkxvb2t1cCA9IFtdXG5cdHZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXlcblx0XG5cdHZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXG5cdGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgbG9va3VwW2ldID0gY29kZVtpXVxuXHQgIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaVxuXHR9XG5cdFxuXHRyZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjJcblx0cmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cdFxuXHRmdW5jdGlvbiBwbGFjZUhvbGRlcnNDb3VudCAoYjY0KSB7XG5cdCAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcblx0ICBpZiAobGVuICUgNCA+IDApIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG5cdCAgfVxuXHRcblx0ICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuXHQgIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0ICAvLyByZXByZXNlbnQgb25lIGJ5dGVcblx0ICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcblx0ICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdCAgcmV0dXJuIGI2NFtsZW4gLSAyXSA9PT0gJz0nID8gMiA6IGI2NFtsZW4gLSAxXSA9PT0gJz0nID8gMSA6IDBcblx0fVxuXHRcblx0ZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG5cdCAgLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5cdCAgcmV0dXJuIGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVyc0NvdW50KGI2NClcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkge1xuXHQgIHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG5cdCAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcblx0ICBwbGFjZUhvbGRlcnMgPSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG5cdFxuXHQgIGFyciA9IG5ldyBBcnIobGVuICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpXG5cdFxuXHQgIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcblx0ICBsID0gcGxhY2VIb2xkZXJzID4gMCA/IGxlbiAtIDQgOiBsZW5cblx0XG5cdCAgdmFyIEwgPSAwXG5cdFxuXHQgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcblx0ICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuXHQgICAgYXJyW0wrK10gPSAodG1wID4+IDE2KSAmIDB4RkZcblx0ICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcblx0ICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuXHQgIH1cblx0XG5cdCAgaWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuXHQgICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcblx0ICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuXHQgIH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG5cdCAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcblx0ICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcblx0ICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGFyclxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuXHQgIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArIGxvb2t1cFtudW0gJiAweDNGXVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgdG1wXG5cdCAgdmFyIG91dHB1dCA9IFtdXG5cdCAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcblx0ICAgIHRtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcblx0ICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuXHQgIH1cblx0ICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG5cdCAgdmFyIHRtcFxuXHQgIHZhciBsZW4gPSB1aW50OC5sZW5ndGhcblx0ICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcblx0ICB2YXIgb3V0cHV0ID0gJydcblx0ICB2YXIgcGFydHMgPSBbXVxuXHQgIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXHRcblx0ICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG5cdCAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuXHQgICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpKSlcblx0ICB9XG5cdFxuXHQgIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcblx0ICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuXHQgICAgdG1wID0gdWludDhbbGVuIC0gMV1cblx0ICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDJdXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXVxuXHQgICAgb3V0cHV0ICs9ICc9PSdcblx0ICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcblx0ICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArICh1aW50OFtsZW4gLSAxXSlcblx0ICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDEwXVxuXHQgICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl1cblx0ICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdXG5cdCAgICBvdXRwdXQgKz0gJz0nXG5cdCAgfVxuXHRcblx0ICBwYXJ0cy5wdXNoKG91dHB1dClcblx0XG5cdCAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG5cdCAgdmFyIGUsIG1cblx0ICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuXHQgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG5cdCAgdmFyIG5CaXRzID0gLTdcblx0ICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG5cdCAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG5cdCAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblx0XG5cdCAgaSArPSBkXG5cdFxuXHQgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgcyA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBlTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblx0XG5cdCAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcblx0ICBlID4+PSAoLW5CaXRzKVxuXHQgIG5CaXRzICs9IG1MZW5cblx0ICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXHRcblx0ICBpZiAoZSA9PT0gMCkge1xuXHQgICAgZSA9IDEgLSBlQmlhc1xuXHQgIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuXHQgICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcblx0ICAgIGUgPSBlIC0gZUJpYXNcblx0ICB9XG5cdCAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcblx0fVxuXHRcblx0ZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtLCBjXG5cdCAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcblx0ICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuXHQgIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuXHQgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcblx0ICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG5cdCAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG5cdCAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblx0XG5cdCAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblx0XG5cdCAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcblx0ICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuXHQgICAgZSA9IGVNYXhcblx0ICB9IGVsc2Uge1xuXHQgICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG5cdCAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG5cdCAgICAgIGUtLVxuXHQgICAgICBjICo9IDJcblx0ICAgIH1cblx0ICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuXHQgICAgICB2YWx1ZSArPSBydCAvIGNcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuXHQgICAgfVxuXHQgICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG5cdCAgICAgIGUrK1xuXHQgICAgICBjIC89IDJcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcblx0ICAgICAgbSA9IDBcblx0ICAgICAgZSA9IGVNYXhcblx0ICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcblx0ICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICAgIGUgPSBlICsgZUJpYXNcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuXHQgICAgICBlID0gMFxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblx0XG5cdCAgZSA9IChlIDw8IG1MZW4pIHwgbVxuXHQgIGVMZW4gKz0gbUxlblxuXHQgIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblx0XG5cdCAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0gKCkpXG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoKGUpe1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG5cdCAgICAgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3Jcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdFxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpe1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0XG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBjb21wYXJlIGFuZCBpc0J1ZmZlciB0YWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2Jsb2IvNjgwZTllNWU0ODhmMjJhYWMyNzU5OWE1N2RjODQ0YTYzMTU5MjhkZC9pbmRleC5qc1xuXHQvLyBvcmlnaW5hbCBub3RpY2U6XG5cdFxuXHQvKiFcblx0ICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG5cdCAqXG5cdCAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuXHQgKiBAbGljZW5zZSAgTUlUXG5cdCAqL1xuXHRmdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcblx0ICBpZiAoYSA9PT0gYikge1xuXHQgICAgcmV0dXJuIDA7XG5cdCAgfVxuXHRcblx0ICB2YXIgeCA9IGEubGVuZ3RoO1xuXHQgIHZhciB5ID0gYi5sZW5ndGg7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuXHQgICAgICB4ID0gYVtpXTtcblx0ICAgICAgeSA9IGJbaV07XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSB7XG5cdCAgICByZXR1cm4gLTE7XG5cdCAgfVxuXHQgIGlmICh5IDwgeCkge1xuXHQgICAgcmV0dXJuIDE7XG5cdCAgfVxuXHQgIHJldHVybiAwO1xuXHR9XG5cdGZ1bmN0aW9uIGlzQnVmZmVyKGIpIHtcblx0ICBpZiAoZ2xvYmFsLkJ1ZmZlciAmJiB0eXBlb2YgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIoYik7XG5cdCAgfVxuXHQgIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpO1xuXHR9XG5cdFxuXHQvLyBiYXNlZCBvbiBub2RlIGFzc2VydCwgb3JpZ2luYWwgbm90aWNlOlxuXHRcblx0Ly8gaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvVW5pdF9UZXN0aW5nLzEuMFxuXHQvL1xuXHQvLyBUSElTIElTIE5PVCBURVNURUQgTk9SIExJS0VMWSBUTyBXT1JLIE9VVFNJREUgVjghXG5cdC8vXG5cdC8vIE9yaWdpbmFsbHkgZnJvbSBuYXJ3aGFsLmpzIChodHRwOi8vbmFyd2hhbGpzLm9yZylcblx0Ly8gQ29weXJpZ2h0IChjKSAyMDA5IFRob21hcyBSb2JpbnNvbiA8Mjgwbm9ydGguY29tPlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5cdC8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0b1xuXHQvLyBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZVxuXHQvLyByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Jcblx0Ly8gc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcblx0Ly8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cblx0Ly8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5cdC8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuXHQvLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcblx0Ly8gQVVUSE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU5cblx0Ly8gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuXHQvLyBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHR2YXIgcFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXHR2YXIgZnVuY3Rpb25zSGF2ZU5hbWVzID0gKGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gZm9vKCkge30ubmFtZSA9PT0gJ2Zvbyc7XG5cdH0oKSk7XG5cdGZ1bmN0aW9uIHBUb1N0cmluZyAob2JqKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopO1xuXHR9XG5cdGZ1bmN0aW9uIGlzVmlldyhhcnJidWYpIHtcblx0ICBpZiAoaXNCdWZmZXIoYXJyYnVmKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhhcnJidWYpO1xuXHQgIH1cblx0ICBpZiAoIWFycmJ1Zikge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBpZiAoYXJyYnVmIGluc3RhbmNlb2YgRGF0YVZpZXcpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICBpZiAoYXJyYnVmLmJ1ZmZlciAmJiBhcnJidWYuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0Ly8gMS4gVGhlIGFzc2VydCBtb2R1bGUgcHJvdmlkZXMgZnVuY3Rpb25zIHRoYXQgdGhyb3dcblx0Ly8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlXG5cdC8vIGFzc2VydCBtb2R1bGUgbXVzdCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlLlxuXHRcblx0dmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7XG5cdFxuXHQvLyAyLiBUaGUgQXNzZXJ0aW9uRXJyb3IgaXMgZGVmaW5lZCBpbiBhc3NlcnQuXG5cdC8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiBhY3R1YWwsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQgfSlcblx0XG5cdHZhciByZWdleCA9IC9cXHMqZnVuY3Rpb25cXHMrKFteXFwoXFxzXSopXFxzKi87XG5cdC8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9samhhcmIvZnVuY3Rpb24ucHJvdG90eXBlLm5hbWUvYmxvYi9hZGVlZWVjOGJmY2M2MDY4YjE4N2Q3ZDlmYjNkNWJiMWQzYTMwODk5L2ltcGxlbWVudGF0aW9uLmpzXG5cdGZ1bmN0aW9uIGdldE5hbWUoZnVuYykge1xuXHQgIGlmICghdXRpbC5pc0Z1bmN0aW9uKGZ1bmMpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMpIHtcblx0ICAgIHJldHVybiBmdW5jLm5hbWU7XG5cdCAgfVxuXHQgIHZhciBzdHIgPSBmdW5jLnRvU3RyaW5nKCk7XG5cdCAgdmFyIG1hdGNoID0gc3RyLm1hdGNoKHJlZ2V4KTtcblx0ICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV07XG5cdH1cblx0YXNzZXJ0LkFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3Iob3B0aW9ucykge1xuXHQgIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG5cdCAgdGhpcy5hY3R1YWwgPSBvcHRpb25zLmFjdHVhbDtcblx0ICB0aGlzLmV4cGVjdGVkID0gb3B0aW9ucy5leHBlY3RlZDtcblx0ICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjtcblx0ICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7XG5cdCAgICB0aGlzLm1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7XG5cdCAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5tZXNzYWdlID0gZ2V0TWVzc2FnZSh0aGlzKTtcblx0ICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7XG5cdCAgfVxuXHQgIHZhciBzdGFja1N0YXJ0RnVuY3Rpb24gPSBvcHRpb25zLnN0YWNrU3RhcnRGdW5jdGlvbiB8fCBmYWlsO1xuXHQgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuXHQgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3RhY2tTdGFydEZ1bmN0aW9uKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gbm9uIHY4IGJyb3dzZXJzIHNvIHdlIGNhbiBoYXZlIGEgc3RhY2t0cmFjZVxuXHQgICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuXHQgICAgaWYgKGVyci5zdGFjaykge1xuXHQgICAgICB2YXIgb3V0ID0gZXJyLnN0YWNrO1xuXHRcblx0ICAgICAgLy8gdHJ5IHRvIHN0cmlwIHVzZWxlc3MgZnJhbWVzXG5cdCAgICAgIHZhciBmbl9uYW1lID0gZ2V0TmFtZShzdGFja1N0YXJ0RnVuY3Rpb24pO1xuXHQgICAgICB2YXIgaWR4ID0gb3V0LmluZGV4T2YoJ1xcbicgKyBmbl9uYW1lKTtcblx0ICAgICAgaWYgKGlkeCA+PSAwKSB7XG5cdCAgICAgICAgLy8gb25jZSB3ZSBoYXZlIGxvY2F0ZWQgdGhlIGZ1bmN0aW9uIGZyYW1lXG5cdCAgICAgICAgLy8gd2UgbmVlZCB0byBzdHJpcCBvdXQgZXZlcnl0aGluZyBiZWZvcmUgaXQgKGFuZCBpdHMgbGluZSlcblx0ICAgICAgICB2YXIgbmV4dF9saW5lID0gb3V0LmluZGV4T2YoJ1xcbicsIGlkeCArIDEpO1xuXHQgICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcobmV4dF9saW5lICsgMSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuc3RhY2sgPSBvdXQ7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gYXNzZXJ0LkFzc2VydGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3Jcblx0dXRpbC5pbmhlcml0cyhhc3NlcnQuQXNzZXJ0aW9uRXJyb3IsIEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIHRydW5jYXRlKHMsIG4pIHtcblx0ICBpZiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gcy5sZW5ndGggPCBuID8gcyA6IHMuc2xpY2UoMCwgbik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBzO1xuXHQgIH1cblx0fVxuXHRmdW5jdGlvbiBpbnNwZWN0KHNvbWV0aGluZykge1xuXHQgIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMgfHwgIXV0aWwuaXNGdW5jdGlvbihzb21ldGhpbmcpKSB7XG5cdCAgICByZXR1cm4gdXRpbC5pbnNwZWN0KHNvbWV0aGluZyk7XG5cdCAgfVxuXHQgIHZhciByYXduYW1lID0gZ2V0TmFtZShzb21ldGhpbmcpO1xuXHQgIHZhciBuYW1lID0gcmF3bmFtZSA/ICc6ICcgKyByYXduYW1lIDogJyc7XG5cdCAgcmV0dXJuICdbRnVuY3Rpb24nICsgIG5hbWUgKyAnXSc7XG5cdH1cblx0ZnVuY3Rpb24gZ2V0TWVzc2FnZShzZWxmKSB7XG5cdCAgcmV0dXJuIHRydW5jYXRlKGluc3BlY3Qoc2VsZi5hY3R1YWwpLCAxMjgpICsgJyAnICtcblx0ICAgICAgICAgc2VsZi5vcGVyYXRvciArICcgJyArXG5cdCAgICAgICAgIHRydW5jYXRlKGluc3BlY3Qoc2VsZi5leHBlY3RlZCksIDEyOCk7XG5cdH1cblx0XG5cdC8vIEF0IHByZXNlbnQgb25seSB0aGUgdGhyZWUga2V5cyBtZW50aW9uZWQgYWJvdmUgYXJlIHVzZWQgYW5kXG5cdC8vIHVuZGVyc3Rvb2QgYnkgdGhlIHNwZWMuIEltcGxlbWVudGF0aW9ucyBvciBzdWIgbW9kdWxlcyBjYW4gcGFzc1xuXHQvLyBvdGhlciBrZXlzIHRvIHRoZSBBc3NlcnRpb25FcnJvcidzIGNvbnN0cnVjdG9yIC0gdGhleSB3aWxsIGJlXG5cdC8vIGlnbm9yZWQuXG5cdFxuXHQvLyAzLiBBbGwgb2YgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgbXVzdCB0aHJvdyBhbiBBc3NlcnRpb25FcnJvclxuXHQvLyB3aGVuIGEgY29ycmVzcG9uZGluZyBjb25kaXRpb24gaXMgbm90IG1ldCwgd2l0aCBhIG1lc3NhZ2UgdGhhdFxuXHQvLyBtYXkgYmUgdW5kZWZpbmVkIGlmIG5vdCBwcm92aWRlZC4gIEFsbCBhc3NlcnRpb24gbWV0aG9kcyBwcm92aWRlXG5cdC8vIGJvdGggdGhlIGFjdHVhbCBhbmQgZXhwZWN0ZWQgdmFsdWVzIHRvIHRoZSBhc3NlcnRpb24gZXJyb3IgZm9yXG5cdC8vIGRpc3BsYXkgcHVycG9zZXMuXG5cdFxuXHRmdW5jdGlvbiBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yLCBzdGFja1N0YXJ0RnVuY3Rpb24pIHtcblx0ICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHtcblx0ICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdCAgICBhY3R1YWw6IGFjdHVhbCxcblx0ICAgIGV4cGVjdGVkOiBleHBlY3RlZCxcblx0ICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcblx0ICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogc3RhY2tTdGFydEZ1bmN0aW9uXG5cdCAgfSk7XG5cdH1cblx0XG5cdC8vIEVYVEVOU0lPTiEgYWxsb3dzIGZvciB3ZWxsIGJlaGF2ZWQgZXJyb3JzIGRlZmluZWQgZWxzZXdoZXJlLlxuXHRhc3NlcnQuZmFpbCA9IGZhaWw7XG5cdFxuXHQvLyA0LiBQdXJlIGFzc2VydGlvbiB0ZXN0cyB3aGV0aGVyIGEgdmFsdWUgaXMgdHJ1dGh5LCBhcyBkZXRlcm1pbmVkXG5cdC8vIGJ5ICEhZ3VhcmQuXG5cdC8vIGFzc2VydC5vayhndWFyZCwgbWVzc2FnZV9vcHQpO1xuXHQvLyBUaGlzIHN0YXRlbWVudCBpcyBlcXVpdmFsZW50IHRvIGFzc2VydC5lcXVhbCh0cnVlLCAhIWd1YXJkLFxuXHQvLyBtZXNzYWdlX29wdCk7LiBUbyB0ZXN0IHN0cmljdGx5IGZvciB0aGUgdmFsdWUgdHJ1ZSwgdXNlXG5cdC8vIGFzc2VydC5zdHJpY3RFcXVhbCh0cnVlLCBndWFyZCwgbWVzc2FnZV9vcHQpOy5cblx0XG5cdGZ1bmN0aW9uIG9rKHZhbHVlLCBtZXNzYWdlKSB7XG5cdCAgaWYgKCF2YWx1ZSkgZmFpbCh2YWx1ZSwgdHJ1ZSwgbWVzc2FnZSwgJz09JywgYXNzZXJ0Lm9rKTtcblx0fVxuXHRhc3NlcnQub2sgPSBvaztcblx0XG5cdC8vIDUuIFRoZSBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc2hhbGxvdywgY29lcmNpdmUgZXF1YWxpdHkgd2l0aFxuXHQvLyA9PS5cblx0Ly8gYXNzZXJ0LmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoYWN0dWFsICE9IGV4cGVjdGVkKSBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5lcXVhbCk7XG5cdH07XG5cdFxuXHQvLyA2LiBUaGUgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igd2hldGhlciB0d28gb2JqZWN0cyBhcmUgbm90IGVxdWFsXG5cdC8vIHdpdGggIT0gYXNzZXJ0Lm5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5ub3RFcXVhbCA9IGZ1bmN0aW9uIG5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoYWN0dWFsID09IGV4cGVjdGVkKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPScsIGFzc2VydC5ub3RFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gNy4gVGhlIGVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBhIGRlZXAgZXF1YWxpdHkgcmVsYXRpb24uXG5cdC8vIGFzc2VydC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIGRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIGZhbHNlKSkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0YXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIGRlZXBTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHRydWUpKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwU3RyaWN0RXF1YWwnLCBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHN0cmljdCwgbWVtb3MpIHtcblx0ICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cblx0ICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfSBlbHNlIGlmIChpc0J1ZmZlcihhY3R1YWwpICYmIGlzQnVmZmVyKGV4cGVjdGVkKSkge1xuXHQgICAgcmV0dXJuIGNvbXBhcmUoYWN0dWFsLCBleHBlY3RlZCkgPT09IDA7XG5cdFxuXHQgIC8vIDcuMi4gSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgRGF0ZSBvYmplY3QsIHRoZSBhY3R1YWwgdmFsdWUgaXNcblx0ICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBEYXRlIG9iamVjdCB0aGF0IHJlZmVycyB0byB0aGUgc2FtZSB0aW1lLlxuXHQgIH0gZWxzZSBpZiAodXRpbC5pc0RhdGUoYWN0dWFsKSAmJiB1dGlsLmlzRGF0ZShleHBlY3RlZCkpIHtcblx0ICAgIHJldHVybiBhY3R1YWwuZ2V0VGltZSgpID09PSBleHBlY3RlZC5nZXRUaW1lKCk7XG5cdFxuXHQgIC8vIDcuMyBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG5cdCAgLy8gZXF1aXZhbGVudCBpZiBpdCBpcyBhbHNvIGEgUmVnRXhwIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNvdXJjZSBhbmRcblx0ICAvLyBwcm9wZXJ0aWVzIChgZ2xvYmFsYCwgYG11bHRpbGluZWAsIGBsYXN0SW5kZXhgLCBgaWdub3JlQ2FzZWApLlxuXHQgIH0gZWxzZSBpZiAodXRpbC5pc1JlZ0V4cChhY3R1YWwpICYmIHV0aWwuaXNSZWdFeHAoZXhwZWN0ZWQpKSB7XG5cdCAgICByZXR1cm4gYWN0dWFsLnNvdXJjZSA9PT0gZXhwZWN0ZWQuc291cmNlICYmXG5cdCAgICAgICAgICAgYWN0dWFsLmdsb2JhbCA9PT0gZXhwZWN0ZWQuZ2xvYmFsICYmXG5cdCAgICAgICAgICAgYWN0dWFsLm11bHRpbGluZSA9PT0gZXhwZWN0ZWQubXVsdGlsaW5lICYmXG5cdCAgICAgICAgICAgYWN0dWFsLmxhc3RJbmRleCA9PT0gZXhwZWN0ZWQubGFzdEluZGV4ICYmXG5cdCAgICAgICAgICAgYWN0dWFsLmlnbm9yZUNhc2UgPT09IGV4cGVjdGVkLmlnbm9yZUNhc2U7XG5cdFxuXHQgIC8vIDcuNC4gT3RoZXIgcGFpcnMgdGhhdCBkbyBub3QgYm90aCBwYXNzIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jyxcblx0ICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuXHQgIH0gZWxzZSBpZiAoKGFjdHVhbCA9PT0gbnVsbCB8fCB0eXBlb2YgYWN0dWFsICE9PSAnb2JqZWN0JykgJiZcblx0ICAgICAgICAgICAgIChleHBlY3RlZCA9PT0gbnVsbCB8fCB0eXBlb2YgZXhwZWN0ZWQgIT09ICdvYmplY3QnKSkge1xuXHQgICAgcmV0dXJuIHN0cmljdCA/IGFjdHVhbCA9PT0gZXhwZWN0ZWQgOiBhY3R1YWwgPT0gZXhwZWN0ZWQ7XG5cdFxuXHQgIC8vIElmIGJvdGggdmFsdWVzIGFyZSBpbnN0YW5jZXMgb2YgdHlwZWQgYXJyYXlzLCB3cmFwIHRoZWlyIHVuZGVybHlpbmdcblx0ICAvLyBBcnJheUJ1ZmZlcnMgaW4gYSBCdWZmZXIgZWFjaCB0byBpbmNyZWFzZSBwZXJmb3JtYW5jZVxuXHQgIC8vIFRoaXMgb3B0aW1pemF0aW9uIHJlcXVpcmVzIHRoZSBhcnJheXMgdG8gaGF2ZSB0aGUgc2FtZSB0eXBlIGFzIGNoZWNrZWQgYnlcblx0ICAvLyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIChha2EgcFRvU3RyaW5nKS4gTmV2ZXIgcGVyZm9ybSBiaW5hcnlcblx0ICAvLyBjb21wYXJpc29ucyBmb3IgRmxvYXQqQXJyYXlzLCB0aG91Z2gsIHNpbmNlIGUuZy4gKzAgPT09IC0wIGJ1dCB0aGVpclxuXHQgIC8vIGJpdCBwYXR0ZXJucyBhcmUgbm90IGlkZW50aWNhbC5cblx0ICB9IGVsc2UgaWYgKGlzVmlldyhhY3R1YWwpICYmIGlzVmlldyhleHBlY3RlZCkgJiZcblx0ICAgICAgICAgICAgIHBUb1N0cmluZyhhY3R1YWwpID09PSBwVG9TdHJpbmcoZXhwZWN0ZWQpICYmXG5cdCAgICAgICAgICAgICAhKGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSB8fFxuXHQgICAgICAgICAgICAgICBhY3R1YWwgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpKSB7XG5cdCAgICByZXR1cm4gY29tcGFyZShuZXcgVWludDhBcnJheShhY3R1YWwuYnVmZmVyKSxcblx0ICAgICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KGV4cGVjdGVkLmJ1ZmZlcikpID09PSAwO1xuXHRcblx0ICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuXHQgIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZFxuXHQgIC8vIHdpdGggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKSwgdGhlIHNhbWUgc2V0IG9mIGtleXNcblx0ICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG5cdCAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXNcblx0ICAvLyBhY2NvdW50cyBmb3IgYm90aCBuYW1lZCBhbmQgaW5kZXhlZCBwcm9wZXJ0aWVzIG9uIEFycmF5cy5cblx0ICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgIT09IGlzQnVmZmVyKGV4cGVjdGVkKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBtZW1vcyA9IG1lbW9zIHx8IHthY3R1YWw6IFtdLCBleHBlY3RlZDogW119O1xuXHRcblx0ICAgIHZhciBhY3R1YWxJbmRleCA9IG1lbW9zLmFjdHVhbC5pbmRleE9mKGFjdHVhbCk7XG5cdCAgICBpZiAoYWN0dWFsSW5kZXggIT09IC0xKSB7XG5cdCAgICAgIGlmIChhY3R1YWxJbmRleCA9PT0gbWVtb3MuZXhwZWN0ZWQuaW5kZXhPZihleHBlY3RlZCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIG1lbW9zLmFjdHVhbC5wdXNoKGFjdHVhbCk7XG5cdCAgICBtZW1vcy5leHBlY3RlZC5wdXNoKGV4cGVjdGVkKTtcblx0XG5cdCAgICByZXR1cm4gb2JqRXF1aXYoYWN0dWFsLCBleHBlY3RlZCwgc3RyaWN0LCBtZW1vcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0FyZ3VtZW50cyhvYmplY3QpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9iakVxdWl2KGEsIGIsIHN0cmljdCwgYWN0dWFsVmlzaXRlZE9iamVjdHMpIHtcblx0ICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgLy8gaWYgb25lIGlzIGEgcHJpbWl0aXZlLCB0aGUgb3RoZXIgbXVzdCBiZSBzYW1lXG5cdCAgaWYgKHV0aWwuaXNQcmltaXRpdmUoYSkgfHwgdXRpbC5pc1ByaW1pdGl2ZShiKSlcblx0ICAgIHJldHVybiBhID09PSBiO1xuXHQgIGlmIChzdHJpY3QgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGEpICE9PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgdmFyIGFJc0FyZ3MgPSBpc0FyZ3VtZW50cyhhKTtcblx0ICB2YXIgYklzQXJncyA9IGlzQXJndW1lbnRzKGIpO1xuXHQgIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIGlmIChhSXNBcmdzKSB7XG5cdCAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG5cdCAgICBiID0gcFNsaWNlLmNhbGwoYik7XG5cdCAgICByZXR1cm4gX2RlZXBFcXVhbChhLCBiLCBzdHJpY3QpO1xuXHQgIH1cblx0ICB2YXIga2EgPSBvYmplY3RLZXlzKGEpO1xuXHQgIHZhciBrYiA9IG9iamVjdEtleXMoYik7XG5cdCAgdmFyIGtleSwgaTtcblx0ICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG5cdCAgLy8gaGFzT3duUHJvcGVydHkpXG5cdCAgaWYgKGthLmxlbmd0aCAhPT0ga2IubGVuZ3RoKVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksXG5cdCAga2Euc29ydCgpO1xuXHQgIGtiLnNvcnQoKTtcblx0ICAvL35+fmNoZWFwIGtleSB0ZXN0XG5cdCAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgIGlmIChrYVtpXSAhPT0ga2JbaV0pXG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLy9lcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnkgY29ycmVzcG9uZGluZyBrZXksIGFuZFxuXHQgIC8vfn5+cG9zc2libHkgZXhwZW5zaXZlIGRlZXAgdGVzdFxuXHQgIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBrZXkgPSBrYVtpXTtcblx0ICAgIGlmICghX2RlZXBFcXVhbChhW2tleV0sIGJba2V5XSwgc3RyaWN0LCBhY3R1YWxWaXNpdGVkT2JqZWN0cykpXG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8vIDguIFRoZSBub24tZXF1aXZhbGVuY2UgYXNzZXJ0aW9uIHRlc3RzIGZvciBhbnkgZGVlcCBpbmVxdWFsaXR5LlxuXHQvLyBhc3NlcnQubm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5ub3REZWVwRXF1YWwgPSBmdW5jdGlvbiBub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmIChfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIGZhbHNlKSkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcEVxdWFsJywgYXNzZXJ0Lm5vdERlZXBFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0YXNzZXJ0Lm5vdERlZXBTdHJpY3RFcXVhbCA9IG5vdERlZXBTdHJpY3RFcXVhbDtcblx0ZnVuY3Rpb24gbm90RGVlcFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcFN0cmljdEVxdWFsJywgbm90RGVlcFN0cmljdEVxdWFsKTtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHQvLyA5LiBUaGUgc3RyaWN0IGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzdHJpY3QgZXF1YWxpdHksIGFzIGRldGVybWluZWQgYnkgPT09LlxuXHQvLyBhc3NlcnQuc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0LnN0cmljdEVxdWFsID0gZnVuY3Rpb24gc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmIChhY3R1YWwgIT09IGV4cGVjdGVkKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PT0nLCBhc3NlcnQuc3RyaWN0RXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIDEwLiBUaGUgc3RyaWN0IG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHN0cmljdCBpbmVxdWFsaXR5LCBhc1xuXHQvLyBkZXRlcm1pbmVkIGJ5ICE9PS4gIGFzc2VydC5ub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9PScsIGFzc2VydC5ub3RTdHJpY3RFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkge1xuXHQgIGlmICghYWN0dWFsIHx8ICFleHBlY3RlZCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChleHBlY3RlZCkgPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcblx0ICAgIHJldHVybiBleHBlY3RlZC50ZXN0KGFjdHVhbCk7XG5cdCAgfVxuXHRcblx0ICB0cnkge1xuXHQgICAgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIC8vIElnbm9yZS4gIFRoZSBpbnN0YW5jZW9mIGNoZWNrIGRvZXNuJ3Qgd29yayBmb3IgYXJyb3cgZnVuY3Rpb25zLlxuXHQgIH1cblx0XG5cdCAgaWYgKEVycm9yLmlzUHJvdG90eXBlT2YoZXhwZWN0ZWQpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX3RyeUJsb2NrKGJsb2NrKSB7XG5cdCAgdmFyIGVycm9yO1xuXHQgIHRyeSB7XG5cdCAgICBibG9jaygpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGVycm9yID0gZTtcblx0ICB9XG5cdCAgcmV0dXJuIGVycm9yO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfdGhyb3dzKHNob3VsZFRocm93LCBibG9jaywgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICB2YXIgYWN0dWFsO1xuXHRcblx0ICBpZiAodHlwZW9mIGJsb2NrICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJsb2NrXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIGV4cGVjdGVkID09PSAnc3RyaW5nJykge1xuXHQgICAgbWVzc2FnZSA9IGV4cGVjdGVkO1xuXHQgICAgZXhwZWN0ZWQgPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgYWN0dWFsID0gX3RyeUJsb2NrKGJsb2NrKTtcblx0XG5cdCAgbWVzc2FnZSA9IChleHBlY3RlZCAmJiBleHBlY3RlZC5uYW1lID8gJyAoJyArIGV4cGVjdGVkLm5hbWUgKyAnKS4nIDogJy4nKSArXG5cdCAgICAgICAgICAgIChtZXNzYWdlID8gJyAnICsgbWVzc2FnZSA6ICcuJyk7XG5cdFxuXHQgIGlmIChzaG91bGRUaHJvdyAmJiAhYWN0dWFsKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsICdNaXNzaW5nIGV4cGVjdGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcblx0ICB9XG5cdFxuXHQgIHZhciB1c2VyUHJvdmlkZWRNZXNzYWdlID0gdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnO1xuXHQgIHZhciBpc1Vud2FudGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIHV0aWwuaXNFcnJvcihhY3R1YWwpO1xuXHQgIHZhciBpc1VuZXhwZWN0ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmICFleHBlY3RlZDtcblx0XG5cdCAgaWYgKChpc1Vud2FudGVkRXhjZXB0aW9uICYmXG5cdCAgICAgIHVzZXJQcm92aWRlZE1lc3NhZ2UgJiZcblx0ICAgICAgZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkpIHx8XG5cdCAgICAgIGlzVW5leHBlY3RlZEV4Y2VwdGlvbikge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcblx0ICB9XG5cdFxuXHQgIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmXG5cdCAgICAgICFleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHwgKCFzaG91bGRUaHJvdyAmJiBhY3R1YWwpKSB7XG5cdCAgICB0aHJvdyBhY3R1YWw7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6XG5cdC8vIGFzc2VydC50aHJvd3MoYmxvY2ssIEVycm9yX29wdCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuXHQgIF90aHJvd3ModHJ1ZSwgYmxvY2ssIGVycm9yLCBtZXNzYWdlKTtcblx0fTtcblx0XG5cdC8vIEVYVEVOU0lPTiEgVGhpcyBpcyBhbm5veWluZyB0byB3cml0ZSBvdXRzaWRlIHRoaXMgbW9kdWxlLlxuXHRhc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG5cdCAgX3Rocm93cyhmYWxzZSwgYmxvY2ssIGVycm9yLCBtZXNzYWdlKTtcblx0fTtcblx0XG5cdGFzc2VydC5pZkVycm9yID0gZnVuY3Rpb24oZXJyKSB7IGlmIChlcnIpIHRocm93IGVycjsgfTtcblx0XG5cdHZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuXHQgIHZhciBrZXlzID0gW107XG5cdCAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgaWYgKGhhc093bi5jYWxsKG9iaiwga2V5KSkga2V5cy5wdXNoKGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiBrZXlzO1xuXHR9O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0dmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5cdGV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikge1xuXHQgIGlmICghaXNTdHJpbmcoZikpIHtcblx0ICAgIHZhciBvYmplY3RzID0gW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTtcblx0ICB9XG5cdFxuXHQgIHZhciBpID0gMTtcblx0ICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0ICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG5cdCAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkge1xuXHQgICAgaWYgKHggPT09ICclJScpIHJldHVybiAnJSc7XG5cdCAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuXHQgICAgc3dpdGNoICh4KSB7XG5cdCAgICAgIGNhc2UgJyVzJzogcmV0dXJuIFN0cmluZyhhcmdzW2krK10pO1xuXHQgICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcblx0ICAgICAgY2FzZSAnJWonOlxuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcblx0ICAgICAgICB9IGNhdGNoIChfKSB7XG5cdCAgICAgICAgICByZXR1cm4gJ1tDaXJjdWxhcl0nO1xuXHQgICAgICAgIH1cblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICByZXR1cm4geDtcblx0ICAgIH1cblx0ICB9KTtcblx0ICBmb3IgKHZhciB4ID0gYXJnc1tpXTsgaSA8IGxlbjsgeCA9IGFyZ3NbKytpXSkge1xuXHQgICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcblx0ICAgICAgc3RyICs9ICcgJyArIHg7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHN0cjtcblx0fTtcblx0XG5cdFxuXHQvLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuXHQvLyBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LlxuXHQvLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuXHRleHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHtcblx0ICAvLyBBbGxvdyBmb3IgZGVwcmVjYXRpbmcgdGhpbmdzIGluIHRoZSBwcm9jZXNzIG9mIHN0YXJ0aW5nIHVwLlxuXHQgIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIGV4cG9ydHMuZGVwcmVjYXRlKGZuLCBtc2cpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuXHQgICAgcmV0dXJuIGZuO1xuXHQgIH1cblx0XG5cdCAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuXHQgIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7XG5cdCAgICBpZiAoIXdhcm5lZCkge1xuXHQgICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG5cdCAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcblx0ICAgICAgfVxuXHQgICAgICB3YXJuZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGVwcmVjYXRlZDtcblx0fTtcblx0XG5cdFxuXHR2YXIgZGVidWdzID0ge307XG5cdHZhciBkZWJ1Z0Vudmlyb247XG5cdGV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHtcblx0ICBpZiAoaXNVbmRlZmluZWQoZGVidWdFbnZpcm9uKSlcblx0ICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG5cdCAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG5cdCAgaWYgKCFkZWJ1Z3Nbc2V0XSkge1xuXHQgICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG5cdCAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDtcblx0ICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGRlYnVnc1tzZXRdO1xuXHR9O1xuXHRcblx0XG5cdC8qKlxuXHQgKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG5cdCAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuXHQgKi9cblx0LyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuXHRmdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykge1xuXHQgIC8vIGRlZmF1bHQgb3B0aW9uc1xuXHQgIHZhciBjdHggPSB7XG5cdCAgICBzZWVuOiBbXSxcblx0ICAgIHN0eWxpemU6IHN0eWxpemVOb0NvbG9yXG5cdCAgfTtcblx0ICAvLyBsZWdhY3kuLi5cblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBjdHguZGVwdGggPSBhcmd1bWVudHNbMl07XG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcblx0ICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7XG5cdCAgICAvLyBsZWdhY3kuLi5cblx0ICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcblx0ICB9IGVsc2UgaWYgKG9wdHMpIHtcblx0ICAgIC8vIGdvdCBhbiBcIm9wdGlvbnNcIiBvYmplY3Rcblx0ICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuXHQgIH1cblx0ICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcblx0ICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcblx0ICBpZiAoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpIGN0eC5jb2xvcnMgPSBmYWxzZTtcblx0ICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG5cdCAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcblx0ICByZXR1cm4gZm9ybWF0VmFsdWUoY3R4LCBvYmosIGN0eC5kZXB0aCk7XG5cdH1cblx0ZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDtcblx0XG5cdFxuXHQvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncblx0aW5zcGVjdC5jb2xvcnMgPSB7XG5cdCAgJ2JvbGQnIDogWzEsIDIyXSxcblx0ICAnaXRhbGljJyA6IFszLCAyM10sXG5cdCAgJ3VuZGVybGluZScgOiBbNCwgMjRdLFxuXHQgICdpbnZlcnNlJyA6IFs3LCAyN10sXG5cdCAgJ3doaXRlJyA6IFszNywgMzldLFxuXHQgICdncmV5JyA6IFs5MCwgMzldLFxuXHQgICdibGFjaycgOiBbMzAsIDM5XSxcblx0ICAnYmx1ZScgOiBbMzQsIDM5XSxcblx0ICAnY3lhbicgOiBbMzYsIDM5XSxcblx0ICAnZ3JlZW4nIDogWzMyLCAzOV0sXG5cdCAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG5cdCAgJ3JlZCcgOiBbMzEsIDM5XSxcblx0ICAneWVsbG93JyA6IFszMywgMzldXG5cdH07XG5cdFxuXHQvLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcblx0aW5zcGVjdC5zdHlsZXMgPSB7XG5cdCAgJ3NwZWNpYWwnOiAnY3lhbicsXG5cdCAgJ251bWJlcic6ICd5ZWxsb3cnLFxuXHQgICdib29sZWFuJzogJ3llbGxvdycsXG5cdCAgJ3VuZGVmaW5lZCc6ICdncmV5Jyxcblx0ICAnbnVsbCc6ICdib2xkJyxcblx0ICAnc3RyaW5nJzogJ2dyZWVuJyxcblx0ICAnZGF0ZSc6ICdtYWdlbnRhJyxcblx0ICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuXHQgICdyZWdleHAnOiAncmVkJ1xuXHR9O1xuXHRcblx0XG5cdGZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcblx0ICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXHRcblx0ICBpZiAoc3R5bGUpIHtcblx0ICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcblx0ICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gc3RyO1xuXHQgIH1cblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIHN0eWxpemVOb0NvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG5cdCAgcmV0dXJuIHN0cjtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7XG5cdCAgdmFyIGhhc2ggPSB7fTtcblx0XG5cdCAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuXHQgICAgaGFzaFt2YWxdID0gdHJ1ZTtcblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGhhc2g7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcblx0ICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG5cdCAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG5cdCAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG5cdCAgICAgIHZhbHVlICYmXG5cdCAgICAgIGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiZcblx0ICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG5cdCAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuXHQgICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay5cblx0ICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuXHQgICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuXHQgICAgaWYgKCFpc1N0cmluZyhyZXQpKSB7XG5cdCAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJldDtcblx0ICB9XG5cdFxuXHQgIC8vIFByaW1pdGl2ZSB0eXBlcyBjYW5ub3QgaGF2ZSBwcm9wZXJ0aWVzXG5cdCAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcblx0ICBpZiAocHJpbWl0aXZlKSB7XG5cdCAgICByZXR1cm4gcHJpbWl0aXZlO1xuXHQgIH1cblx0XG5cdCAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LlxuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuXHQgIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXHRcblx0ICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcblx0ICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG5cdCAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2R3dzUyc2J0KHY9dnMuOTQpLmFzcHhcblx0ICBpZiAoaXNFcnJvcih2YWx1ZSlcblx0ICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG5cdCAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuXHQgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICAgIHZhciBuYW1lID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG5cdCAgICB9XG5cdCAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG5cdCAgICB9XG5cdCAgICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG5cdCAgICB9XG5cdCAgICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cdFxuXHQgIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIGFycmF5ID0gdHJ1ZTtcblx0ICAgIGJyYWNlcyA9IFsnWycsICddJ107XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcblx0ICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0ICAgIHZhciBuID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG5cdCAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG5cdCAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuXHQgICAgYmFzZSA9ICcgJyArIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIGRhdGVzIHdpdGggcHJvcGVydGllcyBmaXJzdCBzYXkgdGhlIGRhdGVcblx0ICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuXHQgICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuXHQgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuXHQgICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuXHQgICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG5cdCAgfVxuXHRcblx0ICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuXHQgICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbT2JqZWN0XScsICdzcGVjaWFsJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblx0XG5cdCAgdmFyIG91dHB1dDtcblx0ICBpZiAoYXJyYXkpIHtcblx0ICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcblx0ICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBjdHguc2Vlbi5wb3AoKTtcblx0XG5cdCAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKSB7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcblx0ICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuXHQgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcblx0ICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykgKyAnXFwnJztcblx0ICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcblx0ICB9XG5cdCAgaWYgKGlzTnVtYmVyKHZhbHVlKSlcblx0ICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG5cdCAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ2Jvb2xlYW4nKTtcblx0ICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG5cdCAgaWYgKGlzTnVsbCh2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJ251bGwnLCAnbnVsbCcpO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcblx0ICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cykge1xuXHQgIHZhciBvdXRwdXQgPSBbXTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuXHQgICAgaWYgKGhhc093blByb3BlcnR5KHZhbHVlLCBTdHJpbmcoaSkpKSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdCAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKCcnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHQgICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdCAgICAgICAgICBrZXksIHRydWUpKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gb3V0cHV0O1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuXHQgIHZhciBuYW1lLCBzdHIsIGRlc2M7XG5cdCAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuXHQgIGlmIChkZXNjLmdldCkge1xuXHQgICAgaWYgKGRlc2Muc2V0KSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKGRlc2Muc2V0KSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcblx0ICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG5cdCAgfVxuXHQgIGlmICghc3RyKSB7XG5cdCAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcblx0ICAgICAgaWYgKGlzTnVsbChyZWN1cnNlVGltZXMpKSB7XG5cdCAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIHJlY3Vyc2VUaW1lcyAtIDEpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuXHQgICAgICAgIGlmIChhcnJheSkge1xuXHQgICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG5cdCAgICAgICAgICB9KS5qb2luKCdcXG4nKS5zdWJzdHIoMik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lO1xuXHQgICAgICAgICAgfSkuam9pbignXFxuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuXHQgICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxcZCskLykpIHtcblx0ICAgICAgcmV0dXJuIHN0cjtcblx0ICAgIH1cblx0ICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7XG5cdCAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcblx0ICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG5cdCAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG5cdCAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuXHQgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuXHQgICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcblx0ICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuXHQgIHZhciBsZW5ndGggPSBvdXRwdXQucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cikge1xuXHQgICAgbnVtTGluZXNFc3QrKztcblx0ICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcblx0ICAgIHJldHVybiBwcmV2ICsgY3VyLnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLCAnJykubGVuZ3RoICsgMTtcblx0ICB9LCAwKTtcblx0XG5cdCAgaWYgKGxlbmd0aCA+IDYwKSB7XG5cdCAgICByZXR1cm4gYnJhY2VzWzBdICtcblx0ICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcblx0ICAgICAgICAgICAnICcgK1xuXHQgICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG5cdCAgICAgICAgICAgJyAnICtcblx0ICAgICAgICAgICBicmFjZXNbMV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdO1xuXHR9XG5cdFxuXHRcblx0Ly8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG5cdC8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXHRmdW5jdGlvbiBpc0FycmF5KGFyKSB7XG5cdCAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xuXHR9XG5cdGV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cdFxuXHRmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJztcblx0fVxuXHRleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXHRcblx0ZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcblx0fVxuXHRleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cdFxuXHRmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG5cdH1cblx0ZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXHRcblx0ZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xuXHR9XG5cdGV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDtcblx0XG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IHZvaWQgMDtcblx0fVxuXHRleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuXHQgIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcblx0fVxuXHRleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblx0XG5cdGZ1bmN0aW9uIGlzRGF0ZShkKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KGQpICYmIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG5cdH1cblx0ZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cdFxuXHRmdW5jdGlvbiBpc0Vycm9yKGUpIHtcblx0ICByZXR1cm4gaXNPYmplY3QoZSkgJiZcblx0ICAgICAgKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG5cdH1cblx0ZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblx0XG5cdGZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IG51bGwgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xuXHR9XG5cdGV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblx0XG5cdGV4cG9ydHMuaXNCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdGZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gcGFkKG4pIHtcblx0ICByZXR1cm4gbiA8IDEwID8gJzAnICsgbi50b1N0cmluZygxMCkgOiBuLnRvU3RyaW5nKDEwKTtcblx0fVxuXHRcblx0XG5cdHZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcblx0ICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTtcblx0XG5cdC8vIDI2IEZlYiAxNjoxOTozNFxuXHRmdW5jdGlvbiB0aW1lc3RhbXAoKSB7XG5cdCAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuXHQgIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuXHQgICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG5cdCAgICAgICAgICAgICAgcGFkKGQuZ2V0U2Vjb25kcygpKV0uam9pbignOicpO1xuXHQgIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG5cdH1cblx0XG5cdFxuXHQvLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wXG5cdGV4cG9ydHMubG9nID0gZnVuY3Rpb24oKSB7XG5cdCAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG5cdH07XG5cdFxuXHRcblx0LyoqXG5cdCAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci5cblx0ICpcblx0ICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZVxuXHQgKiBmdW5jdGlvbiAobm90IG9uIEZ1bmN0aW9uLnByb3RvdHlwZSkuIE5PVEU6IElmIHRoaXMgZmlsZSBpcyB0byBiZSBsb2FkZWRcblx0ICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcblx0ICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzXG5cdCAqIGV4cGVjdGVkIGR1cmluZyBib290c3RyYXBwaW5nIChzZWUgbWlycm9yLmpzIGluIHIxMTQ5MDMpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlXG5cdCAqICAgICBwcm90b3R5cGUuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuXHQgKi9cblx0ZXhwb3J0cy5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0ZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcblx0ICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG5cdCAgaWYgKCFhZGQgfHwgIWlzT2JqZWN0KGFkZCkpIHJldHVybiBvcmlnaW47XG5cdFxuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTtcblx0ICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTtcblx0ICB9XG5cdCAgcmV0dXJuIG9yaWdpbjtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMTgpKSlcblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQnVmZmVyKGFyZykge1xuXHQgIHJldHVybiBhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCdcblx0ICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgJiYgdHlwZW9mIGFyZy5maWxsID09PSAnZnVuY3Rpb24nXG5cdCAgICAmJiB0eXBlb2YgYXJnLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXG4vKioqLyB9LFxuLyogMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcblx0ICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG5cdCAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuXHQgICAgICBjb25zdHJ1Y3Rvcjoge1xuXHQgICAgICAgIHZhbHVlOiBjdG9yLFxuXHQgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXHQgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9O1xuXHR9IGVsc2Uge1xuXHQgIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcblx0ICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG5cdCAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuXHQgICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuXHQgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTdHJlYW07XG5cdFxuXHR2YXIgRUUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KS5FdmVudEVtaXR0ZXI7XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0aW5oZXJpdHMoU3RyZWFtLCBFRSk7XG5cdFN0cmVhbS5SZWFkYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRTdHJlYW0uV3JpdGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0U3RyZWFtLkR1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXHRTdHJlYW0uVHJhbnNmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFN0cmVhbS5QYXNzVGhyb3VnaCA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRcblx0Ly8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40Lnhcblx0U3RyZWFtLlN0cmVhbSA9IFN0cmVhbTtcblx0XG5cdFxuXHRcblx0Ly8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudFxuXHQvLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLlxuXHRcblx0ZnVuY3Rpb24gU3RyZWFtKCkge1xuXHQgIEVFLmNhbGwodGhpcyk7XG5cdH1cblx0XG5cdFN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHtcblx0ICB2YXIgc291cmNlID0gdGhpcztcblx0XG5cdCAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG5cdCAgICBpZiAoZGVzdC53cml0YWJsZSkge1xuXHQgICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkge1xuXHQgICAgICAgIHNvdXJjZS5wYXVzZSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpO1xuXHRcblx0ICBmdW5jdGlvbiBvbmRyYWluKCkge1xuXHQgICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7XG5cdCAgICAgIHNvdXJjZS5yZXN1bWUoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cdFxuXHQgIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW5cblx0ICAvLyBzb3VyY2UgZ2V0cyB0aGUgJ2VuZCcgb3IgJ2Nsb3NlJyBldmVudHMuICBPbmx5IGRlc3QuZW5kKCkgb25jZS5cblx0ICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHtcblx0ICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpO1xuXHQgICAgc291cmNlLm9uKCdjbG9zZScsIG9uY2xvc2UpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGRpZE9uRW5kID0gZmFsc2U7XG5cdCAgZnVuY3Rpb24gb25lbmQoKSB7XG5cdCAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcblx0ICAgIGRpZE9uRW5kID0gdHJ1ZTtcblx0XG5cdCAgICBkZXN0LmVuZCgpO1xuXHQgIH1cblx0XG5cdFxuXHQgIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG5cdCAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcblx0ICAgIGRpZE9uRW5kID0gdHJ1ZTtcblx0XG5cdCAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7XG5cdCAgfVxuXHRcblx0ICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuXG5cdCAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuXHQgICAgY2xlYW51cCgpO1xuXHQgICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHtcblx0ICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS5cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHNvdXJjZS5vbignZXJyb3InLCBvbmVycm9yKTtcblx0ICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuXHRcblx0ICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFkZGVkLlxuXHQgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG5cdCAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTtcblx0XG5cdCAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcblx0ICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcblx0XG5cdCAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuXHRcblx0ICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG5cdCAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG5cdFxuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcblx0ICB9XG5cdFxuXHQgIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7XG5cdCAgc291cmNlLm9uKCdjbG9zZScsIGNsZWFudXApO1xuXHRcblx0ICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApO1xuXHRcblx0ICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpO1xuXHRcblx0ICAvLyBBbGxvdyBmb3IgdW5peC1saWtlIHVzYWdlOiBBLnBpcGUoQikucGlwZShDKVxuXHQgIHJldHVybiBkZXN0O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcblx0ICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG5cdCAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcblx0fVxuXHRtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblx0XG5cdC8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuXHRFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcblx0Ly8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cblx0RXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblx0XG5cdC8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuXHQvLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG5cdCAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cdCAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXHRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cylcblx0ICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHRcblx0ICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG5cdCAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcblx0ICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG5cdCAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG5cdCAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuXHQgICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuXHQgICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcblx0ICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcblx0ICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuXHQgICAgICAgIHRocm93IGVycjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcblx0ICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuXHQgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG5cdCAgICAgIC8vIGZhc3QgY2FzZXNcblx0ICAgICAgY2FzZSAxOlxuXHQgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAyOlxuXHQgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIDM6XG5cdCAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgLy8gc2xvd2VyXG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdCAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG5cdCAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0ICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcblx0ICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG5cdCAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG5cdCAgdmFyIG07XG5cdFxuXHQgIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG5cdCAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXHRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cylcblx0ICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHRcblx0ICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuXHQgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cblx0ICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuXHQgICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG5cdCAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuXHQgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXHRcblx0ICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuXHQgICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG5cdCAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcblx0ICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cblx0ICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcblx0ICBlbHNlXG5cdCAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cblx0ICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblx0XG5cdCAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcblx0ICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuXHQgICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG5cdCAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcblx0ICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuXHQgICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuXHQgICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuXHQgICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG5cdCAgICAgICAgY29uc29sZS50cmFjZSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcblx0ICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XG5cdCAgdmFyIGZpcmVkID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIGcoKSB7XG5cdCAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXHRcblx0ICAgIGlmICghZmlyZWQpIHtcblx0ICAgICAgZmlyZWQgPSB0cnVlO1xuXHQgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuXHQgIHRoaXMub24odHlwZSwgZyk7XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0Ly8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG5cdCAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cdFxuXHQgIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG5cdCAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXHRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdCAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cdCAgcG9zaXRpb24gPSAtMTtcblx0XG5cdCAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG5cdCAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuXHQgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG5cdCAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cdFxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcblx0ICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcblx0ICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG5cdCAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcblx0ICAgICAgICBwb3NpdGlvbiA9IGk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAocG9zaXRpb24gPCAwKVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgbGlzdC5sZW5ndGggPSAwO1xuXHQgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG5cdCAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIHZhciBrZXksIGxpc3RlbmVycztcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMpXG5cdCAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcblx0ICAgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdCAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdFxuXHQgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG5cdCAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcblx0ICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG5cdCAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcblx0ICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcblx0ICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcblx0ICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuXHQgICAgLy8gTElGTyBvcmRlclxuXHQgICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG5cdCAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG5cdCAgfVxuXHQgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgdmFyIHJldDtcblx0ICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuXHQgICAgcmV0ID0gW107XG5cdCAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuXHQgICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG5cdCAgZWxzZVxuXHQgICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICBpZiAodGhpcy5fZXZlbnRzKSB7XG5cdCAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0XG5cdCAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcblx0ICAgICAgcmV0dXJuIDE7XG5cdCAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuXHQgICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG5cdCAgfVxuXHQgIHJldHVybiAwO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG5cdCAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcblx0ICAgICAgY29uc3RydWN0b3I6IHtcblx0ICAgICAgICB2YWx1ZTogY3Rvcixcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cblx0ICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcblx0ICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcblx0ICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHtleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0ZXhwb3J0cy5TdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0ZXhwb3J0cy5SZWFkYWJsZSA9IGV4cG9ydHM7XG5cdGV4cG9ydHMuV3JpdGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0ZXhwb3J0cy5EdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0ZXhwb3J0cy5UcmFuc2Zvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0ZXhwb3J0cy5QYXNzVGhyb3VnaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHRpZiAoIXByb2Nlc3MuYnJvd3NlciAmJiBwcm9jZXNzLmVudi5SRUFEQUJMRV9TVFJFQU0gPT09ICdkaXNhYmxlJykge1xuXHQgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFkYWJsZTtcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KS5CdWZmZXI7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0UmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7XG5cdFxuXHR2YXIgRUUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KS5FdmVudEVtaXR0ZXI7XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHRpZiAoIUVFLmxpc3RlbmVyQ291bnQpIEVFLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG5cdCAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDtcblx0fTtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHR2YXIgU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR1dGlsLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0dmFyIFN0cmluZ0RlY29kZXI7XG5cdFxuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIGRlYnVnID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdGlmIChkZWJ1ZyAmJiBkZWJ1Zy5kZWJ1Z2xvZykge1xuXHQgIGRlYnVnID0gZGVidWcuZGVidWdsb2coJ3N0cmVhbScpO1xuXHR9IGVsc2Uge1xuXHQgIGRlYnVnID0gZnVuY3Rpb24gKCkge307XG5cdH1cblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHRcblx0dXRpbC5pbmhlcml0cyhSZWFkYWJsZSwgU3RyZWFtKTtcblx0XG5cdGZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG5cdCAgdmFyIER1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0ICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIGl0IHN0b3BzIGNhbGxpbmcgX3JlYWQoKSB0byBmaWxsIHRoZSBidWZmZXJcblx0ICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIFwiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlclwiXG5cdCAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcblx0ICB2YXIgZGVmYXVsdEh3bSA9IG9wdGlvbnMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuXHQgIHRoaXMuaGlnaFdhdGVyTWFyayA9IChod20gfHwgaHdtID09PSAwKSA/IGh3bSA6IGRlZmF1bHRId207XG5cdFxuXHQgIC8vIGNhc3QgdG8gaW50cy5cblx0ICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+fnRoaXMuaGlnaFdhdGVyTWFyaztcblx0XG5cdCAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICB0aGlzLmxlbmd0aCA9IDA7XG5cdCAgdGhpcy5waXBlcyA9IG51bGw7XG5cdCAgdGhpcy5waXBlc0NvdW50ID0gMDtcblx0ICB0aGlzLmZsb3dpbmcgPSBudWxsO1xuXHQgIHRoaXMuZW5kZWQgPSBmYWxzZTtcblx0ICB0aGlzLmVuZEVtaXR0ZWQgPSBmYWxzZTtcblx0ICB0aGlzLnJlYWRpbmcgPSBmYWxzZTtcblx0XG5cdCAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG5cdCAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnlcblx0ICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG5cdCAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG5cdCAgdGhpcy5zeW5jID0gdHJ1ZTtcblx0XG5cdCAgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXlcblx0ICAvLyB0aGF0IHdlJ3JlIGF3YWl0aW5nIGEgJ3JlYWRhYmxlJyBldmVudCBlbWlzc2lvbi5cblx0ICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuXHQgIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG5cdCAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlO1xuXHRcblx0XG5cdCAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnLiBVc2VkIHRvIG1ha2UgcmVhZChuKSBpZ25vcmUgbiBhbmQgdG9cblx0ICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuXHQgIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXHRcblx0ICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KVxuXHQgICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGU7XG5cdFxuXHQgIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcblx0ICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG5cdCAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuXHQgIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXHRcblx0ICAvLyB3aGVuIHBpcGluZywgd2Ugb25seSBjYXJlIGFib3V0ICdyZWFkYWJsZScgZXZlbnRzIHRoYXQgaGFwcGVuXG5cdCAgLy8gYWZ0ZXIgcmVhZCgpaW5nIGFsbCB0aGUgYnl0ZXMgYW5kIG5vdCBnZXR0aW5nIGFueSBwdXNoYmFjay5cblx0ICB0aGlzLnJhbk91dCA9IGZhbHNlO1xuXHRcblx0ICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpc1xuXHQgIHRoaXMuYXdhaXREcmFpbiA9IDA7XG5cdFxuXHQgIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWRcblx0ICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cdFxuXHQgIHRoaXMuZGVjb2RlciA9IG51bGw7XG5cdCAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG5cdCAgaWYgKG9wdGlvbnMuZW5jb2RpbmcpIHtcblx0ICAgIGlmICghU3RyaW5nRGVjb2Rlcilcblx0ICAgICAgU3RyaW5nRGVjb2RlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpLlN0cmluZ0RlY29kZXI7XG5cdCAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTtcblx0ICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykge1xuXHQgIHZhciBEdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSlcblx0ICAgIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7XG5cdFxuXHQgIHRoaXMuX3JlYWRhYmxlU3RhdGUgPSBuZXcgUmVhZGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTtcblx0XG5cdCAgLy8gbGVnYWN5XG5cdCAgdGhpcy5yZWFkYWJsZSA9IHRydWU7XG5cdFxuXHQgIFN0cmVhbS5jYWxsKHRoaXMpO1xuXHR9XG5cdFxuXHQvLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci5cblx0Ly8gVGhpcyByZXR1cm5zIHRydWUgaWYgdGhlIGhpZ2hXYXRlck1hcmsgaGFzIG5vdCBiZWVuIGhpdCB5ZXQsXG5cdC8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGRcblx0Ly8gd3JpdGUoKSBzb21lIG1vcmUuXG5cdFJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0XG5cdCAgaWYgKHV0aWwuaXNTdHJpbmcoY2h1bmspICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7XG5cdCAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcblx0ICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUuZW5jb2RpbmcpIHtcblx0ICAgICAgY2h1bmsgPSBuZXcgQnVmZmVyKGNodW5rLCBlbmNvZGluZyk7XG5cdCAgICAgIGVuY29kaW5nID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBmYWxzZSk7XG5cdH07XG5cdFxuXHQvLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKVxuXHRSZWFkYWJsZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKGNodW5rKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0ICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssICcnLCB0cnVlKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250KSB7XG5cdCAgdmFyIGVyID0gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuayk7XG5cdCAgaWYgKGVyKSB7XG5cdCAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cdCAgfSBlbHNlIGlmICh1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGNodW5rKSkge1xuXHQgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuXHQgICAgaWYgKCFzdGF0ZS5lbmRlZClcblx0ICAgICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTtcblx0ICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuXHQgICAgaWYgKHN0YXRlLmVuZGVkICYmICFhZGRUb0Zyb250KSB7XG5cdCAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpO1xuXHQgICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTtcblx0ICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kRW1pdHRlZCAmJiBhZGRUb0Zyb250KSB7XG5cdCAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpO1xuXHQgICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFhZGRUb0Zyb250ICYmICFlbmNvZGluZylcblx0ICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuXHRcblx0ICAgICAgaWYgKCFhZGRUb0Zyb250KVxuXHQgICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcblx0XG5cdCAgICAgIC8vIGlmIHdlIHdhbnQgdGhlIGRhdGEgbm93LCBqdXN0IGVtaXQgaXQuXG5cdCAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuXHQgICAgICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuXHQgICAgICAgIHN0cmVhbS5yZWFkKDApO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG5cdCAgICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXHQgICAgICAgIGlmIChhZGRUb0Zyb250KVxuXHQgICAgICAgICAgc3RhdGUuYnVmZmVyLnVuc2hpZnQoY2h1bmspO1xuXHQgICAgICAgIGVsc2Vcblx0ICAgICAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcblx0XG5cdCAgICAgICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSlcblx0ICAgICAgICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHtcblx0ICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpO1xuXHR9XG5cdFxuXHRcblx0XG5cdC8vIGlmIGl0J3MgcGFzdCB0aGUgaGlnaCB3YXRlciBtYXJrLCB3ZSBjYW4gcHVzaCBpbiBzb21lIG1vcmUuXG5cdC8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lXG5cdC8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLFxuXHQvLyBzdWNoIGFzIHRoZSByZXBsLiAgQWxzbywgaWYgdGhlIHB1c2goKSB0cmlnZ2VyZWQgYVxuXHQvLyByZWFkYWJsZSBldmVudCwgYW5kIHRoZSB1c2VyIGNhbGxlZCByZWFkKGxhcmdlTnVtYmVyKSBzdWNoIHRoYXRcblx0Ly8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXJcblx0Ly8gJ3JlYWRhYmxlJyBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC5cblx0ZnVuY3Rpb24gbmVlZE1vcmVEYXRhKHN0YXRlKSB7XG5cdCAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJlxuXHQgICAgICAgICAoc3RhdGUubmVlZFJlYWRhYmxlIHx8XG5cdCAgICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8XG5cdCAgICAgICAgICBzdGF0ZS5sZW5ndGggPT09IDApO1xuXHR9XG5cdFxuXHQvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cblx0UmVhZGFibGUucHJvdG90eXBlLnNldEVuY29kaW5nID0gZnVuY3Rpb24oZW5jKSB7XG5cdCAgaWYgKCFTdHJpbmdEZWNvZGVyKVxuXHQgICAgU3RyaW5nRGVjb2RlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpLlN0cmluZ0RlY29kZXI7XG5cdCAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIoZW5jKTtcblx0ICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0Ly8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDEyOE1CXG5cdHZhciBNQVhfSFdNID0gMHg4MDAwMDA7XG5cdGZ1bmN0aW9uIHJvdW5kVXBUb05leHRQb3dlck9mMihuKSB7XG5cdCAgaWYgKG4gPj0gTUFYX0hXTSkge1xuXHQgICAgbiA9IE1BWF9IV007XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDJcblx0ICAgIG4tLTtcblx0ICAgIGZvciAodmFyIHAgPSAxOyBwIDwgMzI7IHAgPDw9IDEpIG4gfD0gbiA+PiBwO1xuXHQgICAgbisrO1xuXHQgIH1cblx0ICByZXR1cm4gbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuXHQgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpXG5cdCAgICByZXR1cm4gMDtcblx0XG5cdCAgaWYgKHN0YXRlLm9iamVjdE1vZGUpXG5cdCAgICByZXR1cm4gbiA9PT0gMCA/IDAgOiAxO1xuXHRcblx0ICBpZiAoaXNOYU4obikgfHwgdXRpbC5pc051bGwobikpIHtcblx0ICAgIC8vIG9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZVxuXHQgICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUuYnVmZmVyLmxlbmd0aClcblx0ICAgICAgcmV0dXJuIHN0YXRlLmJ1ZmZlclswXS5sZW5ndGg7XG5cdCAgICBlbHNlXG5cdCAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7XG5cdCAgfVxuXHRcblx0ICBpZiAobiA8PSAwKVxuXHQgICAgcmV0dXJuIDA7XG5cdFxuXHQgIC8vIElmIHdlJ3JlIGFza2luZyBmb3IgbW9yZSB0aGFuIHRoZSB0YXJnZXQgYnVmZmVyIGxldmVsLFxuXHQgIC8vIHRoZW4gcmFpc2UgdGhlIHdhdGVyIG1hcmsuICBCdW1wIHVwIHRvIHRoZSBuZXh0IGhpZ2hlc3Rcblx0ICAvLyBwb3dlciBvZiAyLCB0byBwcmV2ZW50IGluY3JlYXNpbmcgaXQgZXhjZXNzaXZlbHkgaW4gdGlueVxuXHQgIC8vIGFtb3VudHMuXG5cdCAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKVxuXHQgICAgc3RhdGUuaGlnaFdhdGVyTWFyayA9IHJvdW5kVXBUb05leHRQb3dlck9mMihuKTtcblx0XG5cdCAgLy8gZG9uJ3QgaGF2ZSB0aGF0IG11Y2guICByZXR1cm4gbnVsbCwgdW5sZXNzIHdlJ3ZlIGVuZGVkLlxuXHQgIGlmIChuID4gc3RhdGUubGVuZ3RoKSB7XG5cdCAgICBpZiAoIXN0YXRlLmVuZGVkKSB7XG5cdCAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cdCAgICAgIHJldHVybiAwO1xuXHQgICAgfSBlbHNlXG5cdCAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbjtcblx0fVxuXHRcblx0Ly8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy5cblx0UmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbihuKSB7XG5cdCAgZGVidWcoJ3JlYWQnLCBuKTtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHQgIHZhciBuT3JpZyA9IG47XG5cdFxuXHQgIGlmICghdXRpbC5pc051bWJlcihuKSB8fCBuID4gMClcblx0ICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuXHRcblx0ICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlXG5cdCAgLy8gYWxyZWFkeSBoYXZlIGEgYnVuY2ggb2YgZGF0YSBpbiB0aGUgYnVmZmVyLCB0aGVuIGp1c3QgdHJpZ2dlclxuXHQgIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLlxuXHQgIGlmIChuID09PSAwICYmXG5cdCAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSAmJlxuXHQgICAgICAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7XG5cdCAgICBkZWJ1ZygncmVhZDogZW1pdFJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5lbmRlZCk7XG5cdCAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKVxuXHQgICAgICBlbmRSZWFkYWJsZSh0aGlzKTtcblx0ICAgIGVsc2Vcblx0ICAgICAgZW1pdFJlYWRhYmxlKHRoaXMpO1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHRcblx0ICBuID0gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSk7XG5cdFxuXHQgIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC5cblx0ICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkge1xuXHQgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMClcblx0ICAgICAgZW5kUmVhZGFibGUodGhpcyk7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmVcblx0ICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW5cblx0ICAvLyBzeW50aGV0aWMgc3RyZWFtIGNhc2VzLCBzdWNoIGFzIHBhc3N0aHJvdWdoIHN0cmVhbXMsIF9yZWFkXG5cdCAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZVxuXHQgIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuXG5cdCAgLy8gYmVmb3JlIHRoZXJlIHdhcyAqbm90KiBlbm91Z2guXG5cdCAgLy9cblx0ICAvLyBTbywgdGhlIHN0ZXBzIGFyZTpcblx0ICAvLyAxLiBGaWd1cmUgb3V0IHdoYXQgdGhlIHN0YXRlIG9mIHRoaW5ncyB3aWxsIGJlIGFmdGVyIHdlIGRvXG5cdCAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci5cblx0ICAvL1xuXHQgIC8vIDIuIElmIHRoYXQgcmVzdWx0aW5nIHN0YXRlIHdpbGwgdHJpZ2dlciBhIF9yZWFkLCB0aGVuIGNhbGwgX3JlYWQuXG5cdCAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzXG5cdCAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuXG5cdCAgLy8gdGhhdCB0aGUgUmVhZGFibGUgY2xhc3Mgc2hvdWxkIGJlaGF2ZSBpbXByb3Blcmx5LCBhcyBzdHJlYW1zIGFyZVxuXHQgIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuXG5cdCAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsXG5cdCAgLy8gaGFzIHJldHVybmVkIHlldCksIHNvIHRoYXQgd2Uga25vdyB3aGV0aGVyIG9yIG5vdCBpdCdzIHNhZmUgdG8gZW1pdFxuXHQgIC8vICdyZWFkYWJsZScgZXRjLlxuXHQgIC8vXG5cdCAgLy8gMy4gQWN0dWFsbHkgcHVsbCB0aGUgcmVxdWVzdGVkIGNodW5rcyBvdXQgb2YgdGhlIGJ1ZmZlciBhbmQgcmV0dXJuLlxuXHRcblx0ICAvLyBpZiB3ZSBuZWVkIGEgcmVhZGFibGUgZXZlbnQsIHRoZW4gd2UgbmVlZCB0byBkbyBzb21lIHJlYWRpbmcuXG5cdCAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTtcblx0ICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7XG5cdFxuXHQgIC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZVxuXHQgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcblx0ICAgIGRvUmVhZCA9IHRydWU7XG5cdCAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpO1xuXHQgIH1cblx0XG5cdCAgLy8gaG93ZXZlciwgaWYgd2UndmUgZW5kZWQsIHRoZW4gdGhlcmUncyBubyBwb2ludCwgYW5kIGlmIHdlJ3JlIGFscmVhZHlcblx0ICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuXG5cdCAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHtcblx0ICAgIGRvUmVhZCA9IGZhbHNlO1xuXHQgICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuXHQgIH1cblx0XG5cdCAgaWYgKGRvUmVhZCkge1xuXHQgICAgZGVidWcoJ2RvIHJlYWQnKTtcblx0ICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlO1xuXHQgICAgc3RhdGUuc3luYyA9IHRydWU7XG5cdCAgICAvLyBpZiB0aGUgbGVuZ3RoIGlzIGN1cnJlbnRseSB6ZXJvLCB0aGVuIHdlICpuZWVkKiBhIHJlYWRhYmxlIGV2ZW50LlxuXHQgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMClcblx0ICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblx0ICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2Rcblx0ICAgIHRoaXMuX3JlYWQoc3RhdGUuaGlnaFdhdGVyTWFyayk7XG5cdCAgICBzdGF0ZS5zeW5jID0gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuXHQgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cblx0ICBpZiAoZG9SZWFkICYmICFzdGF0ZS5yZWFkaW5nKVxuXHQgICAgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTtcblx0XG5cdCAgdmFyIHJldDtcblx0ICBpZiAobiA+IDApXG5cdCAgICByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7XG5cdCAgZWxzZVxuXHQgICAgcmV0ID0gbnVsbDtcblx0XG5cdCAgaWYgKHV0aWwuaXNOdWxsKHJldCkpIHtcblx0ICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cdCAgICBuID0gMDtcblx0ICB9XG5cdFxuXHQgIHN0YXRlLmxlbmd0aCAtPSBuO1xuXHRcblx0ICAvLyBJZiB3ZSBoYXZlIG5vdGhpbmcgaW4gdGhlIGJ1ZmZlciwgdGhlbiB3ZSB3YW50IHRvIGtub3dcblx0ICAvLyBhcyBzb29uIGFzIHdlICpkbyogZ2V0IHNvbWV0aGluZyBpbnRvIHRoZSBidWZmZXIuXG5cdCAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuZW5kZWQpXG5cdCAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXHRcblx0ICAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suXG5cdCAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMClcblx0ICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuXHRcblx0ICBpZiAoIXV0aWwuaXNOdWxsKHJldCkpXG5cdCAgICB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpO1xuXHRcblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuaykge1xuXHQgIHZhciBlciA9IG51bGw7XG5cdCAgaWYgKCF1dGlsLmlzQnVmZmVyKGNodW5rKSAmJlxuXHQgICAgICAhdXRpbC5pc1N0cmluZyhjaHVuaykgJiZcblx0ICAgICAgIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspICYmXG5cdCAgICAgICFzdGF0ZS5vYmplY3RNb2RlKSB7XG5cdCAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcblx0ICB9XG5cdCAgcmV0dXJuIGVyO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7XG5cdCAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7XG5cdCAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuXHQgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuXHQgICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG5cdCAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblx0ICAgIH1cblx0ICB9XG5cdCAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuXHRcblx0ICAvLyBlbWl0ICdyZWFkYWJsZScgbm93IHRvIG1ha2Ugc3VyZSBpdCBnZXRzIHBpY2tlZCB1cC5cblx0ICBlbWl0UmVhZGFibGUoc3RyZWFtKTtcblx0fVxuXHRcblx0Ly8gRG9uJ3QgZW1pdCByZWFkYWJsZSByaWdodCBhd2F5IGluIHN5bmMgbW9kZSwgYmVjYXVzZSB0aGlzIGNhbiB0cmlnZ2VyXG5cdC8vIGFub3RoZXIgcmVhZCgpIGNhbGwgPT4gc3RhY2sgb3ZlcmZsb3cuICBUaGlzIHdheSwgaXQgbWlnaHQgdHJpZ2dlclxuXHQvLyBhIG5leHRUaWNrIHJlY3Vyc2lvbiB3YXJuaW5nLCBidXQgdGhhdCdzIG5vdCBzbyBiYWQuXG5cdGZ1bmN0aW9uIGVtaXRSZWFkYWJsZShzdHJlYW0pIHtcblx0ICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cdCAgc3RhdGUubmVlZFJlYWRhYmxlID0gZmFsc2U7XG5cdCAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHtcblx0ICAgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5mbG93aW5nKTtcblx0ICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG5cdCAgICBpZiAoc3RhdGUuc3luYylcblx0ICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG5cdCAgICAgIH0pO1xuXHQgICAgZWxzZVxuXHQgICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbWl0UmVhZGFibGVfKHN0cmVhbSkge1xuXHQgIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7XG5cdCAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG5cdCAgZmxvdyhzdHJlYW0pO1xuXHR9XG5cdFxuXHRcblx0Ly8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCxcblx0Ly8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZFxuXHQvLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZlxuXHQvLyBpdCdzIGluIHByb2dyZXNzLlxuXHQvLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLFxuXHQvLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LlxuXHRmdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHtcblx0ICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7XG5cdCAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7XG5cdCAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkge1xuXHQgIHZhciBsZW4gPSBzdGF0ZS5sZW5ndGg7XG5cdCAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJlxuXHQgICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG5cdCAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTtcblx0ICAgIHN0cmVhbS5yZWFkKDApO1xuXHQgICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuXHQgICAgICAvLyBkaWRuJ3QgZ2V0IGFueSBkYXRhLCBzdG9wIHNwaW5uaW5nLlxuXHQgICAgICBicmVhaztcblx0ICAgIGVsc2Vcblx0ICAgICAgbGVuID0gc3RhdGUubGVuZ3RoO1xuXHQgIH1cblx0ICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvLyBhYnN0cmFjdCBtZXRob2QuICB0byBiZSBvdmVycmlkZGVuIGluIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG5cdC8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguXG5cdC8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCBcImxlbmd0aFwiIGlzIHNvbWV3aGF0XG5cdC8vIGFyYml0cmFyeSwgYW5kIHBlcmhhcHMgbm90IHZlcnkgbWVhbmluZ2Z1bC5cblx0UmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24obikge1xuXHQgIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpKTtcblx0fTtcblx0XG5cdFJlYWRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgcGlwZU9wdHMpIHtcblx0ICB2YXIgc3JjID0gdGhpcztcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHRcblx0ICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHtcblx0ICAgIGNhc2UgMDpcblx0ICAgICAgc3RhdGUucGlwZXMgPSBkZXN0O1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgMTpcblx0ICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdO1xuXHQgICAgICBicmVhaztcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIHN0YXRlLnBpcGVzLnB1c2goZGVzdCk7XG5cdCAgICAgIGJyZWFrO1xuXHQgIH1cblx0ICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7XG5cdCAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTtcblx0XG5cdCAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKSAmJlxuXHQgICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmXG5cdCAgICAgICAgICAgICAgZGVzdCAhPT0gcHJvY2Vzcy5zdGRlcnI7XG5cdFxuXHQgIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiBjbGVhbnVwO1xuXHQgIGlmIChzdGF0ZS5lbmRFbWl0dGVkKVxuXHQgICAgcHJvY2Vzcy5uZXh0VGljayhlbmRGbik7XG5cdCAgZWxzZVxuXHQgICAgc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTtcblx0XG5cdCAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpO1xuXHQgIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlKSB7XG5cdCAgICBkZWJ1Zygnb251bnBpcGUnKTtcblx0ICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7XG5cdCAgICAgIGNsZWFudXAoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG9uZW5kKCkge1xuXHQgICAgZGVidWcoJ29uZW5kJyk7XG5cdCAgICBkZXN0LmVuZCgpO1xuXHQgIH1cblx0XG5cdCAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlclxuXHQgIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKVxuXHQgIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzXG5cdCAgLy8gdG9vIHNsb3cuXG5cdCAgdmFyIG9uZHJhaW4gPSBwaXBlT25EcmFpbihzcmMpO1xuXHQgIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cdFxuXHQgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG5cdCAgICBkZWJ1ZygnY2xlYW51cCcpO1xuXHQgICAgLy8gY2xlYW51cCBldmVudCBoYW5kbGVycyBvbmNlIHRoZSBwaXBlIGlzIGJyb2tlblxuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpO1xuXHQgICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG5cdCAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApO1xuXHQgICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcblx0XG5cdCAgICAvLyBpZiB0aGUgcmVhZGVyIGlzIHdhaXRpbmcgZm9yIGEgZHJhaW4gZXZlbnQgZnJvbSB0aGlzXG5cdCAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcblx0ICAgIC8vIGZsb3dpbmcgYWdhaW4uXG5cdCAgICAvLyBTbywgaWYgdGhpcyBpcyBhd2FpdGluZyBhIGRyYWluLCB0aGVuIHdlIGp1c3QgY2FsbCBpdCBub3cuXG5cdCAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG5cdCAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiAmJlxuXHQgICAgICAgICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpXG5cdCAgICAgIG9uZHJhaW4oKTtcblx0ICB9XG5cdFxuXHQgIHNyYy5vbignZGF0YScsIG9uZGF0YSk7XG5cdCAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG5cdCAgICBkZWJ1Zygnb25kYXRhJyk7XG5cdCAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7XG5cdCAgICBpZiAoZmFsc2UgPT09IHJldCkge1xuXHQgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJyxcblx0ICAgICAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuXHQgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrO1xuXHQgICAgICBzcmMucGF1c2UoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuXHQgIC8vIGhvd2V2ZXIsIGRvbid0IHN1cHByZXNzIHRoZSB0aHJvd2luZyBiZWhhdmlvciBmb3IgdGhpcy5cblx0ICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG5cdCAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcblx0ICAgIHVucGlwZSgpO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblx0ICAgIGlmIChFRS5saXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKVxuXHQgICAgICBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpO1xuXHQgIH1cblx0ICAvLyBUaGlzIGlzIGEgYnJ1dGFsbHkgdWdseSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyXG5cdCAgLy8gaXMgYXR0YWNoZWQgYmVmb3JlIGFueSB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy5cblx0ICBpZiAoIWRlc3QuX2V2ZW50cyB8fCAhZGVzdC5fZXZlbnRzLmVycm9yKVxuXHQgICAgZGVzdC5vbignZXJyb3InLCBvbmVycm9yKTtcblx0ICBlbHNlIGlmIChpc0FycmF5KGRlc3QuX2V2ZW50cy5lcnJvcikpXG5cdCAgICBkZXN0Ll9ldmVudHMuZXJyb3IudW5zaGlmdChvbmVycm9yKTtcblx0ICBlbHNlXG5cdCAgICBkZXN0Ll9ldmVudHMuZXJyb3IgPSBbb25lcnJvciwgZGVzdC5fZXZlbnRzLmVycm9yXTtcblx0XG5cdFxuXHRcblx0ICAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLlxuXHQgIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG5cdCAgICB1bnBpcGUoKTtcblx0ICB9XG5cdCAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuXHQgIGZ1bmN0aW9uIG9uZmluaXNoKCkge1xuXHQgICAgZGVidWcoJ29uZmluaXNoJyk7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXHQgICAgdW5waXBlKCk7XG5cdCAgfVxuXHQgIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpO1xuXHRcblx0ICBmdW5jdGlvbiB1bnBpcGUoKSB7XG5cdCAgICBkZWJ1ZygndW5waXBlJyk7XG5cdCAgICBzcmMudW5waXBlKGRlc3QpO1xuXHQgIH1cblx0XG5cdCAgLy8gdGVsbCB0aGUgZGVzdCB0aGF0IGl0J3MgYmVpbmcgcGlwZWQgdG9cblx0ICBkZXN0LmVtaXQoJ3BpcGUnLCBzcmMpO1xuXHRcblx0ICAvLyBzdGFydCB0aGUgZmxvdyBpZiBpdCBoYXNuJ3QgYmVlbiBzdGFydGVkIGFscmVhZHkuXG5cdCAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG5cdCAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcblx0ICAgIHNyYy5yZXN1bWUoKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkZXN0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlO1xuXHQgICAgZGVidWcoJ3BpcGVPbkRyYWluJywgc3RhdGUuYXdhaXREcmFpbik7XG5cdCAgICBpZiAoc3RhdGUuYXdhaXREcmFpbilcblx0ICAgICAgc3RhdGUuYXdhaXREcmFpbi0tO1xuXHQgICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gPT09IDAgJiYgRUUubGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHtcblx0ICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG5cdCAgICAgIGZsb3coc3JjKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRcblx0UmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uKGRlc3QpIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHRcblx0ICAvLyBpZiB3ZSdyZSBub3QgcGlwaW5nIGFueXdoZXJlLCB0aGVuIGRvIG5vdGhpbmcuXG5cdCAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDApXG5cdCAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLlxuXHQgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSB7XG5cdCAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS5cblx0ICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgICBpZiAoIWRlc3QpXG5cdCAgICAgIGRlc3QgPSBzdGF0ZS5waXBlcztcblx0XG5cdCAgICAvLyBnb3QgYSBtYXRjaC5cblx0ICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcblx0ICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuXHQgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXHQgICAgaWYgKGRlc3QpXG5cdCAgICAgIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdFxuXHQgIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cdFxuXHQgIGlmICghZGVzdCkge1xuXHQgICAgLy8gcmVtb3ZlIGFsbC5cblx0ICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzO1xuXHQgICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7XG5cdCAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG5cdCAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcblx0ICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxuXHQgICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgLy8gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IG9uZS5cblx0ICB2YXIgaSA9IGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpO1xuXHQgIGlmIChpID09PSAtMSlcblx0ICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICBzdGF0ZS5waXBlcy5zcGxpY2UoaSwgMSk7XG5cdCAgc3RhdGUucGlwZXNDb3VudCAtPSAxO1xuXHQgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKVxuXHQgICAgc3RhdGUucGlwZXMgPSBzdGF0ZS5waXBlc1swXTtcblx0XG5cdCAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvLyBzZXQgdXAgZGF0YSBldmVudHMgaWYgdGhleSBhcmUgYXNrZWQgZm9yXG5cdC8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5cdFJlYWRhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2LCBmbikge1xuXHQgIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTtcblx0XG5cdCAgLy8gSWYgbGlzdGVuaW5nIHRvIGRhdGEsIGFuZCBpdCBoYXMgbm90IGV4cGxpY2l0bHkgYmVlbiBwYXVzZWQsXG5cdCAgLy8gdGhlbiBjYWxsIHJlc3VtZSB0byBzdGFydCB0aGUgZmxvdyBvZiBkYXRhIG9uIHRoZSBuZXh0IHRpY2suXG5cdCAgaWYgKGV2ID09PSAnZGF0YScgJiYgZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuXHQgICAgdGhpcy5yZXN1bWUoKTtcblx0ICB9XG5cdFxuXHQgIGlmIChldiA9PT0gJ3JlYWRhYmxlJyAmJiB0aGlzLnJlYWRhYmxlKSB7XG5cdCAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHQgICAgaWYgKCFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykge1xuXHQgICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHRydWU7XG5cdCAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuXHQgICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXHQgICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcblx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGRlYnVnKCdyZWFkYWJsZSBuZXh0dGljayByZWFkIDAnKTtcblx0ICAgICAgICAgIHNlbGYucmVhZCgwKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sZW5ndGgpIHtcblx0ICAgICAgICBlbWl0UmVhZGFibGUodGhpcywgc3RhdGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzO1xuXHR9O1xuXHRSZWFkYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBSZWFkYWJsZS5wcm90b3R5cGUub247XG5cdFxuXHQvLyBwYXVzZSgpIGFuZCByZXN1bWUoKSBhcmUgcmVtbmFudHMgb2YgdGhlIGxlZ2FjeSByZWFkYWJsZSBzdHJlYW0gQVBJXG5cdC8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS5cblx0UmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdCAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG5cdCAgICBkZWJ1ZygncmVzdW1lJyk7XG5cdCAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcblx0ICAgIGlmICghc3RhdGUucmVhZGluZykge1xuXHQgICAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpO1xuXHQgICAgICB0aGlzLnJlYWQoMCk7XG5cdCAgICB9XG5cdCAgICByZXN1bWUodGhpcywgc3RhdGUpO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHJlc3VtZShzdHJlYW0sIHN0YXRlKSB7XG5cdCAgaWYgKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpIHtcblx0ICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7XG5cdCAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXN1bWVfKHN0cmVhbSwgc3RhdGUpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcblx0ICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTtcblx0ICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7XG5cdCAgZmxvdyhzdHJlYW0pO1xuXHQgIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKVxuXHQgICAgc3RyZWFtLnJlYWQoMCk7XG5cdH1cblx0XG5cdFJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuXHQgIGlmIChmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7XG5cdCAgICBkZWJ1ZygncGF1c2UnKTtcblx0ICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXHQgICAgdGhpcy5lbWl0KCdwYXVzZScpO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG5cdCAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXHQgIGRlYnVnKCdmbG93Jywgc3RhdGUuZmxvd2luZyk7XG5cdCAgaWYgKHN0YXRlLmZsb3dpbmcpIHtcblx0ICAgIGRvIHtcblx0ICAgICAgdmFyIGNodW5rID0gc3RyZWFtLnJlYWQoKTtcblx0ICAgIH0gd2hpbGUgKG51bGwgIT09IGNodW5rICYmIHN0YXRlLmZsb3dpbmcpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cblx0Ly8gVGhpcyBpcyAqbm90KiBwYXJ0IG9mIHRoZSByZWFkYWJsZSBzdHJlYW0gaW50ZXJmYWNlLlxuXHQvLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS5cblx0UmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihzdHJlYW0pIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHQgIHZhciBwYXVzZWQgPSBmYWxzZTtcblx0XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24oKSB7XG5cdCAgICBkZWJ1Zygnd3JhcHBlZCBlbmQnKTtcblx0ICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuXHQgICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuXHQgICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKVxuXHQgICAgICAgIHNlbGYucHVzaChjaHVuayk7XG5cdCAgICB9XG5cdFxuXHQgICAgc2VsZi5wdXNoKG51bGwpO1xuXHQgIH0pO1xuXHRcblx0ICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbihjaHVuaykge1xuXHQgICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpO1xuXHQgICAgaWYgKHN0YXRlLmRlY29kZXIpXG5cdCAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG5cdCAgICBpZiAoIWNodW5rIHx8ICFzdGF0ZS5vYmplY3RNb2RlICYmICFjaHVuay5sZW5ndGgpXG5cdCAgICAgIHJldHVybjtcblx0XG5cdCAgICB2YXIgcmV0ID0gc2VsZi5wdXNoKGNodW5rKTtcblx0ICAgIGlmICghcmV0KSB7XG5cdCAgICAgIHBhdXNlZCA9IHRydWU7XG5cdCAgICAgIHN0cmVhbS5wYXVzZSgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvLyBwcm94eSBhbGwgdGhlIG90aGVyIG1ldGhvZHMuXG5cdCAgLy8gaW1wb3J0YW50IHdoZW4gd3JhcHBpbmcgZmlsdGVycyBhbmQgZHVwbGV4ZXMuXG5cdCAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHtcblx0ICAgIGlmICh1dGlsLmlzRnVuY3Rpb24oc3RyZWFtW2ldKSAmJiB1dGlsLmlzVW5kZWZpbmVkKHRoaXNbaV0pKSB7XG5cdCAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbihtZXRob2QpIHsgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7XG5cdCAgICAgIH19KGkpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLlxuXHQgIHZhciBldmVudHMgPSBbJ2Vycm9yJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knLCAncGF1c2UnLCAncmVzdW1lJ107XG5cdCAgZm9yRWFjaChldmVudHMsIGZ1bmN0aW9uKGV2KSB7XG5cdCAgICBzdHJlYW0ub24oZXYsIHNlbGYuZW1pdC5iaW5kKHNlbGYsIGV2KSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8vIHdoZW4gd2UgdHJ5IHRvIGNvbnN1bWUgc29tZSBtb3JlIGJ5dGVzLCBzaW1wbHkgdW5wYXVzZSB0aGVcblx0ICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cblx0ICBzZWxmLl9yZWFkID0gZnVuY3Rpb24obikge1xuXHQgICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTtcblx0ICAgIGlmIChwYXVzZWQpIHtcblx0ICAgICAgcGF1c2VkID0gZmFsc2U7XG5cdCAgICAgIHN0cmVhbS5yZXN1bWUoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICByZXR1cm4gc2VsZjtcblx0fTtcblx0XG5cdFxuXHRcblx0Ly8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LlxuXHRSZWFkYWJsZS5fZnJvbUxpc3QgPSBmcm9tTGlzdDtcblx0XG5cdC8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy5cblx0Ly8gTGVuZ3RoIGlzIHRoZSBjb21iaW5lZCBsZW5ndGhzIG9mIGFsbCB0aGUgYnVmZmVycyBpbiB0aGUgbGlzdC5cblx0ZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHtcblx0ICB2YXIgbGlzdCA9IHN0YXRlLmJ1ZmZlcjtcblx0ICB2YXIgbGVuZ3RoID0gc3RhdGUubGVuZ3RoO1xuXHQgIHZhciBzdHJpbmdNb2RlID0gISFzdGF0ZS5kZWNvZGVyO1xuXHQgIHZhciBvYmplY3RNb2RlID0gISFzdGF0ZS5vYmplY3RNb2RlO1xuXHQgIHZhciByZXQ7XG5cdFxuXHQgIC8vIG5vdGhpbmcgaW4gdGhlIGxpc3QsIGRlZmluaXRlbHkgZW1wdHkuXG5cdCAgaWYgKGxpc3QubGVuZ3RoID09PSAwKVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdFxuXHQgIGlmIChsZW5ndGggPT09IDApXG5cdCAgICByZXQgPSBudWxsO1xuXHQgIGVsc2UgaWYgKG9iamVjdE1vZGUpXG5cdCAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG5cdCAgZWxzZSBpZiAoIW4gfHwgbiA+PSBsZW5ndGgpIHtcblx0ICAgIC8vIHJlYWQgaXQgYWxsLCB0cnVuY2F0ZSB0aGUgYXJyYXkuXG5cdCAgICBpZiAoc3RyaW5nTW9kZSlcblx0ICAgICAgcmV0ID0gbGlzdC5qb2luKCcnKTtcblx0ICAgIGVsc2Vcblx0ICAgICAgcmV0ID0gQnVmZmVyLmNvbmNhdChsaXN0LCBsZW5ndGgpO1xuXHQgICAgbGlzdC5sZW5ndGggPSAwO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyByZWFkIGp1c3Qgc29tZSBvZiBpdC5cblx0ICAgIGlmIChuIDwgbGlzdFswXS5sZW5ndGgpIHtcblx0ICAgICAgLy8ganVzdCB0YWtlIGEgcGFydCBvZiB0aGUgZmlyc3QgbGlzdCBpdGVtLlxuXHQgICAgICAvLyBzbGljZSBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy5cblx0ICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07XG5cdCAgICAgIHJldCA9IGJ1Zi5zbGljZSgwLCBuKTtcblx0ICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShuKTtcblx0ICAgIH0gZWxzZSBpZiAobiA9PT0gbGlzdFswXS5sZW5ndGgpIHtcblx0ICAgICAgLy8gZmlyc3QgbGlzdCBpcyBhIHBlcmZlY3QgbWF0Y2hcblx0ICAgICAgcmV0ID0gbGlzdC5zaGlmdCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gY29tcGxleCBjYXNlLlxuXHQgICAgICAvLyB3ZSBoYXZlIGVub3VnaCB0byBjb3ZlciBpdCwgYnV0IGl0IHNwYW5zIHBhc3QgdGhlIGZpcnN0IGJ1ZmZlci5cblx0ICAgICAgaWYgKHN0cmluZ01vZGUpXG5cdCAgICAgICAgcmV0ID0gJyc7XG5cdCAgICAgIGVsc2Vcblx0ICAgICAgICByZXQgPSBuZXcgQnVmZmVyKG4pO1xuXHRcblx0ICAgICAgdmFyIGMgPSAwO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbCAmJiBjIDwgbjsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07XG5cdCAgICAgICAgdmFyIGNweSA9IE1hdGgubWluKG4gLSBjLCBidWYubGVuZ3RoKTtcblx0XG5cdCAgICAgICAgaWYgKHN0cmluZ01vZGUpXG5cdCAgICAgICAgICByZXQgKz0gYnVmLnNsaWNlKDAsIGNweSk7XG5cdCAgICAgICAgZWxzZVxuXHQgICAgICAgICAgYnVmLmNvcHkocmV0LCBjLCAwLCBjcHkpO1xuXHRcblx0ICAgICAgICBpZiAoY3B5IDwgYnVmLmxlbmd0aClcblx0ICAgICAgICAgIGxpc3RbMF0gPSBidWYuc2xpY2UoY3B5KTtcblx0ICAgICAgICBlbHNlXG5cdCAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG5cdFxuXHQgICAgICAgIGMgKz0gY3B5O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pIHtcblx0ICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cdFxuXHQgIC8vIElmIHdlIGdldCBoZXJlIGJlZm9yZSBjb25zdW1pbmcgYWxsIHRoZSBieXRlcywgdGhlbiB0aGF0IGlzIGFcblx0ICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG5cdCAgaWYgKHN0YXRlLmxlbmd0aCA+IDApXG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZFJlYWRhYmxlIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7XG5cdFxuXHQgIGlmICghc3RhdGUuZW5kRW1pdHRlZCkge1xuXHQgICAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuXHQgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG5cdCAgICAgIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcblx0ICAgICAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcblx0ICAgICAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9yRWFjaCAoeHMsIGYpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZih4c1tpXSwgaSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mICh4cywgeCkge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpZiAoeHNbaV0gPT09IHgpIHJldHVybiBpO1xuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0sXG4vKiAyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIpIHsvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0Ly8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG5cdC8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXHRcblx0ZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKTtcblx0ICB9XG5cdCAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH1cblx0ZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblx0XG5cdGZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xuXHR9XG5cdGV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuO1xuXHRcblx0ZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cdFxuXHRmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xuXHR9XG5cdGV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcblx0XG5cdGZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJztcblx0fVxuXHRleHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cdFxuXHRmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG5cdH1cblx0ZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXHRcblx0ZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xuXHR9XG5cdGV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcblx0XG5cdGZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG5cdCAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH1cblx0ZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cdFxuXHRmdW5jdGlvbiBpc0RhdGUoZCkge1xuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdGV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXHRcblx0ZnVuY3Rpb24gaXNFcnJvcihlKSB7XG5cdCAgcmV0dXJuIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xuXHR9XG5cdGV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cdFxuXHRmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcblx0fVxuXHRleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cdFxuXHRleHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXHRcblx0ZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KS5CdWZmZXIpKVxuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcblx0ICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG5cdCAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuXHQgICAgICBjb25zdHJ1Y3Rvcjoge1xuXHQgICAgICAgIHZhbHVlOiBjdG9yLFxuXHQgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXHQgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9O1xuXHR9IGVsc2Uge1xuXHQgIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcblx0ICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG5cdCAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuXHQgICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuXHQgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiAoaWdub3JlZCkgKi9cblxuLyoqKi8gfSxcbi8qIDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQvLyBhIGR1cGxleCBzdHJlYW0gaXMganVzdCBhIHN0cmVhbSB0aGF0IGlzIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLlxuXHQvLyBTaW5jZSBKUyBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgcHJvdG90eXBhbCBpbmhlcml0YW5jZSwgdGhpcyBjbGFzc1xuXHQvLyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBSZWFkYWJsZSwgYW5kIHRoZW4gcGFyYXNpdGljYWxseSBmcm9tXG5cdC8vIFdyaXRhYmxlLlxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcblx0ICB2YXIga2V5cyA9IFtdO1xuXHQgIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuXHQgIHJldHVybiBrZXlzO1xuXHR9XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHR2YXIgUmVhZGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0dmFyIFdyaXRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdFxuXHR1dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpO1xuXHRcblx0Zm9yRWFjaChvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSksIGZ1bmN0aW9uKG1ldGhvZCkge1xuXHQgIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKVxuXHQgICAgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSlcblx0ICAgIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpO1xuXHRcblx0ICBSZWFkYWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXHQgIFdyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG5cdFxuXHQgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKVxuXHQgICAgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuXHRcblx0ICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSlcblx0ICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcblx0XG5cdCAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTtcblx0ICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93SGFsZk9wZW4gPT09IGZhbHNlKVxuXHQgICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG5cdFxuXHQgIHRoaXMub25jZSgnZW5kJywgb25lbmQpO1xuXHR9XG5cdFxuXHQvLyB0aGUgbm8taGFsZi1vcGVuIGVuZm9yY2VyXG5cdGZ1bmN0aW9uIG9uZW5kKCkge1xuXHQgIC8vIGlmIHdlIGFsbG93IGhhbGYtb3BlbiBzdGF0ZSwgb3IgaWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsXG5cdCAgLy8gdGhlbiB3ZSdyZSBvay5cblx0ICBpZiAodGhpcy5hbGxvd0hhbGZPcGVuIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpXG5cdCAgICByZXR1cm47XG5cdFxuXHQgIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cblx0ICAvLyBCdXQgYWxsb3cgbW9yZSB3cml0ZXMgdG8gaGFwcGVuIGluIHRoaXMgdGljay5cblx0ICBwcm9jZXNzLm5leHRUaWNrKHRoaXMuZW5kLmJpbmQodGhpcykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JFYWNoICh4cywgZikge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBmKHhzW2ldLCBpKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0sXG4vKiAzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0Ly8gQSBiaXQgc2ltcGxlciB0aGFuIHJlYWRhYmxlIHN0cmVhbXMuXG5cdC8vIEltcGxlbWVudCBhbiBhc3luYyAuX3dyaXRlKGNodW5rLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsXG5cdC8vIHRoZSBkcmFpbiBldmVudCBlbWlzc2lvbiBhbmQgYnVmZmVyaW5nLlxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBXcml0YWJsZTtcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KS5CdWZmZXI7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0V3JpdGFibGUuV3JpdGFibGVTdGF0ZSA9IFdyaXRhYmxlU3RhdGU7XG5cdFxuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdHZhciBTdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHV0aWwuaW5oZXJpdHMoV3JpdGFibGUsIFN0cmVhbSk7XG5cdFxuXHRmdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgdGhpcy5jaHVuayA9IGNodW5rO1xuXHQgIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcblx0ICB0aGlzLmNhbGxiYWNrID0gY2I7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG5cdCAgdmFyIER1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0ICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZVxuXHQgIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmXG5cdCAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKVxuXHQgIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG5cdCAgdmFyIGRlZmF1bHRId20gPSBvcHRpb25zLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcblx0ICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtO1xuXHRcblx0ICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhpcyBzdHJlYW1cblx0ICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuXG5cdCAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cdFxuXHQgIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpXG5cdCAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTtcblx0XG5cdCAgLy8gY2FzdCB0byBpbnRzLlxuXHQgIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrO1xuXHRcblx0ICB0aGlzLm5lZWREcmFpbiA9IGZhbHNlO1xuXHQgIC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpXG5cdCAgdGhpcy5lbmRpbmcgPSBmYWxzZTtcblx0ICAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkXG5cdCAgdGhpcy5lbmRlZCA9IGZhbHNlO1xuXHQgIC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZFxuXHQgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcblx0XG5cdCAgLy8gc2hvdWxkIHdlIGRlY29kZSBzdHJpbmdzIGludG8gYnVmZmVycyBiZWZvcmUgcGFzc2luZyB0byBfd3JpdGU/XG5cdCAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nXG5cdCAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC5cblx0ICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlO1xuXHQgIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTtcblx0XG5cdCAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuXHQgIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cblx0ICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG5cdCAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cdFxuXHQgIC8vIG5vdCBhbiBhY3R1YWwgYnVmZmVyIHdlIGtlZXAgdHJhY2sgb2YsIGJ1dCBhIG1lYXN1cmVtZW50XG5cdCAgLy8gb2YgaG93IG11Y2ggd2UncmUgd2FpdGluZyB0byBnZXQgcHVzaGVkIHRvIHNvbWUgdW5kZXJseWluZ1xuXHQgIC8vIHNvY2tldCBvciBmaWxlLlxuXHQgIHRoaXMubGVuZ3RoID0gMDtcblx0XG5cdCAgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS5cblx0ICB0aGlzLndyaXRpbmcgPSBmYWxzZTtcblx0XG5cdCAgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbFxuXHQgIHRoaXMuY29ya2VkID0gMDtcblx0XG5cdCAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG5cdCAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnlcblx0ICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG5cdCAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG5cdCAgdGhpcy5zeW5jID0gdHJ1ZTtcblx0XG5cdCAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaFxuXHQgIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0XG5cdCAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uXG5cdCAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG5cdFxuXHQgIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYilcblx0ICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbihlcikge1xuXHQgICAgb253cml0ZShzdHJlYW0sIGVyKTtcblx0ICB9O1xuXHRcblx0ICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYilcblx0ICB0aGlzLndyaXRlY2IgPSBudWxsO1xuXHRcblx0ICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuXG5cdCAgdGhpcy53cml0ZWxlbiA9IDA7XG5cdFxuXHQgIHRoaXMuYnVmZmVyID0gW107XG5cdFxuXHQgIC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzXG5cdCAgLy8gdGhpcyBtdXN0IGJlIDAgYmVmb3JlICdmaW5pc2gnIGNhbiBiZSBlbWl0dGVkXG5cdCAgdGhpcy5wZW5kaW5nY2IgPSAwO1xuXHRcblx0ICAvLyBlbWl0IHByZWZpbmlzaCBpZiB0aGUgb25seSB0aGluZyB3ZSdyZSB3YWl0aW5nIGZvciBpcyBfd3JpdGUgY2JzXG5cdCAgLy8gVGhpcyBpcyByZWxldmFudCBmb3Igc3luY2hyb25vdXMgVHJhbnNmb3JtIHN0cmVhbXNcblx0ICB0aGlzLnByZWZpbmlzaGVkID0gZmFsc2U7XG5cdFxuXHQgIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluXG5cdCAgdGhpcy5lcnJvckVtaXR0ZWQgPSBmYWxzZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuXHQgIHZhciBEdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdCAgLy8gV3JpdGFibGUgY3RvciBpcyBhcHBsaWVkIHRvIER1cGxleGVzLCB0aG91Z2ggdGhleSdyZSBub3Rcblx0ICAvLyBpbnN0YW5jZW9mIFdyaXRhYmxlLCB0aGV5J3JlIGluc3RhbmNlb2YgUmVhZGFibGUuXG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdyaXRhYmxlKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKVxuXHQgICAgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTtcblx0XG5cdCAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXHRcblx0ICAvLyBsZWdhY3kuXG5cdCAgdGhpcy53cml0YWJsZSA9IHRydWU7XG5cdFxuXHQgIFN0cmVhbS5jYWxsKHRoaXMpO1xuXHR9XG5cdFxuXHQvLyBPdGhlcndpc2UgcGVvcGxlIGNhbiBwaXBlIFdyaXRhYmxlIHN0cmVhbXMsIHdoaWNoIGlzIGp1c3Qgd3JvbmcuXG5cdFdyaXRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignQ2Fubm90IHBpcGUuIE5vdCByZWFkYWJsZS4nKSk7XG5cdH07XG5cdFxuXHRcblx0ZnVuY3Rpb24gd3JpdGVBZnRlckVuZChzdHJlYW0sIHN0YXRlLCBjYikge1xuXHQgIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7XG5cdCAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2Jcblx0ICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cdCAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgIGNiKGVyKTtcblx0ICB9KTtcblx0fVxuXHRcblx0Ly8gSWYgd2UgZ2V0IHNvbWV0aGluZyB0aGF0IGlzIG5vdCBhIGJ1ZmZlciwgc3RyaW5nLCBudWxsLCBvciB1bmRlZmluZWQsXG5cdC8vIGFuZCB3ZSdyZSBub3QgaW4gb2JqZWN0TW9kZSwgdGhlbiB0aGF0J3MgYW4gZXJyb3IuXG5cdC8vIE90aGVyd2lzZSBzdHJlYW0gY2h1bmtzIGFyZSBhbGwgY29uc2lkZXJlZCB0byBiZSBvZiBsZW5ndGg9MSwgYW5kIHRoZVxuXHQvLyB3YXRlcm1hcmtzIGRldGVybWluZSBob3cgbWFueSBvYmplY3RzIHRvIGtlZXAgaW4gdGhlIGJ1ZmZlciwgcmF0aGVyIHRoYW5cblx0Ly8gaG93IG1hbnkgYnl0ZXMgb3IgY2hhcmFjdGVycy5cblx0ZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHtcblx0ICB2YXIgdmFsaWQgPSB0cnVlO1xuXHQgIGlmICghdXRpbC5pc0J1ZmZlcihjaHVuaykgJiZcblx0ICAgICAgIXV0aWwuaXNTdHJpbmcoY2h1bmspICYmXG5cdCAgICAgICF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGNodW5rKSAmJlxuXHQgICAgICAhc3RhdGUub2JqZWN0TW9kZSkge1xuXHQgICAgdmFyIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuXHQgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXHQgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgY2IoZXIpO1xuXHQgICAgfSk7XG5cdCAgICB2YWxpZCA9IGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsaWQ7XG5cdH1cblx0XG5cdFdyaXRhYmxlLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXHQgIHZhciByZXQgPSBmYWxzZTtcblx0XG5cdCAgaWYgKHV0aWwuaXNGdW5jdGlvbihlbmNvZGluZykpIHtcblx0ICAgIGNiID0gZW5jb2Rpbmc7XG5cdCAgICBlbmNvZGluZyA9IG51bGw7XG5cdCAgfVxuXHRcblx0ICBpZiAodXRpbC5pc0J1ZmZlcihjaHVuaykpXG5cdCAgICBlbmNvZGluZyA9ICdidWZmZXInO1xuXHQgIGVsc2UgaWYgKCFlbmNvZGluZylcblx0ICAgIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuXHRcblx0ICBpZiAoIXV0aWwuaXNGdW5jdGlvbihjYikpXG5cdCAgICBjYiA9IGZ1bmN0aW9uKCkge307XG5cdFxuXHQgIGlmIChzdGF0ZS5lbmRlZClcblx0ICAgIHdyaXRlQWZ0ZXJFbmQodGhpcywgc3RhdGUsIGNiKTtcblx0ICBlbHNlIGlmICh2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG5cdCAgICBzdGF0ZS5wZW5kaW5nY2IrKztcblx0ICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgY2IpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdFdyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblx0XG5cdCAgc3RhdGUuY29ya2VkKys7XG5cdH07XG5cdFxuXHRXcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblx0XG5cdCAgaWYgKHN0YXRlLmNvcmtlZCkge1xuXHQgICAgc3RhdGUuY29ya2VkLS07XG5cdFxuXHQgICAgaWYgKCFzdGF0ZS53cml0aW5nICYmXG5cdCAgICAgICAgIXN0YXRlLmNvcmtlZCAmJlxuXHQgICAgICAgICFzdGF0ZS5maW5pc2hlZCAmJlxuXHQgICAgICAgICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmXG5cdCAgICAgICAgc3RhdGUuYnVmZmVyLmxlbmd0aClcblx0ICAgICAgY2xlYXJCdWZmZXIodGhpcywgc3RhdGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHtcblx0ICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiZcblx0ICAgICAgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiZcblx0ICAgICAgdXRpbC5pc1N0cmluZyhjaHVuaykpIHtcblx0ICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpO1xuXHQgIH1cblx0ICByZXR1cm4gY2h1bms7XG5cdH1cblx0XG5cdC8vIGlmIHdlJ3JlIGFscmVhZHkgd3JpdGluZyBzb21ldGhpbmcsIHRoZW4ganVzdCBwdXQgdGhpc1xuXHQvLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuXHQvLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLlxuXHRmdW5jdGlvbiB3cml0ZU9yQnVmZmVyKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICBjaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpO1xuXHQgIGlmICh1dGlsLmlzQnVmZmVyKGNodW5rKSlcblx0ICAgIGVuY29kaW5nID0gJ2J1ZmZlcic7XG5cdCAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXHRcblx0ICBzdGF0ZS5sZW5ndGggKz0gbGVuO1xuXHRcblx0ICB2YXIgcmV0ID0gc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaztcblx0ICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cblx0ICBpZiAoIXJldClcblx0ICAgIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7XG5cdFxuXHQgIGlmIChzdGF0ZS53cml0aW5nIHx8IHN0YXRlLmNvcmtlZClcblx0ICAgIHN0YXRlLmJ1ZmZlci5wdXNoKG5ldyBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSk7XG5cdCAgZWxzZVxuXHQgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcblx0XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIHN0YXRlLndyaXRlbGVuID0gbGVuO1xuXHQgIHN0YXRlLndyaXRlY2IgPSBjYjtcblx0ICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcblx0ICBzdGF0ZS5zeW5jID0gdHJ1ZTtcblx0ICBpZiAod3JpdGV2KVxuXHQgICAgc3RyZWFtLl93cml0ZXYoY2h1bmssIHN0YXRlLm9ud3JpdGUpO1xuXHQgIGVsc2Vcblx0ICAgIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcblx0ICBzdGF0ZS5zeW5jID0gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpIHtcblx0ICBpZiAoc3luYylcblx0ICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuXHQgICAgICBjYihlcik7XG5cdCAgICB9KTtcblx0ICBlbHNlIHtcblx0ICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuXHQgICAgY2IoZXIpO1xuXHQgIH1cblx0XG5cdCAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG5cdCAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpIHtcblx0ICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG5cdCAgc3RhdGUud3JpdGVjYiA9IG51bGw7XG5cdCAgc3RhdGUubGVuZ3RoIC09IHN0YXRlLndyaXRlbGVuO1xuXHQgIHN0YXRlLndyaXRlbGVuID0gMDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG5cdCAgdmFyIHN0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlO1xuXHQgIHZhciBzeW5jID0gc3RhdGUuc3luYztcblx0ICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXHRcblx0ICBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpO1xuXHRcblx0ICBpZiAoZXIpXG5cdCAgICBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtcblx0ICBlbHNlIHtcblx0ICAgIC8vIENoZWNrIGlmIHdlJ3JlIGFjdHVhbGx5IHJlYWR5IHRvIGZpbmlzaCwgYnV0IGRvbid0IGVtaXQgeWV0XG5cdCAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuXHRcblx0ICAgIGlmICghZmluaXNoZWQgJiZcblx0ICAgICAgICAhc3RhdGUuY29ya2VkICYmXG5cdCAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiZcblx0ICAgICAgICBzdGF0ZS5idWZmZXIubGVuZ3RoKSB7XG5cdCAgICAgIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzeW5jKSB7XG5cdCAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKSB7XG5cdCAgaWYgKCFmaW5pc2hlZClcblx0ICAgIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKTtcblx0ICBzdGF0ZS5wZW5kaW5nY2ItLTtcblx0ICBjYigpO1xuXHQgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuXHR9XG5cdFxuXHQvLyBNdXN0IGZvcmNlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBvbiBuZXh0VGljaywgc28gdGhhdCB3ZSBkb24ndFxuXHQvLyBlbWl0ICdkcmFpbicgYmVmb3JlIHRoZSB3cml0ZSgpIGNvbnN1bWVyIGdldHMgdGhlICdmYWxzZScgcmV0dXJuXG5cdC8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5cdGZ1bmN0aW9uIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKSB7XG5cdCAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcblx0ICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlO1xuXHQgICAgc3RyZWFtLmVtaXQoJ2RyYWluJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRcblx0Ly8gaWYgdGhlcmUncyBzb21ldGhpbmcgaW4gdGhlIGJ1ZmZlciB3YWl0aW5nLCB0aGVuIHByb2Nlc3MgaXRcblx0ZnVuY3Rpb24gY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSkge1xuXHQgIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuXHRcblx0ICBpZiAoc3RyZWFtLl93cml0ZXYgJiYgc3RhdGUuYnVmZmVyLmxlbmd0aCA+IDEpIHtcblx0ICAgIC8vIEZhc3QgY2FzZSwgd3JpdGUgZXZlcnl0aGluZyB1c2luZyBfd3JpdGV2KClcblx0ICAgIHZhciBjYnMgPSBbXTtcblx0ICAgIGZvciAodmFyIGMgPSAwOyBjIDwgc3RhdGUuYnVmZmVyLmxlbmd0aDsgYysrKVxuXHQgICAgICBjYnMucHVzaChzdGF0ZS5idWZmZXJbY10uY2FsbGJhY2spO1xuXHRcblx0ICAgIC8vIGNvdW50IHRoZSBvbmUgd2UgYXJlIGFkZGluZywgYXMgd2VsbC5cblx0ICAgIC8vIFRPRE8oaXNhYWNzKSBjbGVhbiB0aGlzIHVwXG5cdCAgICBzdGF0ZS5wZW5kaW5nY2IrKztcblx0ICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBzdGF0ZS5idWZmZXIsICcnLCBmdW5jdGlvbihlcnIpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcblx0ICAgICAgICBjYnNbaV0oZXJyKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8gQ2xlYXIgYnVmZmVyXG5cdCAgICBzdGF0ZS5idWZmZXIgPSBbXTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZVxuXHQgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBzdGF0ZS5idWZmZXIubGVuZ3RoOyBjKyspIHtcblx0ICAgICAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyW2NdO1xuXHQgICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuaztcblx0ICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7XG5cdCAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrO1xuXHQgICAgICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cdFxuXHQgICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuXHRcblx0ICAgICAgLy8gaWYgd2UgZGlkbid0IGNhbGwgdGhlIG9ud3JpdGUgaW1tZWRpYXRlbHksIHRoZW5cblx0ICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy5cblx0ICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseVxuXHQgICAgICAvLyBiZWluZyBwcm9jZXNzZWQsIHNvIG1vdmUgdGhlIGJ1ZmZlciBjb3VudGVyIHBhc3QgdGhlbS5cblx0ICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHtcblx0ICAgICAgICBjKys7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoYyA8IHN0YXRlLmJ1ZmZlci5sZW5ndGgpXG5cdCAgICAgIHN0YXRlLmJ1ZmZlciA9IHN0YXRlLmJ1ZmZlci5zbGljZShjKTtcblx0ICAgIGVsc2Vcblx0ICAgICAgc3RhdGUuYnVmZmVyLmxlbmd0aCA9IDA7XG5cdCAgfVxuXHRcblx0ICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG5cdH1cblx0XG5cdFdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgY2IobmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7XG5cdFxuXHR9O1xuXHRcblx0V3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsO1xuXHRcblx0V3JpdGFibGUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXHRcblx0ICBpZiAodXRpbC5pc0Z1bmN0aW9uKGNodW5rKSkge1xuXHQgICAgY2IgPSBjaHVuaztcblx0ICAgIGNodW5rID0gbnVsbDtcblx0ICAgIGVuY29kaW5nID0gbnVsbDtcblx0ICB9IGVsc2UgaWYgKHV0aWwuaXNGdW5jdGlvbihlbmNvZGluZykpIHtcblx0ICAgIGNiID0gZW5jb2Rpbmc7XG5cdCAgICBlbmNvZGluZyA9IG51bGw7XG5cdCAgfVxuXHRcblx0ICBpZiAoIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspKVxuXHQgICAgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpO1xuXHRcblx0ICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuXHQgIGlmIChzdGF0ZS5jb3JrZWQpIHtcblx0ICAgIHN0YXRlLmNvcmtlZCA9IDE7XG5cdCAgICB0aGlzLnVuY29yaygpO1xuXHQgIH1cblx0XG5cdCAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuXHQgIGlmICghc3RhdGUuZW5kaW5nICYmICFzdGF0ZS5maW5pc2hlZClcblx0ICAgIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG5cdH07XG5cdFxuXHRcblx0ZnVuY3Rpb24gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG5cdCAgcmV0dXJuIChzdGF0ZS5lbmRpbmcgJiZcblx0ICAgICAgICAgIHN0YXRlLmxlbmd0aCA9PT0gMCAmJlxuXHQgICAgICAgICAgIXN0YXRlLmZpbmlzaGVkICYmXG5cdCAgICAgICAgICAhc3RhdGUud3JpdGluZyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG5cdCAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCkge1xuXHQgICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlO1xuXHQgICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSkge1xuXHQgIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKTtcblx0ICBpZiAobmVlZCkge1xuXHQgICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkge1xuXHQgICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cdCAgICAgIHN0YXRlLmZpbmlzaGVkID0gdHJ1ZTtcblx0ICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpO1xuXHQgICAgfSBlbHNlXG5cdCAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTtcblx0ICB9XG5cdCAgcmV0dXJuIG5lZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG5cdCAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcblx0ICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcblx0ICBpZiAoY2IpIHtcblx0ICAgIGlmIChzdGF0ZS5maW5pc2hlZClcblx0ICAgICAgcHJvY2Vzcy5uZXh0VGljayhjYik7XG5cdCAgICBlbHNlXG5cdCAgICAgIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7XG5cdCAgfVxuXHQgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTgpKSlcblxuLyoqKi8gfSxcbi8qIDM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0dmFyIEJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpLkJ1ZmZlcjtcblx0XG5cdHZhciBpc0J1ZmZlckVuY29kaW5nID0gQnVmZmVyLmlzRW5jb2Rpbmdcblx0ICB8fCBmdW5jdGlvbihlbmNvZGluZykge1xuXHQgICAgICAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7XG5cdCAgICAgICAgIGNhc2UgJ2hleCc6IGNhc2UgJ3V0ZjgnOiBjYXNlICd1dGYtOCc6IGNhc2UgJ2FzY2lpJzogY2FzZSAnYmluYXJ5JzogY2FzZSAnYmFzZTY0JzogY2FzZSAndWNzMic6IGNhc2UgJ3Vjcy0yJzogY2FzZSAndXRmMTZsZSc6IGNhc2UgJ3V0Zi0xNmxlJzogY2FzZSAncmF3JzogcmV0dXJuIHRydWU7XG5cdCAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcblx0ICAgICAgIH1cblx0ICAgICB9XG5cdFxuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpIHtcblx0ICBpZiAoZW5jb2RpbmcgJiYgIWlzQnVmZmVyRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBTdHJpbmdEZWNvZGVyIHByb3ZpZGVzIGFuIGludGVyZmFjZSBmb3IgZWZmaWNpZW50bHkgc3BsaXR0aW5nIGEgc2VyaWVzIG9mXG5cdC8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZVxuXHQvLyBjaGFyYWN0ZXJzLiBDRVNVLTggaXMgaGFuZGxlZCBhcyBwYXJ0IG9mIHRoZSBVVEYtOCBlbmNvZGluZy5cblx0Ly9cblx0Ly8gQFRPRE8gSGFuZGxpbmcgYWxsIGVuY29kaW5ncyBpbnNpZGUgYSBzaW5nbGUgb2JqZWN0IG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0XG5cdC8vIHRvIHJlYXNvbiBhYm91dCB0aGlzIGNvZGUsIHNvIGl0IHNob3VsZCBiZSBzcGxpdCB1cCBpbiB0aGUgZnV0dXJlLlxuXHQvLyBAVE9ETyBUaGVyZSBzaG91bGQgYmUgYSB1dGY4LXN0cmljdCBlbmNvZGluZyB0aGF0IHJlamVjdHMgaW52YWxpZCBVVEYtOCBjb2RlXG5cdC8vIHBvaW50cyBhcyB1c2VkIGJ5IENFU1UtOC5cblx0dmFyIFN0cmluZ0RlY29kZXIgPSBleHBvcnRzLlN0cmluZ0RlY29kZXIgPSBmdW5jdGlvbihlbmNvZGluZykge1xuXHQgIHRoaXMuZW5jb2RpbmcgPSAoZW5jb2RpbmcgfHwgJ3V0ZjgnKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLCAnJyk7XG5cdCAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpO1xuXHQgIHN3aXRjaCAodGhpcy5lbmNvZGluZykge1xuXHQgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlc1xuXHQgICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ3VjczInOlxuXHQgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIC8vIFVURi0xNiByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMi1ieXRlc1xuXHQgICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyO1xuXHQgICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcjtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgICAvLyBCYXNlLTY0IHN0b3JlcyAzIGJ5dGVzIGluIDQgY2hhcnMsIGFuZCBwYWRzIHRoZSByZW1haW5kZXIuXG5cdCAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDM7XG5cdCAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTtcblx0ICAgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgLy8gRW5vdWdoIHNwYWNlIHRvIHN0b3JlIGFsbCBieXRlcyBvZiBhIHNpbmdsZSBjaGFyYWN0ZXIuIFVURi04IG5lZWRzIDRcblx0ICAvLyBieXRlcywgYnV0IENFU1UtOCBtYXkgcmVxdWlyZSB1cCB0byA2ICgzIGJ5dGVzIHBlciBzdXJyb2dhdGUpLlxuXHQgIHRoaXMuY2hhckJ1ZmZlciA9IG5ldyBCdWZmZXIoNik7XG5cdCAgLy8gTnVtYmVyIG9mIGJ5dGVzIHJlY2VpdmVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLlxuXHQgIHRoaXMuY2hhclJlY2VpdmVkID0gMDtcblx0ICAvLyBOdW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuXG5cdCAgdGhpcy5jaGFyTGVuZ3RoID0gMDtcblx0fTtcblx0XG5cdFxuXHQvLyB3cml0ZSBkZWNvZGVzIHRoZSBnaXZlbiBidWZmZXIgYW5kIHJldHVybnMgaXQgYXMgSlMgc3RyaW5nIHRoYXQgaXNcblx0Ly8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsXG5cdC8vIGNoYXJhY3RlciBmb3VuZCBhdCB0aGUgZW5kIG9mIHRoZSBidWZmZXIgaXMgYnVmZmVyZWQgdXAsIGFuZCB3aWxsIGJlXG5cdC8vIHJldHVybmVkIHdoZW4gY2FsbGluZyB3cml0ZSBhZ2FpbiB3aXRoIHRoZSByZW1haW5pbmcgYnl0ZXMuXG5cdC8vXG5cdC8vIE5vdGU6IENvbnZlcnRpbmcgYSBCdWZmZXIgY29udGFpbmluZyBhbiBvcnBoYW4gc3Vycm9nYXRlIHRvIGEgU3RyaW5nXG5cdC8vIGN1cnJlbnRseSB3b3JrcywgYnV0IGNvbnZlcnRpbmcgYSBTdHJpbmcgdG8gYSBCdWZmZXIgKHZpYSBgbmV3IEJ1ZmZlcmAsIG9yXG5cdC8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlXG5cdC8vIHJlcGxhY2VtZW50IGNoYXJhY3Rlci4gU2VlIGh0dHBzOi8vY29kZXJldmlldy5jaHJvbWl1bS5vcmcvMTIxMTczMDA5LyAuXG5cdFN0cmluZ0RlY29kZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7XG5cdCAgdmFyIGNoYXJTdHIgPSAnJztcblx0ICAvLyBpZiBvdXIgbGFzdCB3cml0ZSBlbmRlZCB3aXRoIGFuIGluY29tcGxldGUgbXVsdGlieXRlIGNoYXJhY3RlclxuXHQgIHdoaWxlICh0aGlzLmNoYXJMZW5ndGgpIHtcblx0ICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXJcblx0ICAgIHZhciBhdmFpbGFibGUgPSAoYnVmZmVyLmxlbmd0aCA+PSB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCkgP1xuXHQgICAgICAgIHRoaXMuY2hhckxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkIDpcblx0ICAgICAgICBidWZmZXIubGVuZ3RoO1xuXHRcblx0ICAgIC8vIGFkZCB0aGUgbmV3IGJ5dGVzIHRvIHRoZSBjaGFyIGJ1ZmZlclxuXHQgICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCB0aGlzLmNoYXJSZWNlaXZlZCwgMCwgYXZhaWxhYmxlKTtcblx0ICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IGF2YWlsYWJsZTtcblx0XG5cdCAgICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQgPCB0aGlzLmNoYXJMZW5ndGgpIHtcblx0ICAgICAgLy8gc3RpbGwgbm90IGVub3VnaCBjaGFycyBpbiB0aGlzIGJ1ZmZlcj8gd2FpdCBmb3IgbW9yZSAuLi5cblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHJlbW92ZSBieXRlcyBiZWxvbmdpbmcgdG8gdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGZyb20gdGhlIGJ1ZmZlclxuXHQgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7XG5cdFxuXHQgICAgLy8gZ2V0IHRoZSBjaGFyYWN0ZXIgdGhhdCB3YXMgc3BsaXRcblx0ICAgIGNoYXJTdHIgPSB0aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCwgdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcblx0XG5cdCAgICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyXG5cdCAgICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoY2hhclN0ci5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7XG5cdCAgICAgIHRoaXMuY2hhckxlbmd0aCArPSB0aGlzLnN1cnJvZ2F0ZVNpemU7XG5cdCAgICAgIGNoYXJTdHIgPSAnJztcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICB0aGlzLmNoYXJSZWNlaXZlZCA9IHRoaXMuY2hhckxlbmd0aCA9IDA7XG5cdFxuXHQgICAgLy8gaWYgdGhlcmUgYXJlIG5vIG1vcmUgYnl0ZXMgaW4gdGhpcyBidWZmZXIsIGp1c3QgZW1pdCBvdXIgY2hhclxuXHQgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIGNoYXJTdHI7XG5cdCAgICB9XG5cdCAgICBicmVhaztcblx0ICB9XG5cdFxuXHQgIC8vIGRldGVybWluZSBhbmQgc2V0IGNoYXJMZW5ndGggLyBjaGFyUmVjZWl2ZWRcblx0ICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcik7XG5cdFxuXHQgIHZhciBlbmQgPSBidWZmZXIubGVuZ3RoO1xuXHQgIGlmICh0aGlzLmNoYXJMZW5ndGgpIHtcblx0ICAgIC8vIGJ1ZmZlciB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIgYnl0ZXMgd2UgZ290XG5cdCAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIGJ1ZmZlci5sZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCwgZW5kKTtcblx0ICAgIGVuZCAtPSB0aGlzLmNoYXJSZWNlaXZlZDtcblx0ICB9XG5cdFxuXHQgIGNoYXJTdHIgKz0gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIGVuZCk7XG5cdFxuXHQgIHZhciBlbmQgPSBjaGFyU3RyLmxlbmd0aCAtIDE7XG5cdCAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGVuZCk7XG5cdCAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlclxuXHQgIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7XG5cdCAgICB2YXIgc2l6ZSA9IHRoaXMuc3Vycm9nYXRlU2l6ZTtcblx0ICAgIHRoaXMuY2hhckxlbmd0aCArPSBzaXplO1xuXHQgICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gc2l6ZTtcblx0ICAgIHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgc2l6ZSwgMCwgc2l6ZSk7XG5cdCAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIDAsIHNpemUpO1xuXHQgICAgcmV0dXJuIGNoYXJTdHIuc3Vic3RyaW5nKDAsIGVuZCk7XG5cdCAgfVxuXHRcblx0ICAvLyBvciBqdXN0IGVtaXQgdGhlIGNoYXJTdHJcblx0ICByZXR1cm4gY2hhclN0cjtcblx0fTtcblx0XG5cdC8vIGRldGVjdEluY29tcGxldGVDaGFyIGRldGVybWluZXMgaWYgdGhlcmUgaXMgYW4gaW5jb21wbGV0ZSBVVEYtOCBjaGFyYWN0ZXIgYXRcblx0Ly8gdGhlIGVuZCBvZiB0aGUgZ2l2ZW4gYnVmZmVyLiBJZiBzbywgaXQgc2V0cyB0aGlzLmNoYXJMZW5ndGggdG8gdGhlIGJ5dGVcblx0Ly8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzXG5cdC8vIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgdGhpcyBjaGFyYWN0ZXIuXG5cdFN0cmluZ0RlY29kZXIucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyID0gZnVuY3Rpb24oYnVmZmVyKSB7XG5cdCAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlclxuXHQgIHZhciBpID0gKGJ1ZmZlci5sZW5ndGggPj0gMykgPyAzIDogYnVmZmVyLmxlbmd0aDtcblx0XG5cdCAgLy8gRmlndXJlIG91dCBpZiBvbmUgb2YgdGhlIGxhc3QgaSBieXRlcyBvZiBvdXIgYnVmZmVyIGFubm91bmNlcyBhblxuXHQgIC8vIGluY29tcGxldGUgY2hhci5cblx0ICBmb3IgKDsgaSA+IDA7IGktLSkge1xuXHQgICAgdmFyIGMgPSBidWZmZXJbYnVmZmVyLmxlbmd0aCAtIGldO1xuXHRcblx0ICAgIC8vIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi04I0Rlc2NyaXB0aW9uXG5cdFxuXHQgICAgLy8gMTEwWFhYWFhcblx0ICAgIGlmIChpID09IDEgJiYgYyA+PiA1ID09IDB4MDYpIHtcblx0ICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gMTExMFhYWFhcblx0ICAgIGlmIChpIDw9IDIgJiYgYyA+PiA0ID09IDB4MEUpIHtcblx0ICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMztcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gMTExMTBYWFhcblx0ICAgIGlmIChpIDw9IDMgJiYgYyA+PiAzID09IDB4MUUpIHtcblx0ICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gNDtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHRoaXMuY2hhclJlY2VpdmVkID0gaTtcblx0fTtcblx0XG5cdFN0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHQgIHZhciByZXMgPSAnJztcblx0ICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpXG5cdCAgICByZXMgPSB0aGlzLndyaXRlKGJ1ZmZlcik7XG5cdFxuXHQgIGlmICh0aGlzLmNoYXJSZWNlaXZlZCkge1xuXHQgICAgdmFyIGNyID0gdGhpcy5jaGFyUmVjZWl2ZWQ7XG5cdCAgICB2YXIgYnVmID0gdGhpcy5jaGFyQnVmZmVyO1xuXHQgICAgdmFyIGVuYyA9IHRoaXMuZW5jb2Rpbmc7XG5cdCAgICByZXMgKz0gYnVmLnNsaWNlKDAsIGNyKS50b1N0cmluZyhlbmMpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlcztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHBhc3NUaHJvdWdoV3JpdGUoYnVmZmVyKSB7XG5cdCAgcmV0dXJuIGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHtcblx0ICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAyO1xuXHQgIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMiA6IDA7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NERldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikge1xuXHQgIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDM7XG5cdCAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAzIDogMDtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdFxuXHQvLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvXG5cdC8vIHNvbWV0aGluZyB3aXRoIHRoZSBkYXRhLiAgU29tZXRpbWVzIGl0J3MgY2FsbGVkIGEgXCJmaWx0ZXJcIixcblx0Ly8gYnV0IHRoYXQncyBub3QgYSBncmVhdCBuYW1lIGZvciBpdCwgc2luY2UgdGhhdCBpbXBsaWVzIGEgdGhpbmcgd2hlcmVcblx0Ly8gc29tZSBiaXRzIHBhc3MgdGhyb3VnaCwgYW5kIG90aGVycyBhcmUgc2ltcGx5IGlnbm9yZWQuICAoVGhhdCB3b3VsZFxuXHQvLyBiZSBhIHZhbGlkIGV4YW1wbGUgb2YgYSB0cmFuc2Zvcm0sIG9mIGNvdXJzZS4pXG5cdC8vXG5cdC8vIFdoaWxlIHRoZSBvdXRwdXQgaXMgY2F1c2FsbHkgcmVsYXRlZCB0byB0aGUgaW5wdXQsIGl0J3Mgbm90IGFcblx0Ly8gbmVjZXNzYXJpbHkgc3ltbWV0cmljIG9yIHN5bmNocm9ub3VzIHRyYW5zZm9ybWF0aW9uLiAgRm9yIGV4YW1wbGUsXG5cdC8vIGEgemxpYiBzdHJlYW0gbWlnaHQgdGFrZSBtdWx0aXBsZSBwbGFpbi10ZXh0IHdyaXRlcygpLCBhbmQgdGhlblxuXHQvLyBlbWl0IGEgc2luZ2xlIGNvbXByZXNzZWQgY2h1bmsgc29tZSB0aW1lIGluIHRoZSBmdXR1cmUuXG5cdC8vXG5cdC8vIEhlcmUncyBob3cgdGhpcyB3b3Jrczpcblx0Ly9cblx0Ly8gVGhlIFRyYW5zZm9ybSBzdHJlYW0gaGFzIGFsbCB0aGUgYXNwZWN0cyBvZiB0aGUgcmVhZGFibGUgYW5kIHdyaXRhYmxlXG5cdC8vIHN0cmVhbSBjbGFzc2VzLiAgV2hlbiB5b3Ugd3JpdGUoY2h1bmspLCB0aGF0IGNhbGxzIF93cml0ZShjaHVuayxjYilcblx0Ly8gaW50ZXJuYWxseSwgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlcmUncyBhIGxvdCBvZiBwZW5kaW5nIHdyaXRlc1xuXHQvLyBidWZmZXJlZCB1cC4gIFdoZW4geW91IGNhbGwgcmVhZCgpLCB0aGF0IGNhbGxzIF9yZWFkKG4pIHVudGlsXG5cdC8vIHRoZXJlJ3MgZW5vdWdoIHBlbmRpbmcgcmVhZGFibGUgZGF0YSBidWZmZXJlZCB1cC5cblx0Ly9cblx0Ly8gSW4gYSB0cmFuc2Zvcm0gc3RyZWFtLCB0aGUgd3JpdHRlbiBkYXRhIGlzIHBsYWNlZCBpbiBhIGJ1ZmZlci4gIFdoZW5cblx0Ly8gX3JlYWQobikgaXMgY2FsbGVkLCBpdCB0cmFuc2Zvcm1zIHRoZSBxdWV1ZWQgdXAgZGF0YSwgY2FsbGluZyB0aGVcblx0Ly8gYnVmZmVyZWQgX3dyaXRlIGNiJ3MgYXMgaXQgY29uc3VtZXMgY2h1bmtzLiAgSWYgY29uc3VtaW5nIGEgc2luZ2xlXG5cdC8vIHdyaXR0ZW4gY2h1bmsgd291bGQgcmVzdWx0IGluIG11bHRpcGxlIG91dHB1dCBjaHVua3MsIHRoZW4gdGhlIGZpcnN0XG5cdC8vIG91dHB1dHRlZCBiaXQgY2FsbHMgdGhlIHJlYWRjYiwgYW5kIHN1YnNlcXVlbnQgY2h1bmtzIGp1c3QgZ28gaW50b1xuXHQvLyB0aGUgcmVhZCBidWZmZXIsIGFuZCB3aWxsIGNhdXNlIGl0IHRvIGVtaXQgJ3JlYWRhYmxlJyBpZiBuZWNlc3NhcnkuXG5cdC8vXG5cdC8vIFRoaXMgd2F5LCBiYWNrLXByZXNzdXJlIGlzIGFjdHVhbGx5IGRldGVybWluZWQgYnkgdGhlIHJlYWRpbmcgc2lkZSxcblx0Ly8gc2luY2UgX3JlYWQgaGFzIHRvIGJlIGNhbGxlZCB0byBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IGNodW5rLiAgSG93ZXZlcixcblx0Ly8gYSBwYXRob2xvZ2ljYWwgaW5mbGF0ZSB0eXBlIG9mIHRyYW5zZm9ybSBjYW4gY2F1c2UgZXhjZXNzaXZlIGJ1ZmZlcmluZ1xuXHQvLyBoZXJlLiAgRm9yIGV4YW1wbGUsIGltYWdpbmUgYSBzdHJlYW0gd2hlcmUgZXZlcnkgYnl0ZSBvZiBpbnB1dCBpc1xuXHQvLyBpbnRlcnByZXRlZCBhcyBhbiBpbnRlZ2VyIGZyb20gMC0yNTUsIGFuZCB0aGVuIHJlc3VsdHMgaW4gdGhhdCBtYW55XG5cdC8vIGJ5dGVzIG9mIG91dHB1dC4gIFdyaXRpbmcgdGhlIDQgYnl0ZXMge2ZmLGZmLGZmLGZmfSB3b3VsZCByZXN1bHQgaW5cblx0Ly8gMWtiIG9mIGRhdGEgYmVpbmcgb3V0cHV0LiAgSW4gdGhpcyBjYXNlLCB5b3UgY291bGQgd3JpdGUgYSB2ZXJ5IHNtYWxsXG5cdC8vIGFtb3VudCBvZiBpbnB1dCwgYW5kIGVuZCB1cCB3aXRoIGEgdmVyeSBsYXJnZSBhbW91bnQgb2Ygb3V0cHV0LiAgSW5cblx0Ly8gc3VjaCBhIHBhdGhvbG9naWNhbCBpbmZsYXRpbmcgbWVjaGFuaXNtLCB0aGVyZSdkIGJlIG5vIHdheSB0byB0ZWxsXG5cdC8vIHRoZSBzeXN0ZW0gdG8gc3RvcCBkb2luZyB0aGUgdHJhbnNmb3JtLiAgQSBzaW5nbGUgNE1CIHdyaXRlIGNvdWxkXG5cdC8vIGNhdXNlIHRoZSBzeXN0ZW0gdG8gcnVuIG91dCBvZiBtZW1vcnkuXG5cdC8vXG5cdC8vIEhvd2V2ZXIsIGV2ZW4gaW4gc3VjaCBhIHBhdGhvbG9naWNhbCBjYXNlLCBvbmx5IGEgc2luZ2xlIHdyaXR0ZW4gY2h1bmtcblx0Ly8gd291bGQgYmUgY29uc3VtZWQsIGFuZCB0aGVuIHRoZSByZXN0IHdvdWxkIHdhaXQgKHVuLXRyYW5zZm9ybWVkKSB1bnRpbFxuXHQvLyB0aGUgcmVzdWx0cyBvZiB0aGUgcHJldmlvdXMgdHJhbnNmb3JtZWQgY2h1bmsgd2VyZSBjb25zdW1lZC5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVHJhbnNmb3JtO1xuXHRcblx0dmFyIER1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdHV0aWwuaW5oZXJpdHMoVHJhbnNmb3JtLCBEdXBsZXgpO1xuXHRcblx0XG5cdGZ1bmN0aW9uIFRyYW5zZm9ybVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuXHQgIHRoaXMuYWZ0ZXJUcmFuc2Zvcm0gPSBmdW5jdGlvbihlciwgZGF0YSkge1xuXHQgICAgcmV0dXJuIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuXHQgIHRoaXMudHJhbnNmb3JtaW5nID0gZmFsc2U7XG5cdCAgdGhpcy53cml0ZWNiID0gbnVsbDtcblx0ICB0aGlzLndyaXRlY2h1bmsgPSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKSB7XG5cdCAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTtcblx0ICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblx0XG5cdCAgdmFyIGNiID0gdHMud3JpdGVjYjtcblx0XG5cdCAgaWYgKCFjYilcblx0ICAgIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vIHdyaXRlY2IgaW4gVHJhbnNmb3JtIGNsYXNzJykpO1xuXHRcblx0ICB0cy53cml0ZWNodW5rID0gbnVsbDtcblx0ICB0cy53cml0ZWNiID0gbnVsbDtcblx0XG5cdCAgaWYgKCF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEpKVxuXHQgICAgc3RyZWFtLnB1c2goZGF0YSk7XG5cdFxuXHQgIGlmIChjYilcblx0ICAgIGNiKGVyKTtcblx0XG5cdCAgdmFyIHJzID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXHQgIHJzLnJlYWRpbmcgPSBmYWxzZTtcblx0ICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHtcblx0ICAgIHN0cmVhbS5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBUcmFuc2Zvcm0ob3B0aW9ucykge1xuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0pKVxuXHQgICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0ob3B0aW9ucyk7XG5cdFxuXHQgIER1cGxleC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXHRcblx0ICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IG5ldyBUcmFuc2Zvcm1TdGF0ZShvcHRpb25zLCB0aGlzKTtcblx0XG5cdCAgLy8gd2hlbiB0aGUgd3JpdGFibGUgc2lkZSBmaW5pc2hlcywgdGhlbiBmbHVzaCBvdXQgYW55dGhpbmcgcmVtYWluaW5nLlxuXHQgIHZhciBzdHJlYW0gPSB0aGlzO1xuXHRcblx0ICAvLyBzdGFydCBvdXQgYXNraW5nIGZvciBhIHJlYWRhYmxlIGV2ZW50IG9uY2UgZGF0YSBpcyB0cmFuc2Zvcm1lZC5cblx0ICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cdFxuXHQgIC8vIHdlIGhhdmUgaW1wbGVtZW50ZWQgdGhlIF9yZWFkIG1ldGhvZCwgYW5kIGRvbmUgdGhlIG90aGVyIHRoaW5nc1xuXHQgIC8vIHRoYXQgUmVhZGFibGUgd2FudHMgYmVmb3JlIHRoZSBmaXJzdCBfcmVhZCBjYWxsLCBzbyB1bnNldCB0aGVcblx0ICAvLyBzeW5jIGd1YXJkIGZsYWcuXG5cdCAgdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jID0gZmFsc2U7XG5cdFxuXHQgIHRoaXMub25jZSgncHJlZmluaXNoJywgZnVuY3Rpb24oKSB7XG5cdCAgICBpZiAodXRpbC5pc0Z1bmN0aW9uKHRoaXMuX2ZsdXNoKSlcblx0ICAgICAgdGhpcy5fZmx1c2goZnVuY3Rpb24oZXIpIHtcblx0ICAgICAgICBkb25lKHN0cmVhbSwgZXIpO1xuXHQgICAgICB9KTtcblx0ICAgIGVsc2Vcblx0ICAgICAgZG9uZShzdHJlYW0pO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRUcmFuc2Zvcm0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHtcblx0ICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7XG5cdCAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7XG5cdH07XG5cdFxuXHQvLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiFcblx0Ly8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuXHQvLyAnY2h1bmsnIGlzIGFuIGlucHV0IGNodW5rLlxuXHQvL1xuXHQvLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXRcblx0Ly8gdG8gdGhlIHJlYWRhYmxlIHNpZGUuICBZb3UgbWF5IGNhbGwgJ3B1c2gnIHplcm8gb3IgbW9yZSB0aW1lcy5cblx0Ly9cblx0Ly8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3Ncblx0Ly8gYW4gZXJyb3IsIHRoZW4gdGhhdCdsbCBwdXQgdGhlIGh1cnQgb24gdGhlIHdob2xlIG9wZXJhdGlvbi4gIElmIHlvdVxuXHQvLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLlxuXHRUcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTtcblx0fTtcblx0XG5cdFRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuXHQgIHRzLndyaXRlY2IgPSBjYjtcblx0ICB0cy53cml0ZWNodW5rID0gY2h1bms7XG5cdCAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nO1xuXHQgIGlmICghdHMudHJhbnNmb3JtaW5nKSB7XG5cdCAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHQgICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHxcblx0ICAgICAgICBycy5uZWVkUmVhZGFibGUgfHxcblx0ICAgICAgICBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKVxuXHQgICAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuXG5cdC8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuXG5cdC8vIFRoYXQgd2UgZ290IGhlcmUgbWVhbnMgdGhhdCB0aGUgcmVhZGFibGUgc2lkZSB3YW50cyBtb3JlIGRhdGEuXG5cdFRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbihuKSB7XG5cdCAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG5cdFxuXHQgIGlmICghdXRpbC5pc051bGwodHMud3JpdGVjaHVuaykgJiYgdHMud3JpdGVjYiAmJiAhdHMudHJhbnNmb3JtaW5nKSB7XG5cdCAgICB0cy50cmFuc2Zvcm1pbmcgPSB0cnVlO1xuXHQgICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpblxuXHQgICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuXG5cdCAgICB0cy5uZWVkVHJhbnNmb3JtID0gdHJ1ZTtcblx0ICB9XG5cdH07XG5cdFxuXHRcblx0ZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyKSB7XG5cdCAgaWYgKGVyKVxuXHQgICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblx0XG5cdCAgLy8gaWYgdGhlcmUncyBub3RoaW5nIGluIHRoZSB3cml0ZSBidWZmZXIsIHRoZW4gdGhhdCBtZWFuc1xuXHQgIC8vIHRoYXQgbm90aGluZyBtb3JlIHdpbGwgZXZlciBiZSBwcm92aWRlZFxuXHQgIHZhciB3cyA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcblx0ICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlO1xuXHRcblx0ICBpZiAod3MubGVuZ3RoKVxuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3MubGVuZ3RoICE9IDAnKTtcblx0XG5cdCAgaWYgKHRzLnRyYW5zZm9ybWluZylcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHN0aWxsIHRyYW5zZm9ybWluZycpO1xuXHRcblx0ICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQvLyBhIHBhc3N0aHJvdWdoIHN0cmVhbS5cblx0Ly8gYmFzaWNhbGx5IGp1c3QgdGhlIG1vc3QgbWluaW1hbCBzb3J0IG9mIFRyYW5zZm9ybSBzdHJlYW0uXG5cdC8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFBhc3NUaHJvdWdoO1xuXHRcblx0dmFyIFRyYW5zZm9ybSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdHV0aWwuaW5oZXJpdHMoUGFzc1Rocm91Z2gsIFRyYW5zZm9ybSk7XG5cdFxuXHRmdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoKSlcblx0ICAgIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cdFxuXHQgIFRyYW5zZm9ybS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXHR9XG5cdFxuXHRQYXNzVGhyb3VnaC5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICBjYihudWxsLCBjaHVuayk7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpXG5cblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpXG5cblxuLyoqKi8gfSxcbi8qIDM5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpXG5cblxuLyoqKi8gfSxcbi8qIDQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpXG5cblxuLyoqKi8gfSxcbi8qIDQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qXG5cdCAqIGV4dHNwcmludGYuanM6IGV4dGVuZGVkIFBPU0lYLXN0eWxlIHNwcmludGZcblx0ICovXG5cdFxuXHR2YXIgbW9kX2Fzc2VydCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgbW9kX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdC8qXG5cdCAqIFB1YmxpYyBpbnRlcmZhY2Vcblx0ICovXG5cdGV4cG9ydHMuc3ByaW50ZiA9IGpzU3ByaW50Zjtcblx0ZXhwb3J0cy5wcmludGYgPSBqc1ByaW50Zjtcblx0ZXhwb3J0cy5mcHJpbnRmID0ganNGcHJpbnRmO1xuXHRcblx0Lypcblx0ICogU3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHNbbl1wcmludGYoM2MpLiAgV2UgbWFrZSBhIGJlc3QgZWZmb3J0IHRvIHRocm93IGFuXG5cdCAqIGV4Y2VwdGlvbiB3aGVuIGdpdmVuIGEgZm9ybWF0IHN0cmluZyB3ZSBkb24ndCB1bmRlcnN0YW5kLCByYXRoZXIgdGhhblxuXHQgKiBpZ25vcmluZyBpdCwgc28gdGhhdCB3ZSB3b24ndCBicmVhayBleGlzdGluZyBwcm9ncmFtcyBpZi93aGVuIHdlIGdvIGltcGxlbWVudFxuXHQgKiB0aGUgcmVzdCBvZiB0aGlzLlxuXHQgKlxuXHQgKiBUaGlzIGltcGxlbWVudGF0aW9uIGN1cnJlbnRseSBzdXBwb3J0cyBzcGVjaWZ5aW5nXG5cdCAqXHQtIGZpZWxkIGFsaWdubWVudCAoJy0nIGZsYWcpLFxuXHQgKiBcdC0gemVyby1wYWQgKCcwJyBmbGFnKVxuXHQgKlx0LSBhbHdheXMgc2hvdyBudW1lcmljIHNpZ24gKCcrJyBmbGFnKSxcblx0ICpcdC0gZmllbGQgd2lkdGhcblx0ICpcdC0gY29udmVyc2lvbnMgZm9yIHN0cmluZ3MsIGRlY2ltYWwgaW50ZWdlcnMsIGFuZCBmbG9hdHMgKG51bWJlcnMpLlxuXHQgKlx0LSBhcmd1bWVudCBzaXplIHNwZWNpZmllcnMuICBUaGVzZSBhcmUgYWxsIGFjY2VwdGVkIGJ1dCBpZ25vcmVkLCBzaW5jZVxuXHQgKlx0ICBKYXZhc2NyaXB0IGhhcyBubyBub3Rpb24gb2YgdGhlIHBoeXNpY2FsIHNpemUgb2YgYW4gYXJndW1lbnQuXG5cdCAqXG5cdCAqIEV2ZXJ5dGhpbmcgZWxzZSBpcyBjdXJyZW50bHkgdW5zdXBwb3J0ZWQsIG1vc3Qgbm90YWJseSBwcmVjaXNpb24sIHVuc2lnbmVkXG5cdCAqIG51bWJlcnMsIG5vbi1kZWNpbWFsIG51bWJlcnMsIGFuZCBjaGFyYWN0ZXJzLlxuXHQgKi9cblx0ZnVuY3Rpb24ganNTcHJpbnRmKGZtdClcblx0e1xuXHRcdHZhciByZWdleCA9IFtcblx0XHQgICAgJyhbXiVdKiknLFx0XHRcdFx0Lyogbm9ybWFsIHRleHQgKi9cblx0XHQgICAgJyUnLFx0XHRcdFx0Lyogc3RhcnQgb2YgZm9ybWF0ICovXG5cdFx0ICAgICcoW1xcJ1xcXFwtKyAjMF0qPyknLFx0XHRcdC8qIGZsYWdzIChvcHRpb25hbCkgKi9cblx0XHQgICAgJyhbMS05XVxcXFxkKik/JyxcdFx0XHQvKiB3aWR0aCAob3B0aW9uYWwpICovXG5cdFx0ICAgICcoXFxcXC4oWzEtOV1cXFxcZCopKT8nLFx0XHQvKiBwcmVjaXNpb24gKG9wdGlvbmFsKSAqL1xuXHRcdCAgICAnW2xoanp0TF0qPycsXHRcdFx0LyogbGVuZ3RoIG1vZHMgKGlnbm9yZWQpICovXG5cdFx0ICAgICcoW2Rpb3V4WGZGZUVnR2FBY0NzU3AlanJdKSdcdC8qIGNvbnZlcnNpb24gKi9cblx0XHRdLmpvaW4oJycpO1xuXHRcblx0XHR2YXIgcmUgPSBuZXcgUmVnRXhwKHJlZ2V4KTtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdFx0dmFyIGZsYWdzLCB3aWR0aCwgcHJlY2lzaW9uLCBjb252ZXJzaW9uO1xuXHRcdHZhciBsZWZ0LCBwYWQsIHNpZ24sIGFyZywgbWF0Y2g7XG5cdFx0dmFyIHJldCA9ICcnO1xuXHRcdHZhciBhcmduID0gMTtcblx0XG5cdFx0bW9kX2Fzc2VydC5lcXVhbCgnc3RyaW5nJywgdHlwZW9mIChmbXQpKTtcblx0XG5cdFx0d2hpbGUgKChtYXRjaCA9IHJlLmV4ZWMoZm10KSkgIT09IG51bGwpIHtcblx0XHRcdHJldCArPSBtYXRjaFsxXTtcblx0XHRcdGZtdCA9IGZtdC5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcblx0XG5cdFx0XHRmbGFncyA9IG1hdGNoWzJdIHx8ICcnO1xuXHRcdFx0d2lkdGggPSBtYXRjaFszXSB8fCAwO1xuXHRcdFx0cHJlY2lzaW9uID0gbWF0Y2hbNF0gfHwgJyc7XG5cdFx0XHRjb252ZXJzaW9uID0gbWF0Y2hbNl07XG5cdFx0XHRsZWZ0ID0gZmFsc2U7XG5cdFx0XHRzaWduID0gZmFsc2U7XG5cdFx0XHRwYWQgPSAnICc7XG5cdFxuXHRcdFx0aWYgKGNvbnZlcnNpb24gPT0gJyUnKSB7XG5cdFx0XHRcdHJldCArPSAnJSc7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmIChhcmdzLmxlbmd0aCA9PT0gMClcblx0XHRcdFx0dGhyb3cgKG5ldyBFcnJvcigndG9vIGZldyBhcmdzIHRvIHNwcmludGYnKSk7XG5cdFxuXHRcdFx0YXJnID0gYXJncy5zaGlmdCgpO1xuXHRcdFx0YXJnbisrO1xuXHRcblx0XHRcdGlmIChmbGFncy5tYXRjaCgvW1xcJyAjXS8pKVxuXHRcdFx0XHR0aHJvdyAobmV3IEVycm9yKFxuXHRcdFx0XHQgICAgJ3Vuc3VwcG9ydGVkIGZsYWdzOiAnICsgZmxhZ3MpKTtcblx0XG5cdFx0XHRpZiAocHJlY2lzaW9uLmxlbmd0aCA+IDApXG5cdFx0XHRcdHRocm93IChuZXcgRXJyb3IoXG5cdFx0XHRcdCAgICAnbm9uLXplcm8gcHJlY2lzaW9uIG5vdCBzdXBwb3J0ZWQnKSk7XG5cdFxuXHRcdFx0aWYgKGZsYWdzLm1hdGNoKC8tLykpXG5cdFx0XHRcdGxlZnQgPSB0cnVlO1xuXHRcblx0XHRcdGlmIChmbGFncy5tYXRjaCgvMC8pKVxuXHRcdFx0XHRwYWQgPSAnMCc7XG5cdFxuXHRcdFx0aWYgKGZsYWdzLm1hdGNoKC9cXCsvKSlcblx0XHRcdFx0c2lnbiA9IHRydWU7XG5cdFxuXHRcdFx0c3dpdGNoIChjb252ZXJzaW9uKSB7XG5cdFx0XHRjYXNlICdzJzpcblx0XHRcdFx0aWYgKGFyZyA9PT0gdW5kZWZpbmVkIHx8IGFyZyA9PT0gbnVsbClcblx0XHRcdFx0XHR0aHJvdyAobmV3IEVycm9yKCdhcmd1bWVudCAnICsgYXJnbiArXG5cdFx0XHRcdFx0ICAgICc6IGF0dGVtcHRlZCB0byBwcmludCB1bmRlZmluZWQgb3IgbnVsbCAnICtcblx0XHRcdFx0XHQgICAgJ2FzIGEgc3RyaW5nJykpO1xuXHRcdFx0XHRyZXQgKz0gZG9QYWQocGFkLCB3aWR0aCwgbGVmdCwgYXJnLnRvU3RyaW5nKCkpO1xuXHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRjYXNlICdkJzpcblx0XHRcdFx0YXJnID0gTWF0aC5mbG9vcihhcmcpO1xuXHRcdFx0XHQvKmpzbDpmYWxsdGhydSovXG5cdFx0XHRjYXNlICdmJzpcblx0XHRcdFx0c2lnbiA9IHNpZ24gJiYgYXJnID4gMCA/ICcrJyA6ICcnO1xuXHRcdFx0XHRyZXQgKz0gc2lnbiArIGRvUGFkKHBhZCwgd2lkdGgsIGxlZnQsXG5cdFx0XHRcdCAgICBhcmcudG9TdHJpbmcoKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcblx0XHRcdGNhc2UgJ3gnOlxuXHRcdFx0XHRyZXQgKz0gZG9QYWQocGFkLCB3aWR0aCwgbGVmdCwgYXJnLnRvU3RyaW5nKDE2KSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcblx0XHRcdGNhc2UgJ2onOiAvKiBub24tc3RhbmRhcmQgKi9cblx0XHRcdFx0aWYgKHdpZHRoID09PSAwKVxuXHRcdFx0XHRcdHdpZHRoID0gMTA7XG5cdFx0XHRcdHJldCArPSBtb2RfdXRpbC5pbnNwZWN0KGFyZywgZmFsc2UsIHdpZHRoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFxuXHRcdFx0Y2FzZSAncic6IC8qIG5vbi1zdGFuZGFyZCAqL1xuXHRcdFx0XHRyZXQgKz0gZHVtcEV4Y2VwdGlvbihhcmcpO1xuXHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyAobmV3IEVycm9yKCd1bnN1cHBvcnRlZCBjb252ZXJzaW9uOiAnICtcblx0XHRcdFx0ICAgIGNvbnZlcnNpb24pKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldCArPSBmbXQ7XG5cdFx0cmV0dXJuIChyZXQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBqc1ByaW50ZigpIHtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdFx0YXJncy51bnNoaWZ0KHByb2Nlc3Muc3Rkb3V0KTtcblx0XHRqc0ZwcmludGYuYXBwbHkobnVsbCwgYXJncyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGpzRnByaW50ZihzdHJlYW0pIHtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdFx0cmV0dXJuIChzdHJlYW0ud3JpdGUoanNTcHJpbnRmLmFwcGx5KHRoaXMsIGFyZ3MpKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRvUGFkKGNociwgd2lkdGgsIGxlZnQsIHN0cilcblx0e1xuXHRcdHZhciByZXQgPSBzdHI7XG5cdFxuXHRcdHdoaWxlIChyZXQubGVuZ3RoIDwgd2lkdGgpIHtcblx0XHRcdGlmIChsZWZ0KVxuXHRcdFx0XHRyZXQgKz0gY2hyO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRyZXQgPSBjaHIgKyByZXQ7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKHJldCk7XG5cdH1cblx0XG5cdC8qXG5cdCAqIFRoaXMgZnVuY3Rpb24gZHVtcHMgbG9uZyBzdGFjayB0cmFjZXMgZm9yIGV4Y2VwdGlvbnMgaGF2aW5nIGEgY2F1c2UoKSBtZXRob2QuXG5cdCAqIFNlZSBub2RlLXZlcnJvciBmb3IgYW4gZXhhbXBsZS5cblx0ICovXG5cdGZ1bmN0aW9uIGR1bXBFeGNlcHRpb24oZXgpXG5cdHtcblx0XHR2YXIgcmV0O1xuXHRcblx0XHRpZiAoIShleCBpbnN0YW5jZW9mIEVycm9yKSlcblx0XHRcdHRocm93IChuZXcgRXJyb3IoanNTcHJpbnRmKCdpbnZhbGlkIHR5cGUgZm9yICUlcjogJWonLCBleCkpKTtcblx0XG5cdFx0LyogTm90ZSB0aGF0IFY4IHByZXBlbmRzIFwiZXguc3RhY2tcIiB3aXRoIGV4LnRvU3RyaW5nKCkuICovXG5cdFx0cmV0ID0gJ0VYQ0VQVElPTjogJyArIGV4LmNvbnN0cnVjdG9yLm5hbWUgKyAnOiAnICsgZXguc3RhY2s7XG5cdFxuXHRcdGlmIChleC5jYXVzZSAmJiB0eXBlb2YgKGV4LmNhdXNlKSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dmFyIGNleCA9IGV4LmNhdXNlKCk7XG5cdFx0XHRpZiAoY2V4KSB7XG5cdFx0XHRcdHJldCArPSAnXFxuQ2F1c2VkIGJ5OiAnICsgZHVtcEV4Y2VwdGlvbihjZXgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIChyZXQpO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxOCkpKVxuXG4vKioqLyB9LFxuLyogNDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIpIHsvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0Ly8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG5cdC8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXHRcblx0ZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKTtcblx0ICB9XG5cdCAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH1cblx0ZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblx0XG5cdGZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xuXHR9XG5cdGV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuO1xuXHRcblx0ZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cdFxuXHRmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xuXHR9XG5cdGV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcblx0XG5cdGZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJztcblx0fVxuXHRleHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cdFxuXHRmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG5cdH1cblx0ZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXHRcblx0ZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xuXHR9XG5cdGV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcblx0XG5cdGZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG5cdCAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH1cblx0ZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cdFxuXHRmdW5jdGlvbiBpc0RhdGUoZCkge1xuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdGV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXHRcblx0ZnVuY3Rpb24gaXNFcnJvcihlKSB7XG5cdCAgcmV0dXJuIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xuXHR9XG5cdGV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cdFxuXHRmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcblx0fVxuXHRleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cdFxuXHRleHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXHRcblx0ZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KS5CdWZmZXIpKVxuXG4vKioqLyB9LFxuLyogNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhDaXJjdWxhckRlcGVuZGVuY3lFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENpcmN1bGFyRGVwZW5kZW5jeUVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhDaXJjdWxhckRlcGVuZGVuY3lFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHNlcnZpY2VzXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0NpcmN1bGFyRGVwZW5kZW5jeUVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3Ioc2VydmljZXMpIHtcblx0ICAgICAgaWYgKCEoQXJyYXkuaXNBcnJheShzZXJ2aWNlcykgJiYgc2VydmljZXMuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnO1xuXHQgICAgICB9KSkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcInNlcnZpY2VzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuQXJyYXk8c3RyaW5nPlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3Qoc2VydmljZXMpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHBhdGggPSBbXS5jb25jYXQoc2VydmljZXMpLnJldmVyc2UoKS5qb2luKCcgPC0gJyk7XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yKHtcblx0ICAgICAgICBzZXJ2aWNlczogc2VydmljZXNcblx0ICAgICAgfSwgJ0NpcmN1bGFyIGRlcGVuZGVuY3kgZm91bmQ6ICVzJywgcGF0aCk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzbEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7RmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcih7XG5cdCAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuXHQgICAgICB9LCAnRmFjdG9yeSBtZXRob2QgZm9yIGlkZW50aWZpZXIgXCIlc1wiIHJldHVybnMgbm90aGluZycsIGlkZW50aWZpZXIpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBNZXRob2REb2VzTm90RXhpc3RFcnJvciA9IGZ1bmN0aW9uIChfRGlzbEVycm9yKSB7XG5cdCAgX2luaGVyaXRzKE1ldGhvZERvZXNOb3RFeGlzdEVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNZXRob2REb2VzTm90RXhpc3RFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKE1ldGhvZERvZXNOb3RFeGlzdEVycm9yLCBudWxsLCBbe1xuXHQgICAga2V5OiAnY3JlYXRlRXJyb3InLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge01ldGhvZERvZXNOb3RFeGlzdEVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IobWV0aG9kTmFtZSkge1xuXHQgICAgICBpZiAoISh0eXBlb2YgbWV0aG9kTmFtZSA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJtZXRob2ROYW1lXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChtZXRob2ROYW1lKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3Ioe1xuXHQgICAgICAgIG1ldGhvZE5hbWU6IG1ldGhvZE5hbWVcblx0ICAgICAgfSwgJ01ldGhvZCBcIiVzXCIgZG9lcyBub3QgZXhpc3QnLCBtZXRob2ROYW1lKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBNZXRob2REb2VzTm90RXhpc3RFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IE1ldGhvZERvZXNOb3RFeGlzdEVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7U2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoaWRlbnRpZmllcikge1xuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yKHtcblx0ICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG5cdCAgICAgIH0sICdTZXJ2aWNlIGRlZmluaXRpb24gZm9yIFwiJXNcIiBoYXMgYWxyZWFkeSBiZWVuIHVzZWQgdG8gaW5zdGFudGlhdGUgYSBzZXJ2aWNlLCByZWZ1c2luZyB0byBtb2RpZnkgaXQnLCBpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvciA9IGZ1bmN0aW9uIChfRGlzbEVycm9yKSB7XG5cdCAgX2luaGVyaXRzKFVuZGVmaW5lZFBhcmFtZXRlckVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFVuZGVmaW5lZFBhcmFtZXRlckVycm9yLCBudWxsLCBbe1xuXHQgICAga2V5OiAnY3JlYXRlRXJyb3InLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge1Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcih7XG5cdCAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuXHQgICAgICB9LCAnVW5kZWZpbmVkIHBhcmFtZXRlciBmb3IgaWRlbnRpZmllciBcIiVzXCInLCBpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoaWRlbnRpZmllcikge1xuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKHtcblx0ICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG5cdCAgICAgIH0sICdVbmRlZmluZWQgc2VydmljZSBkZWZpbml0aW9uIGFuZCBpbnN0YW5jZSBmb3IgaWRlbnRpZmllciBcIiVzXCInLCBpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKGlkZW50aWZpZXIpIHtcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3Ioe1xuXHQgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcblx0ICAgICAgfSwgJ1VuZGVmaW5lZCBzZXJ2aWNlIGRlZmluaXRpb24gZm9yIGlkZW50aWZpZXIgXCIlc1wiJywgaWRlbnRpZmllcik7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHthbnl9IGFyZ1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoYXJnKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcih7XG5cdCAgICAgICAgYXJnOiBhcmdcblx0ICAgICAgfSwgJ1Vuc3VwcG9ydGVkIGFyZyBvZiB0eXBlIFwiJXNcIicsIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGFyZykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGRpLWRldi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGExODJhMTg2OWJmM2JkMjBkYjM1IiwiaW1wb3J0IENvbnRhaW5lciBmcm9tICcuL3NyYy9jb250YWluZXInXG5pbXBvcnQgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24gZnJvbSAnLi9zcmMvY2xhc3MtY29uc3RydWN0b3ItZGVmaW5pdGlvbidcbmltcG9ydCBGYWN0b3J5RGVmaW5pdGlvbiBmcm9tICcuL3NyYy9mYWN0b3J5LWRlZmluaXRpb24nXG5pbXBvcnQgUmVmZXJlbmNlIGZyb20gJy4vc3JjL3JlZmVyZW5jZSdcbmltcG9ydCBQYXJhbWV0ZXIgZnJvbSAnLi9zcmMvcGFyYW1ldGVyJ1xuaW1wb3J0IE1ldGhvZENhbGwgZnJvbSAnLi9zcmMvbWV0aG9kLWNhbGwnXG5pbXBvcnQgZXJyb3JzIGZyb20gJy4vc3JjL2Vycm9ycydcblxuY29uc3QgZXhwb3J0cyA9IHtcbiAgQ29udGFpbmVyLFxuICBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbixcbiAgRmFjdG9yeURlZmluaXRpb24sXG4gIFJlZmVyZW5jZSxcbiAgUGFyYW1ldGVyLFxuICBNZXRob2RDYWxsXG59XG5cbmZvciAobGV0IGkgaW4gZXJyb3JzKSB7XG4gIGlmIChlcnJvcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICBleHBvcnRzW2ldID0gZXJyb3JzW2ldXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbmRleC5qcyIsImltcG9ydCBEZWZpbml0aW9uIGZyb20gJy4vZGVmaW5pdGlvbidcbmltcG9ydCBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiBmcm9tICcuL2NsYXNzLWNvbnN0cnVjdG9yLWRlZmluaXRpb24nXG5pbXBvcnQgRmFjdG9yeURlZmluaXRpb24gZnJvbSAnLi9mYWN0b3J5LWRlZmluaXRpb24nXG5pbXBvcnQgUmVmZXJlbmNlIGZyb20gJy4vcmVmZXJlbmNlJ1xuaW1wb3J0IFBhcmFtZXRlciBmcm9tICcuL3BhcmFtZXRlcidcbmltcG9ydCBNZXRob2RDYWxsIGZyb20gJy4vbWV0aG9kLWNhbGwnXG5cbmltcG9ydCB7XG4gIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yLFxuICBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yLFxuICBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IsXG4gIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IsXG4gIFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcixcbiAgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IsXG4gIEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yLFxuICBNZXRob2REb2VzTm90RXhpc3RFcnJvcixcbiAgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvclxufSBmcm9tICcuL2Vycm9ycydcblxuaW1wb3J0IHR5cGUge0luamVjdGFibGVBcmd1bWVudHN9IGZyb20gJy4vdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMnXG50eXBlIHNjYWxhciA9IChzdHJpbmd8bnVtYmVyfGJvb2xlYW58bnVsbClcbnR5cGUgTG9hZGluZ09iamVjdCA9IHtcbiAgb2JqOiBPYmplY3Q8c3RyaW5nLCBib29sZWFuPixcbiAgYXJyOiBBcnJheTxzdHJpbmc+XG59XG50eXBlIExvY2F0b3JDYWxsYmFjayA9IChpZGVudGlmaWVyOiBzdHJpbmcpID0+ICg/RnVuY3Rpb24pXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDb250YWluZXIge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXIgPSB7fVxuICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllciA9IHt9XG4gICAgdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllciA9IHt9XG4gICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyID0ge31cbiAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMgPSBbXVxuICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMgPSBbXVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgc2VydmljZSBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0gey4uLnN0cmluZ30gaWRlbnRpZmllcnNcbiAgICpcbiAgICogQHByb21pc2VcbiAgICogQHJlc29sdmUge0FycmF5PE9iamVjdHxGdW5jdGlvbj59IGEgc2VydmljZVxuICAgKiBAcmVqZWN0IHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3J9IGluIGNhc2UgdGhlIHNlcnZpY2UgaXMgdW5kZWZpbmVkXG4gICAqIEByZWplY3Qge0NpcmN1bGFyRGVwZW5kZW5jeUVycm9yfSBpbiBjYXNlIG9mIGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQoLi4uaWRlbnRpZmllcnM6IEFycmF5PHN0cmluZz4pOiBQcm9taXNlPEFycmF5PE9iamVjdHxGdW5jdGlvbj4+IHtcbiAgICBjb25zdCBwcm9taXNlcyA9IFtdXG5cbiAgICBpZGVudGlmaWVycy5mb3JFYWNoKChpZGVudGlmaWVyKSA9PiB7XG4gICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICB0aGlzLl9kb0dldFNlcnZpY2UoaWRlbnRpZmllciwgeyBvYmo6IHt9LCBhcnI6IFtdIH0pXG4gICAgICApXG4gICAgfSlcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NvY2lhdGVzIHNlcnZpY2Ugd2l0aCBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBpbnN0YW5jZSBzZXJ2aWNlIGluc3RhbmNlXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldChpZGVudGlmaWVyOiBzdHJpbmcsIGluc3RhbmNlOiAoT2JqZWN0fEZ1bmN0aW9uKSk6IENvbnRhaW5lciB7XG4gICAgdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSBpbnN0YW5jZVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgY29udGFpbmVyIGhhcyBzZXJ2aWNlLCB0aGF0IGlzIGVpdGhlciBpZjpcbiAgICogKiBpdCBoYXMgYSB7QGxpbmsgRGVmaW5pdGlvbn1cbiAgICogKiBpdCBoYXMgYmVlbiBpbnN0YW50aWF0ZWRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXMoaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaGFzRGVmaW5pdGlvbihpZGVudGlmaWVyKSB8fCB0aGlzLmhhc0luc3RhbmNlKGlkZW50aWZpZXIpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXJ2aWNlIGhhcyBhIGRlZmluaXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhhc0RlZmluaXRpb24oaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAhPT0gdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXJ2aWNlIGhhcyBhbiBpbnN0YW5jZSwgZWl0aGVyIGJlY2F1c2U6XG4gICAqICogaXQgaGFzIGJlZW4gaW5zdGFudGlhdGVkIHZpYSBpdHMge0BsaW5rIERlZmluaXRpb259XG4gICAqICogaXQgaGFzIGJlZW4gc2V0IGRpcmVjdGx5IHZpYSB7QGxpbmsgc2V0fSBtZXRob2RcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhhc0luc3RhbmNlKGlkZW50aWZpZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB1bmRlZmluZWQgIT09IHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBzZXJ2aWNlIHtAbGluayBEZWZpbml0aW9ufSBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7RGVmaW5pdGlvbn1cbiAgICpcbiAgICogQHRocm93cyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcn0gaWYgdGhlcmUgaXMgbm8gc2VydmljZSBkZWZpbml0aW9uIGZvciBnaXZlbiBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldERlZmluaXRpb24oaWRlbnRpZmllcjogc3RyaW5nKTogRGVmaW5pdGlvbiB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXVxuXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gZGVmaW5pdGlvbikge1xuICAgICAgdGhyb3cgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKVxuICAgIH1cblxuICAgIHJldHVybiBkZWZpbml0aW9uXG4gIH1cblxuICAvKipcbiAgICogQXNzb2NpYXRlcyBzZXJ2aWNlIHtAbGluayBEZWZpbml0aW9ufSB3aXRoIGlkZW50aWZpZXJcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXIgc2VydmljZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7RGVmaW5pdGlvbn0gZGVmaW5pdGlvbiBzZXJ2aWNlIGRlZmluaXRpb25cbiAgICpcbiAgICogQHJldHVybnMge0NvbnRhaW5lcn0gY3VycmVudCBDb250YWluZXIgaW5zdGFuY2VcbiAgICpcbiAgICogQHRocm93cyB7U2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yfSBpZiB0aGUgc2VydmljZSBkZWZpbml0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2VcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2V0RGVmaW5pdGlvbihpZGVudGlmaWVyOiBzdHJpbmcsIGRlZmluaXRpb246IERlZmluaXRpb24pOiBDb250YWluZXIge1xuICAgIGlmICh0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pIHtcbiAgICAgIHRocm93IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKVxuICAgIH1cblxuICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllcltpZGVudGlmaWVyXSA9IGZhbHNlXG4gICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gZGVmaW5pdGlvblxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHBhcmFtZXRlciBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciBwYXJhbWV0ZXIgaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7c2NhbGFyfSBwYXJhbWV0ZXIgdmFsdWVcbiAgICpcbiAgICogQHRocm93cyB7VW5kZWZpbmVkUGFyYW1ldGVyRXJyb3J9IGlmIHRoZXJlIGlzIG5vIHBhcmFtZXRlciBmb3IgZ2l2ZW4gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRQYXJhbWV0ZXIoaWRlbnRpZmllcjogc3RyaW5nKTogc2NhbGFyIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKSB7XG4gICAgICB0aHJvdyBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG4gIH1cblxuICAvKipcbiAgICogQXNzb2NpYXRlcyBwYXJhbWV0ZXIgd2l0aCBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7c2NhbGFyfSB2YWx1ZVxuICAgKlxuICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRQYXJhbWV0ZXIoaWRlbnRpZmllcjogc3RyaW5nLCB2YWx1ZTogc2NhbGFyKTogQ29udGFpbmVyIHtcbiAgICB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gdmFsdWVcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGNvbnRhaW5lciBoYXMgcGFyYW1ldGVyLCBmYWxzZSBvdGhlcndpc2VcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXNQYXJhbWV0ZXIoaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAhPT0gdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBcbiAgICogXG4gICAqIEBwYXJhbSB7TG9jYXRvckNhbGxiYWNrfSBsb2NhdG9yXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlZ2lzdGVyQ2xhc3NDb25zdHJ1Y3RvckxvY2F0b3IobG9jYXRvcjogTG9jYXRvckNhbGxiYWNrKTogQ29udGFpbmVyIHtcbiAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMucHVzaChsb2NhdG9yKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0xvY2F0b3JDYWxsYmFja30gbG9jYXRvclxuICAgKlxuICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZWdpc3Rlckluc3RhbmNlTG9jYXRvcihsb2NhdG9yOiBMb2NhdG9yQ2FsbGJhY2spOiBDb250YWluZXIge1xuICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMucHVzaChsb2NhdG9yKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlcyBzZXJ2aWNlIGRlZmluaXRpb24gYXJndW1lbnRzLCB0aGVuIHVzZXMgdGhlbSB0byBpbnN0YW50aWF0ZSB0aGUgc2VydmljZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSB7TG9hZGluZ09iamVjdH0gbG9hZGluZyBhbiBvYmplY3QgdGhhdCBrZWVwcyB0cmFjayBvZiBzZXJ2aWNlIGluc3RhbnRpYXRpb25zLFxuICAgKiB1c2VkIHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwZW5kZW5jeSByZWxhdGVkIGluZmluaXRlIGxvb3BzXG4gICAqXG4gICAqIEBwcm9taXNlXG4gICAqIEByZXNvbHZlIHtPYmplY3R9XG4gICAqIEByZWplY3Qge0ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yfSBpbiBjYXNlIGEgZmFjdG9yeSBtZXRob2QgcmV0dXJucyBub3RoaW5nXG4gICAqIEByZWplY3Qge01ldGhvZERvZXNOb3RFeGlzdEVycm9yfSBpbiBjYXNlIGEgbWV0aG9kIGNhbGwgY2FsbHMgYSBtZXRob2QgdGhhdCBkb2VzIG5vdCBleGlzdFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2luc3RhbnRpYXRlKGlkZW50aWZpZXI6IHN0cmluZywgZGVmaW5pdGlvbjogRGVmaW5pdGlvbiwgbG9hZGluZzogTG9hZGluZ09iamVjdCk6IFByb21pc2U8T2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXNcbiAgICAgIC5fcmVzb2x2ZUFyZ3MoZGVmaW5pdGlvbi5hcmdzLCBsb2FkaW5nKVxuICAgICAgLnRoZW4oKGFyZ3M6IEFycmF5KTogUHJvbWlzZSA9PiB7XG4gICAgICAgIGxldCBpbnN0YW5jZVxuXG4gICAgICAgIGlmIChkZWZpbml0aW9uIGluc3RhbmNlb2YgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pIHtcbiAgICAgICAgICBjb25zdCBjbGFzc0NvbnN0cnVjdG9yID0gdGhpcy5fbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IoZGVmaW5pdGlvbi5jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcilcblxuICAgICAgICAgIGluc3RhbmNlID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjbGFzc0NvbnN0cnVjdG9yLCBbIHVuZGVmaW5lZCBdLmNvbmNhdChhcmdzKSkpXG4gICAgICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIEZhY3RvcnlEZWZpbml0aW9uKSB7XG4gICAgICAgICAgaW5zdGFuY2UgPSBkZWZpbml0aW9uLmZhY3RvcnkuYXBwbHkodW5kZWZpbmVkLCBhcmdzKVxuXG4gICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICAgICAgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcilcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1ldGhvZENhbGxzUHJvbWlzZXMgPSBbXVxuXG4gICAgICAgICAgbGV0IGksIG1ldGhvZENhbGxcblxuICAgICAgICAgIGNvbnN0IGNhbGxNZXRob2QgPSAobWV0aG9kVG9DYWxsOiBGdW5jdGlvbikgPT4ge1xuICAgICAgICAgICAgbWV0aG9kQ2FsbHNQcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgLl9yZXNvbHZlQXJncyhtZXRob2RDYWxsLmFyZ3MsIGxvYWRpbmcpXG4gICAgICAgICAgICAgICAgLnRoZW4oKGFyZ3M6IEFycmF5KTogPyhQcm9taXNlfG1peGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kVG9DYWxsLmFwcGx5KGluc3RhbmNlLCBhcmdzKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0TWV0aG9kQ2FsbChpKTogTWV0aG9kQ2FsbCB7XG4gICAgICAgICAgICByZXR1cm4gZGVmaW5pdGlvbi5tZXRob2RDYWxsc1tpXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAoaSBpbiBkZWZpbml0aW9uLm1ldGhvZENhbGxzKSB7XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5tZXRob2RDYWxscy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICBtZXRob2RDYWxsID0gZ2V0TWV0aG9kQ2FsbChpKVxuXG4gICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2RDYWxsLm5hbWVcbiAgICAgICAgICAgICAgY29uc3QgbWV0aG9kVG9DYWxsID0gaW5zdGFuY2VbbWV0aG9kTmFtZV1cblxuICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBtZXRob2RUb0NhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KE1ldGhvZERvZXNOb3RFeGlzdEVycm9yLmNyZWF0ZUVycm9yKG1ldGhvZE5hbWUpKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2FsbE1ldGhvZChtZXRob2RUb0NhbGwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoXG4gICAgICAgICAgICBQcm9taXNlXG4gICAgICAgICAgICAgIC5hbGwobWV0aG9kQ2FsbHNQcm9taXNlcylcbiAgICAgICAgICAgICAgLnRoZW4oKCk6IE9iamVjdCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGludGVybmFsbHkgdG8gbG9jYXRlIGEgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvciwgaWYgaXQgaGFzIGJlZW4gbWFkZSBhdmFpbGFibGUgdG8gdGhlIGNvbnRhaW5lciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBhIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3JcbiAgICpcbiAgICogQHRocm93cyB7Q2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcn0gaWYgdGhlIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3IgY2Fubm90IGJlIGZvdW5kXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IoaWRlbnRpZmllcjogc3RyaW5nKTogRnVuY3Rpb24ge1xuICAgIGxldCBpLCBjbGFzc0NvbnN0cnVjdG9yXG5cbiAgICBmb3IgKGkgaW4gdGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzKSB7XG4gICAgICBpZiAodGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNsYXNzQ29uc3RydWN0b3IgPSB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnNbaV0oaWRlbnRpZmllcilcblxuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBjbGFzc0NvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIGNsYXNzQ29uc3RydWN0b3JcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcilcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R8dm9pZH1cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9sb2NhdGVJbnN0YW5jZShpZGVudGlmaWVyOiBzdHJpbmcpOiBPYmplY3R8dm9pZCB7XG4gICAgbGV0IGlcbiAgICBsZXQgaW5zdGFuY2VcblxuICAgIGZvciAoaSBpbiB0aGlzLl9pbnN0YW5jZUxvY2F0b3JzKSB7XG4gICAgICBpZiAodGhpcy5faW5zdGFuY2VMb2NhdG9ycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICBpbnN0YW5jZSA9IHRoaXMuX2luc3RhbmNlTG9jYXRvcnNbaV0oaWRlbnRpZmllcilcblxuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBpbnN0YW5jZSkge1xuICAgICAgICAgIHJldHVybiBpbnN0YW5jZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmVzIGdpdmVuIGFyZ3VtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtJbmplY3RhYmxlQXJndW1lbnRzfSBhcmdzXG4gICAqIEBwYXJhbSB7TG9hZGluZ09iamVjdH0gbG9hZGluZyBhbiBvYmplY3QgdGhhdCBrZWVwcyB0cmFjayBvZiBzZXJ2aWNlIGluc3RhbnRpYXRpb25zLFxuICAgKiB1c2VkIHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwZW5kZW5jeSByZWxhdGVkIGluZmluaXRlIGxvb3BzXG4gICAqXG4gICAqIEBwcm9taXNlIHtBcnJheTxhbnk+fSBhcmd1bWVudHMgb2YgYW55IHR5cGVcbiAgICogQHJlamVjdCB7VW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcn1cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZXNvbHZlQXJncyhhcmdzOiBJbmplY3RhYmxlQXJndW1lbnRzLCBsb2FkaW5nOiBMb2FkaW5nT2JqZWN0KTogUHJvbWlzZSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBpLCBhcmdcblxuICAgICAgZm9yIChpIGluIGFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZ3MuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBhcmcgPSBhcmdzW2ldXG5cbiAgICAgICAgICBpZiAoYXJnIGluc3RhbmNlb2YgUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGFyZy5pZFxuXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzLl9kb0dldFNlcnZpY2UoaWQsIENvbnRhaW5lci5fZGVlcENvcHlMb2FkaW5nKGxvYWRpbmcpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgUGFyYW1ldGVyKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzLmdldFBhcmFtZXRlcihhcmcuaWQpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvci5jcmVhdGVFcnJvcihhcmcpKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzb2x2ZShcbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGludGVybmFsbHkgdG8gcmV0cmlldmUgYSBzZXJ2aWNlIGJ5IGl0cyBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciB0aGUgaWRlbnRpZmllciBvZiB0aGUgc2VydmljZVxuICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcbiAgICogdXNlZCB0byBwcmV2ZW50IGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVsYXRlZCBpbmZpbml0ZSBsb29wc1xuICAgKlxuICAgKiBAcHJvbWlzZVxuICAgKiBAcmVzb2x2ZSB7T2JqZWN0fEZ1bmN0aW9ufSBhIHNlcnZpY2VcbiAgICogQHJlamVjdCB7Q2lyY3VsYXJEZXBlbmRlbmN5RXJyb3J9IGluIGNhc2Ugb2YgYSBjaXJjdWxhciBkZXBlbmRlbmN5XG4gICAqIEByZWplY3Qge1VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcn0gaW4gY2FzZSBuZWl0aGVyIGFuIGluc3RhbmNlIG5vciBhIGRlZmluaXRpb24gaXMgZm91bmRcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kb0dldFNlcnZpY2UoaWRlbnRpZmllcjogc3RyaW5nLCBsb2FkaW5nOiBMb2FkaW5nT2JqZWN0KTogUHJvbWlzZSB7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gbG9hZGluZy5vYmpbaWRlbnRpZmllcl0pIHtcbiAgICAgIGNvbnN0IHNlcnZpY2VzID0gW11cbiAgICAgICAgLmNvbmNhdChsb2FkaW5nLmFycilcbiAgICAgICAgLmNvbmNhdChbIGlkZW50aWZpZXIgXSlcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICBDaXJjdWxhckRlcGVuZGVuY3lFcnJvci5jcmVhdGVFcnJvcihzZXJ2aWNlcylcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpIHtcbiAgICAgIGlmICghdGhpcy5oYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2xvY2F0ZUluc3RhbmNlKGlkZW50aWZpZXIpXG5cbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gcmVzdWx0KSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSW4gY2FzZSBsb2NhdGUgaW5zdGFuY2UgcmV0dXJucyBhIHByb21pc2UsIHJlc29sdmUgcHJvbWlzZVxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKChpbnN0YW5jZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpbnN0YW5jZSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSlcbiAgICAgIH1cblxuICAgICAgbG9hZGluZy5vYmpbaWRlbnRpZmllcl0gPSB0cnVlXG4gICAgICBsb2FkaW5nLmFyci5wdXNoKGlkZW50aWZpZXIpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9pbnN0YW50aWF0ZShpZGVudGlmaWVyLCB0aGlzLmdldERlZmluaXRpb24oaWRlbnRpZmllciksIGxvYWRpbmcpXG5cbiAgICAgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gdHJ1ZVxuXG4gICAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gcHJvbWlzZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pXG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgYSBkZWVwIGNvcHkgb2YgbG9hZGluZyBvYmplY3Qgc28gYXMgbm90IHRvIG1vZGlmeSBpdCBieSByZWZlcmVuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsb2FkaW5nXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGxvYWRpbmcgYSBkZWVwIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGxvYWRpbmcgcGFyYW1ldGVyXG4gICAqIEByZXR1cm5zIHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gbG9hZGluZy5vYmpcbiAgICogQHJldHVybnMge0FycmF5PHN0cmluZz59IGxvYWRpbmcuYXJyXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2RlZXBDb3B5TG9hZGluZyhsb2FkaW5nOiBPYmplY3QpOiBPYmplY3Qge1xuICAgIGNvbnN0IG5ld0xvYWRpbmcgPSB7XG4gICAgICBvYmo6IHt9LFxuICAgICAgYXJyOiBbXS5jb25jYXQobG9hZGluZy5hcnIpXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSBpbiBsb2FkaW5nLm9iaikge1xuICAgICAgaWYgKGxvYWRpbmcub2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIG5ld0xvYWRpbmcub2JqW2ldID0gbG9hZGluZy5vYmpbaV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3TG9hZGluZ1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRhaW5lclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb250YWluZXIuanMiLCJpbXBvcnQgTWV0aG9kQ2FsbCBmcm9tICcuL21ldGhvZC1jYWxsJ1xuXG5pbXBvcnQgdHlwZSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gZnJvbSAnLi90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBEZWZpbml0aW9uIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgdGhpcy5fbWV0aG9kQ2FsbHMgPSBbXVxuICAgIHRoaXMuX2FyZ3MgPSBhcmdzXG4gIH1cblxuICAvKipcbiAgICogU2V0cyBtZXRob2RDYWxsc1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PE1ldGhvZENhbGw+fSBtZXRob2RDYWxsc1xuICAgKi9cbiAgc2V0IG1ldGhvZENhbGxzKG1ldGhvZENhbGxzOiBBcnJheTxNZXRob2RDYWxsPik6IHZvaWQge1xuICAgIHRoaXMuX21ldGhvZENhbGxzID0gbWV0aG9kQ2FsbHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG1ldGhvZENhbGxzXG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheTxNZXRob2RDYWxsPn1cbiAgICovXG4gIGdldCBtZXRob2RDYWxscygpOiBBcnJheTxNZXRob2RDYWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX21ldGhvZENhbGxzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhcmdzXG4gICAqXG4gICAqIEByZXR1cm5zIHtJbmplY3RhYmxlQXJndW1lbnRzfVxuICAgKi9cbiAgZ2V0IGFyZ3MoKTogSW5qZWN0YWJsZUFyZ3VtZW50cyB7XG4gICAgcmV0dXJuIHRoaXMuX2FyZ3NcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEZWZpbml0aW9uXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2RlZmluaXRpb24uanMiLCJpbXBvcnQgdHlwZSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gZnJvbSAnLi90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIE1ldGhvZENhbGwge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBtZXRob2QgbmFtZVxuICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWVcbiAgICB0aGlzLl9hcmdzID0gYXJnc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgbmFtZVxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9uYW1lXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhcmdzXG4gICAqXG4gICAqIEByZXR1cm5zIHtJbmplY3RhYmxlQXJndW1lbnRzfVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQgYXJncygpOiBJbmplY3RhYmxlQXJndW1lbnRzIHtcbiAgICByZXR1cm4gdGhpcy5fYXJnc1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1ldGhvZENhbGxcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvbWV0aG9kLWNhbGwuanMiLCJpbXBvcnQgUmVmZXJlbmNlIGZyb20gJy4uL3JlZmVyZW5jZSdcbmltcG9ydCBQYXJhbWV0ZXIgZnJvbSAnLi4vcGFyYW1ldGVyJ1xuXG5leHBvcnQgdHlwZSBJbmplY3RhYmxlQXJndW1lbnRzID0gQXJyYXk8UmVmZXJlbmNlfFBhcmFtZXRlcj5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cy5qcyIsIi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBSZWZlcmVuY2Uge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKiBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9pZCA9IGlkXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBpZFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5faWRcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWZlcmVuY2VcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVmZXJlbmNlLmpzIiwiLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFBhcmFtZXRlciB7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5faWQgPSBpZFxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgaWRcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2lkXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFyYW1ldGVyXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BhcmFtZXRlci5qcyIsImltcG9ydCBEZWZpbml0aW9uIGZyb20gJy4vZGVmaW5pdGlvbidcblxuaW1wb3J0IHR5cGUge0luamVjdGFibGVBcmd1bWVudHN9IGZyb20gJy4vdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMnXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiBleHRlbmRzIERlZmluaXRpb24ge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcbiAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcjogc3RyaW5nLCBhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgc3VwZXIoYXJncylcblxuICAgIHRoaXMuX2NsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyID0gY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jbGFzcy1jb25zdHJ1Y3Rvci1kZWZpbml0aW9uLmpzIiwiaW1wb3J0IERlZmluaXRpb24gZnJvbSAnLi9kZWZpbml0aW9uJ1xuXG5pbXBvcnQgdHlwZSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gZnJvbSAnLi90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEZhY3RvcnlEZWZpbml0aW9uIGV4dGVuZHMgRGVmaW5pdGlvbiB7XG4gIFxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeVxuICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKGZhY3Rvcnk6IEZ1bmN0aW9uLCBhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgc3VwZXIoYXJncylcblxuICAgIHRoaXMuX2ZhY3RvcnkgPSBmYWN0b3J5XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBmYWN0b3J5XG4gICAqXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICovXG4gIGdldCBmYWN0b3J5KCk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm4gdGhpcy5fZmFjdG9yeVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZhY3RvcnlEZWZpbml0aW9uXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZhY3RvcnktZGVmaW5pdGlvbi5qcyIsImltcG9ydCBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yIGZyb20gJy4vZXJyb3JzL2Nhbm5vdC1sb2NhdGUtc2VydmljZS1jbGFzcy1jb25zdHJ1Y3Rvci1lcnJvcidcbmltcG9ydCBDaXJjdWxhckRlcGVuZGVuY3lFcnJvciBmcm9tICcuL2Vycm9ycy9jaXJjdWxhci1kZXBlbmRlbmN5LWVycm9yJ1xuaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Vycm9ycy9kaXNsLWVycm9yJ1xuaW1wb3J0IEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yIGZyb20gJy4vZXJyb3JzL2ZhY3RvcnktbWV0aG9kLXJldHVybnMtbm90aGluZy1lcnJvcidcbmltcG9ydCBNZXRob2REb2VzTm90RXhpc3RFcnJvciBmcm9tICcuL2Vycm9ycy9tZXRob2QtZG9lcy1ub3QtZXhpc3QtZXJyb3InXG5pbXBvcnQgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yIGZyb20gJy4vZXJyb3JzL3NlcnZpY2UtZGVmaW5pdGlvbi1hbHJlYWR5LXVzZWQtZXJyb3InXG5pbXBvcnQgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IgZnJvbSAnLi9lcnJvcnMvdW5kZWZpbmVkLXBhcmFtZXRlci1lcnJvcidcbmltcG9ydCBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IgZnJvbSAnLi9lcnJvcnMvdW5kZWZpbmVkLXNlcnZpY2UtZGVmaW5pdGlvbi1hbmQtaW5zdGFuY2UtZXJyb3InXG5pbXBvcnQgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciBmcm9tICcuL2Vycm9ycy91bmRlZmluZWQtc2VydmljZS1kZWZpbml0aW9uLWVycm9yJ1xuaW1wb3J0IFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IgZnJvbSAnLi9lcnJvcnMvdW5zdXBwb3J0ZWQtYXJndW1lbnQtdHlwZS1lcnJvcidcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IsXG4gIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yLFxuICBEaXNsRXJyb3IsXG4gIEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yLFxuICBNZXRob2REb2VzTm90RXhpc3RFcnJvcixcbiAgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLFxuICBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcixcbiAgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLFxuICBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLFxuICBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICpcbiAgICogQHJldHVybnMge0Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IoY2xhc3NOYW1lOiBzdHJpbmcpOiBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yIHtcbiAgICByZXR1cm4gbmV3IENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZVxuICAgICAgfSxcbiAgICAgICdDYW5ub3QgbG9jYXRlIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3IgZm9yIGNsYXNzIFwiJXNcIicsXG4gICAgICBjbGFzc05hbWVcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy9jYW5ub3QtbG9jYXRlLXNlcnZpY2UtY2xhc3MtY29uc3RydWN0b3ItZXJyb3IuanMiLCJpbXBvcnQgVkVycm9yIGZyb20gJ3ZlcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yIGV4dGVuZHMgVkVycm9yIHtcblxufVxuXG5leHBvcnQgZGVmYXVsdCBDaXJjdWxhckRlcGVuZGVuY3lFcnJvclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy9kaXNsLWVycm9yLmpzIiwiLypcbiAqIHZlcnJvci5qczogcmljaGVyIEphdmFTY3JpcHQgZXJyb3JzXG4gKi9cblxudmFyIG1vZF9hc3NlcnRwbHVzID0gcmVxdWlyZSgnYXNzZXJ0LXBsdXMnKTtcbnZhciBtb2RfdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxudmFyIG1vZF9leHRzcHJpbnRmID0gcmVxdWlyZSgnZXh0c3ByaW50ZicpO1xudmFyIG1vZF9pc0Vycm9yID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJykuaXNFcnJvcjtcbnZhciBzcHJpbnRmID0gbW9kX2V4dHNwcmludGYuc3ByaW50ZjtcblxuLypcbiAqIFB1YmxpYyBpbnRlcmZhY2VcbiAqL1xuXG4vKiBTbyB5b3UgY2FuICd2YXIgVkVycm9yID0gcmVxdWlyZSgndmVycm9yJyknICovXG5tb2R1bGUuZXhwb3J0cyA9IFZFcnJvcjtcbi8qIEZvciBjb21wYXRpYmlsaXR5ICovXG5WRXJyb3IuVkVycm9yID0gVkVycm9yO1xuLyogT3RoZXIgZXhwb3J0ZWQgY2xhc3NlcyAqL1xuVkVycm9yLlNFcnJvciA9IFNFcnJvcjtcblZFcnJvci5XRXJyb3IgPSBXRXJyb3I7XG5WRXJyb3IuTXVsdGlFcnJvciA9IE11bHRpRXJyb3I7XG5cbi8qXG4gKiBDb21tb24gZnVuY3Rpb24gdXNlZCB0byBwYXJzZSBjb25zdHJ1Y3RvciBhcmd1bWVudHMgZm9yIFZFcnJvciwgV0Vycm9yLCBhbmRcbiAqIFNFcnJvci4gIE5hbWVkIGFyZ3VtZW50cyB0byB0aGlzIGZ1bmN0aW9uOlxuICpcbiAqICAgICBzdHJpY3RcdFx0Zm9yY2Ugc3RyaWN0IGludGVycHJldGF0aW9uIG9mIHNwcmludGYgYXJndW1lbnRzLCBldmVuXG4gKiAgICAgXHRcdFx0aWYgdGhlIG9wdGlvbnMgaW4gXCJhcmd2XCIgZG9uJ3Qgc2F5IHNvXG4gKlxuICogICAgIGFyZ3ZcdFx0ZXJyb3IncyBjb25zdHJ1Y3RvciBhcmd1bWVudHMsIHdoaWNoIGFyZSB0byBiZVxuICogICAgIFx0XHRcdGludGVycHJldGVkIGFzIGRlc2NyaWJlZCBpbiBSRUFETUUubWQuICBGb3IgcXVpY2tcbiAqICAgICBcdFx0XHRyZWZlcmVuY2UsIFwiYXJndlwiIGhhcyBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtczpcbiAqXG4gKiAgICAgICAgICBbIHNwcmludGZfYXJncy4uLiBdICAgICAgICAgICAoYXJndlswXSBpcyBhIHN0cmluZylcbiAqICAgICAgICAgIFsgY2F1c2UsIHNwcmludGZfYXJncy4uLiBdICAgIChhcmd2WzBdIGlzIGFuIEVycm9yKVxuICogICAgICAgICAgWyBvcHRpb25zLCBzcHJpbnRmX2FyZ3MuLi4gXSAgKGFyZ3ZbMF0gaXMgYW4gb2JqZWN0KVxuICpcbiAqIFRoaXMgZnVuY3Rpb24gbm9ybWFsaXplcyB0aGVzZSBmb3JtcywgcHJvZHVjaW5nIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmdcbiAqIHByb3BlcnRpZXM6XG4gKlxuICogICAgb3B0aW9ucyAgICAgICAgICAgZXF1aXZhbGVudCB0byBcIm9wdGlvbnNcIiBpbiB0aGlyZCBmb3JtLiAgVGhpcyB3aWxsIG5ldmVyXG4gKiAgICBcdFx0XHRiZSBhIGRpcmVjdCByZWZlcmVuY2UgdG8gd2hhdCB0aGUgY2FsbGVyIHBhc3NlZCBpblxuICogICAgXHRcdFx0KGkuZS4sIGl0IG1heSBiZSBhIHNoYWxsb3cgY29weSksIHNvIGl0IGNhbiBiZSBmcmVlbHlcbiAqICAgIFx0XHRcdG1vZGlmaWVkLlxuICpcbiAqICAgIHNob3J0bWVzc2FnZSAgICAgIHJlc3VsdCBvZiBzcHJpbnRmKHNwcmludGZfYXJncyksIHRha2luZyBvcHRpb25zLnN0cmljdFxuICogICAgXHRcdFx0aW50byBhY2NvdW50IGFzIGRlc2NyaWJlZCBpbiBSRUFETUUubWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoYXJncylcbntcblx0dmFyIGFyZ3YsIG9wdGlvbnMsIHNwcmludGZfYXJncywgc2hvcnRtZXNzYWdlLCBrO1xuXG5cdG1vZF9hc3NlcnRwbHVzLm9iamVjdChhcmdzLCAnYXJncycpO1xuXHRtb2RfYXNzZXJ0cGx1cy5ib29sKGFyZ3Muc3RyaWN0LCAnYXJncy5zdHJpY3QnKTtcblx0bW9kX2Fzc2VydHBsdXMuYXJyYXkoYXJncy5hcmd2LCAnYXJncy5hcmd2Jyk7XG5cdGFyZ3YgPSBhcmdzLmFyZ3Y7XG5cblx0Lypcblx0ICogRmlyc3QsIGZpZ3VyZSBvdXQgd2hpY2ggZm9ybSBvZiBpbnZvY2F0aW9uIHdlJ3ZlIGJlZW4gZ2l2ZW4uXG5cdCAqL1xuXHRpZiAoYXJndi5sZW5ndGggPT09IDApIHtcblx0XHRvcHRpb25zID0ge307XG5cdFx0c3ByaW50Zl9hcmdzID0gW107XG5cdH0gZWxzZSBpZiAobW9kX2lzRXJyb3IoYXJndlswXSkpIHtcblx0XHRvcHRpb25zID0geyAnY2F1c2UnOiBhcmd2WzBdIH07XG5cdFx0c3ByaW50Zl9hcmdzID0gYXJndi5zbGljZSgxKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgKGFyZ3ZbMF0pID09PSAnb2JqZWN0Jykge1xuXHRcdG9wdGlvbnMgPSB7fTtcblx0XHRmb3IgKGsgaW4gYXJndlswXSkge1xuXHRcdFx0b3B0aW9uc1trXSA9IGFyZ3ZbMF1ba107XG5cdFx0fVxuXHRcdHNwcmludGZfYXJncyA9IGFyZ3Yuc2xpY2UoMSk7XG5cdH0gZWxzZSB7XG5cdFx0bW9kX2Fzc2VydHBsdXMuc3RyaW5nKGFyZ3ZbMF0sXG5cdFx0ICAgICdmaXJzdCBhcmd1bWVudCB0byBWRXJyb3IsIFNFcnJvciwgb3IgV0Vycm9yICcgK1xuXHRcdCAgICAnY29uc3RydWN0b3IgbXVzdCBiZSBhIHN0cmluZywgb2JqZWN0LCBvciBFcnJvcicpO1xuXHRcdG9wdGlvbnMgPSB7fTtcblx0XHRzcHJpbnRmX2FyZ3MgPSBhcmd2O1xuXHR9XG5cblx0Lypcblx0ICogTm93IGNvbnN0cnVjdCB0aGUgZXJyb3IncyBtZXNzYWdlLlxuXHQgKlxuXHQgKiBleHRzcHJpbnRmICh3aGljaCB3ZSBpbnZva2UgaGVyZSB3aXRoIG91ciBjYWxsZXIncyBhcmd1bWVudHMgaW4gb3JkZXJcblx0ICogdG8gY29uc3RydWN0IHRoaXMgRXJyb3IncyBtZXNzYWdlKSBpcyBzdHJpY3QgaW4gaXRzIGludGVycHJldGF0aW9uIG9mXG5cdCAqIHZhbHVlcyB0byBiZSBwcm9jZXNzZWQgYnkgdGhlIFwiJXNcIiBzcGVjaWZpZXIuICBUaGUgdmFsdWUgcGFzc2VkIHRvXG5cdCAqIGV4dHNwcmludGYgbXVzdCBhY3R1YWxseSBiZSBhIHN0cmluZyBvciBzb21ldGhpbmcgY29udmVydGlibGUgdG8gYVxuXHQgKiBTdHJpbmcgdXNpbmcgLnRvU3RyaW5nKCkuICBQYXNzaW5nIG90aGVyIHZhbHVlcyAobm90YWJseSBcIm51bGxcIiBhbmRcblx0ICogXCJ1bmRlZmluZWRcIikgaXMgY29uc2lkZXJlZCBhIHByb2dyYW1tZXIgZXJyb3IuICBUaGUgYXNzdW1wdGlvbiBpc1xuXHQgKiB0aGF0IGlmIHlvdSBhY3R1YWxseSB3YW50IHRvIHByaW50IHRoZSBzdHJpbmcgXCJudWxsXCIgb3IgXCJ1bmRlZmluZWRcIixcblx0ICogdGhlbiB0aGF0J3MgZWFzeSB0byBkbyB0aGF0IHdoZW4geW91J3JlIGNhbGxpbmcgZXh0c3ByaW50Zjsgb24gdGhlXG5cdCAqIG90aGVyIGhhbmQsIGlmIHlvdSBkaWQgTk9UIHdhbnQgdGhhdCAoaS5lLiwgdGhlcmUncyBhY3R1YWxseSBhIGJ1Z1xuXHQgKiB3aGVyZSB0aGUgcHJvZ3JhbSBhc3N1bWVzIHNvbWUgdmFyaWFibGUgaXMgbm9uLW51bGwgYW5kIHRyaWVzIHRvXG5cdCAqIHByaW50IGl0LCB3aGljaCBtaWdodCBoYXBwZW4gd2hlbiBjb25zdHJ1Y3RpbmcgYSBwYWNrZXQgb3IgZmlsZSBpblxuXHQgKiBzb21lIHNwZWNpZmljIGZvcm1hdCksIHRoZW4gaXQncyBiZXR0ZXIgdG8gc3RvcCBpbW1lZGlhdGVseSB0aGFuXG5cdCAqIHByb2R1Y2UgYm9ndXMgb3V0cHV0LlxuXHQgKlxuXHQgKiBIb3dldmVyLCBzb21ldGltZXMgdGhlIGJ1ZyBpcyBvbmx5IGluIHRoZSBjb2RlIGNhbGxpbmcgVkVycm9yLCBhbmQgYVxuXHQgKiBwcm9ncmFtbWVyIG1pZ2h0IHByZWZlciB0byBoYXZlIHRoZSBlcnJvciBtZXNzYWdlIGNvbnRhaW4gXCJudWxsXCIgb3Jcblx0ICogXCJ1bmRlZmluZWRcIiByYXRoZXIgdGhhbiBoYXZlIHRoZSBidWcgaW4gdGhlIGVycm9yIHBhdGggY3Jhc2ggdGhlXG5cdCAqIHByb2dyYW0gKG1ha2luZyB0aGUgZmlyc3QgYnVnIGhhcmRlciB0byBpZGVudGlmeSkuICBGb3IgdGhhdCByZWFzb24sXG5cdCAqIGJ5IGRlZmF1bHQgVkVycm9yIGNvbnZlcnRzIFwibnVsbFwiIG9yIFwidW5kZWZpbmVkXCIgYXJndW1lbnRzIHRvIHRoZWlyXG5cdCAqIHN0cmluZyByZXByZXNlbnRhdGlvbnMgYW5kIHBhc3NlcyB0aG9zZSB0byBleHRzcHJpbnRmLiAgUHJvZ3JhbW1lcnNcblx0ICogZGVzaXJpbmcgdGhlIHN0cmljdCBiZWhhdmlvciBjYW4gdXNlIHRoZSBTRXJyb3IgY2xhc3Mgb3IgcGFzcyB0aGVcblx0ICogXCJzdHJpY3RcIiBvcHRpb24gdG8gdGhlIFZFcnJvciBjb25zdHJ1Y3Rvci5cblx0ICovXG5cdG1vZF9hc3NlcnRwbHVzLm9iamVjdChvcHRpb25zKTtcblx0aWYgKCFvcHRpb25zLnN0cmljdCAmJiAhYXJncy5zdHJpY3QpIHtcblx0XHRzcHJpbnRmX2FyZ3MgPSBzcHJpbnRmX2FyZ3MubWFwKGZ1bmN0aW9uIChhKSB7XG5cdFx0XHRyZXR1cm4gKGEgPT09IG51bGwgPyAnbnVsbCcgOlxuXHRcdFx0ICAgIGEgPT09IHVuZGVmaW5lZCA/ICd1bmRlZmluZWQnIDogYSk7XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoc3ByaW50Zl9hcmdzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHNob3J0bWVzc2FnZSA9ICcnO1xuXHR9IGVsc2Uge1xuXHRcdHNob3J0bWVzc2FnZSA9IHNwcmludGYuYXBwbHkobnVsbCwgc3ByaW50Zl9hcmdzKTtcblx0fVxuXG5cdHJldHVybiAoe1xuXHQgICAgJ29wdGlvbnMnOiBvcHRpb25zLFxuXHQgICAgJ3Nob3J0bWVzc2FnZSc6IHNob3J0bWVzc2FnZVxuXHR9KTtcbn1cblxuLypcbiAqIFNlZSBSRUFETUUubWQgZm9yIHJlZmVyZW5jZSBkb2N1bWVudGF0aW9uLlxuICovXG5mdW5jdGlvbiBWRXJyb3IoKVxue1xuXHR2YXIgYXJncywgb2JqLCBwYXJzZWQsIGNhdXNlLCBjdG9yLCBtZXNzYWdlLCBrO1xuXG5cdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXG5cdC8qXG5cdCAqIFRoaXMgaXMgYSByZWdyZXR0YWJsZSBwYXR0ZXJuLCBidXQgSmF2YVNjcmlwdCdzIGJ1aWx0LWluIEVycm9yIGNsYXNzXG5cdCAqIGlzIGRlZmluZWQgdG8gd29yayB0aGlzIHdheSwgc28gd2UgYWxsb3cgdGhlIGNvbnN0cnVjdG9yIHRvIGJlIGNhbGxlZFxuXHQgKiB3aXRob3V0IFwibmV3XCIuXG5cdCAqL1xuXHRpZiAoISh0aGlzIGluc3RhbmNlb2YgVkVycm9yKSkge1xuXHRcdG9iaiA9IE9iamVjdC5jcmVhdGUoVkVycm9yLnByb3RvdHlwZSk7XG5cdFx0VkVycm9yLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gKG9iaik7XG5cdH1cblxuXHQvKlxuXHQgKiBGb3IgY29udmVuaWVuY2UgYW5kIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB3ZSBzdXBwb3J0IHNldmVyYWxcblx0ICogZGlmZmVyZW50IGNhbGxpbmcgZm9ybXMuICBOb3JtYWxpemUgdGhlbSBoZXJlLlxuXHQgKi9cblx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdCAgICAnYXJndic6IGFyZ3MsXG5cdCAgICAnc3RyaWN0JzogZmFsc2Vcblx0fSk7XG5cblx0Lypcblx0ICogSWYgd2UndmUgYmVlbiBnaXZlbiBhIG5hbWUsIGFwcGx5IGl0IG5vdy5cblx0ICovXG5cdGlmIChwYXJzZWQub3B0aW9ucy5uYW1lKSB7XG5cdFx0bW9kX2Fzc2VydHBsdXMuc3RyaW5nKHBhcnNlZC5vcHRpb25zLm5hbWUsXG5cdFx0ICAgICdlcnJvclxcJ3MgXCJuYW1lXCIgbXVzdCBiZSBhIHN0cmluZycpO1xuXHRcdHRoaXMubmFtZSA9IHBhcnNlZC5vcHRpb25zLm5hbWU7XG5cdH1cblxuXHQvKlxuXHQgKiBGb3IgZGVidWdnaW5nLCB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBvcmlnaW5hbCBzaG9ydCBtZXNzYWdlIChhdHRhY2hlZFxuXHQgKiB0aGlzIEVycm9yIHBhcnRpY3VsYXJseSkgc2VwYXJhdGVseSBmcm9tIHRoZSBjb21wbGV0ZSBtZXNzYWdlICh3aGljaFxuXHQgKiBpbmNsdWRlcyB0aGUgbWVzc2FnZXMgb2Ygb3VyIGNhdXNlIGNoYWluKS5cblx0ICovXG5cdHRoaXMuanNlX3Nob3J0bXNnID0gcGFyc2VkLnNob3J0bWVzc2FnZTtcblx0bWVzc2FnZSA9IHBhcnNlZC5zaG9ydG1lc3NhZ2U7XG5cblx0Lypcblx0ICogSWYgd2UndmUgYmVlbiBnaXZlbiBhIGNhdXNlLCByZWNvcmQgYSByZWZlcmVuY2UgdG8gaXQgYW5kIHVwZGF0ZSBvdXJcblx0ICogbWVzc2FnZSBhcHByb3ByaWF0ZWx5LlxuXHQgKi9cblx0Y2F1c2UgPSBwYXJzZWQub3B0aW9ucy5jYXVzZTtcblx0aWYgKGNhdXNlKSB7XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoY2F1c2UpLCAnY2F1c2UgaXMgbm90IGFuIEVycm9yJyk7XG5cdFx0dGhpcy5qc2VfY2F1c2UgPSBjYXVzZTtcblxuXHRcdGlmICghcGFyc2VkLm9wdGlvbnMuc2tpcENhdXNlTWVzc2FnZSkge1xuXHRcdFx0bWVzc2FnZSArPSAnOiAnICsgY2F1c2UubWVzc2FnZTtcblx0XHR9XG5cdH1cblxuXHQvKlxuXHQgKiBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMsIHNoYWxsb3ctY29weSB0aGF0XG5cdCAqIGhlcmUuICBXZSBkb24ndCB3YW50IHRvIHVzZSBhIGRlZXAgY29weSBpbiBjYXNlIHRoZXJlIGFyZSBub24tcGxhaW5cblx0ICogb2JqZWN0cyBoZXJlLCBidXQgd2UgZG9uJ3Qgd2FudCB0byB1c2UgdGhlIG9yaWdpbmFsIG9iamVjdCBpbiBjYXNlXG5cdCAqIHRoZSBjYWxsZXIgbW9kaWZpZXMgaXQgbGF0ZXIuXG5cdCAqL1xuXHR0aGlzLmpzZV9pbmZvID0ge307XG5cdGlmIChwYXJzZWQub3B0aW9ucy5pbmZvKSB7XG5cdFx0Zm9yIChrIGluIHBhcnNlZC5vcHRpb25zLmluZm8pIHtcblx0XHRcdHRoaXMuanNlX2luZm9ba10gPSBwYXJzZWQub3B0aW9ucy5pbmZvW2tdO1xuXHRcdH1cblx0fVxuXG5cdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cblx0aWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG5cdFx0Y3RvciA9IHBhcnNlZC5vcHRpb25zLmNvbnN0cnVjdG9yT3B0IHx8IHRoaXMuY29uc3RydWN0b3I7XG5cdFx0RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgY3Rvcik7XG5cdH1cblxuXHRyZXR1cm4gKHRoaXMpO1xufVxuXG5tb2RfdXRpbC5pbmhlcml0cyhWRXJyb3IsIEVycm9yKTtcblZFcnJvci5wcm90b3R5cGUubmFtZSA9ICdWRXJyb3InO1xuXG5WRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdmVfdG9TdHJpbmcoKVxue1xuXHR2YXIgc3RyID0gKHRoaXMuaGFzT3duUHJvcGVydHkoJ25hbWUnKSAmJiB0aGlzLm5hbWUgfHxcblx0XHR0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUubmFtZSk7XG5cdGlmICh0aGlzLm1lc3NhZ2UpXG5cdFx0c3RyICs9ICc6ICcgKyB0aGlzLm1lc3NhZ2U7XG5cblx0cmV0dXJuIChzdHIpO1xufTtcblxuLypcbiAqIFRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGZvciBjb21wYXRpYmlsaXR5LiAgTmV3IGNhbGxlcnMgc2hvdWxkIHVzZVxuICogVkVycm9yLmNhdXNlKCkgaW5zdGVhZC4gIFRoYXQgbWV0aG9kIGFsc28gdXNlcyB0aGUgc2FuZXIgYG51bGxgIHJldHVybiB2YWx1ZVxuICogd2hlbiB0aGVyZSBpcyBubyBjYXVzZS5cbiAqL1xuVkVycm9yLnByb3RvdHlwZS5jYXVzZSA9IGZ1bmN0aW9uIHZlX2NhdXNlKClcbntcblx0dmFyIGNhdXNlID0gVkVycm9yLmNhdXNlKHRoaXMpO1xuXHRyZXR1cm4gKGNhdXNlID09PSBudWxsID8gdW5kZWZpbmVkIDogY2F1c2UpO1xufTtcblxuLypcbiAqIFN0YXRpYyBtZXRob2RzXG4gKlxuICogVGhlc2UgY2xhc3MtbGV2ZWwgbWV0aG9kcyBhcmUgcHJvdmlkZWQgc28gdGhhdCBjYWxsZXJzIGNhbiB1c2UgdGhlbSBvblxuICogaW5zdGFuY2VzIG9mIEVycm9ycyB0aGF0IGFyZSBub3QgVkVycm9ycy4gIE5ldyBpbnRlcmZhY2VzIHNob3VsZCBiZSBwcm92aWRlZFxuICogb25seSB1c2luZyBzdGF0aWMgbWV0aG9kcyB0byBlbGltaW5hdGUgdGhlIGNsYXNzIG9mIHByb2dyYW1taW5nIG1pc3Rha2Ugd2hlcmVcbiAqIHBlb3BsZSBmYWlsIHRvIGNoZWNrIHdoZXRoZXIgdGhlIEVycm9yIG9iamVjdCBoYXMgdGhlIGNvcnJlc3BvbmRpbmcgbWV0aG9kcy5cbiAqL1xuXG5WRXJyb3IuY2F1c2UgPSBmdW5jdGlvbiAoZXJyKVxue1xuXHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0cmV0dXJuIChtb2RfaXNFcnJvcihlcnIuanNlX2NhdXNlKSA/IGVyci5qc2VfY2F1c2UgOiBudWxsKTtcbn07XG5cblZFcnJvci5pbmZvID0gZnVuY3Rpb24gKGVycilcbntcblx0dmFyIHJ2LCBjYXVzZSwgaztcblxuXHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0Y2F1c2UgPSBWRXJyb3IuY2F1c2UoZXJyKTtcblx0aWYgKGNhdXNlICE9PSBudWxsKSB7XG5cdFx0cnYgPSBWRXJyb3IuaW5mbyhjYXVzZSk7XG5cdH0gZWxzZSB7XG5cdFx0cnYgPSB7fTtcblx0fVxuXG5cdGlmICh0eXBlb2YgKGVyci5qc2VfaW5mbykgPT0gJ29iamVjdCcgJiYgZXJyLmpzZV9pbmZvICE9PSBudWxsKSB7XG5cdFx0Zm9yIChrIGluIGVyci5qc2VfaW5mbykge1xuXHRcdFx0cnZba10gPSBlcnIuanNlX2luZm9ba107XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIChydik7XG59O1xuXG5WRXJyb3IuZmluZENhdXNlQnlOYW1lID0gZnVuY3Rpb24gKGVyciwgbmFtZSlcbntcblx0dmFyIGNhdXNlO1xuXG5cdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRtb2RfYXNzZXJ0cGx1cy5zdHJpbmcobmFtZSk7XG5cdG1vZF9hc3NlcnRwbHVzLm9rKG5hbWUubGVuZ3RoID4gMCwgJ25hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG5cblx0Zm9yIChjYXVzZSA9IGVycjsgY2F1c2UgIT09IG51bGw7IGNhdXNlID0gVkVycm9yLmNhdXNlKGNhdXNlKSkge1xuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGNhdXNlKSk7XG5cdFx0aWYgKGNhdXNlLm5hbWUgPT0gbmFtZSkge1xuXHRcdFx0cmV0dXJuIChjYXVzZSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIChudWxsKTtcbn07XG5cblZFcnJvci5mdWxsU3RhY2sgPSBmdW5jdGlvbiAoZXJyKVxue1xuXHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblxuXHR2YXIgY2F1c2UgPSBWRXJyb3IuY2F1c2UoZXJyKTtcblxuXHRpZiAoY2F1c2UpIHtcblx0XHRyZXR1cm4gKGVyci5zdGFjayArICdcXG5jYXVzZWQgYnk6ICcgKyBWRXJyb3IuZnVsbFN0YWNrKGNhdXNlKSk7XG5cdH1cblxuXHRyZXR1cm4gKGVyci5zdGFjayk7XG59O1xuXG5cbi8qXG4gKiBTRXJyb3IgaXMgbGlrZSBWRXJyb3IsIGJ1dCBzdHJpY3RlciBhYm91dCB0eXBlcy4gIFlvdSBjYW5ub3QgcGFzcyBcIm51bGxcIiBvclxuICogXCJ1bmRlZmluZWRcIiBhcyBzdHJpbmcgYXJndW1lbnRzIHRvIHRoZSBmb3JtYXR0ZXIuXG4gKi9cbmZ1bmN0aW9uIFNFcnJvcigpXG57XG5cdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgb3B0aW9ucztcblxuXHRhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFNFcnJvcikpIHtcblx0XHRvYmogPSBPYmplY3QuY3JlYXRlKFNFcnJvci5wcm90b3R5cGUpO1xuXHRcdFNFcnJvci5hcHBseShvYmosIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIChvYmopO1xuXHR9XG5cblx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdCAgICAnYXJndic6IGFyZ3MsXG5cdCAgICAnc3RyaWN0JzogdHJ1ZVxuXHR9KTtcblxuXHRvcHRpb25zID0gcGFyc2VkLm9wdGlvbnM7XG5cdFZFcnJvci5jYWxsKHRoaXMsIG9wdGlvbnMsICclcycsIHBhcnNlZC5zaG9ydG1lc3NhZ2UpO1xuXG5cdHJldHVybiAodGhpcyk7XG59XG5cbi8qXG4gKiBXZSBkb24ndCBib3RoZXIgc2V0dGluZyBTRXJyb3IucHJvdG90eXBlLm5hbWUgYmVjYXVzZSBvbmNlIGNvbnN0cnVjdGVkLFxuICogU0Vycm9ycyBhcmUganVzdCBsaWtlIFZFcnJvcnMuXG4gKi9cbm1vZF91dGlsLmluaGVyaXRzKFNFcnJvciwgVkVycm9yKTtcblxuXG4vKlxuICogUmVwcmVzZW50cyBhIGNvbGxlY3Rpb24gb2YgZXJyb3JzIGZvciB0aGUgcHVycG9zZSBvZiBjb25zdW1lcnMgdGhhdCBnZW5lcmFsbHlcbiAqIG9ubHkgZGVhbCB3aXRoIG9uZSBlcnJvci4gIENhbGxlcnMgY2FuIGV4dHJhY3QgdGhlIGluZGl2aWR1YWwgZXJyb3JzXG4gKiBjb250YWluZWQgaW4gdGhpcyBvYmplY3QsIGJ1dCBtYXkgYWxzbyBqdXN0IHRyZWF0IGl0IGFzIGEgbm9ybWFsIHNpbmdsZVxuICogZXJyb3IsIGluIHdoaWNoIGNhc2UgYSBzdW1tYXJ5IG1lc3NhZ2Ugd2lsbCBiZSBwcmludGVkLlxuICovXG5mdW5jdGlvbiBNdWx0aUVycm9yKGVycm9ycylcbntcblx0bW9kX2Fzc2VydHBsdXMuYXJyYXkoZXJyb3JzLCAnbGlzdCBvZiBlcnJvcnMnKTtcblx0bW9kX2Fzc2VydHBsdXMub2soZXJyb3JzLmxlbmd0aCA+IDAsICdtdXN0IGJlIGF0IGxlYXN0IG9uZSBlcnJvcicpO1xuXHR0aGlzLmFzZV9lcnJvcnMgPSBlcnJvcnM7XG5cblx0VkVycm9yLmNhbGwodGhpcywge1xuXHQgICAgJ2NhdXNlJzogZXJyb3JzWzBdXG5cdH0sICdmaXJzdCBvZiAlZCBlcnJvciVzJywgZXJyb3JzLmxlbmd0aCwgZXJyb3JzLmxlbmd0aCA9PSAxID8gJycgOiAncycpO1xufVxuXG5tb2RfdXRpbC5pbmhlcml0cyhNdWx0aUVycm9yLCBWRXJyb3IpO1xuTXVsdGlFcnJvci5wcm90b3R5cGUubmFtZSA9ICdNdWx0aUVycm9yJztcblxuTXVsdGlFcnJvci5wcm90b3R5cGUuZXJyb3JzID0gZnVuY3Rpb24gbWVfZXJyb3JzKClcbntcblx0cmV0dXJuICh0aGlzLmFzZV9lcnJvcnMuc2xpY2UoMCkpO1xufTtcblxuXG4vKlxuICogU2VlIFJFQURNRS5tZCBmb3IgcmVmZXJlbmNlIGRldGFpbHMuXG4gKi9cbmZ1bmN0aW9uIFdFcnJvcigpXG57XG5cdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgb3B0aW9ucztcblxuXHRhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFdFcnJvcikpIHtcblx0XHRvYmogPSBPYmplY3QuY3JlYXRlKFdFcnJvci5wcm90b3R5cGUpO1xuXHRcdFdFcnJvci5hcHBseShvYmosIGFyZ3MpO1xuXHRcdHJldHVybiAob2JqKTtcblx0fVxuXG5cdHBhcnNlZCA9IHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoe1xuXHQgICAgJ2FyZ3YnOiBhcmdzLFxuXHQgICAgJ3N0cmljdCc6IGZhbHNlXG5cdH0pO1xuXG5cdG9wdGlvbnMgPSBwYXJzZWQub3B0aW9ucztcblx0b3B0aW9uc1snc2tpcENhdXNlTWVzc2FnZSddID0gdHJ1ZTtcblx0VkVycm9yLmNhbGwodGhpcywgb3B0aW9ucywgJyVzJywgcGFyc2VkLnNob3J0bWVzc2FnZSk7XG5cblx0cmV0dXJuICh0aGlzKTtcbn1cblxubW9kX3V0aWwuaW5oZXJpdHMoV0Vycm9yLCBWRXJyb3IpO1xuV0Vycm9yLnByb3RvdHlwZS5uYW1lID0gJ1dFcnJvcic7XG5cbldFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB3ZV90b1N0cmluZygpXG57XG5cdHZhciBzdHIgPSAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpICYmIHRoaXMubmFtZSB8fFxuXHRcdHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lKTtcblx0aWYgKHRoaXMubWVzc2FnZSlcblx0XHRzdHIgKz0gJzogJyArIHRoaXMubWVzc2FnZTtcblx0aWYgKHRoaXMuanNlX2NhdXNlICYmIHRoaXMuanNlX2NhdXNlLm1lc3NhZ2UpXG5cdFx0c3RyICs9ICc7IGNhdXNlZCBieSAnICsgdGhpcy5qc2VfY2F1c2UudG9TdHJpbmcoKTtcblxuXHRyZXR1cm4gKHN0cik7XG59O1xuXG4vKlxuICogRm9yIHB1cmVseSBoaXN0b3JpY2FsIHJlYXNvbnMsIFdFcnJvcidzIGNhdXNlKCkgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXRcbiAqIHRoZSBjYXVzZS5cbiAqL1xuV0Vycm9yLnByb3RvdHlwZS5jYXVzZSA9IGZ1bmN0aW9uIHdlX2NhdXNlKGMpXG57XG5cdGlmIChtb2RfaXNFcnJvcihjKSlcblx0XHR0aGlzLmpzZV9jYXVzZSA9IGM7XG5cblx0cmV0dXJuICh0aGlzLmpzZV9jYXVzZSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3ZlcnJvci9saWIvdmVycm9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTIsIE1hcmsgQ2F2YWdlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gQ29weXJpZ2h0IDIwMTUgSm95ZW50LCBJbmMuXG5cbnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKTtcbnZhciBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKS5TdHJlYW07XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuXG4vLy8tLS0gR2xvYmFsc1xuXG4vKiBKU1NUWUxFRCAqL1xudmFyIFVVSURfUkVHRVhQID0gL15bYS1mQS1GMC05XXs4fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXsxMn0kLztcblxuXG4vLy8tLS0gSW50ZXJuYWxcblxuZnVuY3Rpb24gX2NhcGl0YWxpemUoc3RyKSB7XG4gICAgcmV0dXJuIChzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkpO1xufVxuXG5mdW5jdGlvbiBfdG9zcyhuYW1lLCBleHBlY3RlZCwgb3BlciwgYXJnLCBhY3R1YWwpIHtcbiAgICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogdXRpbC5mb3JtYXQoJyVzICglcykgaXMgcmVxdWlyZWQnLCBuYW1lLCBleHBlY3RlZCksXG4gICAgICAgIGFjdHVhbDogKGFjdHVhbCA9PT0gdW5kZWZpbmVkKSA/IHR5cGVvZiAoYXJnKSA6IGFjdHVhbChhcmcpLFxuICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG4gICAgICAgIG9wZXJhdG9yOiBvcGVyIHx8ICc9PT0nLFxuICAgICAgICBzdGFja1N0YXJ0RnVuY3Rpb246IF90b3NzLmNhbGxlclxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBfZ2V0Q2xhc3MoYXJnKSB7XG4gICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKS5zbGljZSg4LCAtMSkpO1xufVxuXG5mdW5jdGlvbiBub29wKCkge1xuICAgIC8vIFdoeSBldmVuIGJvdGhlciB3aXRoIGFzc2VydHM/XG59XG5cblxuLy8vLS0tIEV4cG9ydHNcblxudmFyIHR5cGVzID0ge1xuICAgIGJvb2w6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ2Jvb2xlYW4nOyB9XG4gICAgfSxcbiAgICBmdW5jOiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdmdW5jdGlvbic7IH1cbiAgICB9LFxuICAgIHN0cmluZzoge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnc3RyaW5nJzsgfVxuICAgIH0sXG4gICAgb2JqZWN0OiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG51bWJlcjoge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGFyZyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGZpbml0ZToge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGFyZykgJiYgaXNGaW5pdGUoYXJnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYnVmZmVyOiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBCdWZmZXIuaXNCdWZmZXIoYXJnKTsgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdCdWZmZXIuaXNCdWZmZXInXG4gICAgfSxcbiAgICBhcnJheToge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpOyB9LFxuICAgICAgICBvcGVyYXRvcjogJ0FycmF5LmlzQXJyYXknXG4gICAgfSxcbiAgICBzdHJlYW06IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIFN0cmVhbTsgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcbiAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3NcbiAgICB9LFxuICAgIGRhdGU6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIERhdGU7IH0sXG4gICAgICAgIG9wZXJhdG9yOiAnaW5zdGFuY2VvZicsXG4gICAgICAgIGFjdHVhbDogX2dldENsYXNzXG4gICAgfSxcbiAgICByZWdleHA6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIFJlZ0V4cDsgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcbiAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3NcbiAgICB9LFxuICAgIHV1aWQ6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdzdHJpbmcnICYmIFVVSURfUkVHRVhQLnRlc3QoYXJnKTtcbiAgICAgICAgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdpc1VVSUQnXG4gICAgfVxufTtcblxuZnVuY3Rpb24gX3NldEV4cG9ydHMobmRlYnVnKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0eXBlcyk7XG4gICAgdmFyIG91dDtcblxuICAgIC8qIHJlLWV4cG9ydCBzdGFuZGFyZCBhc3NlcnQgKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9OREVCVUcpIHtcbiAgICAgICAgb3V0ID0gbm9vcDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvdXQgPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmICghYXJnKSB7XG4gICAgICAgICAgICAgICAgX3Rvc3MobXNnLCAndHJ1ZScsIGFyZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyogc3RhbmRhcmQgY2hlY2tzICovXG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIGlmIChuZGVidWcpIHtcbiAgICAgICAgICAgIG91dFtrXSA9IG5vb3A7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcbiAgICAgICAgb3V0W2tdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG4gICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnKSkge1xuICAgICAgICAgICAgICAgIF90b3NzKG1zZywgaywgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKiBvcHRpb25hbCBjaGVja3MgKi9cbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIG5hbWUgPSAnb3B0aW9uYWwnICsgX2NhcGl0YWxpemUoayk7XG4gICAgICAgIGlmIChuZGVidWcpIHtcbiAgICAgICAgICAgIG91dFtuYW1lXSA9IG5vb3A7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcbiAgICAgICAgb3V0W25hbWVdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG4gICAgICAgICAgICBpZiAoYXJnID09PSB1bmRlZmluZWQgfHwgYXJnID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZykpIHtcbiAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGssIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyogYXJyYXlPZiBjaGVja3MgKi9cbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIG5hbWUgPSAnYXJyYXlPZicgKyBfY2FwaXRhbGl6ZShrKTtcbiAgICAgICAgaWYgKG5kZWJ1Zykge1xuICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuICAgICAgICB2YXIgZXhwZWN0ZWQgPSAnWycgKyBrICsgJ10nO1xuICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKiBvcHRpb25hbEFycmF5T2YgY2hlY2tzICovXG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHZhciBuYW1lID0gJ29wdGlvbmFsQXJyYXlPZicgKyBfY2FwaXRhbGl6ZShrKTtcbiAgICAgICAgaWYgKG5kZWJ1Zykge1xuICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuICAgICAgICB2YXIgZXhwZWN0ZWQgPSAnWycgKyBrICsgJ10nO1xuICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmIChhcmcgPT09IHVuZGVmaW5lZCB8fCBhcmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgICAgICAgICAgICAgIF90b3NzKG1zZywgZXhwZWN0ZWQsIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZ1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyogcmUtZXhwb3J0IGJ1aWx0LWluIGFzc2VydGlvbnMgKi9cbiAgICBPYmplY3Qua2V5cyhhc3NlcnQpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKGsgPT09ICdBc3NlcnRpb25FcnJvcicpIHtcbiAgICAgICAgICAgIG91dFtrXSA9IGFzc2VydFtrXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmRlYnVnKSB7XG4gICAgICAgICAgICBvdXRba10gPSBub29wO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG91dFtrXSA9IGFzc2VydFtrXTtcbiAgICB9KTtcblxuICAgIC8qIGV4cG9ydCBvdXJzZWx2ZXMgKGZvciB1bml0IHRlc3RzIF9vbmx5XykgKi9cbiAgICBvdXQuX3NldEV4cG9ydHMgPSBfc2V0RXhwb3J0cztcblxuICAgIHJldHVybiBvdXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NldEV4cG9ydHMocHJvY2Vzcy5lbnYuTk9ERV9OREVCVUcpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3ZlcnJvci9+L2Fzc2VydC1wbHVzL2Fzc2VydC5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG4gIH1cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgaWYgKHRoYXQgPT09IG51bGwpIHtcbiAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgICB9XG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbi8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcbiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblxuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IGFycmF5XG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblxuICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoYXRcbiAgICB9XG5cbiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIHRoYXRcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuICAgIH1cblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuLy8gQnVmZmVyIGluc3RhbmNlcy5cbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIHZhciB5ID0gZW5kIC0gc3RhcnRcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cbiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcbiAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY29kZSA8IDI1Nikge1xuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5leHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcbmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXlcblxudmFyIGxvb2t1cCA9IFtdXG52YXIgcmV2TG9va3VwID0gW11cbnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXlcblxudmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLydcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV1cbiAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpXG59XG5cbnJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxucmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cbmZ1bmN0aW9uIHBsYWNlSG9sZGVyc0NvdW50IChiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG4gIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcbiAgLy8gcmVwcmVzZW50IG9uZSBieXRlXG4gIC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG4gIHJldHVybiBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbiAgcmV0dXJuIGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVyc0NvdW50KGI2NClcbn1cblxuZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkge1xuICB2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICBwbGFjZUhvbGRlcnMgPSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG5cbiAgYXJyID0gbmV3IEFycihsZW4gKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gbGVuIC0gNCA6IGxlblxuXG4gIHZhciBMID0gMFxuXG4gIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyKVxuICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcbiAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICsgbG9va3VwW251bSAmIDB4M0ZdXG59XG5cbmZ1bmN0aW9uIGVuY29kZUNodW5rICh1aW50OCwgc3RhcnQsIGVuZCkge1xuICB2YXIgdG1wXG4gIHZhciBvdXRwdXQgPSBbXVxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgIHRtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIG91dHB1dCA9ICcnXG4gIHZhciBwYXJ0cyA9IFtdXG4gIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpXG4gIH1cblxuICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG4gIGlmIChleHRyYUJ5dGVzID09PSAxKSB7XG4gICAgdG1wID0gdWludDhbbGVuIC0gMV1cbiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9ICc9PSdcbiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG4gICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgKHVpbnQ4W2xlbiAtIDFdKVxuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDEwXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gJz0nXG4gIH1cblxuICBwYXJ0cy5wdXNoKG91dHB1dClcblxuICByZXR1cm4gcGFydHMuam9pbignJylcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vYmFzZTY0LWpzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIG5CaXRzID0gLTdcbiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcbiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblxuICBpICs9IGRcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBzID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBlTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcbiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcbiAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG4gICAgZSA9IGVNYXhcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS1cbiAgICAgIGMgKj0gMlxuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKytcbiAgICAgIGMgLz0gMlxuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDBcbiAgICAgIGUgPSBlTWF4XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaWVlZTc1NC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9+L2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBjb21wYXJlIGFuZCBpc0J1ZmZlciB0YWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2Jsb2IvNjgwZTllNWU0ODhmMjJhYWMyNzU5OWE1N2RjODQ0YTYzMTU5MjhkZC9pbmRleC5qc1xuLy8gb3JpZ2luYWwgbm90aWNlOlxuXG4vKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5mdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciB4ID0gYS5sZW5ndGg7XG4gIHZhciB5ID0gYi5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV07XG4gICAgICB5ID0gYltpXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBpZiAoeSA8IHgpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIGlzQnVmZmVyKGIpIHtcbiAgaWYgKGdsb2JhbC5CdWZmZXIgJiYgdHlwZW9mIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihiKTtcbiAgfVxuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKTtcbn1cblxuLy8gYmFzZWQgb24gbm9kZSBhc3NlcnQsIG9yaWdpbmFsIG5vdGljZTpcblxuLy8gaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvVW5pdF9UZXN0aW5nLzEuMFxuLy9cbi8vIFRISVMgSVMgTk9UIFRFU1RFRCBOT1IgTElLRUxZIFRPIFdPUksgT1VUU0lERSBWOCFcbi8vXG4vLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpXG4vLyBDb3B5cmlnaHQgKGMpIDIwMDkgVGhvbWFzIFJvYmluc29uIDwyODBub3J0aC5jb20+XG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvXG4vLyBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZVxuLy8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4vLyBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTlxuLy8gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbC8nKTtcbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBmdW5jdGlvbnNIYXZlTmFtZXMgPSAoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gZm9vKCkge30ubmFtZSA9PT0gJ2Zvbyc7XG59KCkpO1xuZnVuY3Rpb24gcFRvU3RyaW5nIChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopO1xufVxuZnVuY3Rpb24gaXNWaWV3KGFycmJ1Zikge1xuICBpZiAoaXNCdWZmZXIoYXJyYnVmKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoYXJyYnVmKTtcbiAgfVxuICBpZiAoIWFycmJ1Zikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoYXJyYnVmIGluc3RhbmNlb2YgRGF0YVZpZXcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoYXJyYnVmLmJ1ZmZlciAmJiBhcnJidWYuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4vLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvd1xuLy8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlXG4vLyBhc3NlcnQgbW9kdWxlIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIGludGVyZmFjZS5cblxudmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7XG5cbi8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC5cbi8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogYWN0dWFsLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KVxuXG52YXIgcmVnZXggPSAvXFxzKmZ1bmN0aW9uXFxzKyhbXlxcKFxcc10qKVxccyovO1xuLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2xqaGFyYi9mdW5jdGlvbi5wcm90b3R5cGUubmFtZS9ibG9iL2FkZWVlZWM4YmZjYzYwNjhiMTg3ZDdkOWZiM2Q1YmIxZDNhMzA4OTkvaW1wbGVtZW50YXRpb24uanNcbmZ1bmN0aW9uIGdldE5hbWUoZnVuYykge1xuICBpZiAoIXV0aWwuaXNGdW5jdGlvbihmdW5jKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzKSB7XG4gICAgcmV0dXJuIGZ1bmMubmFtZTtcbiAgfVxuICB2YXIgc3RyID0gZnVuYy50b1N0cmluZygpO1xuICB2YXIgbWF0Y2ggPSBzdHIubWF0Y2gocmVnZXgpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV07XG59XG5hc3NlcnQuQXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKSB7XG4gIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7XG4gIHRoaXMuZXhwZWN0ZWQgPSBvcHRpb25zLmV4cGVjdGVkO1xuICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjtcbiAgaWYgKG9wdGlvbnMubWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTtcbiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNZXNzYWdlKHRoaXMpO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7XG4gIH1cbiAgdmFyIHN0YWNrU3RhcnRGdW5jdGlvbiA9IG9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9uIHx8IGZhaWw7XG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHN0YWNrU3RhcnRGdW5jdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gbm9uIHY4IGJyb3dzZXJzIHNvIHdlIGNhbiBoYXZlIGEgc3RhY2t0cmFjZVxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTtcbiAgICBpZiAoZXJyLnN0YWNrKSB7XG4gICAgICB2YXIgb3V0ID0gZXJyLnN0YWNrO1xuXG4gICAgICAvLyB0cnkgdG8gc3RyaXAgdXNlbGVzcyBmcmFtZXNcbiAgICAgIHZhciBmbl9uYW1lID0gZ2V0TmFtZShzdGFja1N0YXJ0RnVuY3Rpb24pO1xuICAgICAgdmFyIGlkeCA9IG91dC5pbmRleE9mKCdcXG4nICsgZm5fbmFtZSk7XG4gICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgLy8gb25jZSB3ZSBoYXZlIGxvY2F0ZWQgdGhlIGZ1bmN0aW9uIGZyYW1lXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpXG4gICAgICAgIHZhciBuZXh0X2xpbmUgPSBvdXQuaW5kZXhPZignXFxuJywgaWR4ICsgMSk7XG4gICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcobmV4dF9saW5lICsgMSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhY2sgPSBvdXQ7XG4gICAgfVxuICB9XG59O1xuXG4vLyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxudXRpbC5pbmhlcml0cyhhc3NlcnQuQXNzZXJ0aW9uRXJyb3IsIEVycm9yKTtcblxuZnVuY3Rpb24gdHJ1bmNhdGUocywgbikge1xuICBpZiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHMubGVuZ3RoIDwgbiA/IHMgOiBzLnNsaWNlKDAsIG4pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzO1xuICB9XG59XG5mdW5jdGlvbiBpbnNwZWN0KHNvbWV0aGluZykge1xuICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzIHx8ICF1dGlsLmlzRnVuY3Rpb24oc29tZXRoaW5nKSkge1xuICAgIHJldHVybiB1dGlsLmluc3BlY3Qoc29tZXRoaW5nKTtcbiAgfVxuICB2YXIgcmF3bmFtZSA9IGdldE5hbWUoc29tZXRoaW5nKTtcbiAgdmFyIG5hbWUgPSByYXduYW1lID8gJzogJyArIHJhd25hbWUgOiAnJztcbiAgcmV0dXJuICdbRnVuY3Rpb24nICsgIG5hbWUgKyAnXSc7XG59XG5mdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHtcbiAgcmV0dXJuIHRydW5jYXRlKGluc3BlY3Qoc2VsZi5hY3R1YWwpLCAxMjgpICsgJyAnICtcbiAgICAgICAgIHNlbGYub3BlcmF0b3IgKyAnICcgK1xuICAgICAgICAgdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmV4cGVjdGVkKSwgMTI4KTtcbn1cblxuLy8gQXQgcHJlc2VudCBvbmx5IHRoZSB0aHJlZSBrZXlzIG1lbnRpb25lZCBhYm92ZSBhcmUgdXNlZCBhbmRcbi8vIHVuZGVyc3Rvb2QgYnkgdGhlIHNwZWMuIEltcGxlbWVudGF0aW9ucyBvciBzdWIgbW9kdWxlcyBjYW4gcGFzc1xuLy8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZVxuLy8gaWdub3JlZC5cblxuLy8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3Jcbi8vIHdoZW4gYSBjb3JyZXNwb25kaW5nIGNvbmRpdGlvbiBpcyBub3QgbWV0LCB3aXRoIGEgbWVzc2FnZSB0aGF0XG4vLyBtYXkgYmUgdW5kZWZpbmVkIGlmIG5vdCBwcm92aWRlZC4gIEFsbCBhc3NlcnRpb24gbWV0aG9kcyBwcm92aWRlXG4vLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvclxuLy8gZGlzcGxheSBwdXJwb3Nlcy5cblxuZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7XG4gIHRocm93IG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3Ioe1xuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgYWN0dWFsOiBhY3R1YWwsXG4gICAgZXhwZWN0ZWQ6IGV4cGVjdGVkLFxuICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcbiAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvblxuICB9KTtcbn1cblxuLy8gRVhURU5TSU9OISBhbGxvd3MgZm9yIHdlbGwgYmVoYXZlZCBlcnJvcnMgZGVmaW5lZCBlbHNld2hlcmUuXG5hc3NlcnQuZmFpbCA9IGZhaWw7XG5cbi8vIDQuIFB1cmUgYXNzZXJ0aW9uIHRlc3RzIHdoZXRoZXIgYSB2YWx1ZSBpcyB0cnV0aHksIGFzIGRldGVybWluZWRcbi8vIGJ5ICEhZ3VhcmQuXG4vLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTtcbi8vIFRoaXMgc3RhdGVtZW50IGlzIGVxdWl2YWxlbnQgdG8gYXNzZXJ0LmVxdWFsKHRydWUsICEhZ3VhcmQsXG4vLyBtZXNzYWdlX29wdCk7LiBUbyB0ZXN0IHN0cmljdGx5IGZvciB0aGUgdmFsdWUgdHJ1ZSwgdXNlXG4vLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuXG5cbmZ1bmN0aW9uIG9rKHZhbHVlLCBtZXNzYWdlKSB7XG4gIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7XG59XG5hc3NlcnQub2sgPSBvaztcblxuLy8gNS4gVGhlIGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzaGFsbG93LCBjb2VyY2l2ZSBlcXVhbGl0eSB3aXRoXG4vLyA9PS5cbi8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpO1xufTtcblxuLy8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbFxuLy8gd2l0aCAhPSBhc3NlcnQubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPScsIGFzc2VydC5ub3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLlxuLy8gYXNzZXJ0LmRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBkZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwU3RyaWN0RXF1YWwnLCBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKSB7XG4gIC8vIDcuMS4gQWxsIGlkZW50aWNhbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGFzIGRldGVybWluZWQgYnkgPT09LlxuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgJiYgaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGNvbXBhcmUoYWN0dWFsLCBleHBlY3RlZCkgPT09IDA7XG5cbiAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBEYXRlIG9iamVjdCB0aGF0IHJlZmVycyB0byB0aGUgc2FtZSB0aW1lLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblxuICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZFxuICAvLyBwcm9wZXJ0aWVzIChgZ2xvYmFsYCwgYG11bHRpbGluZWAsIGBsYXN0SW5kZXhgLCBgaWdub3JlQ2FzZWApLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiZcbiAgICAgICAgICAgYWN0dWFsLmdsb2JhbCA9PT0gZXhwZWN0ZWQuZ2xvYmFsICYmXG4gICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJlxuICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiZcbiAgICAgICAgICAgYWN0dWFsLmlnbm9yZUNhc2UgPT09IGV4cGVjdGVkLmlnbm9yZUNhc2U7XG5cbiAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuICB9IGVsc2UgaWYgKChhY3R1YWwgPT09IG51bGwgfHwgdHlwZW9mIGFjdHVhbCAhPT0gJ29iamVjdCcpICYmXG4gICAgICAgICAgICAgKGV4cGVjdGVkID09PSBudWxsIHx8IHR5cGVvZiBleHBlY3RlZCAhPT0gJ29iamVjdCcpKSB7XG4gICAgcmV0dXJuIHN0cmljdCA/IGFjdHVhbCA9PT0gZXhwZWN0ZWQgOiBhY3R1YWwgPT0gZXhwZWN0ZWQ7XG5cbiAgLy8gSWYgYm90aCB2YWx1ZXMgYXJlIGluc3RhbmNlcyBvZiB0eXBlZCBhcnJheXMsIHdyYXAgdGhlaXIgdW5kZXJseWluZ1xuICAvLyBBcnJheUJ1ZmZlcnMgaW4gYSBCdWZmZXIgZWFjaCB0byBpbmNyZWFzZSBwZXJmb3JtYW5jZVxuICAvLyBUaGlzIG9wdGltaXphdGlvbiByZXF1aXJlcyB0aGUgYXJyYXlzIHRvIGhhdmUgdGhlIHNhbWUgdHlwZSBhcyBjaGVja2VkIGJ5XG4gIC8vIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgKGFrYSBwVG9TdHJpbmcpLiBOZXZlciBwZXJmb3JtIGJpbmFyeVxuICAvLyBjb21wYXJpc29ucyBmb3IgRmxvYXQqQXJyYXlzLCB0aG91Z2gsIHNpbmNlIGUuZy4gKzAgPT09IC0wIGJ1dCB0aGVpclxuICAvLyBiaXQgcGF0dGVybnMgYXJlIG5vdCBpZGVudGljYWwuXG4gIH0gZWxzZSBpZiAoaXNWaWV3KGFjdHVhbCkgJiYgaXNWaWV3KGV4cGVjdGVkKSAmJlxuICAgICAgICAgICAgIHBUb1N0cmluZyhhY3R1YWwpID09PSBwVG9TdHJpbmcoZXhwZWN0ZWQpICYmXG4gICAgICAgICAgICAgIShhY3R1YWwgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHxcbiAgICAgICAgICAgICAgIGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkpIHtcbiAgICByZXR1cm4gY29tcGFyZShuZXcgVWludDhBcnJheShhY3R1YWwuYnVmZmVyKSxcbiAgICAgICAgICAgICAgICAgICBuZXcgVWludDhBcnJheShleHBlY3RlZC5idWZmZXIpKSA9PT0gMDtcblxuICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcbiAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG4gIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG4gIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgIT09IGlzQnVmZmVyKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBtZW1vcyA9IG1lbW9zIHx8IHthY3R1YWw6IFtdLCBleHBlY3RlZDogW119O1xuXG4gICAgdmFyIGFjdHVhbEluZGV4ID0gbWVtb3MuYWN0dWFsLmluZGV4T2YoYWN0dWFsKTtcbiAgICBpZiAoYWN0dWFsSW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoYWN0dWFsSW5kZXggPT09IG1lbW9zLmV4cGVjdGVkLmluZGV4T2YoZXhwZWN0ZWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lbW9zLmFjdHVhbC5wdXNoKGFjdHVhbCk7XG4gICAgbWVtb3MuZXhwZWN0ZWQucHVzaChleHBlY3RlZCk7XG5cbiAgICByZXR1cm4gb2JqRXF1aXYoYWN0dWFsLCBleHBlY3RlZCwgc3RyaWN0LCBtZW1vcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNBcmd1bWVudHMob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcbn1cblxuZnVuY3Rpb24gb2JqRXF1aXYoYSwgYiwgc3RyaWN0LCBhY3R1YWxWaXNpdGVkT2JqZWN0cykge1xuICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWVcbiAgaWYgKHV0aWwuaXNQcmltaXRpdmUoYSkgfHwgdXRpbC5pc1ByaW1pdGl2ZShiKSlcbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgaWYgKHN0cmljdCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkgIT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIHZhciBhSXNBcmdzID0gaXNBcmd1bWVudHMoYSk7XG4gIHZhciBiSXNBcmdzID0gaXNBcmd1bWVudHMoYik7XG4gIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKGFJc0FyZ3MpIHtcbiAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG4gICAgYiA9IHBTbGljZS5jYWxsKGIpO1xuICAgIHJldHVybiBfZGVlcEVxdWFsKGEsIGIsIHN0cmljdCk7XG4gIH1cbiAgdmFyIGthID0gb2JqZWN0S2V5cyhhKTtcbiAgdmFyIGtiID0gb2JqZWN0S2V5cyhiKTtcbiAgdmFyIGtleSwgaTtcbiAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlc1xuICAvLyBoYXNPd25Qcm9wZXJ0eSlcbiAgaWYgKGthLmxlbmd0aCAhPT0ga2IubGVuZ3RoKVxuICAgIHJldHVybiBmYWxzZTtcbiAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSxcbiAga2Euc29ydCgpO1xuICBrYi5zb3J0KCk7XG4gIC8vfn5+Y2hlYXAga2V5IHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoa2FbaV0gIT09IGtiW2ldKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcbiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAga2V5ID0ga2FbaV07XG4gICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gOC4gVGhlIG5vbi1lcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgZm9yIGFueSBkZWVwIGluZXF1YWxpdHkuXG4vLyBhc3NlcnQubm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIG5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIGZhbHNlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpO1xuICB9XG59O1xuXG5hc3NlcnQubm90RGVlcFN0cmljdEVxdWFsID0gbm90RGVlcFN0cmljdEVxdWFsO1xuZnVuY3Rpb24gbm90RGVlcFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwU3RyaWN0RXF1YWwnLCBub3REZWVwU3RyaWN0RXF1YWwpO1xuICB9XG59XG5cblxuLy8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbi8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PT0nLCBhc3NlcnQuc3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG4vLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXNcbi8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9PScsIGFzc2VydC5ub3RTdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChleHBlY3RlZCkgPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcbiAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAoYWN0dWFsIGluc3RhbmNlb2YgZXhwZWN0ZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElnbm9yZS4gIFRoZSBpbnN0YW5jZW9mIGNoZWNrIGRvZXNuJ3Qgd29yayBmb3IgYXJyb3cgZnVuY3Rpb25zLlxuICB9XG5cbiAgaWYgKEVycm9yLmlzUHJvdG90eXBlT2YoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGV4cGVjdGVkLmNhbGwoe30sIGFjdHVhbCkgPT09IHRydWU7XG59XG5cbmZ1bmN0aW9uIF90cnlCbG9jayhibG9jaykge1xuICB2YXIgZXJyb3I7XG4gIHRyeSB7XG4gICAgYmxvY2soKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGVycm9yID0gZTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59XG5cbmZ1bmN0aW9uIF90aHJvd3Moc2hvdWxkVGhyb3csIGJsb2NrLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICB2YXIgYWN0dWFsO1xuXG4gIGlmICh0eXBlb2YgYmxvY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJsb2NrXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGV4cGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgIG1lc3NhZ2UgPSBleHBlY3RlZDtcbiAgICBleHBlY3RlZCA9IG51bGw7XG4gIH1cblxuICBhY3R1YWwgPSBfdHJ5QmxvY2soYmxvY2spO1xuXG4gIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgK1xuICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTtcblxuICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuICB9XG5cbiAgdmFyIHVzZXJQcm92aWRlZE1lc3NhZ2UgPSB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZyc7XG4gIHZhciBpc1Vud2FudGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIHV0aWwuaXNFcnJvcihhY3R1YWwpO1xuICB2YXIgaXNVbmV4cGVjdGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIGFjdHVhbCAmJiAhZXhwZWN0ZWQ7XG5cbiAgaWYgKChpc1Vud2FudGVkRXhjZXB0aW9uICYmXG4gICAgICB1c2VyUHJvdmlkZWRNZXNzYWdlICYmXG4gICAgICBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHxcbiAgICAgIGlzVW5leHBlY3RlZEV4Y2VwdGlvbikge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ0dvdCB1bndhbnRlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICBpZiAoKHNob3VsZFRocm93ICYmIGFjdHVhbCAmJiBleHBlY3RlZCAmJlxuICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHtcbiAgICB0aHJvdyBhY3R1YWw7XG4gIH1cbn1cblxuLy8gMTEuIEV4cGVjdGVkIHRvIHRocm93IGFuIGVycm9yOlxuLy8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC50aHJvd3MgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cyh0cnVlLCBibG9jaywgZXJyb3IsIG1lc3NhZ2UpO1xufTtcblxuLy8gRVhURU5TSU9OISBUaGlzIGlzIGFubm95aW5nIHRvIHdyaXRlIG91dHNpZGUgdGhpcyBtb2R1bGUuXG5hc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG4gIF90aHJvd3MoZmFsc2UsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG59O1xuXG5hc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB0aHJvdyBlcnI7IH07XG5cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhc093bi5jYWxsKG9iaiwga2V5KSkga2V5cy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9hc3NlcnQvYXNzZXJ0LmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxubW9kdWxlLmV4cG9ydHMgPSBTdHJlYW07XG5cbnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG5cbmluaGVyaXRzKFN0cmVhbSwgRUUpO1xuU3RyZWFtLlJlYWRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLmpzJyk7XG5TdHJlYW0uV3JpdGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMnKTtcblN0cmVhbS5EdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzJyk7XG5TdHJlYW0uVHJhbnNmb3JtID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcycpO1xuU3RyZWFtLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzJyk7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuNC54XG5TdHJlYW0uU3RyZWFtID0gU3RyZWFtO1xuXG5cblxuLy8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudFxuLy8gcGFydCBvZiB0aGlzIGNsYXNzKSBpcyBvdmVycmlkZGVuIGluIHRoZSBSZWFkYWJsZSBjbGFzcy5cblxuZnVuY3Rpb24gU3RyZWFtKCkge1xuICBFRS5jYWxsKHRoaXMpO1xufVxuXG5TdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzO1xuXG4gIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuICAgIGlmIChkZXN0LndyaXRhYmxlKSB7XG4gICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkge1xuICAgICAgICBzb3VyY2UucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpO1xuXG4gIGZ1bmN0aW9uIG9uZHJhaW4oKSB7XG4gICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7XG4gICAgICBzb3VyY2UucmVzdW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuXG4gIC8vIHNvdXJjZSBnZXRzIHRoZSAnZW5kJyBvciAnY2xvc2UnIGV2ZW50cy4gIE9ubHkgZGVzdC5lbmQoKSBvbmNlLlxuICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHtcbiAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2Uub24oJ2Nsb3NlJywgb25jbG9zZSk7XG4gIH1cblxuICB2YXIgZGlkT25FbmQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG4gICAgZGlkT25FbmQgPSB0cnVlO1xuXG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7XG4gIH1cblxuICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBjbGVhbnVwKCk7XG4gICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHtcbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuXG4gICAgfVxuICB9XG5cbiAgc291cmNlLm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuXG4gIC8vIHJlbW92ZSBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgYWRkZWQuXG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApO1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG4gIH1cblxuICBzb3VyY2Uub24oJ2VuZCcsIGNsZWFudXApO1xuICBzb3VyY2Uub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgZGVzdC5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpO1xuXG4gIC8vIEFsbG93IGZvciB1bml4LWxpa2UgdXNhZ2U6IEEucGlwZShCKS5waXBlKEMpXG4gIHJldHVybiBkZXN0O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyZWFtLWJyb3dzZXJpZnkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vZXZlbnRzL2V2ZW50cy5qc1xuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3N0cmVhbS1icm93c2VyaWZ5L34vaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcycpO1xuZXhwb3J0cy5TdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcbmV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzO1xuZXhwb3J0cy5Xcml0YWJsZSA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fd3JpdGFibGUuanMnKTtcbmV4cG9ydHMuRHVwbGV4ID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9kdXBsZXguanMnKTtcbmV4cG9ydHMuVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMnKTtcbmV4cG9ydHMuUGFzc1Rocm91Z2ggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzJyk7XG5pZiAoIXByb2Nlc3MuYnJvd3NlciAmJiBwcm9jZXNzLmVudi5SRUFEQUJMRV9TVFJFQU0gPT09ICdkaXNhYmxlJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3N0cmVhbScpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5SZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTtcblxudmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuaWYgKCFFRS5saXN0ZW5lckNvdW50KSBFRS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgU3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIFN0cmluZ0RlY29kZXI7XG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ3V0aWwnKTtcbmlmIChkZWJ1ZyAmJiBkZWJ1Zy5kZWJ1Z2xvZykge1xuICBkZWJ1ZyA9IGRlYnVnLmRlYnVnbG9nKCdzdHJlYW0nKTtcbn0gZWxzZSB7XG4gIGRlYnVnID0gZnVuY3Rpb24gKCkge307XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG51dGlsLmluaGVyaXRzKFJlYWRhYmxlLCBTdHJlYW0pO1xuXG5mdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIGRlZmF1bHRId20gPSBvcHRpb25zLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gKGh3bSB8fCBod20gPT09IDApID8gaHdtIDogZGVmYXVsdEh3bTtcblxuICAvLyBjYXN0IHRvIGludHMuXG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrO1xuXG4gIHRoaXMuYnVmZmVyID0gW107XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5XG4gIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLlxuICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7XG5cblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KVxuICAgIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIHdoZW4gcGlwaW5nLCB3ZSBvbmx5IGNhcmUgYWJvdXQgJ3JlYWRhYmxlJyBldmVudHMgdGhhdCBoYXBwZW5cbiAgLy8gYWZ0ZXIgcmVhZCgpaW5nIGFsbCB0aGUgYnl0ZXMgYW5kIG5vdCBnZXR0aW5nIGFueSBwdXNoYmFjay5cbiAgdGhpcy5yYW5PdXQgPSBmYWxzZTtcblxuICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpc1xuICB0aGlzLmF3YWl0RHJhaW4gPSAwO1xuXG4gIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWRcbiAgdGhpcy5yZWFkaW5nTW9yZSA9IGZhbHNlO1xuXG4gIHRoaXMuZGVjb2RlciA9IG51bGw7XG4gIHRoaXMuZW5jb2RpbmcgPSBudWxsO1xuICBpZiAob3B0aW9ucy5lbmNvZGluZykge1xuICAgIGlmICghU3RyaW5nRGVjb2RlcilcbiAgICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKG9wdGlvbnMuZW5jb2RpbmcpO1xuICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHtcbiAgdmFyIER1cGxleCA9IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKVxuICAgIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeVxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuXG4vLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCxcbi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGRcbi8vIHdyaXRlKCkgc29tZSBtb3JlLlxuUmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBpZiAodXRpbC5pc1N0cmluZyhjaHVuaykgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcbiAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7XG4gICAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTtcbiAgICAgIGVuY29kaW5nID0gJyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgZmFsc2UpO1xufTtcblxuLy8gVW5zaGlmdCBzaG91bGQgKmFsd2F5cyogYmUgc29tZXRoaW5nIGRpcmVjdGx5IG91dCBvZiByZWFkKClcblJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oY2h1bmspIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCAnJywgdHJ1ZSk7XG59O1xuXG5mdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCkge1xuICB2YXIgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcbiAgaWYgKGVyKSB7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2UgaWYgKHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspKSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIGlmICghc3RhdGUuZW5kZWQpXG4gICAgICBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpO1xuICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuICAgIGlmIChzdGF0ZS5lbmRlZCAmJiAhYWRkVG9Gcm9udCkge1xuICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ3N0cmVhbS5wdXNoKCkgYWZ0ZXIgRU9GJyk7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZEVtaXR0ZWQgJiYgYWRkVG9Gcm9udCkge1xuICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ3N0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50Jyk7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIWFkZFRvRnJvbnQgJiYgIWVuY29kaW5nKVxuICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuXG4gICAgICBpZiAoIWFkZFRvRnJvbnQpXG4gICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcblxuICAgICAgLy8gaWYgd2Ugd2FudCB0aGUgZGF0YSBub3csIGp1c3QgZW1pdCBpdC5cbiAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgICAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTtcbiAgICAgICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1cGRhdGUgdGhlIGJ1ZmZlciBpbmZvLlxuICAgICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gICAgICAgIGlmIChhZGRUb0Zyb250KVxuICAgICAgICAgIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcblxuICAgICAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKVxuICAgICAgICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xuICAgICAgfVxuXG4gICAgICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkge1xuICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpO1xufVxuXG5cblxuLy8gaWYgaXQncyBwYXN0IHRoZSBoaWdoIHdhdGVyIG1hcmssIHdlIGNhbiBwdXNoIGluIHNvbWUgbW9yZS5cbi8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lXG4vLyBtb3JlIGJ5dGVzLiAgVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCxcbi8vIHN1Y2ggYXMgdGhlIHJlcGwuICBBbHNvLCBpZiB0aGUgcHVzaCgpIHRyaWdnZXJlZCBhXG4vLyByZWFkYWJsZSBldmVudCwgYW5kIHRoZSB1c2VyIGNhbGxlZCByZWFkKGxhcmdlTnVtYmVyKSBzdWNoIHRoYXRcbi8vIG5lZWRSZWFkYWJsZSB3YXMgc2V0LCB0aGVuIHdlIG91Z2h0IHRvIHB1c2ggbW9yZSwgc28gdGhhdCBhbm90aGVyXG4vLyAncmVhZGFibGUnIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkLlxuZnVuY3Rpb24gbmVlZE1vcmVEYXRhKHN0YXRlKSB7XG4gIHJldHVybiAhc3RhdGUuZW5kZWQgJiZcbiAgICAgICAgIChzdGF0ZS5uZWVkUmVhZGFibGUgfHxcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8XG4gICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwKTtcbn1cblxuLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5SZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbihlbmMpIHtcbiAgaWYgKCFTdHJpbmdEZWNvZGVyKVxuICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIERvbid0IHJhaXNlIHRoZSBod20gPiAxMjhNQlxudmFyIE1BWF9IV00gPSAweDgwMDAwMDtcbmZ1bmN0aW9uIHJvdW5kVXBUb05leHRQb3dlck9mMihuKSB7XG4gIGlmIChuID49IE1BWF9IV00pIHtcbiAgICBuID0gTUFYX0hXTTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgdGhlIG5leHQgaGlnaGVzdCBwb3dlciBvZiAyXG4gICAgbi0tO1xuICAgIGZvciAodmFyIHAgPSAxOyBwIDwgMzI7IHAgPDw9IDEpIG4gfD0gbiA+PiBwO1xuICAgIG4rKztcbiAgfVxuICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKVxuICAgIHJldHVybiAwO1xuXG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKVxuICAgIHJldHVybiBuID09PSAwID8gMCA6IDE7XG5cbiAgaWYgKGlzTmFOKG4pIHx8IHV0aWwuaXNOdWxsKG4pKSB7XG4gICAgLy8gb25seSBmbG93IG9uZSBidWZmZXIgYXQgYSB0aW1lXG4gICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUuYnVmZmVyLmxlbmd0aClcbiAgICAgIHJldHVybiBzdGF0ZS5idWZmZXJbMF0ubGVuZ3RoO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gIH1cblxuICBpZiAobiA8PSAwKVxuICAgIHJldHVybiAwO1xuXG4gIC8vIElmIHdlJ3JlIGFza2luZyBmb3IgbW9yZSB0aGFuIHRoZSB0YXJnZXQgYnVmZmVyIGxldmVsLFxuICAvLyB0aGVuIHJhaXNlIHRoZSB3YXRlciBtYXJrLiAgQnVtcCB1cCB0byB0aGUgbmV4dCBoaWdoZXN0XG4gIC8vIHBvd2VyIG9mIDIsIHRvIHByZXZlbnQgaW5jcmVhc2luZyBpdCBleGNlc3NpdmVseSBpbiB0aW55XG4gIC8vIGFtb3VudHMuXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaylcbiAgICBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gcm91bmRVcFRvTmV4dFBvd2VyT2YyKG4pO1xuXG4gIC8vIGRvbid0IGhhdmUgdGhhdCBtdWNoLiAgcmV0dXJuIG51bGwsIHVubGVzcyB3ZSd2ZSBlbmRlZC5cbiAgaWYgKG4gPiBzdGF0ZS5sZW5ndGgpIHtcbiAgICBpZiAoIXN0YXRlLmVuZGVkKSB7XG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlXG4gICAgICByZXR1cm4gc3RhdGUubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIG47XG59XG5cbi8vIHlvdSBjYW4gb3ZlcnJpZGUgZWl0aGVyIHRoaXMgbWV0aG9kLCBvciB0aGUgYXN5bmMgX3JlYWQobikgYmVsb3cuXG5SZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgZGVidWcoJ3JlYWQnLCBuKTtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIG5PcmlnID0gbjtcblxuICBpZiAoIXV0aWwuaXNOdW1iZXIobikgfHwgbiA+IDApXG4gICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG5cbiAgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyXG4gIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLlxuICBpZiAobiA9PT0gMCAmJlxuICAgICAgc3RhdGUubmVlZFJlYWRhYmxlICYmXG4gICAgICAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpXG4gICAgICBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICBlbHNlXG4gICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBuID0gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSk7XG5cbiAgLy8gaWYgd2UndmUgZW5kZWQsIGFuZCB3ZSdyZSBub3cgY2xlYXIsIHRoZW4gZmluaXNoIGl0IHVwLlxuICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkge1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApXG4gICAgICBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmVcbiAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluXG4gIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWRcbiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZVxuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlblxuICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC5cbiAgLy9cbiAgLy8gU28sIHRoZSBzdGVwcyBhcmU6XG4gIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG9cbiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci5cbiAgLy9cbiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC5cbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzXG4gIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhblxuICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlXG4gIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuXG4gIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbFxuICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0XG4gIC8vICdyZWFkYWJsZScgZXRjLlxuICAvL1xuICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uXG5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlO1xuICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7XG5cbiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcbiAgICBkb1JlYWQgPSB0cnVlO1xuICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7XG4gIH1cblxuICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeVxuICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9XG5cbiAgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7XG4gICAgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKVxuICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAvLyBjYWxsIGludGVybmFsIHJlYWQgbWV0aG9kXG4gICAgdGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTtcbiAgICBzdGF0ZS5zeW5jID0gZmFsc2U7XG4gIH1cblxuICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAvLyBhbmQgd2UgbmVlZCB0byByZS1ldmFsdWF0ZSBob3cgbXVjaCBkYXRhIHdlIGNhbiByZXR1cm4gdG8gdGhlIHVzZXIuXG4gIGlmIChkb1JlYWQgJiYgIXN0YXRlLnJlYWRpbmcpXG4gICAgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTtcblxuICB2YXIgcmV0O1xuICBpZiAobiA+IDApXG4gICAgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO1xuICBlbHNlXG4gICAgcmV0ID0gbnVsbDtcblxuICBpZiAodXRpbC5pc051bGwocmV0KSkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgbiA9IDA7XG4gIH1cblxuICBzdGF0ZS5sZW5ndGggLT0gbjtcblxuICAvLyBJZiB3ZSBoYXZlIG5vdGhpbmcgaW4gdGhlIGJ1ZmZlciwgdGhlbiB3ZSB3YW50IHRvIGtub3dcbiAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5lbmRlZClcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXG4gIC8vIElmIHdlIHRyaWVkIHRvIHJlYWQoKSBwYXN0IHRoZSBFT0YsIHRoZW4gZW1pdCBlbmQgb24gdGhlIG5leHQgdGljay5cbiAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMClcbiAgICBlbmRSZWFkYWJsZSh0aGlzKTtcblxuICBpZiAoIXV0aWwuaXNOdWxsKHJldCkpXG4gICAgdGhpcy5lbWl0KCdkYXRhJywgcmV0KTtcblxuICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuaykge1xuICB2YXIgZXIgPSBudWxsO1xuICBpZiAoIXV0aWwuaXNCdWZmZXIoY2h1bmspICYmXG4gICAgICAhdXRpbC5pc1N0cmluZyhjaHVuaykgJiZcbiAgICAgICF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGNodW5rKSAmJlxuICAgICAgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICByZXR1cm4gZXI7XG59XG5cblxuZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgfVxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cbiAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuXG4gIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xufVxuXG4vLyBEb24ndCBlbWl0IHJlYWRhYmxlIHJpZ2h0IGF3YXkgaW4gc3luYyBtb2RlLCBiZWNhdXNlIHRoaXMgY2FuIHRyaWdnZXJcbi8vIGFub3RoZXIgcmVhZCgpIGNhbGwgPT4gc3RhY2sgb3ZlcmZsb3cuICBUaGlzIHdheSwgaXQgbWlnaHQgdHJpZ2dlclxuLy8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLlxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkge1xuICAgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5mbG93aW5nKTtcbiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlO1xuICAgIGlmIChzdGF0ZS5zeW5jKVxuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICAgICAgfSk7XG4gICAgZWxzZVxuICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7XG4gIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpO1xuICBmbG93KHN0cmVhbSk7XG59XG5cblxuLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCxcbi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWRcbi8vIGluIHR1cm4gYW5vdGhlciBfcmVhZChuKSBjYWxsLCBpbiB3aGljaCBjYXNlIHJlYWRpbmcgPSB0cnVlIGlmXG4vLyBpdCdzIGluIHByb2dyZXNzLlxuLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSxcbi8vIHRoZW4gZ28gYWhlYWQgYW5kIHRyeSB0byByZWFkIHNvbWUgbW9yZSBwcmVlbXB0aXZlbHkuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkge1xuICAgIHN0YXRlLnJlYWRpbmdNb3JlID0gdHJ1ZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB3aGlsZSAoIXN0YXRlLnJlYWRpbmcgJiYgIXN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLmVuZGVkICYmXG4gICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG4gICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO1xuICAgIGVsc2VcbiAgICAgIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgfVxuICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlO1xufVxuXG4vLyBhYnN0cmFjdCBtZXRob2QuICB0byBiZSBvdmVycmlkZGVuIGluIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG4vLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLlxuLy8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsIFwibGVuZ3RoXCIgaXMgc29tZXdoYXRcbi8vIGFyYml0cmFyeSwgYW5kIHBlcmhhcHMgbm90IHZlcnkgbWVhbmluZ2Z1bC5cblJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBwaXBlT3B0cykge1xuICB2YXIgc3JjID0gdGhpcztcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHN0YXRlLnBpcGVzQ291bnQgKz0gMTtcbiAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTtcblxuICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmXG4gICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmXG4gICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyO1xuXG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiBjbGVhbnVwO1xuICBpZiAoc3RhdGUuZW5kRW1pdHRlZClcbiAgICBwcm9jZXNzLm5leHRUaWNrKGVuZEZuKTtcbiAgZWxzZVxuICAgIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG5cbiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpO1xuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSkge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgZGVidWcoJ29uZW5kJyk7XG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG4gIC8vIHdoZW4gdGhlIGRlc3QgZHJhaW5zLCBpdCByZWR1Y2VzIHRoZSBhd2FpdERyYWluIGNvdW50ZXJcbiAgLy8gb24gdGhlIHNvdXJjZS4gIFRoaXMgd291bGQgYmUgbW9yZSBlbGVnYW50IHdpdGggYSAub25jZSgpXG4gIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzXG4gIC8vIHRvbyBzbG93LlxuICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7XG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBkZWJ1ZygnY2xlYW51cCcpO1xuICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcblxuICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcbiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcbiAgICAvLyBmbG93aW5nIGFnYWluLlxuICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cbiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiZcbiAgICAgICAgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSlcbiAgICAgIG9uZHJhaW4oKTtcbiAgfVxuXG4gIHNyYy5vbignZGF0YScsIG9uZGF0YSk7XG4gIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuICAgIGRlYnVnKCdvbmRhdGEnKTtcbiAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7XG4gICAgaWYgKGZhbHNlID09PSByZXQpIHtcbiAgICAgIGRlYnVnKCdmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UnLFxuICAgICAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKztcbiAgICAgIHNyYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcbiAgICB1bnBpcGUoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGlmIChFRS5saXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKVxuICAgICAgZGVzdC5lbWl0KCdlcnJvcicsIGVyKTtcbiAgfVxuICAvLyBUaGlzIGlzIGEgYnJ1dGFsbHkgdWdseSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyXG4gIC8vIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnkgdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuXG4gIGlmICghZGVzdC5fZXZlbnRzIHx8ICFkZXN0Ll9ldmVudHMuZXJyb3IpXG4gICAgZGVzdC5vbignZXJyb3InLCBvbmVycm9yKTtcbiAgZWxzZSBpZiAoaXNBcnJheShkZXN0Ll9ldmVudHMuZXJyb3IpKVxuICAgIGRlc3QuX2V2ZW50cy5lcnJvci51bnNoaWZ0KG9uZXJyb3IpO1xuICBlbHNlXG4gICAgZGVzdC5fZXZlbnRzLmVycm9yID0gW29uZXJyb3IsIGRlc3QuX2V2ZW50cy5lcnJvcl07XG5cblxuXG4gIC8vIEJvdGggY2xvc2UgYW5kIGZpbmlzaCBzaG91bGQgdHJpZ2dlciB1bnBpcGUsIGJ1dCBvbmx5IG9uY2UuXG4gIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTtcbiAgZnVuY3Rpb24gb25maW5pc2goKSB7XG4gICAgZGVidWcoJ29uZmluaXNoJyk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcbiAgICB1bnBpcGUoKTtcbiAgfVxuICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblxuICBmdW5jdGlvbiB1bnBpcGUoKSB7XG4gICAgZGVidWcoJ3VucGlwZScpO1xuICAgIHNyYy51bnBpcGUoZGVzdCk7XG4gIH1cblxuICAvLyB0ZWxsIHRoZSBkZXN0IHRoYXQgaXQncyBiZWluZyBwaXBlZCB0b1xuICBkZXN0LmVtaXQoJ3BpcGUnLCBzcmMpO1xuXG4gIC8vIHN0YXJ0IHRoZSBmbG93IGlmIGl0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgYWxyZWFkeS5cbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7XG4gICAgc3JjLnJlc3VtZSgpO1xuICB9XG5cbiAgcmV0dXJuIGRlc3Q7XG59O1xuXG5mdW5jdGlvbiBwaXBlT25EcmFpbihzcmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTtcbiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbilcbiAgICAgIHN0YXRlLmF3YWl0RHJhaW4tLTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRS5saXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkge1xuICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG4gICAgICBmbG93KHNyYyk7XG4gICAgfVxuICB9O1xufVxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS51bnBpcGUgPSBmdW5jdGlvbihkZXN0KSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMClcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBqdXN0IG9uZSBkZXN0aW5hdGlvbi4gIG1vc3QgY29tbW9uIGNhc2UuXG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSB7XG4gICAgLy8gcGFzc2VkIGluIG9uZSwgYnV0IGl0J3Mgbm90IHRoZSByaWdodCBvbmUuXG4gICAgaWYgKGRlc3QgJiYgZGVzdCAhPT0gc3RhdGUucGlwZXMpXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmICghZGVzdClcbiAgICAgIGRlc3QgPSBzdGF0ZS5waXBlcztcblxuICAgIC8vIGdvdCBhIG1hdGNoLlxuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG4gICAgaWYgKGRlc3QpXG4gICAgICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gc2xvdyBjYXNlLiBtdWx0aXBsZSBwaXBlIGRlc3RpbmF0aW9ucy5cblxuICBpZiAoIWRlc3QpIHtcbiAgICAvLyByZW1vdmUgYWxsLlxuICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzO1xuICAgIHZhciBsZW4gPSBzdGF0ZS5waXBlc0NvdW50O1xuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgZGVzdHNbaV0uZW1pdCgndW5waXBlJywgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLlxuICB2YXIgaSA9IGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpO1xuICBpZiAoaSA9PT0gLTEpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgc3RhdGUucGlwZXMuc3BsaWNlKGksIDEpO1xuICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKVxuICAgIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07XG5cbiAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcbi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5SZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldiwgZm4pIHtcbiAgdmFyIHJlcyA9IFN0cmVhbS5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldiwgZm4pO1xuXG4gIC8vIElmIGxpc3RlbmluZyB0byBkYXRhLCBhbmQgaXQgaGFzIG5vdCBleHBsaWNpdGx5IGJlZW4gcGF1c2VkLFxuICAvLyB0aGVuIGNhbGwgcmVzdW1lIHRvIHN0YXJ0IHRoZSBmbG93IG9mIGRhdGEgb24gdGhlIG5leHQgdGljay5cbiAgaWYgKGV2ID09PSAnZGF0YScgJiYgZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIHRoaXMucmVzdW1lKCk7XG4gIH1cblxuICBpZiAoZXYgPT09ICdyZWFkYWJsZScgJiYgdGhpcy5yZWFkYWJsZSkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKCFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykge1xuICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG4gICAgICAgICAgc2VsZi5yZWFkKDApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGVuZ3RoKSB7XG4gICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5SZWFkYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBSZWFkYWJsZS5wcm90b3R5cGUub247XG5cbi8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUElcbi8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpO1xuICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgIGlmICghc3RhdGUucmVhZGluZykge1xuICAgICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTtcbiAgICAgIHRoaXMucmVhZCgwKTtcbiAgICB9XG4gICAgcmVzdW1lKHRoaXMsIHN0YXRlKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIHJlc3VtZShzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7XG4gICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgcmVzdW1lXyhzdHJlYW0sIHN0YXRlKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0cmVhbS5lbWl0KCdyZXN1bWUnKTtcbiAgZmxvdyhzdHJlYW0pO1xuICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZylcbiAgICBzdHJlYW0ucmVhZCgwKTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwYXVzZScpO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcpIHtcbiAgICBkbyB7XG4gICAgICB2YXIgY2h1bmsgPSBzdHJlYW0ucmVhZCgpO1xuICAgIH0gd2hpbGUgKG51bGwgIT09IGNodW5rICYmIHN0YXRlLmZsb3dpbmcpO1xuICB9XG59XG5cbi8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuXG4vLyBUaGlzIGlzICpub3QqIHBhcnQgb2YgdGhlIHJlYWRhYmxlIHN0cmVhbSBpbnRlcmZhY2UuXG4vLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS5cblJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBwYXVzZWQgPSBmYWxzZTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7XG4gICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7XG4gICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aClcbiAgICAgICAgc2VsZi5wdXNoKGNodW5rKTtcbiAgICB9XG5cbiAgICBzZWxmLnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyKVxuICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcbiAgICBpZiAoIWNodW5rIHx8ICFzdGF0ZS5vYmplY3RNb2RlICYmICFjaHVuay5sZW5ndGgpXG4gICAgICByZXR1cm47XG5cbiAgICB2YXIgcmV0ID0gc2VsZi5wdXNoKGNodW5rKTtcbiAgICBpZiAoIXJldCkge1xuICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5wYXVzZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cbiAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHtcbiAgICBpZiAodXRpbC5pc0Z1bmN0aW9uKHN0cmVhbVtpXSkgJiYgdXRpbC5pc1VuZGVmaW5lZCh0aGlzW2ldKSkge1xuICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uKG1ldGhvZCkgeyByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7XG4gICAgICB9fShpKTtcbiAgICB9XG4gIH1cblxuICAvLyBwcm94eSBjZXJ0YWluIGltcG9ydGFudCBldmVudHMuXG4gIHZhciBldmVudHMgPSBbJ2Vycm9yJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knLCAncGF1c2UnLCAncmVzdW1lJ107XG4gIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbihldikge1xuICAgIHN0cmVhbS5vbihldiwgc2VsZi5lbWl0LmJpbmQoc2VsZiwgZXYpKTtcbiAgfSk7XG5cbiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cbiAgc2VsZi5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBfcmVhZCcsIG4pO1xuICAgIGlmIChwYXVzZWQpIHtcbiAgICAgIHBhdXNlZCA9IGZhbHNlO1xuICAgICAgc3RyZWFtLnJlc3VtZSgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc2VsZjtcbn07XG5cblxuXG4vLyBleHBvc2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkuXG5SZWFkYWJsZS5fZnJvbUxpc3QgPSBmcm9tTGlzdDtcblxuLy8gUGx1Y2sgb2ZmIG4gYnl0ZXMgZnJvbSBhbiBhcnJheSBvZiBidWZmZXJzLlxuLy8gTGVuZ3RoIGlzIHRoZSBjb21iaW5lZCBsZW5ndGhzIG9mIGFsbCB0aGUgYnVmZmVycyBpbiB0aGUgbGlzdC5cbmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG4gIHZhciBsaXN0ID0gc3RhdGUuYnVmZmVyO1xuICB2YXIgbGVuZ3RoID0gc3RhdGUubGVuZ3RoO1xuICB2YXIgc3RyaW5nTW9kZSA9ICEhc3RhdGUuZGVjb2RlcjtcbiAgdmFyIG9iamVjdE1vZGUgPSAhIXN0YXRlLm9iamVjdE1vZGU7XG4gIHZhciByZXQ7XG5cbiAgLy8gbm90aGluZyBpbiB0aGUgbGlzdCwgZGVmaW5pdGVseSBlbXB0eS5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiBudWxsO1xuXG4gIGlmIChsZW5ndGggPT09IDApXG4gICAgcmV0ID0gbnVsbDtcbiAgZWxzZSBpZiAob2JqZWN0TW9kZSlcbiAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG4gIGVsc2UgaWYgKCFuIHx8IG4gPj0gbGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBhcnJheS5cbiAgICBpZiAoc3RyaW5nTW9kZSlcbiAgICAgIHJldCA9IGxpc3Quam9pbignJyk7XG4gICAgZWxzZVxuICAgICAgcmV0ID0gQnVmZmVyLmNvbmNhdChsaXN0LCBsZW5ndGgpO1xuICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyByZWFkIGp1c3Qgc29tZSBvZiBpdC5cbiAgICBpZiAobiA8IGxpc3RbMF0ubGVuZ3RoKSB7XG4gICAgICAvLyBqdXN0IHRha2UgYSBwYXJ0IG9mIHRoZSBmaXJzdCBsaXN0IGl0ZW0uXG4gICAgICAvLyBzbGljZSBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy5cbiAgICAgIHZhciBidWYgPSBsaXN0WzBdO1xuICAgICAgcmV0ID0gYnVmLnNsaWNlKDAsIG4pO1xuICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShuKTtcbiAgICB9IGVsc2UgaWYgKG4gPT09IGxpc3RbMF0ubGVuZ3RoKSB7XG4gICAgICAvLyBmaXJzdCBsaXN0IGlzIGEgcGVyZmVjdCBtYXRjaFxuICAgICAgcmV0ID0gbGlzdC5zaGlmdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb21wbGV4IGNhc2UuXG4gICAgICAvLyB3ZSBoYXZlIGVub3VnaCB0byBjb3ZlciBpdCwgYnV0IGl0IHNwYW5zIHBhc3QgdGhlIGZpcnN0IGJ1ZmZlci5cbiAgICAgIGlmIChzdHJpbmdNb2RlKVxuICAgICAgICByZXQgPSAnJztcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0ID0gbmV3IEJ1ZmZlcihuKTtcblxuICAgICAgdmFyIGMgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGwgJiYgYyA8IG47IGkrKykge1xuICAgICAgICB2YXIgYnVmID0gbGlzdFswXTtcbiAgICAgICAgdmFyIGNweSA9IE1hdGgubWluKG4gLSBjLCBidWYubGVuZ3RoKTtcblxuICAgICAgICBpZiAoc3RyaW5nTW9kZSlcbiAgICAgICAgICByZXQgKz0gYnVmLnNsaWNlKDAsIGNweSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBidWYuY29weShyZXQsIGMsIDAsIGNweSk7XG5cbiAgICAgICAgaWYgKGNweSA8IGJ1Zi5sZW5ndGgpXG4gICAgICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShjcHkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgbGlzdC5zaGlmdCgpO1xuXG4gICAgICAgIGMgKz0gY3B5O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG4gIGlmIChzdGF0ZS5sZW5ndGggPiAwKVxuICAgIHRocm93IG5ldyBFcnJvcignZW5kUmVhZGFibGUgY2FsbGVkIG9uIG5vbi1lbXB0eSBzdHJlYW0nKTtcblxuICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHtcbiAgICBzdGF0ZS5lbmRlZCA9IHRydWU7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgIC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LlxuICAgICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgc3RyZWFtLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgICAgIHN0cmVhbS5lbWl0KCdlbmQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JFYWNoICh4cywgZikge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGYoeHNbaV0sIGkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGV4T2YgKHhzLCB4KSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHhzW2ldID09PSB4KSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9yZWFkYWJsZS5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vfi9pc2FycmF5L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblxuZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuICB9XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9+L2NvcmUtdXRpbC1pcy9saWIvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9+L2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIGR1cGxleCBzdHJlYW0gaXMganVzdCBhIHN0cmVhbSB0aGF0IGlzIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLlxuLy8gU2luY2UgSlMgZG9lc24ndCBoYXZlIG11bHRpcGxlIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UsIHRoaXMgY2xhc3Ncbi8vIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFJlYWRhYmxlLCBhbmQgdGhlbiBwYXJhc2l0aWNhbGx5IGZyb21cbi8vIFdyaXRhYmxlLlxuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcbiAgcmV0dXJuIGtleXM7XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBSZWFkYWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV9yZWFkYWJsZScpO1xudmFyIFdyaXRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3dyaXRhYmxlJyk7XG5cbnV0aWwuaW5oZXJpdHMoRHVwbGV4LCBSZWFkYWJsZSk7XG5cbmZvckVhY2gob2JqZWN0S2V5cyhXcml0YWJsZS5wcm90b3R5cGUpLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgaWYgKCFEdXBsZXgucHJvdG90eXBlW21ldGhvZF0pXG4gICAgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG59KTtcblxuZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpXG4gICAgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7XG5cbiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSlcbiAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpXG4gICAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuXG4gIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpXG4gICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG5cbiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7XG59XG5cbi8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXJcbmZ1bmN0aW9uIG9uZW5kKCkge1xuICAvLyBpZiB3ZSBhbGxvdyBoYWxmLW9wZW4gc3RhdGUsIG9yIGlmIHRoZSB3cml0YWJsZSBzaWRlIGVuZGVkLFxuICAvLyB0aGVuIHdlJ3JlIG9rLlxuICBpZiAodGhpcy5hbGxvd0hhbGZPcGVuIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpXG4gICAgcmV0dXJuO1xuXG4gIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cbiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG4gIHByb2Nlc3MubmV4dFRpY2sodGhpcy5lbmQuYmluZCh0aGlzKSk7XG59XG5cbmZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZih4c1tpXSwgaSk7XG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGNiKSwgYW5kIGl0J2xsIGhhbmRsZSBhbGxcbi8vIHRoZSBkcmFpbiBldmVudCBlbWlzc2lvbiBhbmQgYnVmZmVyaW5nLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5Xcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTtcblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxudXRpbC5pbmhlcml0cyhXcml0YWJsZSwgU3RyZWFtKTtcblxuZnVuY3Rpb24gV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aGlzLmNodW5rID0gY2h1bms7XG4gIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgdGhpcy5jYWxsYmFjayA9IGNiO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCB3cml0ZSgpIHN0YXJ0cyByZXR1cm5pbmcgZmFsc2VcbiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyB0aGF0IHdlIGFsd2F5cyByZXR1cm4gZmFsc2UgaWZcbiAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKVxuICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuICB2YXIgZGVmYXVsdEh3bSA9IG9wdGlvbnMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtO1xuXG4gIC8vIG9iamVjdCBzdHJlYW0gZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGlzIHN0cmVhbVxuICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuXG4gIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXG4gIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpXG4gICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+fnRoaXMuaGlnaFdhdGVyTWFyaztcblxuICB0aGlzLm5lZWREcmFpbiA9IGZhbHNlO1xuICAvLyBhdCB0aGUgc3RhcnQgb2YgY2FsbGluZyBlbmQoKVxuICB0aGlzLmVuZGluZyA9IGZhbHNlO1xuICAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkXG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkXG4gIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcblxuICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT9cbiAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nXG4gIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuXG4gIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7XG4gIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTtcblxuICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JztcblxuICAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudFxuICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nXG4gIC8vIHNvY2tldCBvciBmaWxlLlxuICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS5cbiAgdGhpcy53cml0aW5nID0gZmFsc2U7XG5cbiAgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbFxuICB0aGlzLmNvcmtlZCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG4gIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG4gIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG4gIHRoaXMuc3luYyA9IHRydWU7XG5cbiAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaFxuICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndFxuICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi5cbiAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKVxuICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbihlcikge1xuICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7XG4gIH07XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQgdGhlIHVzZXIgc3VwcGxpZXMgdG8gd3JpdGUoY2h1bmssZW5jb2RpbmcsY2IpXG4gIHRoaXMud3JpdGVjYiA9IG51bGw7XG5cbiAgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLlxuICB0aGlzLndyaXRlbGVuID0gMDtcblxuICB0aGlzLmJ1ZmZlciA9IFtdO1xuXG4gIC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzXG4gIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZFxuICB0aGlzLnBlbmRpbmdjYiA9IDA7XG5cbiAgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNic1xuICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtc1xuICB0aGlzLnByZWZpbmlzaGVkID0gZmFsc2U7XG5cbiAgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW5cbiAgdGhpcy5lcnJvckVtaXR0ZWQgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdGhvdWdoIHRoZXkncmUgbm90XG4gIC8vIGluc3RhbmNlb2YgV3JpdGFibGUsIHRoZXkncmUgaW5zdGFuY2VvZiBSZWFkYWJsZS5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdyaXRhYmxlKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKVxuICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeS5cbiAgdGhpcy53cml0YWJsZSA9IHRydWU7XG5cbiAgU3RyZWFtLmNhbGwodGhpcyk7XG59XG5cbi8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy5cbldyaXRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLiBOb3QgcmVhZGFibGUuJykpO1xufTtcblxuXG5mdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG4gIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7XG4gIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiXG4gIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICBjYihlcik7XG4gIH0pO1xufVxuXG4vLyBJZiB3ZSBnZXQgc29tZXRoaW5nIHRoYXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZCxcbi8vIGFuZCB3ZSdyZSBub3QgaW4gb2JqZWN0TW9kZSwgdGhlbiB0aGF0J3MgYW4gZXJyb3IuXG4vLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGVcbi8vIHdhdGVybWFya3MgZGV0ZXJtaW5lIGhvdyBtYW55IG9iamVjdHMgdG8ga2VlcCBpbiB0aGUgYnVmZmVyLCByYXRoZXIgdGhhblxuLy8gaG93IG1hbnkgYnl0ZXMgb3IgY2hhcmFjdGVycy5cbmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7XG4gIHZhciB2YWxpZCA9IHRydWU7XG4gIGlmICghdXRpbC5pc0J1ZmZlcihjaHVuaykgJiZcbiAgICAgICF1dGlsLmlzU3RyaW5nKGNodW5rKSAmJlxuICAgICAgIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspICYmXG4gICAgICAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIHZhciBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgIGNiKGVyKTtcbiAgICB9KTtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuICB2YXIgcmV0ID0gZmFsc2U7XG5cbiAgaWYgKHV0aWwuaXNGdW5jdGlvbihlbmNvZGluZykpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmICh1dGlsLmlzQnVmZmVyKGNodW5rKSlcbiAgICBlbmNvZGluZyA9ICdidWZmZXInO1xuICBlbHNlIGlmICghZW5jb2RpbmcpXG4gICAgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cbiAgaWYgKCF1dGlsLmlzRnVuY3Rpb24oY2IpKVxuICAgIGNiID0gZnVuY3Rpb24oKSB7fTtcblxuICBpZiAoc3RhdGUuZW5kZWQpXG4gICAgd3JpdGVBZnRlckVuZCh0aGlzLCBzdGF0ZSwgY2IpO1xuICBlbHNlIGlmICh2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBzdGF0ZS5jb3JrZWQrKztcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkLS07XG5cbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiZcbiAgICAgICAgIXN0YXRlLmNvcmtlZCAmJlxuICAgICAgICAhc3RhdGUuZmluaXNoZWQgJiZcbiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiZcbiAgICAgICAgc3RhdGUuYnVmZmVyLmxlbmd0aClcbiAgICAgIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykge1xuICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiZcbiAgICAgIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmXG4gICAgICB1dGlsLmlzU3RyaW5nKGNodW5rKSkge1xuICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpO1xuICB9XG4gIHJldHVybiBjaHVuaztcbn1cblxuLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG4vLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cbmZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpO1xuICBpZiAodXRpbC5pc0J1ZmZlcihjaHVuaykpXG4gICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXG4gIHN0YXRlLmxlbmd0aCArPSBsZW47XG5cbiAgdmFyIHJldCA9IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLlxuICBpZiAoIXJldClcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlO1xuXG4gIGlmIChzdGF0ZS53cml0aW5nIHx8IHN0YXRlLmNvcmtlZClcbiAgICBzdGF0ZS5idWZmZXIucHVzaChuZXcgV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikpO1xuICBlbHNlXG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcblxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHN0YXRlLndyaXRlbGVuID0gbGVuO1xuICBzdGF0ZS53cml0ZWNiID0gY2I7XG4gIHN0YXRlLndyaXRpbmcgPSB0cnVlO1xuICBzdGF0ZS5zeW5jID0gdHJ1ZTtcbiAgaWYgKHdyaXRldilcbiAgICBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7XG4gIGVsc2VcbiAgICBzdHJlYW0uX3dyaXRlKGNodW5rLCBlbmNvZGluZywgc3RhdGUub253cml0ZSk7XG4gIHN0YXRlLnN5bmMgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikge1xuICBpZiAoc3luYylcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgICBjYihlcik7XG4gICAgfSk7XG4gIGVsc2Uge1xuICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuICAgIGNiKGVyKTtcbiAgfVxuXG4gIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKVxuICAgIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpO1xuICBlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cbiAgICBpZiAoIWZpbmlzaGVkICYmXG4gICAgICAgICFzdGF0ZS5jb3JrZWQgJiZcbiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiZcbiAgICAgICAgc3RhdGUuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKSB7XG4gIGlmICghZmluaXNoZWQpXG4gICAgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpO1xuICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgY2IoKTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG59XG5cbi8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0XG4vLyBlbWl0ICdkcmFpbicgYmVmb3JlIHRoZSB3cml0ZSgpIGNvbnN1bWVyIGdldHMgdGhlICdmYWxzZScgcmV0dXJuXG4vLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLlxuZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcbiAgfVxufVxuXG5cbi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuXG4gIGlmIChzdHJlYW0uX3dyaXRldiAmJiBzdGF0ZS5idWZmZXIubGVuZ3RoID4gMSkge1xuICAgIC8vIEZhc3QgY2FzZSwgd3JpdGUgZXZlcnl0aGluZyB1c2luZyBfd3JpdGV2KClcbiAgICB2YXIgY2JzID0gW107XG4gICAgZm9yICh2YXIgYyA9IDA7IGMgPCBzdGF0ZS5idWZmZXIubGVuZ3RoOyBjKyspXG4gICAgICBjYnMucHVzaChzdGF0ZS5idWZmZXJbY10uY2FsbGJhY2spO1xuXG4gICAgLy8gY291bnQgdGhlIG9uZSB3ZSBhcmUgYWRkaW5nLCBhcyB3ZWxsLlxuICAgIC8vIFRPRE8oaXNhYWNzKSBjbGVhbiB0aGlzIHVwXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmJ1ZmZlciwgJycsIGZ1bmN0aW9uKGVycikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgICAgIGNic1tpXShlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgYnVmZmVyXG4gICAgc3RhdGUuYnVmZmVyID0gW107XG4gIH0gZWxzZSB7XG4gICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZVxuICAgIGZvciAodmFyIGMgPSAwOyBjIDwgc3RhdGUuYnVmZmVyLmxlbmd0aDsgYysrKSB7XG4gICAgICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJbY107XG4gICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuaztcbiAgICAgIHZhciBlbmNvZGluZyA9IGVudHJ5LmVuY29kaW5nO1xuICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cbiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG5cbiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuXG4gICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLlxuICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseVxuICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBjKys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjIDwgc3RhdGUuYnVmZmVyLmxlbmd0aClcbiAgICAgIHN0YXRlLmJ1ZmZlciA9IHN0YXRlLmJ1ZmZlci5zbGljZShjKTtcbiAgICBlbHNlXG4gICAgICBzdGF0ZS5idWZmZXIubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7XG5cbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDtcblxuV3JpdGFibGUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAodXRpbC5pc0Z1bmN0aW9uKGNodW5rKSkge1xuICAgIGNiID0gY2h1bms7XG4gICAgY2h1bmsgPSBudWxsO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfSBlbHNlIGlmICh1dGlsLmlzRnVuY3Rpb24oZW5jb2RpbmcpKSB7XG4gICAgY2IgPSBlbmNvZGluZztcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH1cblxuICBpZiAoIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspKVxuICAgIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblxuICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkID0gMTtcbiAgICB0aGlzLnVuY29yaygpO1xuICB9XG5cbiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpXG4gICAgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTtcbn07XG5cblxuZnVuY3Rpb24gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIHJldHVybiAoc3RhdGUuZW5kaW5nICYmXG4gICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgIXN0YXRlLmZpbmlzaGVkICYmXG4gICAgICAgICAgIXN0YXRlLndyaXRpbmcpO1xufVxuXG5mdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnByZWZpbmlzaGVkKSB7XG4gICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKTtcbiAgaWYgKG5lZWQpIHtcbiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7XG4gICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7XG4gICAgfSBlbHNlXG4gICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIG5lZWQ7XG59XG5cbmZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG4gIHN0YXRlLmVuZGluZyA9IHRydWU7XG4gIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICBpZiAoY2IpIHtcbiAgICBpZiAoc3RhdGUuZmluaXNoZWQpXG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGNiKTtcbiAgICBlbHNlXG4gICAgICBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpO1xuICB9XG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcblxudmFyIGlzQnVmZmVyRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZ1xuICB8fCBmdW5jdGlvbihlbmNvZGluZykge1xuICAgICAgIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgY2FzZSAnaGV4JzogY2FzZSAndXRmOCc6IGNhc2UgJ3V0Zi04JzogY2FzZSAnYXNjaWknOiBjYXNlICdiaW5hcnknOiBjYXNlICdiYXNlNjQnOiBjYXNlICd1Y3MyJzogY2FzZSAndWNzLTInOiBjYXNlICd1dGYxNmxlJzogY2FzZSAndXRmLTE2bGUnOiBjYXNlICdyYXcnOiByZXR1cm4gdHJ1ZTtcbiAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcbiAgICAgICB9XG4gICAgIH1cblxuXG5mdW5jdGlvbiBhc3NlcnRFbmNvZGluZyhlbmNvZGluZykge1xuICBpZiAoZW5jb2RpbmcgJiYgIWlzQnVmZmVyRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICB9XG59XG5cbi8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2Zcbi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZVxuLy8gY2hhcmFjdGVycy4gQ0VTVS04IGlzIGhhbmRsZWQgYXMgcGFydCBvZiB0aGUgVVRGLTggZW5jb2RpbmcuXG4vL1xuLy8gQFRPRE8gSGFuZGxpbmcgYWxsIGVuY29kaW5ncyBpbnNpZGUgYSBzaW5nbGUgb2JqZWN0IG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0XG4vLyB0byByZWFzb24gYWJvdXQgdGhpcyBjb2RlLCBzbyBpdCBzaG91bGQgYmUgc3BsaXQgdXAgaW4gdGhlIGZ1dHVyZS5cbi8vIEBUT0RPIFRoZXJlIHNob3VsZCBiZSBhIHV0Zjgtc3RyaWN0IGVuY29kaW5nIHRoYXQgcmVqZWN0cyBpbnZhbGlkIFVURi04IGNvZGVcbi8vIHBvaW50cyBhcyB1c2VkIGJ5IENFU1UtOC5cbnZhciBTdHJpbmdEZWNvZGVyID0gZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gZnVuY3Rpb24oZW5jb2RpbmcpIHtcbiAgdGhpcy5lbmNvZGluZyA9IChlbmNvZGluZyB8fCAndXRmOCcpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sICcnKTtcbiAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpO1xuICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcbiAgICBjYXNlICd1dGY4JzpcbiAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlc1xuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgLy8gVVRGLTE2IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAyLWJ5dGVzXG4gICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyO1xuICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLlxuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEVub3VnaCBzcGFjZSB0byBzdG9yZSBhbGwgYnl0ZXMgb2YgYSBzaW5nbGUgY2hhcmFjdGVyLiBVVEYtOCBuZWVkcyA0XG4gIC8vIGJ5dGVzLCBidXQgQ0VTVS04IG1heSByZXF1aXJlIHVwIHRvIDYgKDMgYnl0ZXMgcGVyIHN1cnJvZ2F0ZSkuXG4gIHRoaXMuY2hhckJ1ZmZlciA9IG5ldyBCdWZmZXIoNik7XG4gIC8vIE51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci5cbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSAwO1xuICAvLyBOdW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuXG4gIHRoaXMuY2hhckxlbmd0aCA9IDA7XG59O1xuXG5cbi8vIHdyaXRlIGRlY29kZXMgdGhlIGdpdmVuIGJ1ZmZlciBhbmQgcmV0dXJucyBpdCBhcyBKUyBzdHJpbmcgdGhhdCBpc1xuLy8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsXG4vLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZVxuLy8gcmV0dXJuZWQgd2hlbiBjYWxsaW5nIHdyaXRlIGFnYWluIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcy5cbi8vXG4vLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZ1xuLy8gY3VycmVudGx5IHdvcmtzLCBidXQgY29udmVydGluZyBhIFN0cmluZyB0byBhIEJ1ZmZlciAodmlhIGBuZXcgQnVmZmVyYCwgb3Jcbi8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlXG4vLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIGNoYXJTdHIgPSAnJztcbiAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXJcbiAgd2hpbGUgKHRoaXMuY2hhckxlbmd0aCkge1xuICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXJcbiAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID9cbiAgICAgICAgdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQgOlxuICAgICAgICBidWZmZXIubGVuZ3RoO1xuXG4gICAgLy8gYWRkIHRoZSBuZXcgYnl0ZXMgdG8gdGhlIGNoYXIgYnVmZmVyXG4gICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCB0aGlzLmNoYXJSZWNlaXZlZCwgMCwgYXZhaWxhYmxlKTtcbiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBhdmFpbGFibGU7XG5cbiAgICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQgPCB0aGlzLmNoYXJMZW5ndGgpIHtcbiAgICAgIC8vIHN0aWxsIG5vdCBlbm91Z2ggY2hhcnMgaW4gdGhpcyBidWZmZXI/IHdhaXQgZm9yIG1vcmUgLi4uXG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGJ5dGVzIGJlbG9uZ2luZyB0byB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZnJvbSB0aGUgYnVmZmVyXG4gICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7XG5cbiAgICAvLyBnZXQgdGhlIGNoYXJhY3RlciB0aGF0IHdhcyBzcGxpdFxuICAgIGNoYXJTdHIgPSB0aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCwgdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcblxuICAgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXJcbiAgICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoY2hhclN0ci5sZW5ndGggLSAxKTtcbiAgICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoICs9IHRoaXMuc3Vycm9nYXRlU2l6ZTtcbiAgICAgIGNoYXJTdHIgPSAnJztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB0aGlzLmNoYXJSZWNlaXZlZCA9IHRoaXMuY2hhckxlbmd0aCA9IDA7XG5cbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSBieXRlcyBpbiB0aGlzIGJ1ZmZlciwganVzdCBlbWl0IG91ciBjaGFyXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBjaGFyU3RyO1xuICAgIH1cbiAgICBicmVhaztcbiAgfVxuXG4gIC8vIGRldGVybWluZSBhbmQgc2V0IGNoYXJMZW5ndGggLyBjaGFyUmVjZWl2ZWRcbiAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpO1xuXG4gIHZhciBlbmQgPSBidWZmZXIubGVuZ3RoO1xuICBpZiAodGhpcy5jaGFyTGVuZ3RoKSB7XG4gICAgLy8gYnVmZmVyIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlciBieXRlcyB3ZSBnb3RcbiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIGJ1ZmZlci5sZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCwgZW5kKTtcbiAgICBlbmQgLT0gdGhpcy5jaGFyUmVjZWl2ZWQ7XG4gIH1cblxuICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpO1xuXG4gIHZhciBlbmQgPSBjaGFyU3RyLmxlbmd0aCAtIDE7XG4gIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChlbmQpO1xuICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyXG4gIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7XG4gICAgdmFyIHNpemUgPSB0aGlzLnN1cnJvZ2F0ZVNpemU7XG4gICAgdGhpcy5jaGFyTGVuZ3RoICs9IHNpemU7XG4gICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gc2l6ZTtcbiAgICB0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHNpemUsIDAsIHNpemUpO1xuICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgMCwgc2l6ZSk7XG4gICAgcmV0dXJuIGNoYXJTdHIuc3Vic3RyaW5nKDAsIGVuZCk7XG4gIH1cblxuICAvLyBvciBqdXN0IGVtaXQgdGhlIGNoYXJTdHJcbiAgcmV0dXJuIGNoYXJTdHI7XG59O1xuXG4vLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0XG4vLyB0aGUgZW5kIG9mIHRoZSBnaXZlbiBidWZmZXIuIElmIHNvLCBpdCBzZXRzIHRoaXMuY2hhckxlbmd0aCB0byB0aGUgYnl0ZVxuLy8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzXG4vLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlclxuICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7XG5cbiAgLy8gRmlndXJlIG91dCBpZiBvbmUgb2YgdGhlIGxhc3QgaSBieXRlcyBvZiBvdXIgYnVmZmVyIGFubm91bmNlcyBhblxuICAvLyBpbmNvbXBsZXRlIGNoYXIuXG4gIGZvciAoOyBpID4gMDsgaS0tKSB7XG4gICAgdmFyIGMgPSBidWZmZXJbYnVmZmVyLmxlbmd0aCAtIGldO1xuXG4gICAgLy8gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVRGLTgjRGVzY3JpcHRpb25cblxuICAgIC8vIDExMFhYWFhYXG4gICAgaWYgKGkgPT0gMSAmJiBjID4+IDUgPT0gMHgwNikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTBYWFhYXG4gICAgaWYgKGkgPD0gMiAmJiBjID4+IDQgPT0gMHgwRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMztcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTEwWFhYXG4gICAgaWYgKGkgPD0gMyAmJiBjID4+IDMgPT0gMHgxRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gNDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGk7XG59O1xuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIHJlcyA9ICcnO1xuICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpXG4gICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpO1xuXG4gIGlmICh0aGlzLmNoYXJSZWNlaXZlZCkge1xuICAgIHZhciBjciA9IHRoaXMuY2hhclJlY2VpdmVkO1xuICAgIHZhciBidWYgPSB0aGlzLmNoYXJCdWZmZXI7XG4gICAgdmFyIGVuYyA9IHRoaXMuZW5jb2Rpbmc7XG4gICAgcmVzICs9IGJ1Zi5zbGljZSgwLCBjcikudG9TdHJpbmcoZW5jKTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuXG5mdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikge1xuICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikge1xuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAyO1xuICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDIgOiAwO1xufVxuXG5mdW5jdGlvbiBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHtcbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMztcbiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAzIDogMDtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyaW5nX2RlY29kZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5cbi8vIGEgdHJhbnNmb3JtIHN0cmVhbSBpcyBhIHJlYWRhYmxlL3dyaXRhYmxlIHN0cmVhbSB3aGVyZSB5b3UgZG9cbi8vIHNvbWV0aGluZyB3aXRoIHRoZSBkYXRhLiAgU29tZXRpbWVzIGl0J3MgY2FsbGVkIGEgXCJmaWx0ZXJcIixcbi8vIGJ1dCB0aGF0J3Mgbm90IGEgZ3JlYXQgbmFtZSBmb3IgaXQsIHNpbmNlIHRoYXQgaW1wbGllcyBhIHRoaW5nIHdoZXJlXG4vLyBzb21lIGJpdHMgcGFzcyB0aHJvdWdoLCBhbmQgb3RoZXJzIGFyZSBzaW1wbHkgaWdub3JlZC4gIChUaGF0IHdvdWxkXG4vLyBiZSBhIHZhbGlkIGV4YW1wbGUgb2YgYSB0cmFuc2Zvcm0sIG9mIGNvdXJzZS4pXG4vL1xuLy8gV2hpbGUgdGhlIG91dHB1dCBpcyBjYXVzYWxseSByZWxhdGVkIHRvIHRoZSBpbnB1dCwgaXQncyBub3QgYVxuLy8gbmVjZXNzYXJpbHkgc3ltbWV0cmljIG9yIHN5bmNocm9ub3VzIHRyYW5zZm9ybWF0aW9uLiAgRm9yIGV4YW1wbGUsXG4vLyBhIHpsaWIgc3RyZWFtIG1pZ2h0IHRha2UgbXVsdGlwbGUgcGxhaW4tdGV4dCB3cml0ZXMoKSwgYW5kIHRoZW5cbi8vIGVtaXQgYSBzaW5nbGUgY29tcHJlc3NlZCBjaHVuayBzb21lIHRpbWUgaW4gdGhlIGZ1dHVyZS5cbi8vXG4vLyBIZXJlJ3MgaG93IHRoaXMgd29ya3M6XG4vL1xuLy8gVGhlIFRyYW5zZm9ybSBzdHJlYW0gaGFzIGFsbCB0aGUgYXNwZWN0cyBvZiB0aGUgcmVhZGFibGUgYW5kIHdyaXRhYmxlXG4vLyBzdHJlYW0gY2xhc3Nlcy4gIFdoZW4geW91IHdyaXRlKGNodW5rKSwgdGhhdCBjYWxscyBfd3JpdGUoY2h1bmssY2IpXG4vLyBpbnRlcm5hbGx5LCBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGVyZSdzIGEgbG90IG9mIHBlbmRpbmcgd3JpdGVzXG4vLyBidWZmZXJlZCB1cC4gIFdoZW4geW91IGNhbGwgcmVhZCgpLCB0aGF0IGNhbGxzIF9yZWFkKG4pIHVudGlsXG4vLyB0aGVyZSdzIGVub3VnaCBwZW5kaW5nIHJlYWRhYmxlIGRhdGEgYnVmZmVyZWQgdXAuXG4vL1xuLy8gSW4gYSB0cmFuc2Zvcm0gc3RyZWFtLCB0aGUgd3JpdHRlbiBkYXRhIGlzIHBsYWNlZCBpbiBhIGJ1ZmZlci4gIFdoZW5cbi8vIF9yZWFkKG4pIGlzIGNhbGxlZCwgaXQgdHJhbnNmb3JtcyB0aGUgcXVldWVkIHVwIGRhdGEsIGNhbGxpbmcgdGhlXG4vLyBidWZmZXJlZCBfd3JpdGUgY2IncyBhcyBpdCBjb25zdW1lcyBjaHVua3MuICBJZiBjb25zdW1pbmcgYSBzaW5nbGVcbi8vIHdyaXR0ZW4gY2h1bmsgd291bGQgcmVzdWx0IGluIG11bHRpcGxlIG91dHB1dCBjaHVua3MsIHRoZW4gdGhlIGZpcnN0XG4vLyBvdXRwdXR0ZWQgYml0IGNhbGxzIHRoZSByZWFkY2IsIGFuZCBzdWJzZXF1ZW50IGNodW5rcyBqdXN0IGdvIGludG9cbi8vIHRoZSByZWFkIGJ1ZmZlciwgYW5kIHdpbGwgY2F1c2UgaXQgdG8gZW1pdCAncmVhZGFibGUnIGlmIG5lY2Vzc2FyeS5cbi8vXG4vLyBUaGlzIHdheSwgYmFjay1wcmVzc3VyZSBpcyBhY3R1YWxseSBkZXRlcm1pbmVkIGJ5IHRoZSByZWFkaW5nIHNpZGUsXG4vLyBzaW5jZSBfcmVhZCBoYXMgdG8gYmUgY2FsbGVkIHRvIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgY2h1bmsuICBIb3dldmVyLFxuLy8gYSBwYXRob2xvZ2ljYWwgaW5mbGF0ZSB0eXBlIG9mIHRyYW5zZm9ybSBjYW4gY2F1c2UgZXhjZXNzaXZlIGJ1ZmZlcmluZ1xuLy8gaGVyZS4gIEZvciBleGFtcGxlLCBpbWFnaW5lIGEgc3RyZWFtIHdoZXJlIGV2ZXJ5IGJ5dGUgb2YgaW5wdXQgaXNcbi8vIGludGVycHJldGVkIGFzIGFuIGludGVnZXIgZnJvbSAwLTI1NSwgYW5kIHRoZW4gcmVzdWx0cyBpbiB0aGF0IG1hbnlcbi8vIGJ5dGVzIG9mIG91dHB1dC4gIFdyaXRpbmcgdGhlIDQgYnl0ZXMge2ZmLGZmLGZmLGZmfSB3b3VsZCByZXN1bHQgaW5cbi8vIDFrYiBvZiBkYXRhIGJlaW5nIG91dHB1dC4gIEluIHRoaXMgY2FzZSwgeW91IGNvdWxkIHdyaXRlIGEgdmVyeSBzbWFsbFxuLy8gYW1vdW50IG9mIGlucHV0LCBhbmQgZW5kIHVwIHdpdGggYSB2ZXJ5IGxhcmdlIGFtb3VudCBvZiBvdXRwdXQuICBJblxuLy8gc3VjaCBhIHBhdGhvbG9naWNhbCBpbmZsYXRpbmcgbWVjaGFuaXNtLCB0aGVyZSdkIGJlIG5vIHdheSB0byB0ZWxsXG4vLyB0aGUgc3lzdGVtIHRvIHN0b3AgZG9pbmcgdGhlIHRyYW5zZm9ybS4gIEEgc2luZ2xlIDRNQiB3cml0ZSBjb3VsZFxuLy8gY2F1c2UgdGhlIHN5c3RlbSB0byBydW4gb3V0IG9mIG1lbW9yeS5cbi8vXG4vLyBIb3dldmVyLCBldmVuIGluIHN1Y2ggYSBwYXRob2xvZ2ljYWwgY2FzZSwgb25seSBhIHNpbmdsZSB3cml0dGVuIGNodW5rXG4vLyB3b3VsZCBiZSBjb25zdW1lZCwgYW5kIHRoZW4gdGhlIHJlc3Qgd291bGQgd2FpdCAodW4tdHJhbnNmb3JtZWQpIHVudGlsXG4vLyB0aGUgcmVzdWx0cyBvZiB0aGUgcHJldmlvdXMgdHJhbnNmb3JtZWQgY2h1bmsgd2VyZSBjb25zdW1lZC5cblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cblxuZnVuY3Rpb24gVHJhbnNmb3JtU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIHRoaXMuYWZ0ZXJUcmFuc2Zvcm0gPSBmdW5jdGlvbihlciwgZGF0YSkge1xuICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTtcbiAgfTtcblxuICB0aGlzLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgdGhpcy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcbiAgdGhpcy53cml0ZWNodW5rID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkge1xuICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlO1xuICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblxuICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXG4gIGlmICghY2IpXG4gICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3MnKSk7XG5cbiAgdHMud3JpdGVjaHVuayA9IG51bGw7XG4gIHRzLndyaXRlY2IgPSBudWxsO1xuXG4gIGlmICghdXRpbC5pc051bGxPclVuZGVmaW5lZChkYXRhKSlcbiAgICBzdHJlYW0ucHVzaChkYXRhKTtcblxuICBpZiAoY2IpXG4gICAgY2IoZXIpO1xuXG4gIHZhciBycyA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgcnMucmVhZGluZyA9IGZhbHNlO1xuICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHtcbiAgICBzdHJlYW0uX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBUcmFuc2Zvcm0ob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSlcbiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblxuICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IG5ldyBUcmFuc2Zvcm1TdGF0ZShvcHRpb25zLCB0aGlzKTtcblxuICAvLyB3aGVuIHRoZSB3cml0YWJsZSBzaWRlIGZpbmlzaGVzLCB0aGVuIGZsdXNoIG91dCBhbnl0aGluZyByZW1haW5pbmcuXG4gIHZhciBzdHJlYW0gPSB0aGlzO1xuXG4gIC8vIHN0YXJ0IG91dCBhc2tpbmcgZm9yIGEgcmVhZGFibGUgZXZlbnQgb25jZSBkYXRhIGlzIHRyYW5zZm9ybWVkLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgLy8gd2UgaGF2ZSBpbXBsZW1lbnRlZCB0aGUgX3JlYWQgbWV0aG9kLCBhbmQgZG9uZSB0aGUgb3RoZXIgdGhpbmdzXG4gIC8vIHRoYXQgUmVhZGFibGUgd2FudHMgYmVmb3JlIHRoZSBmaXJzdCBfcmVhZCBjYWxsLCBzbyB1bnNldCB0aGVcbiAgLy8gc3luYyBndWFyZCBmbGFnLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmMgPSBmYWxzZTtcblxuICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uKCkge1xuICAgIGlmICh1dGlsLmlzRnVuY3Rpb24odGhpcy5fZmx1c2gpKVxuICAgICAgdGhpcy5fZmx1c2goZnVuY3Rpb24oZXIpIHtcbiAgICAgICAgZG9uZShzdHJlYW0sIGVyKTtcbiAgICAgIH0pO1xuICAgIGVsc2VcbiAgICAgIGRvbmUoc3RyZWFtKTtcbiAgfSk7XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZykge1xuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7XG4gIHJldHVybiBEdXBsZXgucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBjaHVuaywgZW5jb2RpbmcpO1xufTtcblxuLy8gVGhpcyBpcyB0aGUgcGFydCB3aGVyZSB5b3UgZG8gc3R1ZmYhXG4vLyBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uIGluIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG4vLyAnY2h1bmsnIGlzIGFuIGlucHV0IGNodW5rLlxuLy9cbi8vIENhbGwgYHB1c2gobmV3Q2h1bmspYCB0byBwYXNzIGFsb25nIHRyYW5zZm9ybWVkIG91dHB1dFxuLy8gdG8gdGhlIHJlYWRhYmxlIHNpZGUuICBZb3UgbWF5IGNhbGwgJ3B1c2gnIHplcm8gb3IgbW9yZSB0aW1lcy5cbi8vXG4vLyBDYWxsIGBjYihlcnIpYCB3aGVuIHlvdSBhcmUgZG9uZSB3aXRoIHRoaXMgY2h1bmsuICBJZiB5b3UgcGFzc1xuLy8gYW4gZXJyb3IsIHRoZW4gdGhhdCdsbCBwdXQgdGhlIGh1cnQgb24gdGhlIHdob2xlIG9wZXJhdGlvbi4gIElmIHlvdVxuLy8gbmV2ZXIgY2FsbCBjYigpLCB0aGVuIHlvdSdsbCBuZXZlciBnZXQgYW5vdGhlciBjaHVuay5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTtcbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcbiAgdHMud3JpdGVjYiA9IGNiO1xuICB0cy53cml0ZWNodW5rID0gY2h1bms7XG4gIHRzLndyaXRlZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgaWYgKCF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICAgIGlmICh0cy5uZWVkVHJhbnNmb3JtIHx8XG4gICAgICAgIHJzLm5lZWRSZWFkYWJsZSB8fFxuICAgICAgICBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKVxuICAgICAgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcbiAgfVxufTtcblxuLy8gRG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgYXJncyBhcmUgaGVyZS5cbi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuXG4vLyBUaGF0IHdlIGdvdCBoZXJlIG1lYW5zIHRoYXQgdGhlIHJlYWRhYmxlIHNpZGUgd2FudHMgbW9yZSBkYXRhLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG5cbiAgaWYgKCF1dGlsLmlzTnVsbCh0cy53cml0ZWNodW5rKSAmJiB0cy53cml0ZWNiICYmICF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB0cy50cmFuc2Zvcm1pbmcgPSB0cnVlO1xuICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpblxuICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LlxuICAgIHRzLm5lZWRUcmFuc2Zvcm0gPSB0cnVlO1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlcikge1xuICBpZiAoZXIpXG4gICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblxuICAvLyBpZiB0aGVyZSdzIG5vdGhpbmcgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhlbiB0aGF0IG1lYW5zXG4gIC8vIHRoYXQgbm90aGluZyBtb3JlIHdpbGwgZXZlciBiZSBwcm92aWRlZFxuICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG4gIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG5cbiAgaWYgKHdzLmxlbmd0aClcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpO1xuXG4gIGlmICh0cy50cmFuc2Zvcm1pbmcpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nJyk7XG5cbiAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uXG4vLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS5cbi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuXG5cbm1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7XG5cbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCcuL19zdHJlYW1fdHJhbnNmb3JtJyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTtcblxuZnVuY3Rpb24gUGFzc1Rocm91Z2gob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKVxuICAgIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cbiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cblBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjYihudWxsLCBjaHVuayk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vbGliL19zdHJlYW1fd3JpdGFibGUuanNcIilcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX2R1cGxleC5qc1wiKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qc1wiKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzXCIpXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIGV4dHNwcmludGYuanM6IGV4dGVuZGVkIFBPU0lYLXN0eWxlIHNwcmludGZcbiAqL1xuXG52YXIgbW9kX2Fzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpO1xudmFyIG1vZF91dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuXG4vKlxuICogUHVibGljIGludGVyZmFjZVxuICovXG5leHBvcnRzLnNwcmludGYgPSBqc1NwcmludGY7XG5leHBvcnRzLnByaW50ZiA9IGpzUHJpbnRmO1xuZXhwb3J0cy5mcHJpbnRmID0ganNGcHJpbnRmO1xuXG4vKlxuICogU3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHNbbl1wcmludGYoM2MpLiAgV2UgbWFrZSBhIGJlc3QgZWZmb3J0IHRvIHRocm93IGFuXG4gKiBleGNlcHRpb24gd2hlbiBnaXZlbiBhIGZvcm1hdCBzdHJpbmcgd2UgZG9uJ3QgdW5kZXJzdGFuZCwgcmF0aGVyIHRoYW5cbiAqIGlnbm9yaW5nIGl0LCBzbyB0aGF0IHdlIHdvbid0IGJyZWFrIGV4aXN0aW5nIHByb2dyYW1zIGlmL3doZW4gd2UgZ28gaW1wbGVtZW50XG4gKiB0aGUgcmVzdCBvZiB0aGlzLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gY3VycmVudGx5IHN1cHBvcnRzIHNwZWNpZnlpbmdcbiAqXHQtIGZpZWxkIGFsaWdubWVudCAoJy0nIGZsYWcpLFxuICogXHQtIHplcm8tcGFkICgnMCcgZmxhZylcbiAqXHQtIGFsd2F5cyBzaG93IG51bWVyaWMgc2lnbiAoJysnIGZsYWcpLFxuICpcdC0gZmllbGQgd2lkdGhcbiAqXHQtIGNvbnZlcnNpb25zIGZvciBzdHJpbmdzLCBkZWNpbWFsIGludGVnZXJzLCBhbmQgZmxvYXRzIChudW1iZXJzKS5cbiAqXHQtIGFyZ3VtZW50IHNpemUgc3BlY2lmaWVycy4gIFRoZXNlIGFyZSBhbGwgYWNjZXB0ZWQgYnV0IGlnbm9yZWQsIHNpbmNlXG4gKlx0ICBKYXZhc2NyaXB0IGhhcyBubyBub3Rpb24gb2YgdGhlIHBoeXNpY2FsIHNpemUgb2YgYW4gYXJndW1lbnQuXG4gKlxuICogRXZlcnl0aGluZyBlbHNlIGlzIGN1cnJlbnRseSB1bnN1cHBvcnRlZCwgbW9zdCBub3RhYmx5IHByZWNpc2lvbiwgdW5zaWduZWRcbiAqIG51bWJlcnMsIG5vbi1kZWNpbWFsIG51bWJlcnMsIGFuZCBjaGFyYWN0ZXJzLlxuICovXG5mdW5jdGlvbiBqc1NwcmludGYoZm10KVxue1xuXHR2YXIgcmVnZXggPSBbXG5cdCAgICAnKFteJV0qKScsXHRcdFx0XHQvKiBub3JtYWwgdGV4dCAqL1xuXHQgICAgJyUnLFx0XHRcdFx0Lyogc3RhcnQgb2YgZm9ybWF0ICovXG5cdCAgICAnKFtcXCdcXFxcLSsgIzBdKj8pJyxcdFx0XHQvKiBmbGFncyAob3B0aW9uYWwpICovXG5cdCAgICAnKFsxLTldXFxcXGQqKT8nLFx0XHRcdC8qIHdpZHRoIChvcHRpb25hbCkgKi9cblx0ICAgICcoXFxcXC4oWzEtOV1cXFxcZCopKT8nLFx0XHQvKiBwcmVjaXNpb24gKG9wdGlvbmFsKSAqL1xuXHQgICAgJ1tsaGp6dExdKj8nLFx0XHRcdC8qIGxlbmd0aCBtb2RzIChpZ25vcmVkKSAqL1xuXHQgICAgJyhbZGlvdXhYZkZlRWdHYUFjQ3NTcCVqcl0pJ1x0LyogY29udmVyc2lvbiAqL1xuXHRdLmpvaW4oJycpO1xuXG5cdHZhciByZSA9IG5ldyBSZWdFeHAocmVnZXgpO1xuXHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdHZhciBmbGFncywgd2lkdGgsIHByZWNpc2lvbiwgY29udmVyc2lvbjtcblx0dmFyIGxlZnQsIHBhZCwgc2lnbiwgYXJnLCBtYXRjaDtcblx0dmFyIHJldCA9ICcnO1xuXHR2YXIgYXJnbiA9IDE7XG5cblx0bW9kX2Fzc2VydC5lcXVhbCgnc3RyaW5nJywgdHlwZW9mIChmbXQpKTtcblxuXHR3aGlsZSAoKG1hdGNoID0gcmUuZXhlYyhmbXQpKSAhPT0gbnVsbCkge1xuXHRcdHJldCArPSBtYXRjaFsxXTtcblx0XHRmbXQgPSBmbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG5cblx0XHRmbGFncyA9IG1hdGNoWzJdIHx8ICcnO1xuXHRcdHdpZHRoID0gbWF0Y2hbM10gfHwgMDtcblx0XHRwcmVjaXNpb24gPSBtYXRjaFs0XSB8fCAnJztcblx0XHRjb252ZXJzaW9uID0gbWF0Y2hbNl07XG5cdFx0bGVmdCA9IGZhbHNlO1xuXHRcdHNpZ24gPSBmYWxzZTtcblx0XHRwYWQgPSAnICc7XG5cblx0XHRpZiAoY29udmVyc2lvbiA9PSAnJScpIHtcblx0XHRcdHJldCArPSAnJSc7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRpZiAoYXJncy5sZW5ndGggPT09IDApXG5cdFx0XHR0aHJvdyAobmV3IEVycm9yKCd0b28gZmV3IGFyZ3MgdG8gc3ByaW50ZicpKTtcblxuXHRcdGFyZyA9IGFyZ3Muc2hpZnQoKTtcblx0XHRhcmduKys7XG5cblx0XHRpZiAoZmxhZ3MubWF0Y2goL1tcXCcgI10vKSlcblx0XHRcdHRocm93IChuZXcgRXJyb3IoXG5cdFx0XHQgICAgJ3Vuc3VwcG9ydGVkIGZsYWdzOiAnICsgZmxhZ3MpKTtcblxuXHRcdGlmIChwcmVjaXNpb24ubGVuZ3RoID4gMClcblx0XHRcdHRocm93IChuZXcgRXJyb3IoXG5cdFx0XHQgICAgJ25vbi16ZXJvIHByZWNpc2lvbiBub3Qgc3VwcG9ydGVkJykpO1xuXG5cdFx0aWYgKGZsYWdzLm1hdGNoKC8tLykpXG5cdFx0XHRsZWZ0ID0gdHJ1ZTtcblxuXHRcdGlmIChmbGFncy5tYXRjaCgvMC8pKVxuXHRcdFx0cGFkID0gJzAnO1xuXG5cdFx0aWYgKGZsYWdzLm1hdGNoKC9cXCsvKSlcblx0XHRcdHNpZ24gPSB0cnVlO1xuXG5cdFx0c3dpdGNoIChjb252ZXJzaW9uKSB7XG5cdFx0Y2FzZSAncyc6XG5cdFx0XHRpZiAoYXJnID09PSB1bmRlZmluZWQgfHwgYXJnID09PSBudWxsKVxuXHRcdFx0XHR0aHJvdyAobmV3IEVycm9yKCdhcmd1bWVudCAnICsgYXJnbiArXG5cdFx0XHRcdCAgICAnOiBhdHRlbXB0ZWQgdG8gcHJpbnQgdW5kZWZpbmVkIG9yIG51bGwgJyArXG5cdFx0XHRcdCAgICAnYXMgYSBzdHJpbmcnKSk7XG5cdFx0XHRyZXQgKz0gZG9QYWQocGFkLCB3aWR0aCwgbGVmdCwgYXJnLnRvU3RyaW5nKCkpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdkJzpcblx0XHRcdGFyZyA9IE1hdGguZmxvb3IoYXJnKTtcblx0XHRcdC8qanNsOmZhbGx0aHJ1Ki9cblx0XHRjYXNlICdmJzpcblx0XHRcdHNpZ24gPSBzaWduICYmIGFyZyA+IDAgPyAnKycgOiAnJztcblx0XHRcdHJldCArPSBzaWduICsgZG9QYWQocGFkLCB3aWR0aCwgbGVmdCxcblx0XHRcdCAgICBhcmcudG9TdHJpbmcoKSk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ3gnOlxuXHRcdFx0cmV0ICs9IGRvUGFkKHBhZCwgd2lkdGgsIGxlZnQsIGFyZy50b1N0cmluZygxNikpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdqJzogLyogbm9uLXN0YW5kYXJkICovXG5cdFx0XHRpZiAod2lkdGggPT09IDApXG5cdFx0XHRcdHdpZHRoID0gMTA7XG5cdFx0XHRyZXQgKz0gbW9kX3V0aWwuaW5zcGVjdChhcmcsIGZhbHNlLCB3aWR0aCk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ3InOiAvKiBub24tc3RhbmRhcmQgKi9cblx0XHRcdHJldCArPSBkdW1wRXhjZXB0aW9uKGFyZyk7XG5cdFx0XHRicmVhaztcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyAobmV3IEVycm9yKCd1bnN1cHBvcnRlZCBjb252ZXJzaW9uOiAnICtcblx0XHRcdCAgICBjb252ZXJzaW9uKSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0ICs9IGZtdDtcblx0cmV0dXJuIChyZXQpO1xufVxuXG5mdW5jdGlvbiBqc1ByaW50ZigpIHtcblx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRhcmdzLnVuc2hpZnQocHJvY2Vzcy5zdGRvdXQpO1xuXHRqc0ZwcmludGYuYXBwbHkobnVsbCwgYXJncyk7XG59XG5cbmZ1bmN0aW9uIGpzRnByaW50ZihzdHJlYW0pIHtcblx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRyZXR1cm4gKHN0cmVhbS53cml0ZShqc1NwcmludGYuYXBwbHkodGhpcywgYXJncykpKTtcbn1cblxuZnVuY3Rpb24gZG9QYWQoY2hyLCB3aWR0aCwgbGVmdCwgc3RyKVxue1xuXHR2YXIgcmV0ID0gc3RyO1xuXG5cdHdoaWxlIChyZXQubGVuZ3RoIDwgd2lkdGgpIHtcblx0XHRpZiAobGVmdClcblx0XHRcdHJldCArPSBjaHI7XG5cdFx0ZWxzZVxuXHRcdFx0cmV0ID0gY2hyICsgcmV0O1xuXHR9XG5cblx0cmV0dXJuIChyZXQpO1xufVxuXG4vKlxuICogVGhpcyBmdW5jdGlvbiBkdW1wcyBsb25nIHN0YWNrIHRyYWNlcyBmb3IgZXhjZXB0aW9ucyBoYXZpbmcgYSBjYXVzZSgpIG1ldGhvZC5cbiAqIFNlZSBub2RlLXZlcnJvciBmb3IgYW4gZXhhbXBsZS5cbiAqL1xuZnVuY3Rpb24gZHVtcEV4Y2VwdGlvbihleClcbntcblx0dmFyIHJldDtcblxuXHRpZiAoIShleCBpbnN0YW5jZW9mIEVycm9yKSlcblx0XHR0aHJvdyAobmV3IEVycm9yKGpzU3ByaW50ZignaW52YWxpZCB0eXBlIGZvciAlJXI6ICVqJywgZXgpKSk7XG5cblx0LyogTm90ZSB0aGF0IFY4IHByZXBlbmRzIFwiZXguc3RhY2tcIiB3aXRoIGV4LnRvU3RyaW5nKCkuICovXG5cdHJldCA9ICdFWENFUFRJT046ICcgKyBleC5jb25zdHJ1Y3Rvci5uYW1lICsgJzogJyArIGV4LnN0YWNrO1xuXG5cdGlmIChleC5jYXVzZSAmJiB0eXBlb2YgKGV4LmNhdXNlKSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBjZXggPSBleC5jYXVzZSgpO1xuXHRcdGlmIChjZXgpIHtcblx0XHRcdHJldCArPSAnXFxuQ2F1c2VkIGJ5OiAnICsgZHVtcEV4Y2VwdGlvbihjZXgpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiAocmV0KTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92ZXJyb3Ivfi9leHRzcHJpbnRmL2xpYi9leHRzcHJpbnRmLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblxuZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuICB9XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdmVycm9yL34vY29yZS11dGlsLWlzL2xpYi91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yIGV4dGVuZHMgRGlzbEVycm9yIHtcbiAgXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHNlcnZpY2VzXG4gICAqXG4gICAqIEByZXR1cm5zIHtDaXJjdWxhckRlcGVuZGVuY3lFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihzZXJ2aWNlczogQXJyYXk8c3RyaW5nPik6IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yIHtcbiAgICBjb25zdCBwYXRoID0gW10uY29uY2F0KHNlcnZpY2VzKVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLmpvaW4oJyA8LSAnKVxuXG4gICAgcmV0dXJuIG5ldyBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcihcbiAgICAgIHtcbiAgICAgICAgc2VydmljZXNcbiAgICAgIH0sXG4gICAgICAnQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDogJXMnLFxuICAgICAgcGF0aFxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDaXJjdWxhckRlcGVuZGVuY3lFcnJvclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvY2lyY3VsYXItZGVwZW5kZW5jeS1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7RmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IoaWRlbnRpZmllcjogc3RyaW5nKTogRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3Ige1xuICAgIHJldHVybiBuZXcgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGlkZW50aWZpZXJcbiAgICAgIH0sXG4gICAgICAnRmFjdG9yeSBtZXRob2QgZm9yIGlkZW50aWZpZXIgXCIlc1wiIHJldHVybnMgbm90aGluZycsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL2ZhY3RvcnktbWV0aG9kLXJldHVybnMtbm90aGluZy1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZVxuICAgKlxuICAgKiBAcmV0dXJucyB7TWV0aG9kRG9lc05vdEV4aXN0RXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IobWV0aG9kTmFtZTogc3RyaW5nKTogTWV0aG9kRG9lc05vdEV4aXN0RXJyb3Ige1xuICAgIHJldHVybiBuZXcgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IoXG4gICAgICB7XG4gICAgICAgIG1ldGhvZE5hbWVcbiAgICAgIH0sXG4gICAgICAnTWV0aG9kIFwiJXNcIiBkb2VzIG5vdCBleGlzdCcsXG4gICAgICBtZXRob2ROYW1lXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1ldGhvZERvZXNOb3RFeGlzdEVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL21ldGhvZC1kb2VzLW5vdC1leGlzdC1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yIGV4dGVuZHMgRGlzbEVycm9yIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge1NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihpZGVudGlmaWVyOiBzdHJpbmcpOiBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3Ige1xuICAgIHJldHVybiBuZXcgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yKFxuICAgICAge1xuICAgICAgICBpZGVudGlmaWVyXG4gICAgICB9LFxuICAgICAgJ1NlcnZpY2UgZGVmaW5pdGlvbiBmb3IgXCIlc1wiIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2UsIHJlZnVzaW5nIHRvIG1vZGlmeSBpdCcsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy9zZXJ2aWNlLWRlZmluaXRpb24tYWxyZWFkeS11c2VkLWVycm9yLmpzIiwiaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Rpc2wtZXJyb3InXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGlkZW50aWZpZXI6IHN0cmluZyk6IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yIHtcbiAgICByZXR1cm4gbmV3IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yKFxuICAgICAge1xuICAgICAgICBpZGVudGlmaWVyXG4gICAgICB9LFxuICAgICAgJ1VuZGVmaW5lZCBwYXJhbWV0ZXIgZm9yIGlkZW50aWZpZXIgXCIlc1wiJyxcbiAgICAgIGlkZW50aWZpZXJcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvdW5kZWZpbmVkLXBhcmFtZXRlci1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yIGV4dGVuZHMgRGlzbEVycm9yIHtcbiAgXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGlkZW50aWZpZXI6IHN0cmluZyk6IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGlkZW50aWZpZXJcbiAgICAgIH0sXG4gICAgICAnVW5kZWZpbmVkIHNlcnZpY2UgZGVmaW5pdGlvbiBhbmQgaW5zdGFuY2UgZm9yIGlkZW50aWZpZXIgXCIlc1wiJyxcbiAgICAgIGlkZW50aWZpZXJcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy91bmRlZmluZWQtc2VydmljZS1kZWZpbml0aW9uLWFuZC1pbnN0YW5jZS1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGlkZW50aWZpZXI6IHN0cmluZyk6IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3Ige1xuICAgIHJldHVybiBuZXcgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcihcbiAgICAgIHtcbiAgICAgICAgaWRlbnRpZmllclxuICAgICAgfSxcbiAgICAgICdVbmRlZmluZWQgc2VydmljZSBkZWZpbml0aW9uIGZvciBpZGVudGlmaWVyIFwiJXNcIicsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvdW5kZWZpbmVkLXNlcnZpY2UtZGVmaW5pdGlvbi1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7YW55fSBhcmdcbiAgICpcbiAgICogQHJldHVybnMge1Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IoYXJnOiBhbnkpOiBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yIHtcbiAgICByZXR1cm4gbmV3IFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGFyZ1xuICAgICAgfSxcbiAgICAgICdVbnN1cHBvcnRlZCBhcmcgb2YgdHlwZSBcIiVzXCInLFxuICAgICAgdHlwZW9mIGFyZ1xuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL3Vuc3VwcG9ydGVkLWFyZ3VtZW50LXR5cGUtZXJyb3IuanMiXSwic291cmNlUm9vdCI6IiJ9