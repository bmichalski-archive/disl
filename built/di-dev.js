!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(1),i=r(o),u=n(7),a=r(u),c=n(8),f=r(c),s=n(5),l=r(s),p=n(6),h=r(p),y=n(3),d=r(y),v=n(9),g=r(v),b={Container:i.default,ClassConstructorDefinition:a.default,FactoryDefinition:f.default,Reference:l.default,Parameter:h.default,MethodCall:d.default};for(var m in g.default)g.default.hasOwnProperty(m)&&(b[m]=g.default[m]);t.exports=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":u(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":u(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(2),f=r(c),s=n(7),l=r(s),p=n(8),h=r(p),y=n(5),d=r(y),v=n(6),g=r(v),b=n(3),m=r(b),w=n(9),_=n(4),E=_.InjectableArguments,j=function(){function t(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null==t}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}(),O=function(){function t(t){return null!=t&&t.obj instanceof Object&&Array.isArray(t.arr)&&t.arr.every(function(t){return"string"==typeof t})}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}(),S=function(){function t(t){return"function"==typeof t}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}(),A=function(){function t(){o(this,t),this._servicesByIdentifier={},this._serviceDefinitionsByIdentifier={},this._parametersByIdentifier={},this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier={},this._classConstructorLocators=[],this._instanceLocators=[]}return a(t,[{key:"get",value:function(){function t(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Array<Object | Function>>\n\nGot:\n"+i(t));return t}for(var e=this,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!Array.isArray(r)||!r.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "identifiers" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(r));var u=[];return r.forEach(function(t){u.push(e._doGetService(t,{obj:{},arr:[]}).catch(function(e){throw w.GetServiceError.createError(t,e)}))}),t(Promise.all(u))}},{key:"set",value:function(e,n){function r(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!(n instanceof Object||"function"==typeof n))throw new TypeError('Value of argument "instance" violates contract.\n\nExpected:\nObject | Function\n\nGot:\n'+i(n));return this._servicesByIdentifier[e]=n,r(this)}},{key:"has",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(this.hasDefinition(t)||this.hasInstance(t))}},{key:"hasDefinition",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(void 0!==this._serviceDefinitionsByIdentifier[t])}},{key:"hasInstance",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(void 0!==this._servicesByIdentifier[t])}},{key:"getDefinition",value:function(t){function e(t){if(!(t instanceof f.default))throw new TypeError("Function return value violates contract.\n\nExpected:\nDefinition\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));var n=this._serviceDefinitionsByIdentifier[t];if(void 0===n)throw w.UndefinedServiceDefinitionError.createError(t);return e(n)}},{key:"setDefinition",value:function(e,n){function r(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!(n instanceof f.default))throw new TypeError('Value of argument "definition" violates contract.\n\nExpected:\nDefinition\n\nGot:\n'+i(n));if(this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[e])throw w.ServiceDefinitionAlreadyUsedError.createError(e);return this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[e]=!1,this._serviceDefinitionsByIdentifier[e]=n,r(this)}},{key:"getParameter",value:function(t){function e(t){if(!j(t))throw new TypeError("Function return value violates contract.\n\nExpected:\nscalar\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(void 0===this._parametersByIdentifier[t])throw w.UndefinedParameterError.createError(t);return e(this._parametersByIdentifier[t])}},{key:"setParameter",value:function(e,n){function r(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!j(n))throw new TypeError('Value of argument "value" violates contract.\n\nExpected:\nscalar\n\nGot:\n'+i(n));return this._parametersByIdentifier[e]=n,r(this)}},{key:"hasParameter",value:function(t){function e(t){if("boolean"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return e(void 0!==this._parametersByIdentifier[t])}},{key:"registerClassConstructorLocator",value:function(e){function n(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if(!S(e))throw new TypeError('Value of argument "locator" violates contract.\n\nExpected:\nLocatorCallback\n\nGot:\n'+i(e));return this._classConstructorLocators.push(e),n(this)}},{key:"registerInstanceLocator",value:function(e){function n(e){if(!(e instanceof t))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(e));return e}if(!S(e))throw new TypeError('Value of argument "locator" violates contract.\n\nExpected:\nLocatorCallback\n\nGot:\n'+i(e));return this._instanceLocators.push(e),n(this)}},{key:"_instantiate",value:function(t,e,n){function r(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Object>\n\nGot:\n"+i(t));return t}var o=this;if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!(e instanceof f.default))throw new TypeError('Value of argument "definition" violates contract.\n\nExpected:\nDefinition\n\nGot:\n'+i(e));if(!O(n))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(n));return r(this._resolveArgs(e.args,n).then(function(r){function u(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise\n\nGot:\n"+i(t));return t}if(!Array.isArray(r))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nArray\n\nGot:\n'+i(r));var a=void 0;if(e instanceof l.default){var c=o._locateServiceClassConstructor(e.classConstructorIdentifier);a=new(Function.prototype.bind.apply(c,[void 0].concat(r)))}else if(e instanceof h.default&&(a=e.factory.apply(void 0,r),void 0===a))return u(Promise.reject(w.FactoryMethodReturnsNothingError.createError(t)));return new Promise(function(t,r){function u(t){function n(t){if(!(t instanceof m.default))throw new TypeError('Function "getMethodCall" return value violates contract.\n\nExpected:\nMethodCall\n\nGot:\n'+i(t));return t}return n(e.methodCalls[t])}var c=[],f=void 0,s=void 0,l=function(t){if("function"!=typeof t)throw new TypeError('Value of argument "methodToCall" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+i(t));c.push(o._resolveArgs(s.args,n).then(function(e){function n(t){if(!(null==t||t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\n?Promise | mixed\n\nGot:\n"+i(t));return t}if(!Array.isArray(e))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nArray\n\nGot:\n'+i(e));return n(t.apply(a,e))}))};for(f in e.methodCalls)if(e.methodCalls.hasOwnProperty(f)){s=u(f);var p=s.name,h=a[p];if(void 0===h)return r(w.MethodDoesNotExistError.createError(p));l(h)}return t(Promise.all(c).then(function(){function t(t){if(!(t instanceof Object))throw new TypeError("Function return value violates contract.\n\nExpected:\nObject\n\nGot:\n"+i(t));return t}return t(a)}))})}))}},{key:"_locateServiceClassConstructor",value:function(t){function e(t){if("function"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nFunction\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));var n=void 0,r=void 0;for(n in this._classConstructorLocators)if(this._classConstructorLocators.hasOwnProperty(n)&&(r=this._classConstructorLocators[n](t),void 0!==r))return e(r);throw w.CannotLocateServiceClassConstructorError.createError(t)}},{key:"_locateInstance",value:function(t){function e(t){if(!(t instanceof Object||null==t))throw new TypeError("Function return value violates contract.\n\nExpected:\nObject | void\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));var n=void 0,r=void 0;for(n in this._instanceLocators)if(this._instanceLocators.hasOwnProperty(n)&&(r=this._instanceLocators[n](t),void 0!==r))return e(r)}},{key:"_resolveArgs",value:function(e,n){var r=this;if(!E(e))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n'+i(e));if(!O(n))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(n));var o=[];return new Promise(function(i,u){var a=void 0,c=void 0;for(a in e)if(e.hasOwnProperty(a))if(c=e[a],c instanceof d.default){var f=c.id;o.push(r._doGetService(f,t._deepCopyLoading(n)))}else{if(!(c instanceof g.default))return u(w.UnsupportedArgumentTypeError.createError(c));o.push(r.getParameter(c.id))}return i(Promise.all(o))})}},{key:"_doGetService",value:function(t,e){function n(t){if(!(t instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!O(e))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(e));if(void 0!==e.obj[t]){var r=[].concat(e.arr).concat([t]);return n(Promise.reject(w.CircularDependencyError.createError(r)))}if(!this.hasInstance(t)){if(!this.hasDefinition(t)){var o=this._locateInstance(t);return n(void 0!==o?Promise.resolve(o).then(function(e){return void 0===e?Promise.reject(w.UndefinedServiceDefinitionAndInstanceError.createError(t)):Promise.resolve(e)}):Promise.reject(w.UndefinedServiceDefinitionAndInstanceError.createError(t)))}e.obj[t]=!0,e.arr.push(t);try{var u=this._instantiate(t,this.getDefinition(t),e);this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[t]=!0,this._servicesByIdentifier[t]=u}catch(t){return n(Promise.reject(t))}}return n(Promise.resolve(this._servicesByIdentifier[t]))}}],[{key:"_deepCopyLoading",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e={obj:{},arr:[].concat(t.arr)};for(var n in t.obj)t.obj.hasOwnProperty(n)&&(e.obj[n]=t.obj[n]);return e}}]),t}();e.default=A},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":u(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":u(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(3),f=r(c),s=n(4),l=s.InjectableArguments,p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(o(this,t),null!=e&&!l(e))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+i(e));this._methodCalls=[],this._args=e}return a(t,[{key:"methodCalls",set:function(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof f.default}))throw new TypeError('Value of argument "methodCalls" violates contract.\n\nExpected:\nArray<MethodCall>\n\nGot:\n'+i(t));this._methodCalls=t},get:function(){function t(t){if(!Array.isArray(t)||!t.every(function(t){return t instanceof f.default}))throw new TypeError("Function return value violates contract.\n\nExpected:\nArray<MethodCall>\n\nGot:\n"+i(t));return t}return t(this._methodCalls)}},{key:"args",get:function(){function t(t){if(!l(t))throw new TypeError("Function return value violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n"+i(t));return t}return t(this._args)}}]),t}();e.default=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":i(t);if(!Array.isArray(t)){var u=Object.keys(t);if(!u.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=u.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return u.length>=r&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":i(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),c=a.InjectableArguments,f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(this,t),"string"!=typeof e)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(e));if(null!=n&&!c(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+o(n));this._name=e,this._args=n}return u(t,[{key:"name",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+o(t));return t}return t(this._name)}},{key:"args",get:function(){function t(t){if(!c(t))throw new TypeError("Function return value violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n"+o(t));return t}return t(this._args)}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.InjectableArguments=void 0;var o=n(5),i=r(o),u=n(6),a=r(u);e.InjectableArguments=function(){function t(t){return Array.isArray(t)&&t.every(function(t){return t instanceof i.default||t instanceof a.default})}return Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return t(e)}}),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var n=4,i=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":o(t);if(!Array.isArray(t)){var u=Object.keys(t);if(!u.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=u.slice(0,i).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(t[n],e)+";"}).join("\n  "+a);return u.length>=i&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=r(t[0],e);return t.every(function(t){return r(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,i).map(function(t){return r(t,e)}).join(", ")+(t.length>=i?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":o(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e){if(n(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(e));this._id=e}return i(t,[{key:"id",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+r(t));return t}return t(this._id)}}]),t}();e.default=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var n=4,i=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":o(t);if(!Array.isArray(t)){var u=Object.keys(t);if(!u.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),c=u.slice(0,i).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(t[n],e)+";"}).join("\n  "+a);return u.length>=i&&(c+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=r(t[0],e);return t.every(function(t){return r(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,i).map(function(t){return r(t,e)}).join(", ")+(t.length>=i?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":o(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e){if(n(this,t),"string"!=typeof e)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(e));this._id=e}return i(t,[{key:"id",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+r(t));return t}return t(this._id)}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),p=n(4),h=p.InjectableArguments,y=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o(this,e),"string"!=typeof t)throw new TypeError('Value of argument "classConstructorIdentifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if(null!=n&&!h(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+a(n));var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r._classConstructorIdentifier=t,r}return u(e,t),f(e,[{key:"classConstructorIdentifier",get:function(){function t(t){if("string"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+a(t));return t}return t(this._classConstructorIdentifier)}}]),e}(l.default);e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),p=n(4),h=p.InjectableArguments,y=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o(this,e),"function"!=typeof t)throw new TypeError('Value of argument "factory" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+a(t));if(null!=n&&!h(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+a(n));var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r._factory=t,r}return u(e,t),f(e,[{key:"factory",get:function(){function t(t){if("function"!=typeof t)throw new TypeError("Function return value violates contract.\n\nExpected:\nFunction\n\nGot:\n"+a(t));return t}return t(this._factory)}}]),e}(l.default);e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(10),i=r(o),u=n(43),a=r(u),c=n(11),f=r(c),s=n(44),l=r(s),p=n(45),h=r(p),y=n(46),d=r(y),v=n(47),g=r(v),b=n(48),m=r(b),w=n(49),_=r(w),E=n(50),j=r(E),O=n(51),S=r(O);t.exports={CannotLocateServiceClassConstructorError:i.default,CircularDependencyError:a.default,DislError:f.default,FactoryMethodReturnsNothingError:l.default,MethodDoesNotExistError:h.default,ServiceDefinitionAlreadyUsedError:d.default,UndefinedParameterError:g.default,UndefinedServiceDefinitionAndInstanceError:m.default,UndefinedServiceDefinitionError:_.default,UnsupportedArgumentTypeError:j.default,GetServiceError:S.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";
if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "className" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({className:t},'Cannot locate service class constructor for class "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),c=r(a),f=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),e}(c.default);e.default=f},function(t,e,n){function r(t){var e,n,r,o,i;if(c.object(t,"args"),c.bool(t.strict,"args.strict"),c.array(t.argv,"args.argv"),e=t.argv,0===e.length)n={},r=[];else if(l(e[0]))n={cause:e[0]},r=e.slice(1);else if("object"==typeof e[0]){n={};for(i in e[0])n[i]=e[0][i];r=e.slice(1)}else c.string(e[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),n={},r=e;return c.object(n),n.strict||t.strict||(r=r.map(function(t){return null===t?"null":void 0===t?"undefined":t})),o=0===r.length?"":p.apply(null,r),{options:n,shortmessage:o}}function o(){var t,e,n,i,u,a,f;if(t=Array.prototype.slice.call(arguments,0),!(this instanceof o))return e=Object.create(o.prototype),o.apply(e,arguments),e;if(n=r({argv:t,strict:!1}),n.options.name&&(c.string(n.options.name,'error\'s "name" must be a string'),this.name=n.options.name),this.jse_shortmsg=n.shortmessage,a=n.shortmessage,i=n.options.cause,i&&(c.ok(l(i),"cause is not an Error"),this.jse_cause=i,n.options.skipCauseMessage||(a+=": "+i.message)),this.jse_info={},n.options.info)for(f in n.options.info)this.jse_info[f]=n.options.info[f];return this.message=a,Error.call(this,a),Error.captureStackTrace&&(u=n.options.constructorOpt||this.constructor,Error.captureStackTrace(this,u)),this}function i(){var t,e,n,u;return t=Array.prototype.slice.call(arguments,0),this instanceof i?(n=r({argv:t,strict:!0}),u=n.options,o.call(this,u,"%s",n.shortmessage),this):(e=Object.create(i.prototype),i.apply(e,arguments),e)}function u(t){c.array(t,"list of errors"),c.ok(t.length>0,"must be at least one error"),this.ase_errors=t,o.call(this,{cause:t[0]},"first of %d error%s",t.length,1==t.length?"":"s")}function a(){var t,e,n,i;return t=Array.prototype.slice.call(arguments,0),this instanceof a?(n=r({argv:t,strict:!1}),i=n.options,i.skipCauseMessage=!0,o.call(this,i,"%s",n.shortmessage),this):(e=Object.create(a.prototype),a.apply(e,t),e)}var c=n(13),f=n(20),s=n(41),l=n(42).isError,p=s.sprintf;t.exports=o,o.VError=o,o.SError=i,o.WError=a,o.MultiError=u,f.inherits(o,Error),o.prototype.name="VError",o.prototype.toString=function(){var t=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t+=": "+this.message),t},o.prototype.cause=function(){var t=o.cause(this);return null===t?void 0:t},o.cause=function(t){return c.ok(l(t),"err must be an Error"),l(t.jse_cause)?t.jse_cause:null},o.info=function(t){var e,n,r;if(c.ok(l(t),"err must be an Error"),n=o.cause(t),e=null!==n?o.info(n):{},"object"==typeof t.jse_info&&null!==t.jse_info)for(r in t.jse_info)e[r]=t.jse_info[r];return e},o.findCauseByName=function(t,e){var n;for(c.ok(l(t),"err must be an Error"),c.string(e),c.ok(e.length>0,"name cannot be empty"),n=t;null!==n;n=o.cause(n))if(c.ok(l(n)),n.name==e)return n;return null},o.fullStack=function(t){c.ok(l(t),"err must be an Error");var e=o.cause(t);return e?t.stack+"\ncaused by: "+o.fullStack(e):t.stack},f.inherits(i,o),f.inherits(u,o),u.prototype.name="MultiError",u.prototype.errors=function(){return this.ase_errors.slice(0)},f.inherits(a,o),a.prototype.name="WError",a.prototype.toString=function(){var t=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(t+="; caused by "+this.jse_cause.toString()),t},a.prototype.cause=function(t){return l(t)&&(this.jse_cause=t),this.jse_cause}},function(t,e,n){(function(e,r){function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function i(t,e,n,r,o){throw new f.AssertionError({message:l.format("%s (%s) is required",t,e),actual:void 0===o?typeof r:o(r),expected:e,operator:n||"===",stackStartFunction:i.caller})}function u(t){return Object.prototype.toString.call(t).slice(8,-1)}function a(){}function c(t){var e,n=Object.keys(h);return e=r.env.NODE_NDEBUG?a:function(t,e){t||i(e,"true",t)},n.forEach(function(n){if(t)return void(e[n]=a);var r=h[n];e[n]=function(t,e){r.check(t)||i(e,n,r.operator,t,r.actual)}}),n.forEach(function(n){var r="optional"+o(n);if(t)return void(e[r]=a);var u=h[n];e[r]=function(t,e){void 0!==t&&null!==t&&(u.check(t)||i(e,n,u.operator,t,u.actual))}}),n.forEach(function(n){var r="arrayOf"+o(n);if(t)return void(e[r]=a);var u=h[n],c="["+n+"]";e[r]=function(t,e){Array.isArray(t)||i(e,c,u.operator,t,u.actual);var n;for(n=0;n<t.length;n++)u.check(t[n])||i(e,c,u.operator,t,u.actual)}}),n.forEach(function(n){var r="optionalArrayOf"+o(n);if(t)return void(e[r]=a);var u=h[n],c="["+n+"]";e[r]=function(t,e){if(void 0!==t&&null!==t){Array.isArray(t)||i(e,c,u.operator,t,u.actual);var n;for(n=0;n<t.length;n++)u.check(t[n])||i(e,c,u.operator,t,u.actual)}}}),Object.keys(f).forEach(function(n){return"AssertionError"===n?void(e[n]=f[n]):t?void(e[n]=a):void(e[n]=f[n])}),e._setExports=c,e}var f=n(19),s=n(23).Stream,l=n(20),p=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,h={bool:{check:function(t){return"boolean"==typeof t}},func:{check:function(t){return"function"==typeof t}},string:{check:function(t){return"string"==typeof t}},object:{check:function(t){return"object"==typeof t&&null!==t}},number:{check:function(t){return"number"==typeof t&&!isNaN(t)}},finite:{check:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}},buffer:{check:function(t){return e.isBuffer(t)},operator:"Buffer.isBuffer"},array:{check:function(t){return Array.isArray(t)},operator:"Array.isArray"},stream:{check:function(t){return t instanceof s},operator:"instanceof",actual:u},date:{check:function(t){return t instanceof Date},operator:"instanceof",actual:u},regexp:{check:function(t){return t instanceof RegExp},operator:"instanceof",actual:u},uuid:{check:function(t){return"string"==typeof t&&p.test(t)},operator:"isUUID"}};t.exports=c(r.env.NODE_NDEBUG)}).call(e,n(14).Buffer,n(18))},function(t,e,n){(function(t,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function o(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,n){if(i()<n)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n),e.__proto__=t.prototype):(null===e&&(e=new t(n)),e.length=n),e}function t(e,n,r){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,n,r);if("number"==typeof e){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return s(this,e)}return a(this,e,n,r)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,n,r):"string"==typeof e?l(t,e,n):y(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function s(e,n){if(c(n),e=u(e,n<0?0:0|d(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)e[r]=0;return e}function l(e,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|g(n,r);e=u(e,o);var i=e.write(n,r);return i!==o&&(e=e.slice(0,i)),e}function p(t,e){var n=e.length<0?0:0|d(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(e,n,r,o){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===o?new Uint8Array(n):void 0===o?new Uint8Array(n,r):new Uint8Array(n,r,o),t.TYPED_ARRAY_SUPPORT?(e=n,e.__proto__=t.prototype):e=p(e,n),e}function y(e,n){if(t.isBuffer(n)){var r=0|d(n.length);return e=u(e,r),0===e.length?e:(n.copy(e,0,0,r),e)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||H(n.length)?u(e,0):p(e,n);if("Buffer"===n.type&&Q(n.data))return p(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(e){return+e!=e&&(e=0),t.alloc(+e)}function g(e,n){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(e).length;default:if(o)return z(e).length;n=(""+n).toLowerCase(),o=!0}}function b(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function w(e,n,r,o,i){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=t.from(n,o)),t.isBuffer(n))return 0===n.length?-1:_(e,n,r,o,i);if("number"==typeof n)return n&=255,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):_(e,[n],r,o,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,o){function i(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}var u=1,a=t.length,c=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;u=2,a/=2,c/=2,n/=2}var f;if(o){var s=-1;for(f=n;f<a;f++)if(i(t,f)===i(e,s===-1?0:f-s)){if(s===-1&&(s=f),f-s+1===c)return s*u}else s!==-1&&(f-=f-s),s=-1}else for(n+c>a&&(n=a-c),f=n;f>=0;f--){for(var l=!0,p=0;p<c;p++)if(i(t,f+p)!==i(e,p)){l=!1;break}if(l)return f}return-1}function E(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var u=0;u<r;++u){var a=parseInt(e.substr(2*u,2),16);if(isNaN(a))return u;t[n+u]=a}return u}function j(t,e,n,r){return q(z(e,t.length-n),t,n,r)}function O(t,e,n,r){return q(Z(e),t,n,r)}function S(t,e,n,r){return O(t,e,n,r)}function A(t,e,n,r){return q(J(e),t,n,r)}function T(t,e,n,r){return q(W(e,t.length-n),t,n,r)}function x(t,e,n){return 0===e&&n===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],u=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c,f,s,l;switch(a){case 1:i<128&&(u=i);break;case 2:c=t[o+1],128===(192&c)&&(l=(31&i)<<6|63&c,l>127&&(u=l));break;case 3:c=t[o+1],f=t[o+2],128===(192&c)&&128===(192&f)&&(l=(15&i)<<12|(63&c)<<6|63&f,l>2047&&(l<55296||l>57343)&&(u=l));break;case 4:c=t[o+1],f=t[o+2],s=t[o+3],128===(192&c)&&128===(192&f)&&128===(192&s)&&(l=(15&i)<<18|(63&c)<<12|(63&f)<<6|63&s,l>65535&&l<1114112&&(u=l))}}null===u?(u=65533,a=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=a}return P(r)}function P(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=Y(t[i]);return o}function B(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function L(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,n,r,o,i,u){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<u)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function G(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return o||G(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||G(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,r,52,8),n+8}function V(t){if(t=$(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function $(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],u=0;u<r;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(u+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Z(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,r,o,i=[],u=0;u<t.length&&!((e-=2)<0);++u)n=t.charCodeAt(u),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function J(t){return X.toByteArray(V(t))}function q(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function H(t){return t!==t}var X=n(15),K=n(16),Q=n(17);e.Buffer=t,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),e.kMaxLength=i(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,n){return a(null,t,e,n)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,n){return f(null,t,e,n)},t.allocUnsafe=function(t){return s(null,t)},t.allocUnsafeSlow=function(t){return s(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,i=0,u=Math.min(r,o);i<u;++i)if(e[i]!==n[i]){r=e[i],o=n[i];break}return r<o?-1:o<r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var o=t.allocUnsafe(n),i=0;for(r=0;r<e.length;++r){var u=e[r];if(!t.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(o,i),i+=u.length}return o},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,n,r,o,i){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),n<0||r>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&n>=r)return 0;if(o>=i)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,o>>>=0,i>>>=0,this===e)return 0;for(var u=i-o,a=r-n,c=Math.min(u,a),f=this.slice(o,i),s=e.slice(n,r),l=0;l<c;++l)if(f[l]!==s[l]){u=f[l],a=s[l];break}return u<a?-1:a<u?1:0},t.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},t.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},t.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return j(this,t,e,n);case"ascii":return O(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var o;if(t.TYPED_ARRAY_SUPPORT)o=this.subarray(e,n),o.__proto__=t.prototype;else{var i=n-e;o=new t(i,void 0);for(var u=0;u<i;++u)o[u]=this[u+e]}return o},t.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},t.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},t.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},t.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),K.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),K.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),K.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),K.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;I(this,t,e,n,o,0)}var i=1,u=0;for(this[e]=255&t;++u<n&&(i*=256);)this[e+u]=t/i&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;I(this,t,e,n,o,0)}var i=n-1,u=1;for(this[e+i]=255&t;--i>=0&&(u*=256);)this[e+i]=t/u&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):U(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):U(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);I(this,t,e,n,o-1,-o)}var i=0,u=1,a=0;for(this[e]=255&t;++i<n&&(u*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/u>>0)-a&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);I(this,t,e,n,o-1,-o)}var i=n-1,u=1,a=0;for(this[e+i]=255&t;--i>=0&&(u*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/u>>0)-a&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):U(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n|=0,r||I(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):U(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i,u=o-r;if(this===e&&r<n&&n<o)for(i=u-1;i>=0;--i)e[i+n]=this[i+r];else if(u<1e3||!t.TYPED_ARRAY_SUPPORT)for(i=0;i<u;++i)e[i+n]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+u),n);return u},t.prototype.fill=function(e,n,r,o){if("string"==typeof e){if("string"==typeof n?(o=n,n=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var u;if("number"==typeof e)for(u=n;u<r;++u)this[u]=e;else{var a=t.isBuffer(e)?e:z(new t(e,o).toString()),c=a.length;for(u=0;u<r-n;++u)this[u+n]=a[u%c]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,n(14).Buffer,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function o(t){var e,r,o,i,u,a,c=t.length;u=n(t),a=new s(3*c/4-u),o=u>0?c-4:c;var l=0;for(e=0,r=0;e<o;e+=4,r+=3)i=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===u?(i=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,a[l++]=255&i):1===u&&(i=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}function i(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function u(t,e,n){for(var r,o=[],u=e;u<n;u+=3)r=(t[u]<<16)+(t[u+1]<<8)+t[u+2],o.push(i(r));return o.join("")}function a(t){for(var e,n=t.length,r=n%3,o="",i=[],a=16383,f=0,s=n-r;f<s;f+=a)i.push(u(t,f,f+a>s?s:f+a));return 1===r?(e=t[n-1],o+=c[e>>2],o+=c[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=c[e>>10],o+=c[e>>4&63],o+=c[e<<2&63],o+="="),i.push(o),i.join("")}e.byteLength=r,e.toByteArray=o,e.fromByteArray=a;for(var c=[],f=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=l.length;p<h;++p)c[p]=l[p],f[l.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,u,a=8*o-r-1,c=(1<<a)-1,f=c>>1,s=-7,l=n?o-1:0,p=n?-1:1,h=t[e+l];for(l+=p,i=h&(1<<-s)-1,h>>=-s,s+=a;s>0;i=256*i+t[e+l],l+=p,s-=8);for(u=i&(1<<-s)-1,i>>=-s,s+=r;s>0;u=256*u+t[e+l],l+=p,s-=8);if(0===i)i=1-f;else{if(i===c)return u?NaN:(h?-1:1)*(1/0);u+=Math.pow(2,r),i-=f}return(h?-1:1)*u*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var u,a,c,f=8*i-o-1,s=(1<<f)-1,l=s>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=s):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),e+=u+l>=1?p/c:p*Math.pow(2,1-l),e*c>=2&&(u++,c/=2),u+l>=s?(a=0,u=s):u+l>=1?(a=(e*c-1)*Math.pow(2,o),u+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),u=0));o>=8;t[n+h]=255&a,h+=y,a/=256,o-=8);for(u=u<<o|a,f+=o;f>0;t[n+h]=255&u,h+=y,u/=256,f-=8);t[n+h-y]|=128*d}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(s===setTimeout)return setTimeout(t,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function u(){d&&h&&(d=!1,h.length?y=h.concat(y):v=-1,y.length&&a())}function a(){if(!d){var t=o(u);d=!0;for(var e=y.length;e;){for(h=y,y=[];++v<e;)h&&h[v].run();v=-1,e=y.length}h=null,d=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function f(){}var s,l,p=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(t){s=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var h,y=[],d=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.push(new c(t,e)),1!==y.length||d||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){(function(e){"use strict";/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function i(t){return Object.prototype.toString.call(t)}function u(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function a(t){if(w.isFunction(t)){if(j)return t.name;var e=t.toString(),n=e.match(S);return n&&n[1]}}function c(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function f(t){if(j||!w.isFunction(t))return w.inspect(t);var e=a(t),n=e?": "+e:"";return"[Function"+n+"]"}function s(t){return c(f(t.actual),128)+" "+t.operator+" "+c(f(t.expected),128)}function l(t,e,n,r,o){throw new O.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function p(t,e){t||l(t,!0,e,"==",O.ok)}function h(t,e,n,a){if(t===e)return!0;if(o(t)&&o(e))return 0===r(t,e);if(w.isDate(t)&&w.isDate(e))return t.getTime()===e.getTime();if(w.isRegExp(t)&&w.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&i(t)===i(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;a=a||{actual:[],expected:[]};var c=a.actual.indexOf(t);return c!==-1&&c===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),d(t,e,n,a))}return n?t===e:t==e}function y(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function d(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(w.isPrimitive(t)||w.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=y(t),i=y(e);if(o&&!i||!o&&i)return!1;if(o)return t=E.call(t),e=E.call(e),h(t,e,n);var u,a,c=A(t),f=A(e);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),a=c.length-1;a>=0;a--)if(c[a]!==f[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!h(t[u],e[u],n,r))return!1;return!0}function v(t,e,n){h(t,e,!0)&&l(t,e,n,"notDeepStrictEqual",v)}function g(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&e.call({},t)===!0}function b(t){var e;try{t()}catch(t){e=t}return e}function m(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=b(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&l(o,n,"Missing expected exception"+r);var i="string"==typeof r,u=!t&&w.isError(o),a=!t&&o&&!n;if((u&&i&&g(o,n)||a)&&l(o,n,"Got unwanted exception"+r),t&&o&&n&&!g(o,n)||!t&&o)throw o}var w=n(20),_=Object.prototype.hasOwnProperty,E=Array.prototype.slice,j=function(){return"foo"===function(){}.name}(),O=t.exports=p,S=/\s*function\s+([^\(\s]*)\s*/;O.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var e=t.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,o=a(e),i=r.indexOf("\n"+o);if(i>=0){var u=r.indexOf("\n",i+1);r=r.substring(u+1)}this.stack=r}}},w.inherits(O.AssertionError,Error),O.fail=l,O.ok=p,O.equal=function(t,e,n){t!=e&&l(t,e,n,"==",O.equal)},O.notEqual=function(t,e,n){t==e&&l(t,e,n,"!=",O.notEqual)},O.deepEqual=function(t,e,n){h(t,e,!1)||l(t,e,n,"deepEqual",O.deepEqual)},O.deepStrictEqual=function(t,e,n){h(t,e,!0)||l(t,e,n,"deepStrictEqual",O.deepStrictEqual)},O.notDeepEqual=function(t,e,n){h(t,e,!1)&&l(t,e,n,"notDeepEqual",O.notDeepEqual)},O.notDeepStrictEqual=v,O.strictEqual=function(t,e,n){t!==e&&l(t,e,n,"===",O.strictEqual)},O.notStrictEqual=function(t,e,n){t===e&&l(t,e,n,"!==",O.notStrictEqual)},O.throws=function(t,e,n){m(!0,t,e,n)},O.doesNotThrow=function(t,e,n){m(!1,t,e,n)},O.ifError=function(t){if(t)throw t};var A=Object.keys||function(t){var e=[];for(var n in t)_.call(t,n)&&e.push(n);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t,r){function o(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),c(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function u(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,n,r){if(t.customInspect&&n&&A(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return m(o)||(o=c(t,o,r)),o}var i=f(t,n);if(i)return i;var u=Object.keys(n),d=a(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(n)),S(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return s(n);if(0===u.length){if(A(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return s(n)}var g="",b=!1,w=["{","}"];if(y(n)&&(b=!0,w=["[","]"]),A(n)){var _=n.name?": "+n.name:"";g=" [Function"+_+"]"}if(E(n)&&(g=" "+RegExp.prototype.toString.call(n)),O(n)&&(g=" "+Date.prototype.toUTCString.call(n)),S(n)&&(g=" "+s(n)),0===u.length&&(!b||0==n.length))return w[0]+g+w[1];if(r<0)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var j;return j=b?l(t,n,r,d,u):u.map(function(e){return p(t,n,r,d,e,b)}),t.seen.pop(),h(j,g,w)}function f(t,e){if(_(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return b(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,o){for(var i=[],u=0,a=e.length;u<a;++u)R(e,String(u))?i.push(p(t,e,n,r,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(t,e,n,r,o,!0))}),i}function p(t,e,n,r,o,i){var u,a,f;if(f=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},f.get?a=f.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):f.set&&(a=t.stylize("[Setter]","special")),R(r,o)||(u="["+o+"]"),a||(t.seen.indexOf(f.value)<0?(a=v(n)?c(t,f.value,null):c(t,f.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),_(u)){if(i&&o.match(/^\d+$/))return a;u=JSON.stringify(""+o),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function h(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function y(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function E(t){return j(t)&&"[object RegExp]"===x(t)}function j(t){return"object"==typeof t&&null!==t}function O(t){return j(t)&&"[object Date]"===x(t)}function S(t){return j(t)&&("[object Error]"===x(t)||t instanceof Error)}function A(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function x(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var M=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,u=String(t).replace(M,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),a=r[n];n<i;a=r[++n])u+=v(a)||!j(a)?" "+a:" "+o(a);return u},e.deprecate=function(n,o){function i(){if(!u){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),u=!0}return n.apply(this,arguments)}if(_(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var u=!1;return i};var C,B={};e.debuglog=function(t){if(_(C)&&(C=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(C)){var n=r.pid;B[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else B[t]=function(){};return B[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=b,e.isString=m,e.isSymbol=w,e.isUndefined=_,e.isRegExp=E,e.isObject=j,e.isDate=O,e.isError=S,e.isFunction=A,e.isPrimitive=T,e.isBuffer=n(21);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(22),e._extend=function(t,e){if(!e||!j(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(18))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(){o.call(this)}t.exports=r;var o=n(24).EventEmitter,i=n(25);i(r,o),r.Readable=n(26),r.Writable=n(37),r.Duplex=n(38),r.Transform=n(39),r.PassThrough=n(40),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&f.pause&&f.pause()}function r(){f.readable&&f.resume&&f.resume()}function i(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(c(),0===o.listenerCount(this,"error"))throw t}function c(){f.removeListener("data",n),t.removeListener("drain",r),f.removeListener("end",i),f.removeListener("close",u),f.removeListener("error",a),t.removeListener("error",a),f.removeListener("end",c),f.removeListener("close",c),t.removeListener("close",c)}var f=this;f.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(f.on("end",i),f.on("close",u));var s=!1;return f.on("error",a),t.on("error",a),f.on("end",c),f.on("close",c),t.on("close",c),t.emit("pipe",f),t}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,a,c,f;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}if(n=this._events[t],u(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),f=n.slice(),o=f.length,c=0;c<o;c++)f[c].apply(this,a);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,u,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],u=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=u;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(r){e=t.exports=n(27),e.Stream=n(23),e.Readable=e,e.Writable=n(33),e.Duplex=n(32),e.Transform=n(35),e.PassThrough=n(36),r.browser||"disable"!==r.env.READABLE_STREAM||(t.exports=n(23))}).call(e,n(18))},function(t,e,n){(function(e){function r(t,e){var r=n(32);t=t||{};var o=t.highWaterMark,i=t.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(x||(x=n(34).StringDecoder),this.decoder=new x(t.encoding),this.encoding=t.encoding)}function o(t){n(32);return this instanceof o?(this._readableState=new r(t,this),this.readable=!0,void A.call(this)):new o(t)}function i(t,e,n,r,o){var i=f(e,n);if(i)t.emit("error",i);else if(T.isNullOrUndefined(n))e.reading=!1,e.ended||s(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&o){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||o||r||(n=e.decoder.write(n)),o||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),h(t,e);else o||(e.reading=!1);return u(e)}function u(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=P)t=P;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||T.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function f(t,e){var n=null;return T.isBuffer(e)||T.isString(e)||T.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function s(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}function l(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(k("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?e.nextTick(function(){p(t)}):p(t))}function p(t){k("emit readable"),t.emit("readable"),b(t)}function h(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){y(t,n)}))}function y(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(k("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function d(t){return function(){var e=t._readableState;k("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&S.listenerCount(t,"data")&&(e.flowing=!0,b(t))}}function v(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(function(){g(t,n)}))}function g(t,e){e.resumeScheduled=!1,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;if(k("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function m(t,e){var n,r=e.buffer,o=e.length,i=!!e.decoder,u=!!e.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(u)n=r.shift();else if(!t||t>=o)n=i?r.join(""):O.concat(r,o),r.length=0;else if(t<r[0].length){var a=r[0];n=a.slice(0,t),r[0]=a.slice(t)}else if(t===r[0].length)n=r.shift();else{n=i?"":new O(t);for(var c=0,f=0,s=r.length;f<s&&c<t;f++){var a=r[0],l=Math.min(t-c,a.length);i?n+=a.slice(0,l):a.copy(n,c,0,l),l<a.length?r[0]=a.slice(l):r.shift(),c+=l}}return n}function w(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function _(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function E(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}t.exports=o;var j=n(28),O=n(14).Buffer;o.ReadableState=r;var S=n(24).EventEmitter;S.listenerCount||(S.listenerCount=function(t,e){return t.listeners(e).length});var A=n(23),T=n(29);T.inherits=n(30);var x,k=n(31);k=k&&k.debuglog?k.debuglog("stream"):function(){},T.inherits(o,A),o.prototype.push=function(t,e){var n=this._readableState;return T.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new O(t,e),e="")),i(this,n,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return i(this,e,t,"",!0)},o.prototype.setEncoding=function(t){return x||(x=n(34).StringDecoder),this._readableState.decoder=new x(t),this._readableState.encoding=t,this};var P=8388608;o.prototype.read=function(t){k("read",t);var e=this._readableState,n=t;if((!T.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return k("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?w(this):l(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var r=e.needReadable;k("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,k("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,k("reading or ended",r)),r&&(k("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=c(n,e));var o;return o=t>0?m(t,e):null,T.isNull(o)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&w(this),T.isNull(o)||this.emit("data",o),o},o.prototype._read=function(t){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(t,n){function r(t){k("onunpipe"),t===l&&i()}function o(){k("onend"),t.end()}function i(){k("cleanup"),t.removeListener("close",c),t.removeListener("finish",f),t.removeListener("drain",v),t.removeListener("error",a),t.removeListener("unpipe",r),l.removeListener("end",o),l.removeListener("end",i),l.removeListener("data",u),!p.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function u(e){k("ondata");var n=t.write(e);!1===n&&(k("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(e){k("onerror",e),s(),t.removeListener("error",a),0===S.listenerCount(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",f),s()}function f(){k("onfinish"),t.removeListener("close",c),s()}function s(){k("unpipe"),l.unpipe(t)}var l=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,k("pipe count=%d opts=%j",p.pipesCount,n);var h=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,y=h?o:i;p.endEmitted?e.nextTick(y):l.once("end",y),t.on("unpipe",r);var v=d(l);return t.on("drain",v),l.on("data",u),t._events&&t._events.error?j(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",c),t.once("finish",f),t.emit("pipe",l),p.flowing||(k("pipe resume"),l.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}var o=E(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,n){var r=A.prototype.on.call(this,t,n);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var o=this._readableState;if(!o.readableListening)if(o.readableListening=!0,o.emittedReadable=!1,o.needReadable=!0,o.reading)o.length&&l(this,o);else{var i=this;e.nextTick(function(){k("readable nexttick read 0"),i.read(0)})}}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(k("resume"),t.flowing=!0,t.reading||(k("resume read 0"),this.read(0)),v(this,t)),this},o.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(k("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(o){if(k("wrapped data"),e.decoder&&(o=e.decoder.write(o)),o&&(e.objectMode||o.length)){var i=r.push(o);i||(n=!0,t.pause())}});for(var o in t)T.isFunction(t[o])&&T.isUndefined(this[o])&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return _(i,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){k("wrapped _read",e),n&&(n=!1,t.resume())},r},o._fromList=m}).call(e,n(18))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function r(t){return"boolean"==typeof t}function o(t){return null===t}function i(t){return null==t}function u(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function f(t){return void 0===t}function s(t){return"[object RegExp]"===v(t)}function l(t){return"object"==typeof t&&null!==t}function p(t){return"[object Date]"===v(t)}function h(t){return"[object Error]"===v(t)||t instanceof Error}function y(t){return"function"==typeof t}function d(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=o,e.isNullOrUndefined=i,e.isNumber=u,e.isString=a,e.isSymbol=c,e.isUndefined=f,e.isRegExp=s,e.isObject=l,e.isDate=p,e.isError=h,e.isFunction=y,e.isPrimitive=d,e.isBuffer=t.isBuffer}).call(e,n(14).Buffer)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){},function(t,e,n){(function(e){function r(t){return this instanceof r?(c.call(this,t),f.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new r(t)}function o(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function i(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}t.exports=r;var u=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=n(29);a.inherits=n(30);var c=n(27),f=n(33);a.inherits(r,c),i(u(f.prototype),function(t){r.prototype[t]||(r.prototype[t]=f.prototype[t])})}).call(e,n(18))},function(t,e,n){(function(e){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function o(t,e){var r=n(32);t=t||{};var o=t.highWaterMark,i=t.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.objectMode=!!t.objectMode,e instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var u=t.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){h(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function i(t){var e=n(32);return this instanceof i||this instanceof e?(this._writableState=new o(t,this),this.writable=!0,void j.call(this)):new i(t)}function u(t,n,r){var o=new Error("write after end");t.emit("error",o),e.nextTick(function(){r(o)})}function a(t,n,r,o){var i=!0;if(!(E.isBuffer(r)||E.isString(r)||E.isNullOrUndefined(r)||n.objectMode)){var u=new TypeError("Invalid non-string/buffer chunk");t.emit("error",u),e.nextTick(function(){o(u)}),i=!1}return i}function c(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&E.isString(e)&&(e=new _(e,n)),e}function f(t,e,n,o,i){n=c(e,n,o),E.isBuffer(n)&&(o="buffer");var u=e.objectMode?1:n.length;e.length+=u;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,o,i)):s(t,e,!1,u,n,o,i),a}function s(t,e,n,r,o,i,u){e.writelen=r,e.writecb=u,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function l(t,n,r,o,i){r?e.nextTick(function(){n.pendingcb--,i(o)}):(n.pendingcb--,i(o)),t._writableState.errorEmitted=!0,t.emit("error",o)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function h(t,n){var r=t._writableState,o=r.sync,i=r.writecb;if(p(r),n)l(t,r,o,n,i);else{var u=g(t,r);u||r.corked||r.bufferProcessing||!r.buffer.length||v(t,r),o?e.nextTick(function(){y(t,r,u,i)}):y(t,r,u,i)}}function y(t,e,n,r){n||d(t,e),e.pendingcb--,r(),m(t,e)}function d(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,s(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var o=e.buffer[r],i=o.chunk,u=o.encoding,a=o.callback,c=e.objectMode?1:i.length;if(s(t,e,!1,c,i,u,a),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function g(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function b(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function m(t,e){var n=g(t,e);return n&&(0===e.pendingcb?(b(t,e),e.finished=!0,t.emit("finish")):b(t,e)),n}function w(t,n,r){n.ending=!0,m(t,n),r&&(n.finished?e.nextTick(r):t.once("finish",r)),n.ended=!0}t.exports=i;var _=n(14).Buffer;i.WritableState=o;var E=n(29);E.inherits=n(30);var j=n(23);E.inherits(i,j),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(t,e,n){var r=this._writableState,o=!1;return E.isFunction(e)&&(n=e,e=null),E.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),E.isFunction(n)||(n=function(){}),r.ended?u(this,r,n):a(this,r,t,n)&&(r.pendingcb++,o=f(this,r,t,e,n)),o},i.prototype.cork=function(){var t=this._writableState;t.corked++},i.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||v(this,t))},i.prototype._write=function(t,e,n){n(new Error("not implemented"))},i.prototype._writev=null,i.prototype.end=function(t,e,n){var r=this._writableState;E.isFunction(t)?(n=t,t=null,e=null):E.isFunction(e)&&(n=e,e=null),E.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(e,n(18))},function(t,e,n){function r(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function o(t){return t.toString(this.encoding)}function i(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function u(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(14).Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;
break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=o)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var o=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,o),o-=this.charReceived),e+=t.toString(this.encoding,0,o);var o=e.length-1,r=e.charCodeAt(o);if(r>=55296&&r<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,o)}return e},f.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},f.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;e+=r.slice(0,n).toString(o)}return e}},function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(t,e,n){var r=t._transformState;r.transforming=!1;var o=r.writecb;if(!o)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,c.isNullOrUndefined(n)||t.push(n),o&&o(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);a.call(this,t),this._transformState=new r(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(t){u(e,t)}):u(e)})}function u(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=i;var a=n(32),c=n(29);c.inherits=n(30),c.inherits(i,a),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;c.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,n){function r(t){return this instanceof r?void o.call(this,t):new r(t)}t.exports=r;var o=n(35),i=n(29);i.inherits=n(30),i.inherits(r,o),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(33)},function(t,e,n){t.exports=n(32)},function(t,e,n){t.exports=n(35)},function(t,e,n){t.exports=n(36)},function(t,e,n){(function(t){function r(t){var e,n,r,o,i,s,l,p,h,y=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),d=new RegExp(y),v=Array.prototype.slice.call(arguments,1),g="",b=1;for(c.equal("string",typeof t);null!==(h=d.exec(t));)if(g+=h[1],t=t.substring(h[0].length),e=h[2]||"",n=h[3]||0,r=h[4]||"",o=h[6],i=!1,l=!1,s=" ","%"!=o){if(0===v.length)throw new Error("too few args to sprintf");if(p=v.shift(),b++,e.match(/[\' #]/))throw new Error("unsupported flags: "+e);if(r.length>0)throw new Error("non-zero precision not supported");switch(e.match(/-/)&&(i=!0),e.match(/0/)&&(s="0"),e.match(/\+/)&&(l=!0),o){case"s":if(void 0===p||null===p)throw new Error("argument "+b+": attempted to print undefined or null as a string");g+=u(s,n,i,p.toString());break;case"d":p=Math.floor(p);case"f":l=l&&p>0?"+":"",g+=l+u(s,n,i,p.toString());break;case"x":g+=u(s,n,i,p.toString(16));break;case"j":0===n&&(n=10),g+=f.inspect(p,!1,n);break;case"r":g+=a(p);break;default:throw new Error("unsupported conversion: "+o)}}else g+="%";return g+=t}function o(){var e=Array.prototype.slice.call(arguments);e.unshift(t.stdout),i.apply(null,e)}function i(t){var e=Array.prototype.slice.call(arguments,1);return t.write(r.apply(this,e))}function u(t,e,n,r){for(var o=r;o.length<e;)n?o+=t:o=t+o;return o}function a(t){var e;if(!(t instanceof Error))throw new Error(r("invalid type for %%r: %j",t));if(e="EXCEPTION: "+t.constructor.name+": "+t.stack,t.cause&&"function"==typeof t.cause){var n=t.cause();n&&(e+="\nCaused by: "+a(n))}return e}var c=n(19),f=n(20);e.sprintf=r,e.printf=o,e.fprintf=i}).call(e,n(18))},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function r(t){return"boolean"==typeof t}function o(t){return null===t}function i(t){return null==t}function u(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function f(t){return void 0===t}function s(t){return"[object RegExp]"===v(t)}function l(t){return"object"==typeof t&&null!==t}function p(t){return"[object Date]"===v(t)}function h(t){return"[object Error]"===v(t)||t instanceof Error}function y(t){return"function"==typeof t}function d(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=o,e.isNullOrUndefined=i,e.isNumber=u,e.isString=a,e.isSymbol=c,e.isUndefined=f,e.isRegExp=s,e.isObject=l,e.isDate=p,e.isError=h,e.isFunction=y,e.isPrimitive=d,e.isBuffer=t.isBuffer}).call(e,n(14).Buffer)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "services" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));var n=[].concat(t).reverse().join(" <- ");return new e({services:t},"Circular dependency found: %s",n)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Factory method for identifier "%s" returns nothing',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "methodName" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({methodName:t},'Method "%s" does not exist',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Service definition for "%s" has already been used to instantiate a service, refusing to modify it',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Undefined parameter for identifier "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Undefined service definition and instance for identifier "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));return new e({identifier:t},'Undefined service definition for identifier "%s"',t)}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(11),s=r(f),l=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),c(e,null,[{key:"createError",value:function(t){return new e({arg:t},'Unsupported arg of type "%s"',"undefined"==typeof t?"undefined":a(t))}}]),e}(s.default);e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":c(t);if(!Array.isArray(t)){var o=Object.keys(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(11),l=r(s),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),f(e,null,[{key:"createError",value:function(t,n){if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if(!(n instanceof Error))throw new TypeError('Value of argument "cause" violates contract.\n\nExpected:\nError\n\nGot:\n'+a(n));return new e({cause:n,info:{identifier:t}},'Error getting service "%s"',t)}}]),e}(l.default);e.default=p}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9kaS1kZXYuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDA5MGEzZDEwNjcxN2UyZjU2NjY4Iiwid2VicGFjazovLy8uL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlZmluaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21ldGhvZC1jYWxsLmpzIiwid2VicGFjazovLy8uL3NyYy90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVmZXJlbmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXJhbWV0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzLWNvbnN0cnVjdG9yLWRlZmluaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZhY3RvcnktZGVmaW5pdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvY2Fubm90LWxvY2F0ZS1zZXJ2aWNlLWNsYXNzLWNvbnN0cnVjdG9yLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZGlzbC1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZlcnJvci9saWIvdmVycm9yLmpzIiwid2VicGFjazovLy8uL34vdmVycm9yL34vYXNzZXJ0LXBsdXMvYXNzZXJ0LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9iYXNlNjQtanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaWVlZTc1NC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9hc3NlcnQvYXNzZXJ0LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvdXRpbC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi91dGlsL3N1cHBvcnQvaXNCdWZmZXJCcm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3N0cmVhbS1icm93c2VyaWZ5L2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyZWFtLWJyb3dzZXJpZnkvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcmVhZGFibGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vfi9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9zdHJpbmdfZGVjb2Rlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2R1cGxleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZlcnJvci9+L2V4dHNwcmludGYvbGliL2V4dHNwcmludGYuanMiLCJ3ZWJwYWNrOi8vLy4vfi92ZXJyb3Ivfi9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy9jaXJjdWxhci1kZXBlbmRlbmN5LWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZmFjdG9yeS1tZXRob2QtcmV0dXJucy1ub3RoaW5nLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvbWV0aG9kLWRvZXMtbm90LWV4aXN0LWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvc2VydmljZS1kZWZpbml0aW9uLWFscmVhZHktdXNlZC1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1wYXJhbWV0ZXItZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy91bmRlZmluZWQtc2VydmljZS1kZWZpbml0aW9uLWFuZC1pbnN0YW5jZS1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1zZXJ2aWNlLWRlZmluaXRpb24tZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy91bnN1cHBvcnRlZC1hcmd1bWVudC10eXBlLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZ2V0LXNlcnZpY2UtZXJyb3IuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiYSIsImkiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfY29udGFpbmVyIiwiX2NvbnRhaW5lcjIiLCJfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24iLCJfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24yIiwiX2ZhY3RvcnlEZWZpbml0aW9uIiwiX2ZhY3RvcnlEZWZpbml0aW9uMiIsIl9yZWZlcmVuY2UiLCJfcmVmZXJlbmNlMiIsIl9wYXJhbWV0ZXIiLCJfcGFyYW1ldGVyMiIsIl9tZXRob2RDYWxsIiwiX21ldGhvZENhbGwyIiwiX2Vycm9ycyIsIl9lcnJvcnMyIiwiQ29udGFpbmVyIiwiQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24iLCJGYWN0b3J5RGVmaW5pdGlvbiIsIlJlZmVyZW5jZSIsIlBhcmFtZXRlciIsIk1ldGhvZENhbGwiLCJoYXNPd25Qcm9wZXJ0eSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfaW5zcGVjdCIsImlucHV0IiwiZGVwdGgiLCJtYXhEZXB0aCIsIm1heEtleXMiLCJ1bmRlZmluZWQiLCJfdHlwZW9mIiwiQXJyYXkiLCJpc0FycmF5Iiwia2V5cyIsIk9iamVjdCIsImxlbmd0aCIsImNvbnN0cnVjdG9yIiwibmFtZSIsImluZGVudCIsInJlcGVhdCIsImVudHJpZXMiLCJzbGljZSIsIm1hcCIsImtleSIsInRlc3QiLCJKU09OIiwic3RyaW5naWZ5Iiwiam9pbiIsIl9yZXQiLCJ2IiwiZmlyc3QiLCJldmVyeSIsIml0ZW0iLCJ0cmltIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwicHJvdG90eXBlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9kZWZpbml0aW9uIiwiX2RlZmluaXRpb24yIiwiX2luamVjdGFibGVBcmd1bWVudHMiLCJJbmplY3RhYmxlQXJndW1lbnRzIiwic2NhbGFyIiwiaGFzSW5zdGFuY2UiLCJMb2FkaW5nT2JqZWN0IiwiYXJyIiwiTG9jYXRvckNhbGxiYWNrIiwiX3NlcnZpY2VzQnlJZGVudGlmaWVyIiwiX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllciIsIl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyIiwiX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllciIsIl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMiLCJfaW5zdGFuY2VMb2NhdG9ycyIsIl9yZWYiLCJfaWQiLCJQcm9taXNlIiwiX3RoaXMiLCJfbGVuIiwiYXJndW1lbnRzIiwiaWRlbnRpZmllcnMiLCJfa2V5IiwicHJvbWlzZXMiLCJmb3JFYWNoIiwiaWRlbnRpZmllciIsInB1c2giLCJfZG9HZXRTZXJ2aWNlIiwiY2F0Y2giLCJlIiwiR2V0U2VydmljZUVycm9yIiwiY3JlYXRlRXJyb3IiLCJhbGwiLCJfcmVmMiIsIl9pZDIiLCJfcmVmMyIsIl9pZDMiLCJoYXNEZWZpbml0aW9uIiwiX3JlZjQiLCJfaWQ0IiwiX3JlZjUiLCJfaWQ1IiwiX3JlZjYiLCJfaWQ2IiwiZGVmaW5pdGlvbiIsIlVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IiLCJfcmVmNyIsIl9pZDciLCJTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IiLCJfcmVmOCIsIl9pZDgiLCJVbmRlZmluZWRQYXJhbWV0ZXJFcnJvciIsIl9yZWY5IiwiX2lkOSIsIl9yZWYxMCIsIl9pZDEwIiwibG9jYXRvciIsIl9yZWYxMSIsIl9pZDExIiwiX3JlZjEyIiwiX2lkMTIiLCJsb2FkaW5nIiwiX3JlZjEzIiwiX2lkMTMiLCJfdGhpczIiLCJfcmVzb2x2ZUFyZ3MiLCJhcmdzIiwidGhlbiIsIl9yZWYxNCIsIl9pZDE0IiwiY2xhc3NDb25zdHJ1Y3RvciIsIl9sb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvciIsImNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyIiwiRnVuY3Rpb24iLCJiaW5kIiwiYXBwbHkiLCJjb25jYXQiLCJyZWplY3QiLCJGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciIsInJlc29sdmUiLCJnZXRNZXRob2RDYWxsIiwiX3JlZjE2IiwiX2lkMTYiLCJtZXRob2RDYWxscyIsIm1ldGhvZENhbGxzUHJvbWlzZXMiLCJtZXRob2RDYWxsIiwiY2FsbE1ldGhvZCIsIm1ldGhvZFRvQ2FsbCIsIl9yZWYxNSIsIl9pZDE1IiwibWV0aG9kTmFtZSIsIk1ldGhvZERvZXNOb3RFeGlzdEVycm9yIiwiX3JlZjE3IiwiX2lkMTciLCJfcmVmMTgiLCJfaWQxOCIsIkNhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IiLCJfcmVmMTkiLCJfaWQxOSIsIl90aGlzMyIsImFyZyIsIl9kZWVwQ29weUxvYWRpbmciLCJVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yIiwiZ2V0UGFyYW1ldGVyIiwiX3JlZjIxIiwiX2lkMjEiLCJzZXJ2aWNlcyIsIkNpcmN1bGFyRGVwZW5kZW5jeUVycm9yIiwicmVzdWx0IiwiX2xvY2F0ZUluc3RhbmNlIiwiVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yIiwicHJvbWlzZSIsIl9pbnN0YW50aWF0ZSIsImdldERlZmluaXRpb24iLCJuZXdMb2FkaW5nIiwiRGVmaW5pdGlvbiIsIl9tZXRob2RDYWxscyIsIl9hcmdzIiwic2V0IiwiZ2V0IiwiX25hbWUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX0RlZmluaXRpb24iLCJnZXRQcm90b3R5cGVPZiIsIl9jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciIsIl9mYWN0b3J5IiwiX2Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IiLCJfY2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcjIiLCJfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IiLCJfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IyIiwiX2Rpc2xFcnJvciIsIl9kaXNsRXJyb3IyIiwiX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yIiwiX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yMiIsIl9tZXRob2REb2VzTm90RXhpc3RFcnJvciIsIl9tZXRob2REb2VzTm90RXhpc3RFcnJvcjIiLCJfc2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yIiwiX3NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjIiLCJfdW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IiLCJfdW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IyIiwiX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciIsIl91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IyIiwiX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IiLCJfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcjIiLCJfdW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciIsIl91bnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yMiIsIl9nZXRTZXJ2aWNlRXJyb3IiLCJfZ2V0U2VydmljZUVycm9yMiIsIkRpc2xFcnJvciIsIl9EaXNsRXJyb3IiLCJjbGFzc05hbWUiLCJfdmVycm9yIiwiX3ZlcnJvcjIiLCJfVkVycm9yIiwicGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyIsImFyZ3YiLCJvcHRpb25zIiwic3ByaW50Zl9hcmdzIiwic2hvcnRtZXNzYWdlIiwiayIsIm1vZF9hc3NlcnRwbHVzIiwib2JqZWN0IiwiYm9vbCIsInN0cmljdCIsImFycmF5IiwibW9kX2lzRXJyb3IiLCJjYXVzZSIsInN0cmluZyIsInNwcmludGYiLCJWRXJyb3IiLCJwYXJzZWQiLCJjdG9yIiwibWVzc2FnZSIsImpzZV9zaG9ydG1zZyIsIm9rIiwianNlX2NhdXNlIiwic2tpcENhdXNlTWVzc2FnZSIsImpzZV9pbmZvIiwiaW5mbyIsIkVycm9yIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJjb25zdHJ1Y3Rvck9wdCIsIlNFcnJvciIsIk11bHRpRXJyb3IiLCJlcnJvcnMiLCJhc2VfZXJyb3JzIiwiV0Vycm9yIiwibW9kX3V0aWwiLCJtb2RfZXh0c3ByaW50ZiIsImlzRXJyb3IiLCJpbmhlcml0cyIsInRvU3RyaW5nIiwic3RyIiwiZXJyIiwicnYiLCJmaW5kQ2F1c2VCeU5hbWUiLCJmdWxsU3RhY2siLCJzdGFjayIsIkJ1ZmZlciIsInByb2Nlc3MiLCJfY2FwaXRhbGl6ZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiX3Rvc3MiLCJleHBlY3RlZCIsIm9wZXIiLCJhY3R1YWwiLCJhc3NlcnQiLCJBc3NlcnRpb25FcnJvciIsInV0aWwiLCJmb3JtYXQiLCJvcGVyYXRvciIsInN0YWNrU3RhcnRGdW5jdGlvbiIsImNhbGxlciIsIl9nZXRDbGFzcyIsIm5vb3AiLCJfc2V0RXhwb3J0cyIsIm5kZWJ1ZyIsIm91dCIsInR5cGVzIiwiZW52IiwiTk9ERV9OREVCVUciLCJtc2ciLCJ0eXBlIiwiY2hlY2siLCJTdHJlYW0iLCJVVUlEX1JFR0VYUCIsImZ1bmMiLCJudW1iZXIiLCJpc05hTiIsImZpbml0ZSIsImlzRmluaXRlIiwiYnVmZmVyIiwiaXNCdWZmZXIiLCJzdHJlYW0iLCJkYXRlIiwiRGF0ZSIsInJlZ2V4cCIsIlJlZ0V4cCIsInV1aWQiLCJnbG9iYWwiLCJ0eXBlZEFycmF5U3VwcG9ydCIsIlVpbnQ4QXJyYXkiLCJmb28iLCJzdWJhcnJheSIsImJ5dGVMZW5ndGgiLCJrTWF4TGVuZ3RoIiwiVFlQRURfQVJSQVlfU1VQUE9SVCIsImNyZWF0ZUJ1ZmZlciIsInRoYXQiLCJSYW5nZUVycm9yIiwiZW5jb2RpbmdPck9mZnNldCIsImFsbG9jVW5zYWZlIiwiZnJvbSIsIkFycmF5QnVmZmVyIiwiZnJvbUFycmF5QnVmZmVyIiwiZnJvbVN0cmluZyIsImZyb21PYmplY3QiLCJhc3NlcnRTaXplIiwic2l6ZSIsImFsbG9jIiwiZmlsbCIsImVuY29kaW5nIiwiY2hlY2tlZCIsImlzRW5jb2RpbmciLCJ3cml0ZSIsImZyb21BcnJheUxpa2UiLCJieXRlT2Zmc2V0IiwibGVuIiwiY29weSIsImlzbmFuIiwiZGF0YSIsIlNsb3dCdWZmZXIiLCJpc1ZpZXciLCJsb3dlcmVkQ2FzZSIsInV0ZjhUb0J5dGVzIiwiYmFzZTY0VG9CeXRlcyIsInRvTG93ZXJDYXNlIiwic2xvd1RvU3RyaW5nIiwic3RhcnQiLCJlbmQiLCJoZXhTbGljZSIsInV0ZjhTbGljZSIsImFzY2lpU2xpY2UiLCJsYXRpbjFTbGljZSIsImJhc2U2NFNsaWNlIiwidXRmMTZsZVNsaWNlIiwic3dhcCIsImIiLCJuIiwiYmlkaXJlY3Rpb25hbEluZGV4T2YiLCJ2YWwiLCJkaXIiLCJhcnJheUluZGV4T2YiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJyZWFkIiwiYnVmIiwiaW5kZXhTaXplIiwicmVhZFVJbnQxNkJFIiwiYXJyTGVuZ3RoIiwidmFsTGVuZ3RoIiwiU3RyaW5nIiwiZm91bmRJbmRleCIsImZvdW5kIiwiaiIsImhleFdyaXRlIiwib2Zmc2V0IiwiTnVtYmVyIiwicmVtYWluaW5nIiwic3RyTGVuIiwicGFyc2VJbnQiLCJzdWJzdHIiLCJ1dGY4V3JpdGUiLCJibGl0QnVmZmVyIiwiYXNjaWlXcml0ZSIsImFzY2lpVG9CeXRlcyIsImxhdGluMVdyaXRlIiwiYmFzZTY0V3JpdGUiLCJ1Y3MyV3JpdGUiLCJ1dGYxNmxlVG9CeXRlcyIsImJhc2U2NCIsImZyb21CeXRlQXJyYXkiLCJNYXRoIiwibWluIiwicmVzIiwiZmlyc3RCeXRlIiwiY29kZVBvaW50IiwiYnl0ZXNQZXJTZXF1ZW5jZSIsInNlY29uZEJ5dGUiLCJ0aGlyZEJ5dGUiLCJmb3VydGhCeXRlIiwidGVtcENvZGVQb2ludCIsImRlY29kZUNvZGVQb2ludHNBcnJheSIsImNvZGVQb2ludHMiLCJNQVhfQVJHVU1FTlRTX0xFTkdUSCIsImZyb21DaGFyQ29kZSIsInJldCIsInRvSGV4IiwiYnl0ZXMiLCJjaGVja09mZnNldCIsImV4dCIsImNoZWNrSW50IiwibWF4Iiwib2JqZWN0V3JpdGVVSW50MTYiLCJsaXR0bGVFbmRpYW4iLCJvYmplY3RXcml0ZVVJbnQzMiIsImNoZWNrSUVFRTc1NCIsIndyaXRlRmxvYXQiLCJub0Fzc2VydCIsImllZWU3NTQiLCJ3cml0ZURvdWJsZSIsImJhc2U2NGNsZWFuIiwic3RyaW5ndHJpbSIsInJlcGxhY2UiLCJJTlZBTElEX0JBU0U2NF9SRSIsInVuaXRzIiwiSW5maW5pdHkiLCJsZWFkU3Vycm9nYXRlIiwiY2hhckNvZGVBdCIsImJ5dGVBcnJheSIsImhpIiwibG8iLCJ0b0J5dGVBcnJheSIsInNyYyIsImRzdCIsIklOU1BFQ1RfTUFYX0JZVEVTIiwicG9vbFNpemUiLCJfYXVnbWVudCIsInNwZWNpZXMiLCJhbGxvY1Vuc2FmZVNsb3ciLCJfaXNCdWZmZXIiLCJjb21wYXJlIiwieCIsInkiLCJsaXN0IiwicG9zIiwic3dhcDE2Iiwic3dhcDMyIiwic3dhcDY0IiwiZXF1YWxzIiwiaW5zcGVjdCIsIm1hdGNoIiwidGhpc1N0YXJ0IiwidGhpc0VuZCIsInRoaXNDb3B5IiwidGFyZ2V0Q29weSIsImluY2x1ZGVzIiwidG9KU09OIiwiX2FyciIsIm5ld0J1ZiIsInNsaWNlTGVuIiwicmVhZFVJbnRMRSIsIm11bCIsInJlYWRVSW50QkUiLCJyZWFkVUludDgiLCJyZWFkVUludDE2TEUiLCJyZWFkVUludDMyTEUiLCJyZWFkVUludDMyQkUiLCJyZWFkSW50TEUiLCJwb3ciLCJyZWFkSW50QkUiLCJyZWFkSW50OCIsInJlYWRJbnQxNkxFIiwicmVhZEludDE2QkUiLCJyZWFkSW50MzJMRSIsInJlYWRJbnQzMkJFIiwicmVhZEZsb2F0TEUiLCJyZWFkRmxvYXRCRSIsInJlYWREb3VibGVMRSIsInJlYWREb3VibGVCRSIsIndyaXRlVUludExFIiwibWF4Qnl0ZXMiLCJ3cml0ZVVJbnRCRSIsIndyaXRlVUludDgiLCJmbG9vciIsIndyaXRlVUludDE2TEUiLCJ3cml0ZVVJbnQxNkJFIiwid3JpdGVVSW50MzJMRSIsIndyaXRlVUludDMyQkUiLCJ3cml0ZUludExFIiwibGltaXQiLCJzdWIiLCJ3cml0ZUludEJFIiwid3JpdGVJbnQ4Iiwid3JpdGVJbnQxNkxFIiwid3JpdGVJbnQxNkJFIiwid3JpdGVJbnQzMkxFIiwid3JpdGVJbnQzMkJFIiwid3JpdGVGbG9hdExFIiwid3JpdGVGbG9hdEJFIiwid3JpdGVEb3VibGVMRSIsIndyaXRlRG91YmxlQkUiLCJ0YXJnZXRTdGFydCIsImNvZGUiLCJwbGFjZUhvbGRlcnNDb3VudCIsImI2NCIsImwiLCJ0bXAiLCJwbGFjZUhvbGRlcnMiLCJBcnIiLCJMIiwicmV2TG9va3VwIiwidHJpcGxldFRvQmFzZTY0IiwibnVtIiwibG9va3VwIiwiZW5jb2RlQ2h1bmsiLCJ1aW50OCIsIm91dHB1dCIsImV4dHJhQnl0ZXMiLCJwYXJ0cyIsIm1heENodW5rTGVuZ3RoIiwibGVuMiIsImlzTEUiLCJtTGVuIiwibkJ5dGVzIiwiZUxlbiIsImVNYXgiLCJlQmlhcyIsIm5CaXRzIiwiZCIsInMiLCJOYU4iLCJydCIsImFicyIsImxvZyIsIkxOMiIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwibWFya2VyIiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsInJ1biIsIkl0ZW0iLCJuZXh0VGljayIsInRpdGxlIiwiYnJvd3NlciIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwidW1hc2siLCJwVG9TdHJpbmciLCJhcnJidWYiLCJEYXRhVmlldyIsImdldE5hbWUiLCJpc0Z1bmN0aW9uIiwiZnVuY3Rpb25zSGF2ZU5hbWVzIiwicmVnZXgiLCJ0cnVuY2F0ZSIsInNvbWV0aGluZyIsInJhd25hbWUiLCJnZXRNZXNzYWdlIiwiZmFpbCIsIl9kZWVwRXF1YWwiLCJtZW1vcyIsImlzRGF0ZSIsImdldFRpbWUiLCJpc1JlZ0V4cCIsInNvdXJjZSIsIm11bHRpbGluZSIsImxhc3RJbmRleCIsImlnbm9yZUNhc2UiLCJGbG9hdDMyQXJyYXkiLCJGbG9hdDY0QXJyYXkiLCJhY3R1YWxJbmRleCIsIm9iakVxdWl2IiwiaXNBcmd1bWVudHMiLCJhY3R1YWxWaXNpdGVkT2JqZWN0cyIsImlzUHJpbWl0aXZlIiwiYUlzQXJncyIsImJJc0FyZ3MiLCJwU2xpY2UiLCJrYSIsIm9iamVjdEtleXMiLCJrYiIsInNvcnQiLCJub3REZWVwU3RyaWN0RXF1YWwiLCJleHBlY3RlZEV4Y2VwdGlvbiIsImlzUHJvdG90eXBlT2YiLCJfdHJ5QmxvY2siLCJibG9jayIsImVycm9yIiwiX3Rocm93cyIsInNob3VsZFRocm93IiwidXNlclByb3ZpZGVkTWVzc2FnZSIsImlzVW53YW50ZWRFeGNlcHRpb24iLCJpc1VuZXhwZWN0ZWRFeGNlcHRpb24iLCJoYXNPd24iLCJnZW5lcmF0ZWRNZXNzYWdlIiwiZm5fbmFtZSIsImlkeCIsIm5leHRfbGluZSIsInN1YnN0cmluZyIsImVxdWFsIiwibm90RXF1YWwiLCJkZWVwRXF1YWwiLCJkZWVwU3RyaWN0RXF1YWwiLCJub3REZWVwRXF1YWwiLCJzdHJpY3RFcXVhbCIsIm5vdFN0cmljdEVxdWFsIiwidGhyb3dzIiwiZG9lc05vdFRocm93IiwiaWZFcnJvciIsIm9wdHMiLCJjdHgiLCJzZWVuIiwic3R5bGl6ZSIsInN0eWxpemVOb0NvbG9yIiwiY29sb3JzIiwiaXNCb29sZWFuIiwic2hvd0hpZGRlbiIsIl9leHRlbmQiLCJpc1VuZGVmaW5lZCIsImN1c3RvbUluc3BlY3QiLCJzdHlsaXplV2l0aENvbG9yIiwiZm9ybWF0VmFsdWUiLCJzdHlsZVR5cGUiLCJzdHlsZSIsInN0eWxlcyIsImFycmF5VG9IYXNoIiwiaGFzaCIsInJlY3Vyc2VUaW1lcyIsImlzU3RyaW5nIiwicHJpbWl0aXZlIiwiZm9ybWF0UHJpbWl0aXZlIiwidmlzaWJsZUtleXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZm9ybWF0RXJyb3IiLCJiYXNlIiwiYnJhY2VzIiwidG9VVENTdHJpbmciLCJmb3JtYXRBcnJheSIsImZvcm1hdFByb3BlcnR5IiwicG9wIiwicmVkdWNlVG9TaW5nbGVTdHJpbmciLCJzaW1wbGUiLCJpc051bWJlciIsImlzTnVsbCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJzcGxpdCIsImxpbmUiLCJudW1MaW5lc0VzdCIsInJlZHVjZSIsInByZXYiLCJjdXIiLCJhciIsImlzTnVsbE9yVW5kZWZpbmVkIiwiaXNTeW1ib2wiLCJyZSIsImlzT2JqZWN0Iiwib2JqZWN0VG9TdHJpbmciLCJvIiwicGFkIiwidGltZXN0YW1wIiwidGltZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJnZXREYXRlIiwibW9udGhzIiwiZ2V0TW9udGgiLCJwcm9wIiwiZm9ybWF0UmVnRXhwIiwiZiIsIm9iamVjdHMiLCJfIiwiZGVwcmVjYXRlIiwiZm4iLCJkZXByZWNhdGVkIiwid2FybmVkIiwidGhyb3dEZXByZWNhdGlvbiIsInRyYWNlRGVwcmVjYXRpb24iLCJjb25zb2xlIiwidHJhY2UiLCJub0RlcHJlY2F0aW9uIiwiZGVidWdFbnZpcm9uIiwiZGVidWdzIiwiZGVidWdsb2ciLCJOT0RFX0RFQlVHIiwicGlkIiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImludmVyc2UiLCJ3aGl0ZSIsImdyZXkiLCJibGFjayIsImJsdWUiLCJjeWFuIiwiZ3JlZW4iLCJtYWdlbnRhIiwicmVkIiwieWVsbG93Iiwic3BlY2lhbCIsImJvb2xlYW4iLCJudWxsIiwib3JpZ2luIiwiYWRkIiwic3VwZXJDdG9yIiwic3VwZXJfIiwiVGVtcEN0b3IiLCJFRSIsIkV2ZW50RW1pdHRlciIsIlJlYWRhYmxlIiwiV3JpdGFibGUiLCJEdXBsZXgiLCJUcmFuc2Zvcm0iLCJQYXNzVGhyb3VnaCIsInBpcGUiLCJkZXN0Iiwib25kYXRhIiwiY2h1bmsiLCJwYXVzZSIsIm9uZHJhaW4iLCJyZWFkYWJsZSIsInJlc3VtZSIsIm9uZW5kIiwiZGlkT25FbmQiLCJvbmNsb3NlIiwiZGVzdHJveSIsIm9uZXJyb3IiLCJlciIsImNsZWFudXAiLCJsaXN0ZW5lckNvdW50IiwiX2lzU3RkaW8iLCJfZXZlbnRzIiwiX21heExpc3RlbmVycyIsImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCJzZXRNYXhMaXN0ZW5lcnMiLCJoYW5kbGVyIiwibGlzdGVuZXJzIiwiY29udGV4dCIsImxpc3RlbmVyIiwibmV3TGlzdGVuZXIiLCJnIiwiZmlyZWQiLCJwb3NpdGlvbiIsInNwbGljZSIsImV2bGlzdGVuZXIiLCJlbWl0dGVyIiwiUkVBREFCTEVfU1RSRUFNIiwiUmVhZGFibGVTdGF0ZSIsImh3bSIsImhpZ2hXYXRlck1hcmsiLCJkZWZhdWx0SHdtIiwib2JqZWN0TW9kZSIsInBpcGVzIiwicGlwZXNDb3VudCIsImZsb3dpbmciLCJlbmRlZCIsImVuZEVtaXR0ZWQiLCJyZWFkaW5nIiwic3luYyIsIm5lZWRSZWFkYWJsZSIsImVtaXR0ZWRSZWFkYWJsZSIsInJlYWRhYmxlTGlzdGVuaW5nIiwicmVhZGFibGVPYmplY3RNb2RlIiwiZGVmYXVsdEVuY29kaW5nIiwicmFuT3V0IiwiYXdhaXREcmFpbiIsInJlYWRpbmdNb3JlIiwiZGVjb2RlciIsIlN0cmluZ0RlY29kZXIiLCJfcmVhZGFibGVTdGF0ZSIsInJlYWRhYmxlQWRkQ2h1bmsiLCJzdGF0ZSIsImFkZFRvRnJvbnQiLCJjaHVua0ludmFsaWQiLCJvbkVvZkNodW5rIiwidW5zaGlmdCIsImVtaXRSZWFkYWJsZSIsIm1heWJlUmVhZE1vcmUiLCJuZWVkTW9yZURhdGEiLCJyb3VuZFVwVG9OZXh0UG93ZXJPZjIiLCJNQVhfSFdNIiwiaG93TXVjaFRvUmVhZCIsImRlYnVnIiwiZW1pdFJlYWRhYmxlXyIsImZsb3ciLCJtYXliZVJlYWRNb3JlXyIsInBpcGVPbkRyYWluIiwicmVzdW1lU2NoZWR1bGVkIiwicmVzdW1lXyIsImZyb21MaXN0Iiwic3RyaW5nTW9kZSIsInNoaWZ0IiwiY3B5IiwiZW5kUmVhZGFibGUiLCJ4cyIsInNldEVuY29kaW5nIiwiZW5jIiwibk9yaWciLCJkb1JlYWQiLCJfcmVhZCIsInBpcGVPcHRzIiwib251bnBpcGUiLCJvbmZpbmlzaCIsIl93cml0YWJsZVN0YXRlIiwibmVlZERyYWluIiwidW5waXBlIiwiZG9FbmQiLCJzdGRvdXQiLCJzdGRlcnIiLCJlbmRGbiIsImRlc3RzIiwiZXYiLCJ3cmFwIiwicGF1c2VkIiwibWV0aG9kIiwiZXZlbnRzIiwiX2Zyb21MaXN0IiwiYWxsb3dIYWxmT3BlbiIsIldyaXRlUmVxIiwiY2IiLCJjYWxsYmFjayIsIldyaXRhYmxlU3RhdGUiLCJ3cml0YWJsZU9iamVjdE1vZGUiLCJlbmRpbmciLCJmaW5pc2hlZCIsIm5vRGVjb2RlIiwiZGVjb2RlU3RyaW5ncyIsIndyaXRpbmciLCJjb3JrZWQiLCJidWZmZXJQcm9jZXNzaW5nIiwib253cml0ZSIsIndyaXRlY2IiLCJ3cml0ZWxlbiIsInBlbmRpbmdjYiIsInByZWZpbmlzaGVkIiwiZXJyb3JFbWl0dGVkIiwid3JpdGVBZnRlckVuZCIsInZhbGlkQ2h1bmsiLCJ2YWxpZCIsImRlY29kZUNodW5rIiwid3JpdGVPckJ1ZmZlciIsImRvV3JpdGUiLCJ3cml0ZXYiLCJfd3JpdGV2IiwiX3dyaXRlIiwib253cml0ZUVycm9yIiwib253cml0ZVN0YXRlVXBkYXRlIiwibmVlZEZpbmlzaCIsImNsZWFyQnVmZmVyIiwiYWZ0ZXJXcml0ZSIsIm9ud3JpdGVEcmFpbiIsImZpbmlzaE1heWJlIiwiY2JzIiwiZW50cnkiLCJwcmVmaW5pc2giLCJuZWVkIiwiZW5kV3JpdGFibGUiLCJjb3JrIiwidW5jb3JrIiwiYXNzZXJ0RW5jb2RpbmciLCJpc0J1ZmZlckVuY29kaW5nIiwicGFzc1Rocm91Z2hXcml0ZSIsInV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXIiLCJjaGFyUmVjZWl2ZWQiLCJjaGFyTGVuZ3RoIiwiYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXIiLCJzdXJyb2dhdGVTaXplIiwiZGV0ZWN0SW5jb21wbGV0ZUNoYXIiLCJjaGFyQnVmZmVyIiwiY2hhclN0ciIsImF2YWlsYWJsZSIsImNoYXJDb2RlIiwiY3IiLCJUcmFuc2Zvcm1TdGF0ZSIsImFmdGVyVHJhbnNmb3JtIiwibmVlZFRyYW5zZm9ybSIsInRyYW5zZm9ybWluZyIsIndyaXRlY2h1bmsiLCJ0cyIsIl90cmFuc2Zvcm1TdGF0ZSIsInJzIiwiX2ZsdXNoIiwiZG9uZSIsIndzIiwiX3RyYW5zZm9ybSIsIndyaXRlZW5jb2RpbmciLCJqc1NwcmludGYiLCJmbXQiLCJmbGFncyIsIndpZHRoIiwicHJlY2lzaW9uIiwiY29udmVyc2lvbiIsImxlZnQiLCJzaWduIiwiYXJnbiIsIm1vZF9hc3NlcnQiLCJleGVjIiwiZG9QYWQiLCJkdW1wRXhjZXB0aW9uIiwianNQcmludGYiLCJqc0ZwcmludGYiLCJjaHIiLCJleCIsImNleCIsInByaW50ZiIsImZwcmludGYiLCJwYXRoIiwicmV2ZXJzZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxtQkFBQUMsVUFBQSxnQkFBQUMsUUFDQUEsT0FBQUQsUUFBQUQsUUFDQSxzQkFBQUcsZ0JBQUFDLElBQ0FELFVBQUFILE9BQ0EsQ0FDQSxHQUFBSyxHQUFBTCxHQUNBLFFBQUFNLEtBQUFELElBQUEsZ0JBQUFKLGlCQUFBRixHQUFBTyxHQUFBRCxFQUFBQyxLQUVDQyxLQUFBLFdBQ0QsTUNBZ0IsVUFBVUMsR0NOMUIsUUFB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QTdOLEVBQUEsSXBEd3NVSzhOLEVBQWNyTixFQUF1Qm9OLEdvRGpzVXBDNUcsRXBEZ3RVaUIsU0FBVStILEdBRzlCLFFBQVMvSCxLQUdQLE1BRkEvRSxHQUFnQnBDLEtBQU1tSCxHQUVmMkYsRUFBMkI5TSxNQUFPbUgsRUFBZ0JtRyxXQUFhcEssT0FBT3NLLGVBQWVyRyxJQUFrQjZDLE1BQU1oSyxLQUFNeUcsWUErQjVILE1BcENBd0csR0FBVTlGLEVBQWlCK0gsR0FRM0J2SyxFQUFhd0MsRUFBaUIsT0FDNUJ4RCxJQUFLLGNBU0xZLE1BQU8sU29EM3RVU3VDLEVBQW9CcUosR0FBK0IsbUJBQW5EckosR0FBbUQsU0FBQXZFLFdBQUEsbUZBQUFDLEVBQW5Ec0UsR0FBbUQsTUFBL0JxSixZQUFPYSxRQUF3QixTQUFBek8sV0FBQSw2RUFBQUMsRUFBL0IyTixHQUNyQyxPQUFPLElBQUloSixJQUVQZ0osUUFDQVksTUFDRWpLLGVBR0osNkJBQ0FBLE9wRG91VUlLLEdBQ1A2RyxFQUFZbE4sUUFFZHBCLEdBQVFvQixRb0RsdVVNcUciLCJmaWxlIjoiZGktZGV2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IGZhY3RvcnkoKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2NvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb250YWluZXIpO1xuXHRcblx0dmFyIF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uKTtcblx0XG5cdHZhciBfZmFjdG9yeURlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9mYWN0b3J5RGVmaW5pdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mYWN0b3J5RGVmaW5pdGlvbik7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWZlcmVuY2UpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyYW1ldGVyKTtcblx0XG5cdHZhciBfbWV0aG9kQ2FsbCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX21ldGhvZENhbGwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWV0aG9kQ2FsbCk7XG5cdFxuXHR2YXIgX2Vycm9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX2Vycm9yczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lcnJvcnMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBfZXhwb3J0cyA9IHtcblx0ICBDb250YWluZXI6IF9jb250YWluZXIyLmRlZmF1bHQsXG5cdCAgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb246IF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbjIuZGVmYXVsdCxcblx0ICBGYWN0b3J5RGVmaW5pdGlvbjogX2ZhY3RvcnlEZWZpbml0aW9uMi5kZWZhdWx0LFxuXHQgIFJlZmVyZW5jZTogX3JlZmVyZW5jZTIuZGVmYXVsdCxcblx0ICBQYXJhbWV0ZXI6IF9wYXJhbWV0ZXIyLmRlZmF1bHQsXG5cdCAgTWV0aG9kQ2FsbDogX21ldGhvZENhbGwyLmRlZmF1bHRcblx0fTtcblx0XG5cdGZvciAodmFyIGkgaW4gX2Vycm9yczIuZGVmYXVsdCkge1xuXHQgIGlmIChfZXJyb3JzMi5kZWZhdWx0Lmhhc093blByb3BlcnR5KGkpKSB7XG5cdCAgICBfZXhwb3J0c1tpXSA9IF9lcnJvcnMyLmRlZmF1bHRbaV07XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9leHBvcnRzO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kZWZpbml0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZGVmaW5pdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbml0aW9uKTtcblx0XG5cdHZhciBfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbik7XG5cdFxuXHR2YXIgX2ZhY3RvcnlEZWZpbml0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfZmFjdG9yeURlZmluaXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmFjdG9yeURlZmluaXRpb24pO1xuXHRcblx0dmFyIF9yZWZlcmVuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9yZWZlcmVuY2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVmZXJlbmNlKTtcblx0XG5cdHZhciBfcGFyYW1ldGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfcGFyYW1ldGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcmFtZXRlcik7XG5cdFxuXHR2YXIgX21ldGhvZENhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9tZXRob2RDYWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZENhbGwpO1xuXHRcblx0dmFyIF9lcnJvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIEluamVjdGFibGVBcmd1bWVudHMgPSBfaW5qZWN0YWJsZUFyZ3VtZW50cy5JbmplY3RhYmxlQXJndW1lbnRzO1xuXHRcblx0dmFyIHNjYWxhciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBzY2FsYXIoaW5wdXQpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicgfHwgaW5wdXQgPT0gbnVsbDtcblx0ICB9XG5cdFxuXHQgIDtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2NhbGFyLCBTeW1ib2wuaGFzSW5zdGFuY2UsIHtcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShpbnB1dCkge1xuXHQgICAgICByZXR1cm4gc2NhbGFyKGlucHV0KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gc2NhbGFyO1xuXHR9KCk7XG5cdFxuXHR2YXIgTG9hZGluZ09iamVjdCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBMb2FkaW5nT2JqZWN0KGlucHV0KSB7XG5cdCAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCAmJiBpbnB1dC5vYmogaW5zdGFuY2VvZiBPYmplY3QgJiYgQXJyYXkuaXNBcnJheShpbnB1dC5hcnIpICYmIGlucHV0LmFyci5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICA7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvYWRpbmdPYmplY3QsIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGlucHV0KSB7XG5cdCAgICAgIHJldHVybiBMb2FkaW5nT2JqZWN0KGlucHV0KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gTG9hZGluZ09iamVjdDtcblx0fSgpO1xuXHRcblx0dmFyIExvY2F0b3JDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBMb2NhdG9yQ2FsbGJhY2soaW5wdXQpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdmdW5jdGlvbic7XG5cdCAgfVxuXHRcblx0ICA7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2F0b3JDYWxsYmFjaywgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoaW5wdXQpIHtcblx0ICAgICAgcmV0dXJuIExvY2F0b3JDYWxsYmFjayhpbnB1dCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIExvY2F0b3JDYWxsYmFjaztcblx0fSgpO1xuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0XG5cdHZhciBDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdG9yXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gQ29udGFpbmVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRhaW5lcik7XG5cdFxuXHQgICAgdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXIgPSB7fTtcblx0ICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllciA9IHt9O1xuXHQgICAgdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllciA9IHt9O1xuXHQgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyID0ge307XG5cdCAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMgPSBbXTtcblx0ICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMgPSBbXTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgc2VydmljZSBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsuLi5zdHJpbmd9IGlkZW50aWZpZXJzXG5cdCAgICpcblx0ICAgKiBAcHJvbWlzZVxuXHQgICAqIEByZXNvbHZlIHtBcnJheTxPYmplY3R8RnVuY3Rpb24+fSBhbiBhcnJheSBvZiBzZXJ2aWNlc1xuXHQgICAqIEByZWplY3Qge0dldFNlcnZpY2VFcnJvcn0gaW4gY2FzZSBhbnkgRXJyb3IgaXMgcmFpc2VkIHdoZW4gaW5zdGFudGlhdGluZyBzZXJ2aWNlXG5cdCAgICpcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQ29udGFpbmVyLCBbe1xuXHQgICAga2V5OiAnZ2V0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICBmdW5jdGlvbiBfcmVmKF9pZCkge1xuXHQgICAgICAgIGlmICghKF9pZCBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuUHJvbWlzZTxBcnJheTxPYmplY3QgfCBGdW5jdGlvbj4+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBpZGVudGlmaWVycyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgIGlkZW50aWZpZXJzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIShBcnJheS5pc0FycmF5KGlkZW50aWZpZXJzKSAmJiBpZGVudGlmaWVycy5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZyc7XG5cdCAgICAgIH0pKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllcnNcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheTxzdHJpbmc+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVycykpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcblx0XG5cdCAgICAgIGlkZW50aWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcblx0ICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLl9kb0dldFNlcnZpY2UoaWRlbnRpZmllciwgeyBvYmo6IHt9LCBhcnI6IFtdIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICB0aHJvdyBfZXJyb3JzLkdldFNlcnZpY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyLCBlKTtcblx0ICAgICAgICB9KSk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYoUHJvbWlzZS5hbGwocHJvbWlzZXMpKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFzc29jaWF0ZXMgc2VydmljZSB3aXRoIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGluc3RhbmNlIHNlcnZpY2UgaW5zdGFuY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldChpZGVudGlmaWVyLCBpbnN0YW5jZSkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMihfaWQyKSB7XG5cdCAgICAgICAgaWYgKCEoX2lkMiBpbnN0YW5jZW9mIENvbnRhaW5lcikpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Db250YWluZXJcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDIpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgT2JqZWN0IHx8IHR5cGVvZiBpbnN0YW5jZSA9PT0gJ2Z1bmN0aW9uJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImluc3RhbmNlXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0IHwgRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGluc3RhbmNlKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gaW5zdGFuY2U7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjIodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm5zIHRydWUgaWYgY29udGFpbmVyIGhhcyBzZXJ2aWNlLCB0aGF0IGlzIGVpdGhlciBpZjpcblx0ICAgICAqICogaXQgaGFzIGEge0BsaW5rIERlZmluaXRpb259XG5cdCAgICAgKiAqIGl0IGhhcyBiZWVuIGluc3RhbnRpYXRlZFxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYXMoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMyhfaWQzKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDMgPT09ICdib29sZWFuJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5ib29sZWFuXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQzKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjModGhpcy5oYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpIHx8IHRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXJ2aWNlIGhhcyBhIGRlZmluaXRpb25cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYXNEZWZpbml0aW9uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjQoX2lkNCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQ0ID09PSAnYm9vbGVhbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuYm9vbGVhblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkNCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWY0KHVuZGVmaW5lZCAhPT0gdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2VydmljZSBoYXMgYW4gaW5zdGFuY2UsIGVpdGhlciBiZWNhdXNlOlxuXHQgICAgICogKiBpdCBoYXMgYmVlbiBpbnN0YW50aWF0ZWQgdmlhIGl0cyB7QGxpbmsgRGVmaW5pdGlvbn1cblx0ICAgICAqICogaXQgaGFzIGJlZW4gc2V0IGRpcmVjdGx5IHZpYSB7QGxpbmsgc2V0fSBtZXRob2Rcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYXNJbnN0YW5jZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFzSW5zdGFuY2UoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmNShfaWQ1KSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDUgPT09ICdib29sZWFuJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5ib29sZWFuXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQ1KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkNTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjUodW5kZWZpbmVkICE9PSB0aGlzLl9zZXJ2aWNlc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7RGVmaW5pdGlvbn1cblx0ICAgICAqXG5cdCAgICAgKiBAdGhyb3dzIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yfSBpZiB0aGVyZSBpcyBubyBzZXJ2aWNlIGRlZmluaXRpb24gZm9yIGdpdmVuIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0RGVmaW5pdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVmaW5pdGlvbihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY2KF9pZDYpIHtcblx0ICAgICAgICBpZiAoIShfaWQ2IGluc3RhbmNlb2YgX2RlZmluaXRpb24yLmRlZmF1bHQpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRGVmaW5pdGlvblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkNikpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDY7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGRlZmluaXRpb24gPSB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl07XG5cdFxuXHQgICAgICBpZiAodW5kZWZpbmVkID09PSBkZWZpbml0aW9uKSB7XG5cdCAgICAgICAgdGhyb3cgX2Vycm9ycy5VbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjYoZGVmaW5pdGlvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBc3NvY2lhdGVzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IHdpdGggaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIHNlcnZpY2UgaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uIHNlcnZpY2UgZGVmaW5pdGlvblxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG5cdCAgICAgKlxuXHQgICAgICogQHRocm93cyB7U2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yfSBpZiB0aGUgc2VydmljZSBkZWZpbml0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0RGVmaW5pdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVmaW5pdGlvbihpZGVudGlmaWVyLCBkZWZpbml0aW9uKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY3KF9pZDcpIHtcblx0ICAgICAgICBpZiAoIShfaWQ3IGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkNykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9kZWZpbml0aW9uMi5kZWZhdWx0KSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiZGVmaW5pdGlvblwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkRlZmluaXRpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGRlZmluaXRpb24pKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllcltpZGVudGlmaWVyXSkge1xuXHQgICAgICAgIHRocm93IF9lcnJvcnMuU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSBmYWxzZTtcblx0ICAgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gZGVmaW5pdGlvbjtcblx0XG5cdCAgICAgIHJldHVybiBfcmVmNyh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdldHMgcGFyYW1ldGVyIGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXIgcGFyYW1ldGVyIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7c2NhbGFyfSBwYXJhbWV0ZXIgdmFsdWVcblx0ICAgICAqXG5cdCAgICAgKiBAdGhyb3dzIHtVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcn0gaWYgdGhlcmUgaXMgbm8gcGFyYW1ldGVyIGZvciBnaXZlbiBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldFBhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1ldGVyKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjgoX2lkOCkge1xuXHQgICAgICAgIGlmICghc2NhbGFyKF9pZDgpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc2NhbGFyXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQ4KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkODtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKSB7XG5cdCAgICAgICAgdGhyb3cgX2Vycm9ycy5VbmRlZmluZWRQYXJhbWV0ZXJFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWY4KHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQXNzb2NpYXRlcyBwYXJhbWV0ZXIgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqIEBwYXJhbSB7c2NhbGFyfSB2YWx1ZVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG5cdCAgICAgKlxuXHQgICAgICogQHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldFBhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UGFyYW1ldGVyKGlkZW50aWZpZXIsIHZhbHVlKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY5KF9pZDkpIHtcblx0ICAgICAgICBpZiAoIShfaWQ5IGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkOSkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFzY2FsYXIodmFsdWUpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJ2YWx1ZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnNjYWxhclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QodmFsdWUpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSA9IHZhbHVlO1xuXHRcblx0ICAgICAgcmV0dXJuIF9yZWY5KHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyB0cnVlIGlmIGNvbnRhaW5lciBoYXMgcGFyYW1ldGVyLCBmYWxzZSBvdGhlcndpc2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhc1BhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFzUGFyYW1ldGVyKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjEwKF9pZDEwKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDEwID09PSAnYm9vbGVhbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuYm9vbGVhblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTApKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxMDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjEwKHVuZGVmaW5lZCAhPT0gdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZWdpc3RlcnMgXG5cdCAgICAgKiBcblx0ICAgICAqIEBwYXJhbSB7TG9jYXRvckNhbGxiYWNrfSBsb2NhdG9yXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0NvbnRhaW5lcn0gY3VycmVudCBDb250YWluZXIgaW5zdGFuY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVnaXN0ZXJDbGFzc0NvbnN0cnVjdG9yTG9jYXRvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJDbGFzc0NvbnN0cnVjdG9yTG9jYXRvcihsb2NhdG9yKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYxMShfaWQxMSkge1xuXHQgICAgICAgIGlmICghKF9pZDExIGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTEpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxMTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFMb2NhdG9yQ2FsbGJhY2sobG9jYXRvcikpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvY2F0b3JcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2NhdG9yQ2FsbGJhY2tcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGxvY2F0b3IpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzLnB1c2gobG9jYXRvcik7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjExKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtMb2NhdG9yQ2FsbGJhY2t9IGxvY2F0b3Jcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZWdpc3Rlckluc3RhbmNlTG9jYXRvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YW5jZUxvY2F0b3IobG9jYXRvcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMTIoX2lkMTIpIHtcblx0ICAgICAgICBpZiAoIShfaWQxMiBpbnN0YW5jZW9mIENvbnRhaW5lcikpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Db250YWluZXJcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDEyKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMTI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghTG9jYXRvckNhbGxiYWNrKGxvY2F0b3IpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJsb2NhdG9yXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuTG9jYXRvckNhbGxiYWNrXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2NhdG9yKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMucHVzaChsb2NhdG9yKTtcblx0XG5cdCAgICAgIHJldHVybiBfcmVmMTIodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXNvbHZlcyBzZXJ2aWNlIGRlZmluaXRpb24gYXJndW1lbnRzLCB0aGVuIHVzZXMgdGhlbSB0byBpbnN0YW50aWF0ZSB0aGUgc2VydmljZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcblx0ICAgICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcblx0ICAgICAqXG5cdCAgICAgKiBAcHJvbWlzZVxuXHQgICAgICogQHJlc29sdmUge09iamVjdH1cblx0ICAgICAqIEByZWplY3Qge0ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yfSBpbiBjYXNlIGEgZmFjdG9yeSBtZXRob2QgcmV0dXJucyBub3RoaW5nXG5cdCAgICAgKiBAcmVqZWN0IHtNZXRob2REb2VzTm90RXhpc3RFcnJvcn0gaW4gY2FzZSBhIG1ldGhvZCBjYWxsIGNhbGxzIGEgbWV0aG9kIHRoYXQgZG9lcyBub3QgZXhpc3Rcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19pbnN0YW50aWF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX2luc3RhbnRpYXRlKGlkZW50aWZpZXIsIGRlZmluaXRpb24sIGxvYWRpbmcpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICBmdW5jdGlvbiBfcmVmMTMoX2lkMTMpIHtcblx0ICAgICAgICBpZiAoIShfaWQxMyBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuUHJvbWlzZTxPYmplY3Q+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQxMykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDEzO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKGRlZmluaXRpb24gaW5zdGFuY2VvZiBfZGVmaW5pdGlvbjIuZGVmYXVsdCkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImRlZmluaXRpb25cIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5EZWZpbml0aW9uXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChkZWZpbml0aW9uKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghTG9hZGluZ09iamVjdChsb2FkaW5nKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibG9hZGluZ1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkxvYWRpbmdPYmplY3RcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGxvYWRpbmcpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYxMyh0aGlzLl9yZXNvbHZlQXJncyhkZWZpbml0aW9uLmFyZ3MsIGxvYWRpbmcpLnRoZW4oZnVuY3Rpb24gKGFyZ3MpIHtcblx0ICAgICAgICBmdW5jdGlvbiBfcmVmMTQoX2lkMTQpIHtcblx0ICAgICAgICAgIGlmICghKF9pZDE0IGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcblByb21pc2VcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE0KSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgcmV0dXJuIF9pZDE0O1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFyZ3MpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImFyZ3NcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheVxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoYXJncykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGluc3RhbmNlID0gdm9pZCAwO1xuXHRcblx0ICAgICAgICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbjIuZGVmYXVsdCkge1xuXHQgICAgICAgICAgdmFyIGNsYXNzQ29uc3RydWN0b3IgPSBfdGhpczIuX2xvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yKGRlZmluaXRpb24uY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGluc3RhbmNlID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjbGFzc0NvbnN0cnVjdG9yLCBbdW5kZWZpbmVkXS5jb25jYXQoYXJncykpKSgpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9mYWN0b3J5RGVmaW5pdGlvbjIuZGVmYXVsdCkge1xuXHQgICAgICAgICAgaW5zdGFuY2UgPSBkZWZpbml0aW9uLmZhY3RvcnkuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0XG5cdCAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBpbnN0YW5jZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjE0KFByb21pc2UucmVqZWN0KF9lcnJvcnMuRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcikpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICB2YXIgbWV0aG9kQ2FsbHNQcm9taXNlcyA9IFtdO1xuXHRcblx0ICAgICAgICAgIHZhciBpID0gdm9pZCAwLFxuXHQgICAgICAgICAgICAgIG1ldGhvZENhbGwgPSB2b2lkIDA7XG5cdFxuXHQgICAgICAgICAgdmFyIGNhbGxNZXRob2QgPSBmdW5jdGlvbiBjYWxsTWV0aG9kKG1ldGhvZFRvQ2FsbCkge1xuXHQgICAgICAgICAgICBpZiAoISh0eXBlb2YgbWV0aG9kVG9DYWxsID09PSAnZnVuY3Rpb24nKSkge1xuXHQgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibWV0aG9kVG9DYWxsXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KG1ldGhvZFRvQ2FsbCkpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBtZXRob2RDYWxsc1Byb21pc2VzLnB1c2goX3RoaXMyLl9yZXNvbHZlQXJncyhtZXRob2RDYWxsLmFyZ3MsIGxvYWRpbmcpLnRoZW4oZnVuY3Rpb24gKGFyZ3MpIHtcblx0ICAgICAgICAgICAgICBmdW5jdGlvbiBfcmVmMTUoX2lkMTUpIHtcblx0ICAgICAgICAgICAgICAgIGlmICghKF9pZDE1ID09IG51bGwgfHwgX2lkMTUgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuP1Byb21pc2UgfCBtaXhlZFxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTUpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX2lkMTU7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJncykpIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkFycmF5XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICByZXR1cm4gX3JlZjE1KG1ldGhvZFRvQ2FsbC5hcHBseShpbnN0YW5jZSwgYXJncykpO1xuXHQgICAgICAgICAgICB9KSk7XG5cdCAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgIGZ1bmN0aW9uIGdldE1ldGhvZENhbGwoaSkge1xuXHQgICAgICAgICAgICBmdW5jdGlvbiBfcmVmMTYoX2lkMTYpIHtcblx0ICAgICAgICAgICAgICBpZiAoIShfaWQxNiBpbnN0YW5jZW9mIF9tZXRob2RDYWxsMi5kZWZhdWx0KSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gXCJnZXRNZXRob2RDYWxsXCIgcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbk1ldGhvZENhbGxcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE2KSk7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICByZXR1cm4gX2lkMTY7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMTYoZGVmaW5pdGlvbi5tZXRob2RDYWxsc1tpXSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgZm9yIChpIGluIGRlZmluaXRpb24ubWV0aG9kQ2FsbHMpIHtcblx0ICAgICAgICAgICAgaWYgKGRlZmluaXRpb24ubWV0aG9kQ2FsbHMuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0ICAgICAgICAgICAgICBtZXRob2RDYWxsID0gZ2V0TWV0aG9kQ2FsbChpKTtcblx0XG5cdCAgICAgICAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSBtZXRob2RDYWxsLm5hbWU7XG5cdCAgICAgICAgICAgICAgdmFyIG1ldGhvZFRvQ2FsbCA9IGluc3RhbmNlW21ldGhvZE5hbWVdO1xuXHRcblx0ICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBtZXRob2RUb0NhbGwpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX2Vycm9ycy5NZXRob2REb2VzTm90RXhpc3RFcnJvci5jcmVhdGVFcnJvcihtZXRob2ROYW1lKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBjYWxsTWV0aG9kKG1ldGhvZFRvQ2FsbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICByZXR1cm4gcmVzb2x2ZShQcm9taXNlLmFsbChtZXRob2RDYWxsc1Byb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZnVuY3Rpb24gX3JlZjE3KF9pZDE3KSB7XG5cdCAgICAgICAgICAgICAgaWYgKCEoX2lkMTcgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQxNykpO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pZDE3O1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjE3KGluc3RhbmNlKTtcblx0ICAgICAgICAgIH0pKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSkpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVXNlZCBpbnRlcm5hbGx5IHRvIGxvY2F0ZSBhIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3IsIGlmIGl0IGhhcyBiZWVuIG1hZGUgYXZhaWxhYmxlIHRvIHRoZSBjb250YWluZXIgaW5zdGFuY2UuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvclxuXHQgICAgICpcblx0ICAgICAqIEB0aHJvd3Mge0Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3J9IGlmIHRoZSBzZXJ2aWNlIGNsYXNzIGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBmb3VuZFxuXHQgICAgICpcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnX2xvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMTgoX2lkMTgpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkMTggPT09ICdmdW5jdGlvbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE4KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMTg7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGkgPSB2b2lkIDAsXG5cdCAgICAgICAgICBjbGFzc0NvbnN0cnVjdG9yID0gdm9pZCAwO1xuXHRcblx0ICAgICAgZm9yIChpIGluIHRoaXMuX2NsYXNzQ29uc3RydWN0b3JMb2NhdG9ycykge1xuXHQgICAgICAgIGlmICh0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0ICAgICAgICAgIGNsYXNzQ29uc3RydWN0b3IgPSB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnNbaV0oaWRlbnRpZmllcik7XG5cdFxuXHQgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gY2xhc3NDb25zdHJ1Y3Rvcikge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjE4KGNsYXNzQ29uc3RydWN0b3IpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhyb3cgX2Vycm9ycy5DYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7T2JqZWN0fHZvaWR9XG5cdCAgICAgKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfbG9jYXRlSW5zdGFuY2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9sb2NhdGVJbnN0YW5jZShpZGVudGlmaWVyKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYxOShfaWQxOSkge1xuXHQgICAgICAgIGlmICghKF9pZDE5IGluc3RhbmNlb2YgT2JqZWN0IHx8IF9pZDE5ID09IG51bGwpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0IHwgdm9pZFxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTkpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxOTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgaSA9IHZvaWQgMDtcblx0ICAgICAgdmFyIGluc3RhbmNlID0gdm9pZCAwO1xuXHRcblx0ICAgICAgZm9yIChpIGluIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMpIHtcblx0ICAgICAgICBpZiAodGhpcy5faW5zdGFuY2VMb2NhdG9ycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHQgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLl9pbnN0YW5jZUxvY2F0b3JzW2ldKGlkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IGluc3RhbmNlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMTkoaW5zdGFuY2UpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmVzb2x2ZXMgZ2l2ZW4gYXJndW1lbnRzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gYXJnc1xuXHQgICAgICogQHBhcmFtIHtMb2FkaW5nT2JqZWN0fSBsb2FkaW5nIGFuIG9iamVjdCB0aGF0IGtlZXBzIHRyYWNrIG9mIHNlcnZpY2UgaW5zdGFudGlhdGlvbnMsXG5cdCAgICAgKiB1c2VkIHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwZW5kZW5jeSByZWxhdGVkIGluZmluaXRlIGxvb3BzXG5cdCAgICAgKlxuXHQgICAgICogQHByb21pc2Uge0FycmF5PGFueT59IGFyZ3VtZW50cyBvZiBhbnkgdHlwZVxuXHQgICAgICogQHJlamVjdCB7VW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcn1cblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19yZXNvbHZlQXJncycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc29sdmVBcmdzKGFyZ3MsIGxvYWRpbmcpIHtcblx0ICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoIUluamVjdGFibGVBcmd1bWVudHMoYXJncykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImFyZ3NcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghTG9hZGluZ09iamVjdChsb2FkaW5nKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibG9hZGluZ1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkxvYWRpbmdPYmplY3RcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGxvYWRpbmcpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHByb21pc2VzID0gW107XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIHZhciBpID0gdm9pZCAwLFxuXHQgICAgICAgICAgICBhcmcgPSB2b2lkIDA7XG5cdFxuXHQgICAgICAgIGZvciAoaSBpbiBhcmdzKSB7XG5cdCAgICAgICAgICBpZiAoYXJncy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHQgICAgICAgICAgICBhcmcgPSBhcmdzW2ldO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGFyZyBpbnN0YW5jZW9mIF9yZWZlcmVuY2UyLmRlZmF1bHQpIHtcblx0ICAgICAgICAgICAgICB2YXIgaWQgPSBhcmcuaWQ7XG5cdFxuXHQgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMzLl9kb0dldFNlcnZpY2UoaWQsIENvbnRhaW5lci5fZGVlcENvcHlMb2FkaW5nKGxvYWRpbmcpKSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgX3BhcmFtZXRlcjIuZGVmYXVsdCkge1xuXHQgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMzLmdldFBhcmFtZXRlcihhcmcuaWQpKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF9lcnJvcnMuVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvci5jcmVhdGVFcnJvcihhcmcpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHJlc29sdmUoUHJvbWlzZS5hbGwocHJvbWlzZXMpKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBVc2VkIGludGVybmFsbHkgdG8gcmV0cmlldmUgYSBzZXJ2aWNlIGJ5IGl0cyBpZGVudGlmaWVyLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBzZXJ2aWNlXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcblx0ICAgICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcblx0ICAgICAqXG5cdCAgICAgKiBAcHJvbWlzZVxuXHQgICAgICogQHJlc29sdmUge09iamVjdHxGdW5jdGlvbn0gYSBzZXJ2aWNlXG5cdCAgICAgKiBAcmVqZWN0IHtDaXJjdWxhckRlcGVuZGVuY3lFcnJvcn0gaW4gY2FzZSBvZiBhIGNpcmN1bGFyIGRlcGVuZGVuY3lcblx0ICAgICAqIEByZWplY3Qge1VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcn0gaW4gY2FzZSBuZWl0aGVyIGFuIGluc3RhbmNlIG5vciBhIGRlZmluaXRpb24gaXMgZm91bmRcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19kb0dldFNlcnZpY2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9kb0dldFNlcnZpY2UoaWRlbnRpZmllciwgbG9hZGluZykge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMjEoX2lkMjEpIHtcblx0ICAgICAgICBpZiAoIShfaWQyMSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuUHJvbWlzZVxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMjEpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyMTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIUxvYWRpbmdPYmplY3QobG9hZGluZykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvYWRpbmdcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2FkaW5nT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2FkaW5nKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh1bmRlZmluZWQgIT09IGxvYWRpbmcub2JqW2lkZW50aWZpZXJdKSB7XG5cdCAgICAgICAgdmFyIHNlcnZpY2VzID0gW10uY29uY2F0KGxvYWRpbmcuYXJyKS5jb25jYXQoW2lkZW50aWZpZXJdKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWYyMShQcm9taXNlLnJlamVjdChfZXJyb3JzLkNpcmN1bGFyRGVwZW5kZW5jeUVycm9yLmNyZWF0ZUVycm9yKHNlcnZpY2VzKSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaGFzRGVmaW5pdGlvbihpZGVudGlmaWVyKSkge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2xvY2F0ZUluc3RhbmNlKGlkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IHJlc3VsdCkge1xuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogSW4gY2FzZSBsb2NhdGUgaW5zdGFuY2UgcmV0dXJucyBhIHByb21pc2UsIHJlc29sdmUgcHJvbWlzZVxuXHQgICAgICAgICAgICAgKi9cblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyMShQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuXHQgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGluc3RhbmNlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX2Vycm9ycy5VbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcikpO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpbnN0YW5jZSk7XG5cdCAgICAgICAgICAgIH0pKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICByZXR1cm4gX3JlZjIxKFByb21pc2UucmVqZWN0KF9lcnJvcnMuVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBsb2FkaW5nLm9ialtpZGVudGlmaWVyXSA9IHRydWU7XG5cdCAgICAgICAgbG9hZGluZy5hcnIucHVzaChpZGVudGlmaWVyKTtcblx0XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5faW5zdGFudGlhdGUoaWRlbnRpZmllciwgdGhpcy5nZXREZWZpbml0aW9uKGlkZW50aWZpZXIpLCBsb2FkaW5nKTtcblx0XG5cdCAgICAgICAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSB0cnVlO1xuXHRcblx0ICAgICAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gcHJvbWlzZTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICByZXR1cm4gX3JlZjIxKFByb21pc2UucmVqZWN0KGUpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMjEoUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBNYWtlcyBhIGRlZXAgY29weSBvZiBsb2FkaW5nIG9iamVjdCBzbyBhcyBub3QgdG8gbW9kaWZ5IGl0IGJ5IHJlZmVyZW5jZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9hZGluZ1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtPYmplY3R9IGxvYWRpbmcgYSBkZWVwIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGxvYWRpbmcgcGFyYW1ldGVyXG5cdCAgICAgKiBAcmV0dXJucyB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IGxvYWRpbmcub2JqXG5cdCAgICAgKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gbG9hZGluZy5hcnJcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH1dLCBbe1xuXHQgICAga2V5OiAnX2RlZXBDb3B5TG9hZGluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX2RlZXBDb3B5TG9hZGluZyhsb2FkaW5nKSB7XG5cdCAgICAgIGlmICghKGxvYWRpbmcgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJsb2FkaW5nXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2FkaW5nKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBuZXdMb2FkaW5nID0ge1xuXHQgICAgICAgIG9iajoge30sXG5cdCAgICAgICAgYXJyOiBbXS5jb25jYXQobG9hZGluZy5hcnIpXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBmb3IgKHZhciBpIGluIGxvYWRpbmcub2JqKSB7XG5cdCAgICAgICAgaWYgKGxvYWRpbmcub2JqLmhhc093blByb3BlcnR5KGkpKSB7XG5cdCAgICAgICAgICBuZXdMb2FkaW5nLm9ialtpXSA9IGxvYWRpbmcub2JqW2ldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ld0xvYWRpbmc7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQ29udGFpbmVyO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBDb250YWluZXI7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX21ldGhvZENhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9tZXRob2RDYWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZENhbGwpO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIEluamVjdGFibGVBcmd1bWVudHMgPSBfaW5qZWN0YWJsZUFyZ3VtZW50cy5JbmplY3RhYmxlQXJndW1lbnRzO1xuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0XG5cdHZhciBEZWZpbml0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gRGVmaW5pdGlvbigpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVmaW5pdGlvbik7XG5cdFxuXHQgICAgaWYgKCEoYXJncyA9PSBudWxsIHx8IEluamVjdGFibGVBcmd1bWVudHMoYXJncykpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fbWV0aG9kQ2FsbHMgPSBbXTtcblx0ICAgIHRoaXMuX2FyZ3MgPSBhcmdzO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0cyBtZXRob2RDYWxsc1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtBcnJheTxNZXRob2RDYWxsPn0gbWV0aG9kQ2FsbHNcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhEZWZpbml0aW9uLCBbe1xuXHQgICAga2V5OiAnbWV0aG9kQ2FsbHMnLFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQobWV0aG9kQ2FsbHMpIHtcblx0ICAgICAgaWYgKCEoQXJyYXkuaXNBcnJheShtZXRob2RDYWxscykgJiYgbWV0aG9kQ2FsbHMuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICByZXR1cm4gaXRlbSBpbnN0YW5jZW9mIF9tZXRob2RDYWxsMi5kZWZhdWx0O1xuXHQgICAgICB9KSkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcIm1ldGhvZENhbGxzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuQXJyYXk8TWV0aG9kQ2FsbD5cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KG1ldGhvZENhbGxzKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX21ldGhvZENhbGxzID0gbWV0aG9kQ2FsbHM7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIG1ldGhvZENhbGxzXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0FycmF5PE1ldGhvZENhbGw+fVxuXHQgICAgICovXG5cdCAgICAsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjIoX2lkMikge1xuXHQgICAgICAgIGlmICghKEFycmF5LmlzQXJyYXkoX2lkMikgJiYgX2lkMi5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIGl0ZW0gaW5zdGFuY2VvZiBfbWV0aG9kQ2FsbDIuZGVmYXVsdDtcblx0ICAgICAgICB9KSkpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheTxNZXRob2RDYWxsPlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMikpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMih0aGlzLl9tZXRob2RDYWxscyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIGFyZ3Ncblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7SW5qZWN0YWJsZUFyZ3VtZW50c31cblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdhcmdzJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMyhfaWQzKSB7XG5cdCAgICAgICAgaWYgKCFJbmplY3RhYmxlQXJndW1lbnRzKF9pZDMpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuSW5qZWN0YWJsZUFyZ3VtZW50c1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMyh0aGlzLl9hcmdzKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBEZWZpbml0aW9uO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBEZWZpbml0aW9uO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9pbmplY3RhYmxlQXJndW1lbnRzLkluamVjdGFibGVBcmd1bWVudHM7XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHR2YXIgTWV0aG9kQ2FsbCA9IGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgLyoqXG5cdCAgICogQ29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG1ldGhvZCBuYW1lXG5cdCAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG5cdCAgICpcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gTWV0aG9kQ2FsbChuYW1lKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1ldGhvZENhbGwpO1xuXHRcblx0ICAgIGlmICghKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJuYW1lXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChuYW1lKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEoYXJncyA9PSBudWxsIHx8IEluamVjdGFibGVBcmd1bWVudHMoYXJncykpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG5cdCAgICB0aGlzLl9hcmdzID0gYXJncztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgbmFtZVxuXHQgICAqXG5cdCAgICogQHJldHVybnMge3N0cmluZ31cblx0ICAgKlxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhNZXRob2RDYWxsLCBbe1xuXHQgICAga2V5OiAnbmFtZScsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5fbmFtZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIGFyZ3Ncblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7SW5qZWN0YWJsZUFyZ3VtZW50c31cblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnYXJncycsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjIoX2lkMikge1xuXHQgICAgICAgIGlmICghSW5qZWN0YWJsZUFyZ3VtZW50cyhfaWQyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkluamVjdGFibGVBcmd1bWVudHNcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDIpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjIodGhpcy5fYXJncyk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gTWV0aG9kQ2FsbDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTWV0aG9kQ2FsbDtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkluamVjdGFibGVBcmd1bWVudHMgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWZlcmVuY2UpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyYW1ldGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IGV4cG9ydHMuSW5qZWN0YWJsZUFyZ3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBJbmplY3RhYmxlQXJndW1lbnRzKGlucHV0KSB7XG5cdCAgICByZXR1cm4gQXJyYXkuaXNBcnJheShpbnB1dCkgJiYgaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgcmV0dXJuIGl0ZW0gaW5zdGFuY2VvZiBfcmVmZXJlbmNlMi5kZWZhdWx0IHx8IGl0ZW0gaW5zdGFuY2VvZiBfcGFyYW1ldGVyMi5kZWZhdWx0O1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICA7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEluamVjdGFibGVBcmd1bWVudHMsIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGlucHV0KSB7XG5cdCAgICAgIHJldHVybiBJbmplY3RhYmxlQXJndW1lbnRzKGlucHV0KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gSW5qZWN0YWJsZUFyZ3VtZW50cztcblx0fSgpO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgUmVmZXJlbmNlID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqIFxuXHQgICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIFJlZmVyZW5jZShpZCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZmVyZW5jZSk7XG5cdFxuXHQgICAgaWYgKCEodHlwZW9mIGlkID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlZhbHVlIG9mIGFyZ3VtZW50IFxcXCJpZFxcXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcblwiICsgX2luc3BlY3QoaWQpKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9pZCA9IGlkO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogR2V0cyBpZFxuXHQgICAqXG5cdCAgICogQHJldHVybnMge3N0cmluZ31cblx0ICAgKlxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhSZWZlcmVuY2UsIFt7XG5cdCAgICBrZXk6IFwiaWRcIixcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmKF9pZCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuXCIgKyBfaW5zcGVjdChfaWQpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmKHRoaXMuX2lkKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSZWZlcmVuY2U7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlZmVyZW5jZTtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgUGFyYW1ldGVyID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG5cdCAgICpcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gUGFyYW1ldGVyKGlkKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFyYW1ldGVyKTtcblx0XG5cdCAgICBpZiAoISh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVmFsdWUgb2YgYXJndW1lbnQgXFxcImlkXFxcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuXCIgKyBfaW5zcGVjdChpZCkpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2lkID0gaWQ7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIGlkXG5cdCAgICpcblx0ICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFBhcmFtZXRlciwgW3tcblx0ICAgIGtleTogXCJpZFwiLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYoX2lkKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZCA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG5cIiArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5faWQpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFBhcmFtZXRlcjtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUGFyYW1ldGVyO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2RlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9kZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluaXRpb24pO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBJbmplY3RhYmxlQXJndW1lbnRzID0gX2luamVjdGFibGVBcmd1bWVudHMuSW5qZWN0YWJsZUFyZ3VtZW50cztcblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdHZhciBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChfRGVmaW5pdGlvbikge1xuXHQgIF9pbmhlcml0cyhDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiwgX0RlZmluaXRpb24pO1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyXG5cdCAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24oY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pO1xuXHRcblx0ICAgIGlmICghKHR5cGVvZiBjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEoYXJncyA9PSBudWxsIHx8IEluamVjdGFibGVBcmd1bWVudHMoYXJncykpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pKS5jYWxsKHRoaXMsIGFyZ3MpKTtcblx0XG5cdCAgICBfdGhpcy5fY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIgPSBjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcjtcblx0ICAgIHJldHVybiBfdGhpcztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcblx0ICAgKlxuXHQgICAqIEByZXR1cm5zIHtzdHJpbmd9XG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24sIFt7XG5cdCAgICBrZXk6ICdjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcicsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5fY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uO1xuXHR9KF9kZWZpbml0aW9uMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kZWZpbml0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZGVmaW5pdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbml0aW9uKTtcblx0XG5cdHZhciBfaW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9pbmplY3RhYmxlQXJndW1lbnRzLkluamVjdGFibGVBcmd1bWVudHM7XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHR2YXIgRmFjdG9yeURlZmluaXRpb24gPSBmdW5jdGlvbiAoX0RlZmluaXRpb24pIHtcblx0ICBfaW5oZXJpdHMoRmFjdG9yeURlZmluaXRpb24sIF9EZWZpbml0aW9uKTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3Rvcnlcblx0ICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBGYWN0b3J5RGVmaW5pdGlvbihmYWN0b3J5KSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZhY3RvcnlEZWZpbml0aW9uKTtcblx0XG5cdCAgICBpZiAoISh0eXBlb2YgZmFjdG9yeSA9PT0gJ2Z1bmN0aW9uJykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJmYWN0b3J5XCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGZhY3RvcnkpKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIShhcmdzID09IG51bGwgfHwgSW5qZWN0YWJsZUFyZ3VtZW50cyhhcmdzKSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJhcmdzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuP0luamVjdGFibGVBcmd1bWVudHNcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGFyZ3MpKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRmFjdG9yeURlZmluaXRpb24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGYWN0b3J5RGVmaW5pdGlvbikpLmNhbGwodGhpcywgYXJncykpO1xuXHRcblx0ICAgIF90aGlzLl9mYWN0b3J5ID0gZmFjdG9yeTtcblx0ICAgIHJldHVybiBfdGhpcztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgZmFjdG9yeVxuXHQgICAqXG5cdCAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEZhY3RvcnlEZWZpbml0aW9uLCBbe1xuXHQgICAga2V5OiAnZmFjdG9yeScsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkID09PSAnZnVuY3Rpb24nKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkZ1bmN0aW9uXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmKHRoaXMuX2ZhY3RvcnkpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEZhY3RvcnlEZWZpbml0aW9uO1xuXHR9KF9kZWZpbml0aW9uMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEZhY3RvcnlEZWZpbml0aW9uO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHR2YXIgX2Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcik7XG5cdFxuXHR2YXIgX2NpcmN1bGFyRGVwZW5kZW5jeUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdFxuXHR2YXIgX2NpcmN1bGFyRGVwZW5kZW5jeUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NpcmN1bGFyRGVwZW5kZW5jeUVycm9yKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0dmFyIF9mYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHRcblx0dmFyIF9mYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcik7XG5cdFxuXHR2YXIgX21ldGhvZERvZXNOb3RFeGlzdEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdFxuXHR2YXIgX21ldGhvZERvZXNOb3RFeGlzdEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZERvZXNOb3RFeGlzdEVycm9yKTtcblx0XG5cdHZhciBfc2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdFxuXHR2YXIgX3NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IpO1xuXHRcblx0dmFyIF91bmRlZmluZWRQYXJhbWV0ZXJFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHRcblx0dmFyIF91bmRlZmluZWRQYXJhbWV0ZXJFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bmRlZmluZWRQYXJhbWV0ZXJFcnJvcik7XG5cdFxuXHR2YXIgX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHRcblx0dmFyIF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKTtcblx0XG5cdHZhciBfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHRcblx0dmFyIF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IpO1xuXHRcblx0dmFyIF91bnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHR2YXIgX3Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcik7XG5cdFxuXHR2YXIgX2dldFNlcnZpY2VFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHRcblx0dmFyIF9nZXRTZXJ2aWNlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0U2VydmljZUVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yOiBfY2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcjIuZGVmYXVsdCxcblx0ICBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcjogX2NpcmN1bGFyRGVwZW5kZW5jeUVycm9yMi5kZWZhdWx0LFxuXHQgIERpc2xFcnJvcjogX2Rpc2xFcnJvcjIuZGVmYXVsdCxcblx0ICBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcjogX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yMi5kZWZhdWx0LFxuXHQgIE1ldGhvZERvZXNOb3RFeGlzdEVycm9yOiBfbWV0aG9kRG9lc05vdEV4aXN0RXJyb3IyLmRlZmF1bHQsXG5cdCAgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yOiBfc2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yMi5kZWZhdWx0LFxuXHQgIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yOiBfdW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IyLmRlZmF1bHQsXG5cdCAgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yOiBfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yMi5kZWZhdWx0LFxuXHQgIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3I6IF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yMi5kZWZhdWx0LFxuXHQgIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3I6IF91bnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yMi5kZWZhdWx0LFxuXHQgIEdldFNlcnZpY2VFcnJvcjogX2dldFNlcnZpY2VFcnJvcjIuZGVmYXVsdFxuXHR9O1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciA9IGZ1bmN0aW9uIChfRGlzbEVycm9yKSB7XG5cdCAgX2luaGVyaXRzKENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yLCBudWxsLCBbe1xuXHQgICAga2V5OiAnY3JlYXRlRXJyb3InLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKGNsYXNzTmFtZSkge1xuXHQgICAgICBpZiAoISh0eXBlb2YgY2xhc3NOYW1lID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImNsYXNzTmFtZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoY2xhc3NOYW1lKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcih7XG5cdCAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcblx0ICAgICAgfSwgJ0Nhbm5vdCBsb2NhdGUgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvciBmb3IgY2xhc3MgXCIlc1wiJywgY2xhc3NOYW1lKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdmVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX3ZlcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92ZXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgRGlzbEVycm9yID0gZnVuY3Rpb24gKF9WRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoRGlzbEVycm9yLCBfVkVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gRGlzbEVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERpc2xFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEaXNsRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEaXNsRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBEaXNsRXJyb3I7XG5cdH0oX3ZlcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBEaXNsRXJyb3I7XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogdmVycm9yLmpzOiByaWNoZXIgSmF2YVNjcmlwdCBlcnJvcnNcblx0ICovXG5cdFxuXHR2YXIgbW9kX2Fzc2VydHBsdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIG1vZF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHR2YXIgbW9kX2V4dHNwcmludGYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1vZF9pc0Vycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MikuaXNFcnJvcjtcblx0dmFyIHNwcmludGYgPSBtb2RfZXh0c3ByaW50Zi5zcHJpbnRmO1xuXHRcblx0Lypcblx0ICogUHVibGljIGludGVyZmFjZVxuXHQgKi9cblx0XG5cdC8qIFNvIHlvdSBjYW4gJ3ZhciBWRXJyb3IgPSByZXF1aXJlKCd2ZXJyb3InKScgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBWRXJyb3I7XG5cdC8qIEZvciBjb21wYXRpYmlsaXR5ICovXG5cdFZFcnJvci5WRXJyb3IgPSBWRXJyb3I7XG5cdC8qIE90aGVyIGV4cG9ydGVkIGNsYXNzZXMgKi9cblx0VkVycm9yLlNFcnJvciA9IFNFcnJvcjtcblx0VkVycm9yLldFcnJvciA9IFdFcnJvcjtcblx0VkVycm9yLk11bHRpRXJyb3IgPSBNdWx0aUVycm9yO1xuXHRcblx0Lypcblx0ICogQ29tbW9uIGZ1bmN0aW9uIHVzZWQgdG8gcGFyc2UgY29uc3RydWN0b3IgYXJndW1lbnRzIGZvciBWRXJyb3IsIFdFcnJvciwgYW5kXG5cdCAqIFNFcnJvci4gIE5hbWVkIGFyZ3VtZW50cyB0byB0aGlzIGZ1bmN0aW9uOlxuXHQgKlxuXHQgKiAgICAgc3RyaWN0XHRcdGZvcmNlIHN0cmljdCBpbnRlcnByZXRhdGlvbiBvZiBzcHJpbnRmIGFyZ3VtZW50cywgZXZlblxuXHQgKiAgICAgXHRcdFx0aWYgdGhlIG9wdGlvbnMgaW4gXCJhcmd2XCIgZG9uJ3Qgc2F5IHNvXG5cdCAqXG5cdCAqICAgICBhcmd2XHRcdGVycm9yJ3MgY29uc3RydWN0b3IgYXJndW1lbnRzLCB3aGljaCBhcmUgdG8gYmVcblx0ICogICAgIFx0XHRcdGludGVycHJldGVkIGFzIGRlc2NyaWJlZCBpbiBSRUFETUUubWQuICBGb3IgcXVpY2tcblx0ICogICAgIFx0XHRcdHJlZmVyZW5jZSwgXCJhcmd2XCIgaGFzIG9uZSBvZiB0aGUgZm9sbG93aW5nIGZvcm1zOlxuXHQgKlxuXHQgKiAgICAgICAgICBbIHNwcmludGZfYXJncy4uLiBdICAgICAgICAgICAoYXJndlswXSBpcyBhIHN0cmluZylcblx0ICogICAgICAgICAgWyBjYXVzZSwgc3ByaW50Zl9hcmdzLi4uIF0gICAgKGFyZ3ZbMF0gaXMgYW4gRXJyb3IpXG5cdCAqICAgICAgICAgIFsgb3B0aW9ucywgc3ByaW50Zl9hcmdzLi4uIF0gIChhcmd2WzBdIGlzIGFuIG9iamVjdClcblx0ICpcblx0ICogVGhpcyBmdW5jdGlvbiBub3JtYWxpemVzIHRoZXNlIGZvcm1zLCBwcm9kdWNpbmcgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZ1xuXHQgKiBwcm9wZXJ0aWVzOlxuXHQgKlxuXHQgKiAgICBvcHRpb25zICAgICAgICAgICBlcXVpdmFsZW50IHRvIFwib3B0aW9uc1wiIGluIHRoaXJkIGZvcm0uICBUaGlzIHdpbGwgbmV2ZXJcblx0ICogICAgXHRcdFx0YmUgYSBkaXJlY3QgcmVmZXJlbmNlIHRvIHdoYXQgdGhlIGNhbGxlciBwYXNzZWQgaW5cblx0ICogICAgXHRcdFx0KGkuZS4sIGl0IG1heSBiZSBhIHNoYWxsb3cgY29weSksIHNvIGl0IGNhbiBiZSBmcmVlbHlcblx0ICogICAgXHRcdFx0bW9kaWZpZWQuXG5cdCAqXG5cdCAqICAgIHNob3J0bWVzc2FnZSAgICAgIHJlc3VsdCBvZiBzcHJpbnRmKHNwcmludGZfYXJncyksIHRha2luZyBvcHRpb25zLnN0cmljdFxuXHQgKiAgICBcdFx0XHRpbnRvIGFjY291bnQgYXMgZGVzY3JpYmVkIGluIFJFQURNRS5tZC5cblx0ICovXG5cdGZ1bmN0aW9uIHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoYXJncylcblx0e1xuXHRcdHZhciBhcmd2LCBvcHRpb25zLCBzcHJpbnRmX2FyZ3MsIHNob3J0bWVzc2FnZSwgaztcblx0XG5cdFx0bW9kX2Fzc2VydHBsdXMub2JqZWN0KGFyZ3MsICdhcmdzJyk7XG5cdFx0bW9kX2Fzc2VydHBsdXMuYm9vbChhcmdzLnN0cmljdCwgJ2FyZ3Muc3RyaWN0Jyk7XG5cdFx0bW9kX2Fzc2VydHBsdXMuYXJyYXkoYXJncy5hcmd2LCAnYXJncy5hcmd2Jyk7XG5cdFx0YXJndiA9IGFyZ3MuYXJndjtcblx0XG5cdFx0Lypcblx0XHQgKiBGaXJzdCwgZmlndXJlIG91dCB3aGljaCBmb3JtIG9mIGludm9jYXRpb24gd2UndmUgYmVlbiBnaXZlbi5cblx0XHQgKi9cblx0XHRpZiAoYXJndi5sZW5ndGggPT09IDApIHtcblx0XHRcdG9wdGlvbnMgPSB7fTtcblx0XHRcdHNwcmludGZfYXJncyA9IFtdO1xuXHRcdH0gZWxzZSBpZiAobW9kX2lzRXJyb3IoYXJndlswXSkpIHtcblx0XHRcdG9wdGlvbnMgPSB7ICdjYXVzZSc6IGFyZ3ZbMF0gfTtcblx0XHRcdHNwcmludGZfYXJncyA9IGFyZ3Yuc2xpY2UoMSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgKGFyZ3ZbMF0pID09PSAnb2JqZWN0Jykge1xuXHRcdFx0b3B0aW9ucyA9IHt9O1xuXHRcdFx0Zm9yIChrIGluIGFyZ3ZbMF0pIHtcblx0XHRcdFx0b3B0aW9uc1trXSA9IGFyZ3ZbMF1ba107XG5cdFx0XHR9XG5cdFx0XHRzcHJpbnRmX2FyZ3MgPSBhcmd2LnNsaWNlKDEpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtb2RfYXNzZXJ0cGx1cy5zdHJpbmcoYXJndlswXSxcblx0XHRcdCAgICAnZmlyc3QgYXJndW1lbnQgdG8gVkVycm9yLCBTRXJyb3IsIG9yIFdFcnJvciAnICtcblx0XHRcdCAgICAnY29uc3RydWN0b3IgbXVzdCBiZSBhIHN0cmluZywgb2JqZWN0LCBvciBFcnJvcicpO1xuXHRcdFx0b3B0aW9ucyA9IHt9O1xuXHRcdFx0c3ByaW50Zl9hcmdzID0gYXJndjtcblx0XHR9XG5cdFxuXHRcdC8qXG5cdFx0ICogTm93IGNvbnN0cnVjdCB0aGUgZXJyb3IncyBtZXNzYWdlLlxuXHRcdCAqXG5cdFx0ICogZXh0c3ByaW50ZiAod2hpY2ggd2UgaW52b2tlIGhlcmUgd2l0aCBvdXIgY2FsbGVyJ3MgYXJndW1lbnRzIGluIG9yZGVyXG5cdFx0ICogdG8gY29uc3RydWN0IHRoaXMgRXJyb3IncyBtZXNzYWdlKSBpcyBzdHJpY3QgaW4gaXRzIGludGVycHJldGF0aW9uIG9mXG5cdFx0ICogdmFsdWVzIHRvIGJlIHByb2Nlc3NlZCBieSB0aGUgXCIlc1wiIHNwZWNpZmllci4gIFRoZSB2YWx1ZSBwYXNzZWQgdG9cblx0XHQgKiBleHRzcHJpbnRmIG11c3QgYWN0dWFsbHkgYmUgYSBzdHJpbmcgb3Igc29tZXRoaW5nIGNvbnZlcnRpYmxlIHRvIGFcblx0XHQgKiBTdHJpbmcgdXNpbmcgLnRvU3RyaW5nKCkuICBQYXNzaW5nIG90aGVyIHZhbHVlcyAobm90YWJseSBcIm51bGxcIiBhbmRcblx0XHQgKiBcInVuZGVmaW5lZFwiKSBpcyBjb25zaWRlcmVkIGEgcHJvZ3JhbW1lciBlcnJvci4gIFRoZSBhc3N1bXB0aW9uIGlzXG5cdFx0ICogdGhhdCBpZiB5b3UgYWN0dWFsbHkgd2FudCB0byBwcmludCB0aGUgc3RyaW5nIFwibnVsbFwiIG9yIFwidW5kZWZpbmVkXCIsXG5cdFx0ICogdGhlbiB0aGF0J3MgZWFzeSB0byBkbyB0aGF0IHdoZW4geW91J3JlIGNhbGxpbmcgZXh0c3ByaW50Zjsgb24gdGhlXG5cdFx0ICogb3RoZXIgaGFuZCwgaWYgeW91IGRpZCBOT1Qgd2FudCB0aGF0IChpLmUuLCB0aGVyZSdzIGFjdHVhbGx5IGEgYnVnXG5cdFx0ICogd2hlcmUgdGhlIHByb2dyYW0gYXNzdW1lcyBzb21lIHZhcmlhYmxlIGlzIG5vbi1udWxsIGFuZCB0cmllcyB0b1xuXHRcdCAqIHByaW50IGl0LCB3aGljaCBtaWdodCBoYXBwZW4gd2hlbiBjb25zdHJ1Y3RpbmcgYSBwYWNrZXQgb3IgZmlsZSBpblxuXHRcdCAqIHNvbWUgc3BlY2lmaWMgZm9ybWF0KSwgdGhlbiBpdCdzIGJldHRlciB0byBzdG9wIGltbWVkaWF0ZWx5IHRoYW5cblx0XHQgKiBwcm9kdWNlIGJvZ3VzIG91dHB1dC5cblx0XHQgKlxuXHRcdCAqIEhvd2V2ZXIsIHNvbWV0aW1lcyB0aGUgYnVnIGlzIG9ubHkgaW4gdGhlIGNvZGUgY2FsbGluZyBWRXJyb3IsIGFuZCBhXG5cdFx0ICogcHJvZ3JhbW1lciBtaWdodCBwcmVmZXIgdG8gaGF2ZSB0aGUgZXJyb3IgbWVzc2FnZSBjb250YWluIFwibnVsbFwiIG9yXG5cdFx0ICogXCJ1bmRlZmluZWRcIiByYXRoZXIgdGhhbiBoYXZlIHRoZSBidWcgaW4gdGhlIGVycm9yIHBhdGggY3Jhc2ggdGhlXG5cdFx0ICogcHJvZ3JhbSAobWFraW5nIHRoZSBmaXJzdCBidWcgaGFyZGVyIHRvIGlkZW50aWZ5KS4gIEZvciB0aGF0IHJlYXNvbixcblx0XHQgKiBieSBkZWZhdWx0IFZFcnJvciBjb252ZXJ0cyBcIm51bGxcIiBvciBcInVuZGVmaW5lZFwiIGFyZ3VtZW50cyB0byB0aGVpclxuXHRcdCAqIHN0cmluZyByZXByZXNlbnRhdGlvbnMgYW5kIHBhc3NlcyB0aG9zZSB0byBleHRzcHJpbnRmLiAgUHJvZ3JhbW1lcnNcblx0XHQgKiBkZXNpcmluZyB0aGUgc3RyaWN0IGJlaGF2aW9yIGNhbiB1c2UgdGhlIFNFcnJvciBjbGFzcyBvciBwYXNzIHRoZVxuXHRcdCAqIFwic3RyaWN0XCIgb3B0aW9uIHRvIHRoZSBWRXJyb3IgY29uc3RydWN0b3IuXG5cdFx0ICovXG5cdFx0bW9kX2Fzc2VydHBsdXMub2JqZWN0KG9wdGlvbnMpO1xuXHRcdGlmICghb3B0aW9ucy5zdHJpY3QgJiYgIWFyZ3Muc3RyaWN0KSB7XG5cdFx0XHRzcHJpbnRmX2FyZ3MgPSBzcHJpbnRmX2FyZ3MubWFwKGZ1bmN0aW9uIChhKSB7XG5cdFx0XHRcdHJldHVybiAoYSA9PT0gbnVsbCA/ICdudWxsJyA6XG5cdFx0XHRcdCAgICBhID09PSB1bmRlZmluZWQgPyAndW5kZWZpbmVkJyA6IGEpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcblx0XHRpZiAoc3ByaW50Zl9hcmdzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0c2hvcnRtZXNzYWdlID0gJyc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNob3J0bWVzc2FnZSA9IHNwcmludGYuYXBwbHkobnVsbCwgc3ByaW50Zl9hcmdzKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiAoe1xuXHRcdCAgICAnb3B0aW9ucyc6IG9wdGlvbnMsXG5cdFx0ICAgICdzaG9ydG1lc3NhZ2UnOiBzaG9ydG1lc3NhZ2Vcblx0XHR9KTtcblx0fVxuXHRcblx0Lypcblx0ICogU2VlIFJFQURNRS5tZCBmb3IgcmVmZXJlbmNlIGRvY3VtZW50YXRpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBWRXJyb3IoKVxuXHR7XG5cdFx0dmFyIGFyZ3MsIG9iaiwgcGFyc2VkLCBjYXVzZSwgY3RvciwgbWVzc2FnZSwgaztcblx0XG5cdFx0YXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG5cdFxuXHRcdC8qXG5cdFx0ICogVGhpcyBpcyBhIHJlZ3JldHRhYmxlIHBhdHRlcm4sIGJ1dCBKYXZhU2NyaXB0J3MgYnVpbHQtaW4gRXJyb3IgY2xhc3Ncblx0XHQgKiBpcyBkZWZpbmVkIHRvIHdvcmsgdGhpcyB3YXksIHNvIHdlIGFsbG93IHRoZSBjb25zdHJ1Y3RvciB0byBiZSBjYWxsZWRcblx0XHQgKiB3aXRob3V0IFwibmV3XCIuXG5cdFx0ICovXG5cdFx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFZFcnJvcikpIHtcblx0XHRcdG9iaiA9IE9iamVjdC5jcmVhdGUoVkVycm9yLnByb3RvdHlwZSk7XG5cdFx0XHRWRXJyb3IuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuXHRcdFx0cmV0dXJuIChvYmopO1xuXHRcdH1cblx0XG5cdFx0Lypcblx0XHQgKiBGb3IgY29udmVuaWVuY2UgYW5kIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB3ZSBzdXBwb3J0IHNldmVyYWxcblx0XHQgKiBkaWZmZXJlbnQgY2FsbGluZyBmb3Jtcy4gIE5vcm1hbGl6ZSB0aGVtIGhlcmUuXG5cdFx0ICovXG5cdFx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdFx0ICAgICdhcmd2JzogYXJncyxcblx0XHQgICAgJ3N0cmljdCc6IGZhbHNlXG5cdFx0fSk7XG5cdFxuXHRcdC8qXG5cdFx0ICogSWYgd2UndmUgYmVlbiBnaXZlbiBhIG5hbWUsIGFwcGx5IGl0IG5vdy5cblx0XHQgKi9cblx0XHRpZiAocGFyc2VkLm9wdGlvbnMubmFtZSkge1xuXHRcdFx0bW9kX2Fzc2VydHBsdXMuc3RyaW5nKHBhcnNlZC5vcHRpb25zLm5hbWUsXG5cdFx0XHQgICAgJ2Vycm9yXFwncyBcIm5hbWVcIiBtdXN0IGJlIGEgc3RyaW5nJyk7XG5cdFx0XHR0aGlzLm5hbWUgPSBwYXJzZWQub3B0aW9ucy5uYW1lO1xuXHRcdH1cblx0XG5cdFx0Lypcblx0XHQgKiBGb3IgZGVidWdnaW5nLCB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBvcmlnaW5hbCBzaG9ydCBtZXNzYWdlIChhdHRhY2hlZFxuXHRcdCAqIHRoaXMgRXJyb3IgcGFydGljdWxhcmx5KSBzZXBhcmF0ZWx5IGZyb20gdGhlIGNvbXBsZXRlIG1lc3NhZ2UgKHdoaWNoXG5cdFx0ICogaW5jbHVkZXMgdGhlIG1lc3NhZ2VzIG9mIG91ciBjYXVzZSBjaGFpbikuXG5cdFx0ICovXG5cdFx0dGhpcy5qc2Vfc2hvcnRtc2cgPSBwYXJzZWQuc2hvcnRtZXNzYWdlO1xuXHRcdG1lc3NhZ2UgPSBwYXJzZWQuc2hvcnRtZXNzYWdlO1xuXHRcblx0XHQvKlxuXHRcdCAqIElmIHdlJ3ZlIGJlZW4gZ2l2ZW4gYSBjYXVzZSwgcmVjb3JkIGEgcmVmZXJlbmNlIHRvIGl0IGFuZCB1cGRhdGUgb3VyXG5cdFx0ICogbWVzc2FnZSBhcHByb3ByaWF0ZWx5LlxuXHRcdCAqL1xuXHRcdGNhdXNlID0gcGFyc2VkLm9wdGlvbnMuY2F1c2U7XG5cdFx0aWYgKGNhdXNlKSB7XG5cdFx0XHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihjYXVzZSksICdjYXVzZSBpcyBub3QgYW4gRXJyb3InKTtcblx0XHRcdHRoaXMuanNlX2NhdXNlID0gY2F1c2U7XG5cdFxuXHRcdFx0aWYgKCFwYXJzZWQub3B0aW9ucy5za2lwQ2F1c2VNZXNzYWdlKSB7XG5cdFx0XHRcdG1lc3NhZ2UgKz0gJzogJyArIGNhdXNlLm1lc3NhZ2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvKlxuXHRcdCAqIElmIHdlJ3ZlIGJlZW4gZ2l2ZW4gYW4gb2JqZWN0IHdpdGggcHJvcGVydGllcywgc2hhbGxvdy1jb3B5IHRoYXRcblx0XHQgKiBoZXJlLiAgV2UgZG9uJ3Qgd2FudCB0byB1c2UgYSBkZWVwIGNvcHkgaW4gY2FzZSB0aGVyZSBhcmUgbm9uLXBsYWluXG5cdFx0ICogb2JqZWN0cyBoZXJlLCBidXQgd2UgZG9uJ3Qgd2FudCB0byB1c2UgdGhlIG9yaWdpbmFsIG9iamVjdCBpbiBjYXNlXG5cdFx0ICogdGhlIGNhbGxlciBtb2RpZmllcyBpdCBsYXRlci5cblx0XHQgKi9cblx0XHR0aGlzLmpzZV9pbmZvID0ge307XG5cdFx0aWYgKHBhcnNlZC5vcHRpb25zLmluZm8pIHtcblx0XHRcdGZvciAoayBpbiBwYXJzZWQub3B0aW9ucy5pbmZvKSB7XG5cdFx0XHRcdHRoaXMuanNlX2luZm9ba10gPSBwYXJzZWQub3B0aW9ucy5pbmZvW2tdO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuXHRcblx0XHRpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcblx0XHRcdGN0b3IgPSBwYXJzZWQub3B0aW9ucy5jb25zdHJ1Y3Rvck9wdCB8fCB0aGlzLmNvbnN0cnVjdG9yO1xuXHRcdFx0RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgY3Rvcik7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKHRoaXMpO1xuXHR9XG5cdFxuXHRtb2RfdXRpbC5pbmhlcml0cyhWRXJyb3IsIEVycm9yKTtcblx0VkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ1ZFcnJvcic7XG5cdFxuXHRWRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdmVfdG9TdHJpbmcoKVxuXHR7XG5cdFx0dmFyIHN0ciA9ICh0aGlzLmhhc093blByb3BlcnR5KCduYW1lJykgJiYgdGhpcy5uYW1lIHx8XG5cdFx0XHR0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUubmFtZSk7XG5cdFx0aWYgKHRoaXMubWVzc2FnZSlcblx0XHRcdHN0ciArPSAnOiAnICsgdGhpcy5tZXNzYWdlO1xuXHRcblx0XHRyZXR1cm4gKHN0cik7XG5cdH07XG5cdFxuXHQvKlxuXHQgKiBUaGlzIG1ldGhvZCBpcyBwcm92aWRlZCBmb3IgY29tcGF0aWJpbGl0eS4gIE5ldyBjYWxsZXJzIHNob3VsZCB1c2Vcblx0ICogVkVycm9yLmNhdXNlKCkgaW5zdGVhZC4gIFRoYXQgbWV0aG9kIGFsc28gdXNlcyB0aGUgc2FuZXIgYG51bGxgIHJldHVybiB2YWx1ZVxuXHQgKiB3aGVuIHRoZXJlIGlzIG5vIGNhdXNlLlxuXHQgKi9cblx0VkVycm9yLnByb3RvdHlwZS5jYXVzZSA9IGZ1bmN0aW9uIHZlX2NhdXNlKClcblx0e1xuXHRcdHZhciBjYXVzZSA9IFZFcnJvci5jYXVzZSh0aGlzKTtcblx0XHRyZXR1cm4gKGNhdXNlID09PSBudWxsID8gdW5kZWZpbmVkIDogY2F1c2UpO1xuXHR9O1xuXHRcblx0Lypcblx0ICogU3RhdGljIG1ldGhvZHNcblx0ICpcblx0ICogVGhlc2UgY2xhc3MtbGV2ZWwgbWV0aG9kcyBhcmUgcHJvdmlkZWQgc28gdGhhdCBjYWxsZXJzIGNhbiB1c2UgdGhlbSBvblxuXHQgKiBpbnN0YW5jZXMgb2YgRXJyb3JzIHRoYXQgYXJlIG5vdCBWRXJyb3JzLiAgTmV3IGludGVyZmFjZXMgc2hvdWxkIGJlIHByb3ZpZGVkXG5cdCAqIG9ubHkgdXNpbmcgc3RhdGljIG1ldGhvZHMgdG8gZWxpbWluYXRlIHRoZSBjbGFzcyBvZiBwcm9ncmFtbWluZyBtaXN0YWtlIHdoZXJlXG5cdCAqIHBlb3BsZSBmYWlsIHRvIGNoZWNrIHdoZXRoZXIgdGhlIEVycm9yIG9iamVjdCBoYXMgdGhlIGNvcnJlc3BvbmRpbmcgbWV0aG9kcy5cblx0ICovXG5cdFxuXHRWRXJyb3IuY2F1c2UgPSBmdW5jdGlvbiAoZXJyKVxuXHR7XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoZXJyKSwgJ2VyciBtdXN0IGJlIGFuIEVycm9yJyk7XG5cdFx0cmV0dXJuIChtb2RfaXNFcnJvcihlcnIuanNlX2NhdXNlKSA/IGVyci5qc2VfY2F1c2UgOiBudWxsKTtcblx0fTtcblx0XG5cdFZFcnJvci5pbmZvID0gZnVuY3Rpb24gKGVycilcblx0e1xuXHRcdHZhciBydiwgY2F1c2UsIGs7XG5cdFxuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRcdGNhdXNlID0gVkVycm9yLmNhdXNlKGVycik7XG5cdFx0aWYgKGNhdXNlICE9PSBudWxsKSB7XG5cdFx0XHRydiA9IFZFcnJvci5pbmZvKGNhdXNlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cnYgPSB7fTtcblx0XHR9XG5cdFxuXHRcdGlmICh0eXBlb2YgKGVyci5qc2VfaW5mbykgPT0gJ29iamVjdCcgJiYgZXJyLmpzZV9pbmZvICE9PSBudWxsKSB7XG5cdFx0XHRmb3IgKGsgaW4gZXJyLmpzZV9pbmZvKSB7XG5cdFx0XHRcdHJ2W2tdID0gZXJyLmpzZV9pbmZvW2tdO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIChydik7XG5cdH07XG5cdFxuXHRWRXJyb3IuZmluZENhdXNlQnlOYW1lID0gZnVuY3Rpb24gKGVyciwgbmFtZSlcblx0e1xuXHRcdHZhciBjYXVzZTtcblx0XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoZXJyKSwgJ2VyciBtdXN0IGJlIGFuIEVycm9yJyk7XG5cdFx0bW9kX2Fzc2VydHBsdXMuc3RyaW5nKG5hbWUpO1xuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKG5hbWUubGVuZ3RoID4gMCwgJ25hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG5cdFxuXHRcdGZvciAoY2F1c2UgPSBlcnI7IGNhdXNlICE9PSBudWxsOyBjYXVzZSA9IFZFcnJvci5jYXVzZShjYXVzZSkpIHtcblx0XHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGNhdXNlKSk7XG5cdFx0XHRpZiAoY2F1c2UubmFtZSA9PSBuYW1lKSB7XG5cdFx0XHRcdHJldHVybiAoY2F1c2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIChudWxsKTtcblx0fTtcblx0XG5cdFZFcnJvci5mdWxsU3RhY2sgPSBmdW5jdGlvbiAoZXJyKVxuXHR7XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoZXJyKSwgJ2VyciBtdXN0IGJlIGFuIEVycm9yJyk7XG5cdFxuXHRcdHZhciBjYXVzZSA9IFZFcnJvci5jYXVzZShlcnIpO1xuXHRcblx0XHRpZiAoY2F1c2UpIHtcblx0XHRcdHJldHVybiAoZXJyLnN0YWNrICsgJ1xcbmNhdXNlZCBieTogJyArIFZFcnJvci5mdWxsU3RhY2soY2F1c2UpKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiAoZXJyLnN0YWNrKTtcblx0fTtcblx0XG5cdFxuXHQvKlxuXHQgKiBTRXJyb3IgaXMgbGlrZSBWRXJyb3IsIGJ1dCBzdHJpY3RlciBhYm91dCB0eXBlcy4gIFlvdSBjYW5ub3QgcGFzcyBcIm51bGxcIiBvclxuXHQgKiBcInVuZGVmaW5lZFwiIGFzIHN0cmluZyBhcmd1bWVudHMgdG8gdGhlIGZvcm1hdHRlci5cblx0ICovXG5cdGZ1bmN0aW9uIFNFcnJvcigpXG5cdHtcblx0XHR2YXIgYXJncywgb2JqLCBwYXJzZWQsIG9wdGlvbnM7XG5cdFxuXHRcdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXHRcdGlmICghKHRoaXMgaW5zdGFuY2VvZiBTRXJyb3IpKSB7XG5cdFx0XHRvYmogPSBPYmplY3QuY3JlYXRlKFNFcnJvci5wcm90b3R5cGUpO1xuXHRcdFx0U0Vycm9yLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcblx0XHRcdHJldHVybiAob2JqKTtcblx0XHR9XG5cdFxuXHRcdHBhcnNlZCA9IHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoe1xuXHRcdCAgICAnYXJndic6IGFyZ3MsXG5cdFx0ICAgICdzdHJpY3QnOiB0cnVlXG5cdFx0fSk7XG5cdFxuXHRcdG9wdGlvbnMgPSBwYXJzZWQub3B0aW9ucztcblx0XHRWRXJyb3IuY2FsbCh0aGlzLCBvcHRpb25zLCAnJXMnLCBwYXJzZWQuc2hvcnRtZXNzYWdlKTtcblx0XG5cdFx0cmV0dXJuICh0aGlzKTtcblx0fVxuXHRcblx0Lypcblx0ICogV2UgZG9uJ3QgYm90aGVyIHNldHRpbmcgU0Vycm9yLnByb3RvdHlwZS5uYW1lIGJlY2F1c2Ugb25jZSBjb25zdHJ1Y3RlZCxcblx0ICogU0Vycm9ycyBhcmUganVzdCBsaWtlIFZFcnJvcnMuXG5cdCAqL1xuXHRtb2RfdXRpbC5pbmhlcml0cyhTRXJyb3IsIFZFcnJvcik7XG5cdFxuXHRcblx0Lypcblx0ICogUmVwcmVzZW50cyBhIGNvbGxlY3Rpb24gb2YgZXJyb3JzIGZvciB0aGUgcHVycG9zZSBvZiBjb25zdW1lcnMgdGhhdCBnZW5lcmFsbHlcblx0ICogb25seSBkZWFsIHdpdGggb25lIGVycm9yLiAgQ2FsbGVycyBjYW4gZXh0cmFjdCB0aGUgaW5kaXZpZHVhbCBlcnJvcnNcblx0ICogY29udGFpbmVkIGluIHRoaXMgb2JqZWN0LCBidXQgbWF5IGFsc28ganVzdCB0cmVhdCBpdCBhcyBhIG5vcm1hbCBzaW5nbGVcblx0ICogZXJyb3IsIGluIHdoaWNoIGNhc2UgYSBzdW1tYXJ5IG1lc3NhZ2Ugd2lsbCBiZSBwcmludGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gTXVsdGlFcnJvcihlcnJvcnMpXG5cdHtcblx0XHRtb2RfYXNzZXJ0cGx1cy5hcnJheShlcnJvcnMsICdsaXN0IG9mIGVycm9ycycpO1xuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKGVycm9ycy5sZW5ndGggPiAwLCAnbXVzdCBiZSBhdCBsZWFzdCBvbmUgZXJyb3InKTtcblx0XHR0aGlzLmFzZV9lcnJvcnMgPSBlcnJvcnM7XG5cdFxuXHRcdFZFcnJvci5jYWxsKHRoaXMsIHtcblx0XHQgICAgJ2NhdXNlJzogZXJyb3JzWzBdXG5cdFx0fSwgJ2ZpcnN0IG9mICVkIGVycm9yJXMnLCBlcnJvcnMubGVuZ3RoLCBlcnJvcnMubGVuZ3RoID09IDEgPyAnJyA6ICdzJyk7XG5cdH1cblx0XG5cdG1vZF91dGlsLmluaGVyaXRzKE11bHRpRXJyb3IsIFZFcnJvcik7XG5cdE11bHRpRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnTXVsdGlFcnJvcic7XG5cdFxuXHRNdWx0aUVycm9yLnByb3RvdHlwZS5lcnJvcnMgPSBmdW5jdGlvbiBtZV9lcnJvcnMoKVxuXHR7XG5cdFx0cmV0dXJuICh0aGlzLmFzZV9lcnJvcnMuc2xpY2UoMCkpO1xuXHR9O1xuXHRcblx0XG5cdC8qXG5cdCAqIFNlZSBSRUFETUUubWQgZm9yIHJlZmVyZW5jZSBkZXRhaWxzLlxuXHQgKi9cblx0ZnVuY3Rpb24gV0Vycm9yKClcblx0e1xuXHRcdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgb3B0aW9ucztcblx0XG5cdFx0YXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG5cdFx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFdFcnJvcikpIHtcblx0XHRcdG9iaiA9IE9iamVjdC5jcmVhdGUoV0Vycm9yLnByb3RvdHlwZSk7XG5cdFx0XHRXRXJyb3IuYXBwbHkob2JqLCBhcmdzKTtcblx0XHRcdHJldHVybiAob2JqKTtcblx0XHR9XG5cdFxuXHRcdHBhcnNlZCA9IHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoe1xuXHRcdCAgICAnYXJndic6IGFyZ3MsXG5cdFx0ICAgICdzdHJpY3QnOiBmYWxzZVxuXHRcdH0pO1xuXHRcblx0XHRvcHRpb25zID0gcGFyc2VkLm9wdGlvbnM7XG5cdFx0b3B0aW9uc1snc2tpcENhdXNlTWVzc2FnZSddID0gdHJ1ZTtcblx0XHRWRXJyb3IuY2FsbCh0aGlzLCBvcHRpb25zLCAnJXMnLCBwYXJzZWQuc2hvcnRtZXNzYWdlKTtcblx0XG5cdFx0cmV0dXJuICh0aGlzKTtcblx0fVxuXHRcblx0bW9kX3V0aWwuaW5oZXJpdHMoV0Vycm9yLCBWRXJyb3IpO1xuXHRXRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnV0Vycm9yJztcblx0XG5cdFdFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB3ZV90b1N0cmluZygpXG5cdHtcblx0XHR2YXIgc3RyID0gKHRoaXMuaGFzT3duUHJvcGVydHkoJ25hbWUnKSAmJiB0aGlzLm5hbWUgfHxcblx0XHRcdHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lKTtcblx0XHRpZiAodGhpcy5tZXNzYWdlKVxuXHRcdFx0c3RyICs9ICc6ICcgKyB0aGlzLm1lc3NhZ2U7XG5cdFx0aWYgKHRoaXMuanNlX2NhdXNlICYmIHRoaXMuanNlX2NhdXNlLm1lc3NhZ2UpXG5cdFx0XHRzdHIgKz0gJzsgY2F1c2VkIGJ5ICcgKyB0aGlzLmpzZV9jYXVzZS50b1N0cmluZygpO1xuXHRcblx0XHRyZXR1cm4gKHN0cik7XG5cdH07XG5cdFxuXHQvKlxuXHQgKiBGb3IgcHVyZWx5IGhpc3RvcmljYWwgcmVhc29ucywgV0Vycm9yJ3MgY2F1c2UoKSBmdW5jdGlvbiBhbGxvd3MgeW91IHRvIHNldFxuXHQgKiB0aGUgY2F1c2UuXG5cdCAqL1xuXHRXRXJyb3IucHJvdG90eXBlLmNhdXNlID0gZnVuY3Rpb24gd2VfY2F1c2UoYylcblx0e1xuXHRcdGlmIChtb2RfaXNFcnJvcihjKSlcblx0XHRcdHRoaXMuanNlX2NhdXNlID0gYztcblx0XG5cdFx0cmV0dXJuICh0aGlzLmpzZV9jYXVzZSk7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oQnVmZmVyLCBwcm9jZXNzKSB7Ly8gQ29weXJpZ2h0IChjKSAyMDEyLCBNYXJrIENhdmFnZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0Ly8gQ29weXJpZ2h0IDIwMTUgSm95ZW50LCBJbmMuXG5cdFxuXHR2YXIgYXNzZXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciBTdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKS5TdHJlYW07XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHRcblx0Ly8vLS0tIEdsb2JhbHNcblx0XG5cdC8qIEpTU1RZTEVEICovXG5cdHZhciBVVUlEX1JFR0VYUCA9IC9eW2EtZkEtRjAtOV17OH0tW2EtZkEtRjAtOV17NH0tW2EtZkEtRjAtOV17NH0tW2EtZkEtRjAtOV17NH0tW2EtZkEtRjAtOV17MTJ9JC87XG5cdFxuXHRcblx0Ly8vLS0tIEludGVybmFsXG5cdFxuXHRmdW5jdGlvbiBfY2FwaXRhbGl6ZShzdHIpIHtcblx0ICAgIHJldHVybiAoc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Rvc3MobmFtZSwgZXhwZWN0ZWQsIG9wZXIsIGFyZywgYWN0dWFsKSB7XG5cdCAgICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHtcblx0ICAgICAgICBtZXNzYWdlOiB1dGlsLmZvcm1hdCgnJXMgKCVzKSBpcyByZXF1aXJlZCcsIG5hbWUsIGV4cGVjdGVkKSxcblx0ICAgICAgICBhY3R1YWw6IChhY3R1YWwgPT09IHVuZGVmaW5lZCkgPyB0eXBlb2YgKGFyZykgOiBhY3R1YWwoYXJnKSxcblx0ICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG5cdCAgICAgICAgb3BlcmF0b3I6IG9wZXIgfHwgJz09PScsXG5cdCAgICAgICAgc3RhY2tTdGFydEZ1bmN0aW9uOiBfdG9zcy5jYWxsZXJcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfZ2V0Q2xhc3MoYXJnKSB7XG5cdCAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpLnNsaWNlKDgsIC0xKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7XG5cdCAgICAvLyBXaHkgZXZlbiBib3RoZXIgd2l0aCBhc3NlcnRzP1xuXHR9XG5cdFxuXHRcblx0Ly8vLS0tIEV4cG9ydHNcblx0XG5cdHZhciB0eXBlcyA9IHtcblx0ICAgIGJvb2w6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnYm9vbGVhbic7IH1cblx0ICAgIH0sXG5cdCAgICBmdW5jOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ2Z1bmN0aW9uJzsgfVxuXHQgICAgfSxcblx0ICAgIHN0cmluZzoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdzdHJpbmcnOyB9XG5cdCAgICB9LFxuXHQgICAgb2JqZWN0OiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBudW1iZXI6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oYXJnKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgZmluaXRlOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGFyZykgJiYgaXNGaW5pdGUoYXJnKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgYnVmZmVyOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihhcmcpOyB9LFxuXHQgICAgICAgIG9wZXJhdG9yOiAnQnVmZmVyLmlzQnVmZmVyJ1xuXHQgICAgfSxcblx0ICAgIGFycmF5OiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKTsgfSxcblx0ICAgICAgICBvcGVyYXRvcjogJ0FycmF5LmlzQXJyYXknXG5cdCAgICB9LFxuXHQgICAgc3RyZWFtOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIFN0cmVhbTsgfSxcblx0ICAgICAgICBvcGVyYXRvcjogJ2luc3RhbmNlb2YnLFxuXHQgICAgICAgIGFjdHVhbDogX2dldENsYXNzXG5cdCAgICB9LFxuXHQgICAgZGF0ZToge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBhcmcgaW5zdGFuY2VvZiBEYXRlOyB9LFxuXHQgICAgICAgIG9wZXJhdG9yOiAnaW5zdGFuY2VvZicsXG5cdCAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3Ncblx0ICAgIH0sXG5cdCAgICByZWdleHA6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnIGluc3RhbmNlb2YgUmVnRXhwOyB9LFxuXHQgICAgICAgIG9wZXJhdG9yOiAnaW5zdGFuY2VvZicsXG5cdCAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3Ncblx0ICAgIH0sXG5cdCAgICB1dWlkOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ3N0cmluZycgJiYgVVVJRF9SRUdFWFAudGVzdChhcmcpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgb3BlcmF0b3I6ICdpc1VVSUQnXG5cdCAgICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfc2V0RXhwb3J0cyhuZGVidWcpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModHlwZXMpO1xuXHQgICAgdmFyIG91dDtcblx0XG5cdCAgICAvKiByZS1leHBvcnQgc3RhbmRhcmQgYXNzZXJ0ICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9OREVCVUcpIHtcblx0ICAgICAgICBvdXQgPSBub29wO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBvdXQgPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcblx0ICAgICAgICAgICAgaWYgKCFhcmcpIHtcblx0ICAgICAgICAgICAgICAgIF90b3NzKG1zZywgJ3RydWUnLCBhcmcpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvKiBzdGFuZGFyZCBjaGVja3MgKi9cblx0ICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuXHQgICAgICAgIGlmIChuZGVidWcpIHtcblx0ICAgICAgICAgICAgb3V0W2tdID0gbm9vcDtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuXHQgICAgICAgIG91dFtrXSA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuXHQgICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnKSkge1xuXHQgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBrLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKiBvcHRpb25hbCBjaGVja3MgKi9cblx0ICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuXHQgICAgICAgIHZhciBuYW1lID0gJ29wdGlvbmFsJyArIF9jYXBpdGFsaXplKGspO1xuXHQgICAgICAgIGlmIChuZGVidWcpIHtcblx0ICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuXHQgICAgICAgIG91dFtuYW1lXSA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuXHQgICAgICAgICAgICBpZiAoYXJnID09PSB1bmRlZmluZWQgfHwgYXJnID09PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZykpIHtcblx0ICAgICAgICAgICAgICAgIF90b3NzKG1zZywgaywgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyogYXJyYXlPZiBjaGVja3MgKi9cblx0ICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuXHQgICAgICAgIHZhciBuYW1lID0gJ2FycmF5T2YnICsgX2NhcGl0YWxpemUoayk7XG5cdCAgICAgICAgaWYgKG5kZWJ1Zykge1xuXHQgICAgICAgICAgICBvdXRbbmFtZV0gPSBub29wO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB0eXBlID0gdHlwZXNba107XG5cdCAgICAgICAgdmFyIGV4cGVjdGVkID0gJ1snICsgayArICddJztcblx0ICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcblx0ICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFyZykpIHtcblx0ICAgICAgICAgICAgICAgIF90b3NzKG1zZywgZXhwZWN0ZWQsIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBpO1xuXHQgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnW2ldKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIF90b3NzKG1zZywgZXhwZWN0ZWQsIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qIG9wdGlvbmFsQXJyYXlPZiBjaGVja3MgKi9cblx0ICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuXHQgICAgICAgIHZhciBuYW1lID0gJ29wdGlvbmFsQXJyYXlPZicgKyBfY2FwaXRhbGl6ZShrKTtcblx0ICAgICAgICBpZiAobmRlYnVnKSB7XG5cdCAgICAgICAgICAgIG91dFtuYW1lXSA9IG5vb3A7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcblx0ICAgICAgICB2YXIgZXhwZWN0ZWQgPSAnWycgKyBrICsgJ10nO1xuXHQgICAgICAgIG91dFtuYW1lXSA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuXHQgICAgICAgICAgICBpZiAoYXJnID09PSB1bmRlZmluZWQgfHwgYXJnID09PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFyZykpIHtcblx0ICAgICAgICAgICAgICAgIF90b3NzKG1zZywgZXhwZWN0ZWQsIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBpO1xuXHQgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnW2ldKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIF90b3NzKG1zZywgZXhwZWN0ZWQsIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qIHJlLWV4cG9ydCBidWlsdC1pbiBhc3NlcnRpb25zICovXG5cdCAgICBPYmplY3Qua2V5cyhhc3NlcnQpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcblx0ICAgICAgICBpZiAoayA9PT0gJ0Fzc2VydGlvbkVycm9yJykge1xuXHQgICAgICAgICAgICBvdXRba10gPSBhc3NlcnRba107XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKG5kZWJ1Zykge1xuXHQgICAgICAgICAgICBvdXRba10gPSBub29wO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIG91dFtrXSA9IGFzc2VydFtrXTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qIGV4cG9ydCBvdXJzZWx2ZXMgKGZvciB1bml0IHRlc3RzIF9vbmx5XykgKi9cblx0ICAgIG91dC5fc2V0RXhwb3J0cyA9IF9zZXRFeHBvcnRzO1xuXHRcblx0ICAgIHJldHVybiBvdXQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gX3NldEV4cG9ydHMocHJvY2Vzcy5lbnYuTk9ERV9OREVCVUcpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTQpLkJ1ZmZlciwgX193ZWJwYWNrX3JlcXVpcmVfXygxOCkpKVxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIsIGdsb2JhbCkgey8qIVxuXHQgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cblx0ICpcblx0ICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG5cdCAqIEBsaWNlbnNlICBNSVRcblx0ICovXG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdFxuXHQndXNlIHN0cmljdCdcblx0XG5cdHZhciBiYXNlNjQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KVxuXHR2YXIgaWVlZTc1NCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpXG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNylcblx0XG5cdGV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5cdGV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcblx0ZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cdFxuXHQvKipcblx0ICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcblx0ICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcblx0ICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuXHQgKlxuXHQgKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG5cdCAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cblx0ICpcblx0ICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuXHQgKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cblx0ICpcblx0ICogTm90ZTpcblx0ICpcblx0ICogICAtIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcyxcblx0ICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuXHQgKlxuXHQgKiAgIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cblx0ICpcblx0ICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2Zcblx0ICogICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuXHRcblx0ICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcblx0ICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuXG5cdCAqL1xuXHRCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcblx0ICA/IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUXG5cdCAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cdFxuXHQvKlxuXHQgKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG5cdCAqL1xuXHRleHBvcnRzLmtNYXhMZW5ndGggPSBrTWF4TGVuZ3RoKClcblx0XG5cdGZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG5cdCAgICBhcnIuX19wcm90b19fID0ge19fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsIGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfX1cblx0ICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG5cdCAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcblx0ICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG5cdCAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG5cdCAgICA/IDB4N2ZmZmZmZmZcblx0ICAgIDogMHgzZmZmZmZmZlxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkge1xuXHQgIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG5cdCAgfVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG5cdCAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuXHQgICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3Ncblx0ICAgIGlmICh0aGF0ID09PSBudWxsKSB7XG5cdCAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcblx0ICAgIH1cblx0ICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG5cdCAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2Zcblx0ICogYFVpbnQ4QXJyYXlgLCBzbyB0aGUgcmV0dXJuZWQgaW5zdGFuY2VzIHdpbGwgaGF2ZSBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgbWV0aG9kc1xuXHQgKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuXHQgKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuXHQgKlxuXHQgKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuXHQgICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG5cdCAgfVxuXHRcblx0ICAvLyBDb21tb24gY2FzZS5cblx0ICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcblx0ICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKFxuXHQgICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcblx0ICAgICAgKVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcblx0ICB9XG5cdCAgcmV0dXJuIGZyb20odGhpcywgYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXHRcblx0Ly8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uXG5cdEJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcblx0ICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuXHQgIHJldHVybiBhcnJcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbSAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuXHQgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBmcm9tU3RyaW5nKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuXHQgKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cblx0ICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuXHQgKiBCdWZmZXIuZnJvbShhcnJheSlcblx0ICogQnVmZmVyLmZyb20oYnVmZmVyKVxuXHQgKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcblx0ICoqL1xuXHRCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGZyb20obnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0aWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuXHQgIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG5cdCAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmXG5cdCAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuXHQgICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTdcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7XG5cdCAgICAgIHZhbHVlOiBudWxsLFxuXHQgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgIH0pXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG5cdCAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG5cdCAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJylcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFsbG9jICh0aGF0LCBzaXplLCBmaWxsLCBlbmNvZGluZykge1xuXHQgIGFzc2VydFNpemUoc2l6ZSlcblx0ICBpZiAoc2l6ZSA8PSAwKSB7XG5cdCAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG5cdCAgfVxuXHQgIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcblx0ICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzXG5cdCAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG5cdCAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG5cdCAgICByZXR1cm4gdHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJ1xuXHQgICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuXHQgICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpXG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cblx0ICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKVxuXHQgKiovXG5cdEJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuXHQgIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZylcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWxsb2NVbnNhZmUgKHRoYXQsIHNpemUpIHtcblx0ICBhc3NlcnRTaXplKHNpemUpXG5cdCAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuXHQgICAgICB0aGF0W2ldID0gMFxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHQvKipcblx0ICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cblx0ICogKi9cblx0QnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcblx0ICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcblx0fVxuXHQvKipcblx0ICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG5cdCAqL1xuXHRCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcblx0ICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuXHQgIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuXHQgICAgZW5jb2RpbmcgPSAndXRmOCdcblx0ICB9XG5cdFxuXHQgIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImVuY29kaW5nXCIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpXG5cdCAgfVxuXHRcblx0ICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcblx0ICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblx0XG5cdCAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblx0XG5cdCAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG5cdCAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGxcblx0ICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG5cdCAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcblx0ICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbClcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG5cdCAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuXHQgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcblx0ICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuXHQgIH1cblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcblx0ICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblx0XG5cdCAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ2xlbmd0aFxcJyBpcyBvdXQgb2YgYm91bmRzJylcblx0ICB9XG5cdFxuXHQgIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXG5cdCAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcblx0ICB9IGVsc2Uge1xuXHQgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuXHQgIH1cblx0XG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2Vcblx0ICAgIHRoYXQgPSBhcnJheVxuXHQgICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3Ncblx0ICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuXHQgIH1cblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHtcblx0ICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcblx0ICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMFxuXHQgICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pXG5cdFxuXHQgICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgIHJldHVybiB0aGF0XG5cdCAgICB9XG5cdFxuXHQgICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKVxuXHQgICAgcmV0dXJuIHRoYXRcblx0ICB9XG5cdFxuXHQgIGlmIChvYmopIHtcblx0ICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7XG5cdCAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcblx0ICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApXG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcblx0ICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG5cdCAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG5cdCAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG5cdCAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcblx0ICB9XG5cdCAgcmV0dXJuIGxlbmd0aCB8IDBcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG5cdCAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG5cdCAgICBsZW5ndGggPSAwXG5cdCAgfVxuXHQgIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aClcblx0fVxuXHRcblx0QnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcblx0ICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxuXHR9XG5cdFxuXHRCdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcblx0ICB9XG5cdFxuXHQgIGlmIChhID09PSBiKSByZXR1cm4gMFxuXHRcblx0ICB2YXIgeCA9IGEubGVuZ3RoXG5cdCAgdmFyIHkgPSBiLmxlbmd0aFxuXHRcblx0ICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuXHQgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcblx0ICAgICAgeCA9IGFbaV1cblx0ICAgICAgeSA9IGJbaV1cblx0ICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh4IDwgeSkgcmV0dXJuIC0xXG5cdCAgaWYgKHkgPCB4KSByZXR1cm4gMVxuXHQgIHJldHVybiAwXG5cdH1cblx0XG5cdEJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcblx0ICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuXHQgICAgY2FzZSAnaGV4Jzpcblx0ICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgY2FzZSAnbGF0aW4xJzpcblx0ICAgIGNhc2UgJ2JpbmFyeSc6XG5cdCAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgY2FzZSAndWNzMic6XG5cdCAgICBjYXNlICd1Y3MtMic6XG5cdCAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgcmV0dXJuIHRydWVcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG5cdCAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG5cdCAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG5cdCAgfVxuXHRcblx0ICB2YXIgaVxuXHQgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgbGVuZ3RoID0gMFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcblx0ICB2YXIgcG9zID0gMFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG5cdCAgICB2YXIgYnVmID0gbGlzdFtpXVxuXHQgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuXHQgICAgfVxuXHQgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG5cdCAgICBwb3MgKz0gYnVmLmxlbmd0aFxuXHQgIH1cblx0ICByZXR1cm4gYnVmZmVyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcblx0ICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcblx0ICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcblx0ICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoXG5cdCAgfVxuXHQgIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuXHQgICAgc3RyaW5nID0gJycgKyBzdHJpbmdcblx0ICB9XG5cdFxuXHQgIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG5cdCAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblx0XG5cdCAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG5cdCAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2Vcblx0ICBmb3IgKDs7KSB7XG5cdCAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG5cdCAgICAgIGNhc2UgJ2FzY2lpJzpcblx0ICAgICAgY2FzZSAnbGF0aW4xJzpcblx0ICAgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgICAgICByZXR1cm4gbGVuXG5cdCAgICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICBjYXNlICd1dGYtOCc6XG5cdCAgICAgIGNhc2UgdW5kZWZpbmVkOlxuXHQgICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuXHQgICAgICBjYXNlICd1Y3MyJzpcblx0ICAgICAgY2FzZSAndWNzLTInOlxuXHQgICAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICAgIHJldHVybiBsZW4gKiAyXG5cdCAgICAgIGNhc2UgJ2hleCc6XG5cdCAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuXHQgICAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0Zjhcblx0ICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG5cdCAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdEJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXHRcblx0ZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cdFxuXHQgIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuXHQgIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cdFxuXHQgIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuXHQgIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cblx0ICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxuXHQgIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuXHQgIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuXHQgICAgc3RhcnQgPSAwXG5cdCAgfVxuXHQgIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG5cdCAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cblx0ICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkge1xuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDw9IDApIHtcblx0ICAgIHJldHVybiAnJ1xuXHQgIH1cblx0XG5cdCAgLy8gRm9yY2UgY29lcnNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cblx0ICBlbmQgPj4+PSAwXG5cdCAgc3RhcnQgPj4+PSAwXG5cdFxuXHQgIGlmIChlbmQgPD0gc3RhcnQpIHtcblx0ICAgIHJldHVybiAnJ1xuXHQgIH1cblx0XG5cdCAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblx0XG5cdCAgd2hpbGUgKHRydWUpIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICBjYXNlICd1dGYtOCc6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ3VjczInOlxuXHQgICAgICBjYXNlICd1Y3MtMic6XG5cdCAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgICBjYXNlICd1dGYtMTZsZSc6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcblx0ICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG5cdCAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuXHQvLyBCdWZmZXIgaW5zdGFuY2VzLlxuXHRCdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcblx0XG5cdGZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcblx0ICB2YXIgaSA9IGJbbl1cblx0ICBiW25dID0gYlttXVxuXHQgIGJbbV0gPSBpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcblx0ICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcblx0ICBpZiAobGVuICUgMiAhPT0gMCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcblx0ICB9XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuXHQgICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIGlmIChsZW4gJSA0ICE9PSAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG5cdCAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuXHQgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpXG5cdCAgfVxuXHQgIHJldHVybiB0aGlzXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcblx0ICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcblx0ICBpZiAobGVuICUgOCAhPT0gMCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcblx0ICB9XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gOCkge1xuXHQgICAgc3dhcCh0aGlzLCBpLCBpICsgNylcblx0ICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KVxuXHQgICAgc3dhcCh0aGlzLCBpICsgMiwgaSArIDUpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcblx0ICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG5cdCAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuXHQgIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcblx0ICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcblx0ICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG5cdCAgdmFyIHN0ciA9ICcnXG5cdCAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcblx0ICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG5cdCAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuXHQgICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuXHQgIH1cblx0ICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuXHQgIH1cblx0XG5cdCAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHN0YXJ0ID0gMFxuXHQgIH1cblx0ICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG5cdCAgfVxuXHQgIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdGhpc1N0YXJ0ID0gMFxuXHQgIH1cblx0ICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcblx0ICB9XG5cdFxuXHQgIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpXG5cdCAgfVxuXHRcblx0ICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG5cdCAgICByZXR1cm4gMFxuXHQgIH1cblx0ICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHtcblx0ICAgIHJldHVybiAtMVxuXHQgIH1cblx0ICBpZiAoc3RhcnQgPj0gZW5kKSB7XG5cdCAgICByZXR1cm4gMVxuXHQgIH1cblx0XG5cdCAgc3RhcnQgPj4+PSAwXG5cdCAgZW5kID4+Pj0gMFxuXHQgIHRoaXNTdGFydCA+Pj49IDBcblx0ICB0aGlzRW5kID4+Pj0gMFxuXHRcblx0ICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMFxuXHRcblx0ICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcblx0ICB2YXIgeSA9IGVuZCAtIHN0YXJ0XG5cdCAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cdFxuXHQgIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuXHQgIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuXHQgICAgICB4ID0gdGhpc0NvcHlbaV1cblx0ICAgICAgeSA9IHRhcmdldENvcHlbaV1cblx0ICAgICAgYnJlYWtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh4IDwgeSkgcmV0dXJuIC0xXG5cdCAgaWYgKHkgPCB4KSByZXR1cm4gMVxuXHQgIHJldHVybiAwXG5cdH1cblx0XG5cdC8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcblx0Ly8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cblx0Ly9cblx0Ly8gQXJndW1lbnRzOlxuXHQvLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuXHQvLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlclxuXHQvLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcblx0Ly8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcblx0Ly8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2Zcblx0ZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG5cdCAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG5cdCAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXHRcblx0ICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuXHQgIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuXHQgICAgYnl0ZU9mZnNldCA9IDBcblx0ICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7XG5cdCAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuXHQgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG5cdCAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcblx0ICB9XG5cdCAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuXHQgIGlmIChpc05hTihieXRlT2Zmc2V0KSkge1xuXHQgICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG5cdCAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcblx0ICB9XG5cdFxuXHQgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG5cdCAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXRcblx0ICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG5cdCAgICBpZiAoZGlyKSByZXR1cm4gLTFcblx0ICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxXG5cdCAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuXHQgICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcblx0ICAgIGVsc2UgcmV0dXJuIC0xXG5cdCAgfVxuXHRcblx0ICAvLyBOb3JtYWxpemUgdmFsXG5cdCAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuXHQgIH1cblx0XG5cdCAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2Zcblx0ICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcblx0ICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcblx0ICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgIHJldHVybiAtMVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cblx0ICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJlxuXHQgICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGlmIChkaXIpIHtcblx0ICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcblx0ICB9XG5cdFxuXHQgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcblx0ICB2YXIgaW5kZXhTaXplID0gMVxuXHQgIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoXG5cdCAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblx0XG5cdCAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcblx0ICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG5cdCAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuXHQgICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHtcblx0ICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG5cdCAgICAgICAgcmV0dXJuIC0xXG5cdCAgICAgIH1cblx0ICAgICAgaW5kZXhTaXplID0gMlxuXHQgICAgICBhcnJMZW5ndGggLz0gMlxuXHQgICAgICB2YWxMZW5ndGggLz0gMlxuXHQgICAgICBieXRlT2Zmc2V0IC89IDJcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkge1xuXHQgICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkge1xuXHQgICAgICByZXR1cm4gYnVmW2ldXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGlcblx0ICBpZiAoZGlyKSB7XG5cdCAgICB2YXIgZm91bmRJbmRleCA9IC0xXG5cdCAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuXHQgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcblx0ICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4XG5cdCAgICAgICAgZm91bmRJbmRleCA9IC0xXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcblx0ICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICAgIHZhciBmb3VuZCA9IHRydWVcblx0ICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykge1xuXHQgICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcblx0ICAgICAgICAgIGZvdW5kID0gZmFsc2Vcblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiAtMVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcblx0ICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuXHQgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcblx0ICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuXHQgIGlmICghbGVuZ3RoKSB7XG5cdCAgICBsZW5ndGggPSByZW1haW5pbmdcblx0ICB9IGVsc2Uge1xuXHQgICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcblx0ICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcblx0ICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuXHQgIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG5cdCAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cdFxuXHQgIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG5cdCAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0ICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG5cdCAgICBpZiAoaXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuXHQgIH1cblx0ICByZXR1cm4gaVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuXHQgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5jb2RpbmcgPSAndXRmOCdcblx0ICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG5cdCAgICBvZmZzZXQgPSAwXG5cdCAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cdCAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgZW5jb2RpbmcgPSBvZmZzZXRcblx0ICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG5cdCAgICBvZmZzZXQgPSAwXG5cdCAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcblx0ICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcblx0ICAgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG5cdCAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcblx0ICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbmNvZGluZyA9IGxlbmd0aFxuXHQgICAgICBsZW5ndGggPSB1bmRlZmluZWRcblx0ICAgIH1cblx0ICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG5cdCAgfSBlbHNlIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcihcblx0ICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuXHQgICAgKVxuXHQgIH1cblx0XG5cdCAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG5cdCAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cdFxuXHQgIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblx0XG5cdCAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2Vcblx0ICBmb3IgKDs7KSB7XG5cdCAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG5cdCAgICAgIGNhc2UgJ2hleCc6XG5cdCAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICd1dGY4Jzpcblx0ICAgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ2FzY2lpJzpcblx0ICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnbGF0aW4xJzpcblx0ICAgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcblx0ICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ3VjczInOlxuXHQgICAgICBjYXNlICd1Y3MtMic6XG5cdCAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgICBjYXNlICd1dGYtMTZsZSc6XG5cdCAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcblx0ICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG5cdCAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHR5cGU6ICdCdWZmZXInLFxuXHQgICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuXHQgICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zilcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXHQgIHZhciByZXMgPSBbXVxuXHRcblx0ICB2YXIgaSA9IHN0YXJ0XG5cdCAgd2hpbGUgKGkgPCBlbmQpIHtcblx0ICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cblx0ICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG5cdCAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcblx0ICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG5cdCAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuXHQgICAgICA6IDFcblx0XG5cdCAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG5cdCAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblx0XG5cdCAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuXHQgICAgICAgIGNhc2UgMTpcblx0ICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG5cdCAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuXHQgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG5cdCAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuXHQgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuXHQgICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuXHQgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG5cdCAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuXHQgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgNDpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG5cdCAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuXHQgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG5cdCAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuXHQgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuXHQgICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG5cdCAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcblx0ICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG5cdCAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuXHQgICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuXHQgICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuXHQgICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG5cdCAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG5cdCAgICB9XG5cdFxuXHQgICAgcmVzLnB1c2goY29kZVBvaW50KVxuXHQgICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcblx0fVxuXHRcblx0Ly8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG5cdC8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cblx0Ly8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxuXHR2YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblx0XG5cdGZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuXHQgIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuXHQgIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcblx0ICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuXHQgIH1cblx0XG5cdCAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuXHQgIHZhciByZXMgPSAnJ1xuXHQgIHZhciBpID0gMFxuXHQgIHdoaWxlIChpIDwgbGVuKSB7XG5cdCAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcblx0ICAgICAgU3RyaW5nLFxuXHQgICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG5cdCAgICApXG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIHJldCA9ICcnXG5cdCAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXHRcblx0ICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuXHQgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3Rilcblx0ICB9XG5cdCAgcmV0dXJuIHJldFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIHJldCA9ICcnXG5cdCAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXHRcblx0ICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuXHQgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXHRcblx0ICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG5cdCAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXHRcblx0ICB2YXIgb3V0ID0gJydcblx0ICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuXHQgICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcblx0ICB9XG5cdCAgcmV0dXJuIG91dFxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuXHQgIHZhciByZXMgPSAnJ1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcblx0ICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuXHQgIH1cblx0ICByZXR1cm4gcmVzXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIHN0YXJ0ID0gfn5zdGFydFxuXHQgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblx0XG5cdCAgaWYgKHN0YXJ0IDwgMCkge1xuXHQgICAgc3RhcnQgKz0gbGVuXG5cdCAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG5cdCAgICBzdGFydCA9IGxlblxuXHQgIH1cblx0XG5cdCAgaWYgKGVuZCA8IDApIHtcblx0ICAgIGVuZCArPSBsZW5cblx0ICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG5cdCAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcblx0ICAgIGVuZCA9IGxlblxuXHQgIH1cblx0XG5cdCAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXHRcblx0ICB2YXIgbmV3QnVmXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG5cdCAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuXHQgICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7XG5cdCAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ld0J1ZlxuXHR9XG5cdFxuXHQvKlxuXHQgKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cblx0ICovXG5cdGZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG5cdCAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50Jylcblx0ICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblx0XG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIGkgPSAwXG5cdCAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblx0ICB9XG5cdFxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cblx0ICB2YXIgbXVsID0gMVxuXHQgIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcblx0ICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuXHQgICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcblx0ICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0XG5cdCAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcblx0ICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuXHQgICAgdGhpc1tvZmZzZXQgKyAzXSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblx0XG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIGkgPSAwXG5cdCAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG5cdCAgfVxuXHQgIG11bCAqPSAweDgwXG5cdFxuXHQgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblx0XG5cdCAgdmFyIGkgPSBieXRlTGVuZ3RoXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG5cdCAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG5cdCAgfVxuXHQgIG11bCAqPSAweDgwXG5cdFxuXHQgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcblx0ICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG5cdCAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG5cdCAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuXHQgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0XG5cdCAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcblx0ICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0XG5cdCAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAzXSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuXHQgIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcblx0ICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG5cdCAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcblx0ICB9XG5cdFxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIGkgPSAwXG5cdCAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuXHQgIH1cblx0XG5cdCAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuXHQgIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG5cdCAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuXHQgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgcmV0dXJuIG9mZnNldCArIDFcblx0fVxuXHRcblx0ZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcblx0ICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7XG5cdCAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuXHQgICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcblx0ICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgKytpKSB7XG5cdCAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG5cdCAgfVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXHRcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuXHQgIH1cblx0XG5cdCAgdmFyIGkgPSAwXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgc3ViID0gMFxuXHQgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuXHQgICAgICBzdWIgPSAxXG5cdCAgICB9XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblx0XG5cdCAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcblx0ICB9XG5cdFxuXHQgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSAwXG5cdCAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuXHQgIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcblx0ICAgICAgc3ViID0gMVxuXHQgICAgfVxuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG5cdCAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuXHQgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgcmV0dXJuIG9mZnNldCArIDFcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcblx0ICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG5cdCAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcblx0ICB9XG5cdCAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG5cdCAgfVxuXHQgIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuXHQgIHJldHVybiBvZmZzZXQgKyA4XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdC8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcblx0QnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuXHQgIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuXHQgIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcblx0ICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG5cdCAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG5cdCAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cdFxuXHQgIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuXHQgIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuXHQgIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXHRcblx0ICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG5cdCAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuXHQgIH1cblx0ICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG5cdCAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cdFxuXHQgIC8vIEFyZSB3ZSBvb2I/XG5cdCAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuXHQgIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuXHQgICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcblx0ICB9XG5cdFxuXHQgIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuXHQgIHZhciBpXG5cdFxuXHQgIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuXHQgICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG5cdCAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xuXHQgICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuXHQgICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcblx0ICAgICAgdGFyZ2V0LFxuXHQgICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG5cdCAgICAgIHRhcmdldFN0YXJ0XG5cdCAgICApXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbGVuXG5cdH1cblx0XG5cdC8vIFVzYWdlOlxuXHQvLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcblx0Ly8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG5cdC8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuXHRCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG5cdCAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczpcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIGVuY29kaW5nID0gc3RhcnRcblx0ICAgICAgc3RhcnQgPSAwXG5cdCAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIGVuY29kaW5nID0gZW5kXG5cdCAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgICB9XG5cdCAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG5cdCAgICAgIGlmIChjb2RlIDwgMjU2KSB7XG5cdCAgICAgICAgdmFsID0gY29kZVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuXHQgICAgdmFsID0gdmFsICYgMjU1XG5cdCAgfVxuXHRcblx0ICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cblx0ICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGVuZCA8PSBzdGFydCkge1xuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHQgIHN0YXJ0ID0gc3RhcnQgPj4+IDBcblx0ICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwXG5cdFxuXHQgIGlmICghdmFsKSB2YWwgPSAwXG5cdFxuXHQgIHZhciBpXG5cdCAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICAgIHRoaXNbaV0gPSB2YWxcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbClcblx0ICAgICAgPyB2YWxcblx0ICAgICAgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpXG5cdCAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuXHQgICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXNcblx0fVxuXHRcblx0Ly8gSEVMUEVSIEZVTkNUSU9OU1xuXHQvLyA9PT09PT09PT09PT09PT09XG5cdFxuXHR2YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblx0XG5cdGZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcblx0ICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3Rcblx0ICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG5cdCAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuXHQgIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG5cdCAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG5cdCAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG5cdCAgICBzdHIgPSBzdHIgKyAnPSdcblx0ICB9XG5cdCAgcmV0dXJuIHN0clxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcblx0ICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9IZXggKG4pIHtcblx0ICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcblx0ICByZXR1cm4gbi50b1N0cmluZygxNilcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcblx0ICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG5cdCAgdmFyIGNvZGVQb2ludFxuXHQgIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG5cdCAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cdCAgdmFyIGJ5dGVzID0gW11cblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuXHQgICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblx0XG5cdCAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG5cdCAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuXHQgICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuXHQgICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcblx0ICAgICAgICAvLyBubyBsZWFkIHlldFxuXHQgICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcblx0ICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcblx0ICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgICAgICAgY29udGludWVcblx0ICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcblx0ICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcblx0ICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgICAgICAgY29udGludWVcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHZhbGlkIGxlYWRcblx0ICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cdFxuXHQgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcblx0ICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuXHQgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblx0ICAgICAgICBjb250aW51ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuXHQgICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG5cdCAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcblx0ICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuXHQgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcblx0ICAgIH1cblx0XG5cdCAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXHRcblx0ICAgIC8vIGVuY29kZSB1dGY4XG5cdCAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuXHQgICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcblx0ICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuXHQgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuXHQgICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcblx0ICAgICAgYnl0ZXMucHVzaChcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG5cdCAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuXHQgICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcblx0ICAgICAgYnl0ZXMucHVzaChcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcblx0ICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuXHQgICAgICApXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYnl0ZXNcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcblx0ICB2YXIgYnl0ZUFycmF5ID0gW11cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuXHQgICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG5cdCAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG5cdCAgfVxuXHQgIHJldHVybiBieXRlQXJyYXlcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcblx0ICB2YXIgYywgaGksIGxvXG5cdCAgdmFyIGJ5dGVBcnJheSA9IFtdXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcblx0ICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXHRcblx0ICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuXHQgICAgaGkgPSBjID4+IDhcblx0ICAgIGxvID0gYyAlIDI1NlxuXHQgICAgYnl0ZUFycmF5LnB1c2gobG8pXG5cdCAgICBieXRlQXJyYXkucHVzaChoaSlcblx0ICB9XG5cdFxuXHQgIHJldHVybiBieXRlQXJyYXlcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG5cdCAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG5cdCAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG5cdCAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cblx0ICB9XG5cdCAgcmV0dXJuIGlcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNuYW4gKHZhbCkge1xuXHQgIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuQnVmZmVyLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCdcblx0XG5cdGV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblx0ZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5XG5cdGV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXlcblx0XG5cdHZhciBsb29rdXAgPSBbXVxuXHR2YXIgcmV2TG9va3VwID0gW11cblx0dmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXHRcblx0dmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLydcblx0Zm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcblx0ICBsb29rdXBbaV0gPSBjb2RlW2ldXG5cdCAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpXG5cdH1cblx0XG5cdHJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxuXHRyZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblx0XG5cdGZ1bmN0aW9uIHBsYWNlSG9sZGVyc0NvdW50IChiNjQpIHtcblx0ICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXHQgIGlmIChsZW4gJSA0ID4gMCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Jylcblx0ICB9XG5cdFxuXHQgIC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG5cdCAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuXHQgIC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuXHQgIC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuXHQgIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2Vcblx0ICByZXR1cm4gYjY0W2xlbiAtIDJdID09PSAnPScgPyAyIDogYjY0W2xlbiAtIDFdID09PSAnPScgPyAxIDogMFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHtcblx0ICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcblx0ICByZXR1cm4gYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG5cdCAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcblx0ICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXHQgIHBsYWNlSG9sZGVycyA9IHBsYWNlSG9sZGVyc0NvdW50KGI2NClcblx0XG5cdCAgYXJyID0gbmV3IEFycihsZW4gKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblx0XG5cdCAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuXHQgIGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gbGVuIC0gNCA6IGxlblxuXHRcblx0ICB2YXIgTCA9IDBcblx0XG5cdCAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuXHQgICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG5cdCAgICBhcnJbTCsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuXHQgICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuXHQgICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG5cdCAgfVxuXHRcblx0ICBpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG5cdCAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuXHQgICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG5cdCAgfSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcblx0ICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyKVxuXHQgICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuXHQgICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXJyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdCAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICsgbG9va3VwW251bSAmIDB4M0ZdXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuY29kZUNodW5rICh1aW50OCwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciB0bXBcblx0ICB2YXIgb3V0cHV0ID0gW11cblx0ICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuXHQgICAgdG1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHQgICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpXG5cdCAgfVxuXHQgIHJldHVybiBvdXRwdXQuam9pbignJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcblx0ICB2YXIgdG1wXG5cdCAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuXHQgIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuXHQgIHZhciBvdXRwdXQgPSAnJ1xuXHQgIHZhciBwYXJ0cyA9IFtdXG5cdCAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cdFxuXHQgIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcblx0ICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG5cdCAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKVxuXHQgIH1cblx0XG5cdCAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuXHQgIGlmIChleHRyYUJ5dGVzID09PSAxKSB7XG5cdCAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuXHQgICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMl1cblx0ICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdXG5cdCAgICBvdXRwdXQgKz0gJz09J1xuXHQgIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikge1xuXHQgICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgKHVpbnQ4W2xlbiAtIDFdKVxuXHQgICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMTBdXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXVxuXHQgICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl1cblx0ICAgIG91dHB1dCArPSAnPSdcblx0ICB9XG5cdFxuXHQgIHBhcnRzLnB1c2gob3V0cHV0KVxuXHRcblx0ICByZXR1cm4gcGFydHMuam9pbignJylcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0ZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcblx0ICB2YXIgZSwgbVxuXHQgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG5cdCAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcblx0ICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcblx0ICB2YXIgbkJpdHMgPSAtN1xuXHQgIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcblx0ICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcblx0ICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXHRcblx0ICBpICs9IGRcblx0XG5cdCAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcblx0ICBzID4+PSAoLW5CaXRzKVxuXHQgIG5CaXRzICs9IGVMZW5cblx0ICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXHRcblx0ICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuXHQgIGUgPj49ICgtbkJpdHMpXG5cdCAgbkJpdHMgKz0gbUxlblxuXHQgIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cdFxuXHQgIGlmIChlID09PSAwKSB7XG5cdCAgICBlID0gMSAtIGVCaWFzXG5cdCAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG5cdCAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcblx0ICB9IGVsc2Uge1xuXHQgICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuXHQgICAgZSA9IGUgLSBlQmlhc1xuXHQgIH1cblx0ICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxuXHR9XG5cdFxuXHRleHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG5cdCAgdmFyIGUsIG0sIGNcblx0ICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuXHQgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG5cdCAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuXHQgIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcblx0ICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcblx0ICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXHRcblx0ICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXHRcblx0ICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuXHQgICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG5cdCAgICBlID0gZU1heFxuXHQgIH0gZWxzZSB7XG5cdCAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcblx0ICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcblx0ICAgICAgZS0tXG5cdCAgICAgIGMgKj0gMlxuXHQgICAgfVxuXHQgICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG5cdCAgICAgIHZhbHVlICs9IHJ0IC8gY1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG5cdCAgICB9XG5cdCAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcblx0ICAgICAgZSsrXG5cdCAgICAgIGMgLz0gMlxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuXHQgICAgICBtID0gMFxuXHQgICAgICBlID0gZU1heFxuXHQgICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuXHQgICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcblx0ICAgICAgZSA9IGUgKyBlQmlhc1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICAgIGUgPSAwXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXHRcblx0ICBlID0gKGUgPDwgbUxlbikgfCBtXG5cdCAgZUxlbiArPSBtTGVuXG5cdCAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXHRcblx0ICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcblx0Ly8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG5cdC8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcblx0Ly8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblx0XG5cdHZhciBjYWNoZWRTZXRUaW1lb3V0O1xuXHR2YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdGZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHQoZnVuY3Rpb24gKCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgIH1cblx0fSAoKSlcblx0ZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcblx0ICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcblx0ICAgICAgICB9IGNhdGNoKGUpe1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdH1cblx0ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuXHQgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH0gY2F0Y2ggKGUpe1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuXHQgICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdFxuXHRcblx0fVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIGNvbXBhcmUgYW5kIGlzQnVmZmVyIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvYmxvYi82ODBlOWU1ZTQ4OGYyMmFhYzI3NTk5YTU3ZGM4NDRhNjMxNTkyOGRkL2luZGV4LmpzXG5cdC8vIG9yaWdpbmFsIG5vdGljZTpcblx0XG5cdC8qIVxuXHQgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cblx0ICpcblx0ICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG5cdCAqIEBsaWNlbnNlICBNSVRcblx0ICovXG5cdGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikge1xuXHQgIGlmIChhID09PSBiKSB7XG5cdCAgICByZXR1cm4gMDtcblx0ICB9XG5cdFxuXHQgIHZhciB4ID0gYS5sZW5ndGg7XG5cdCAgdmFyIHkgPSBiLmxlbmd0aDtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG5cdCAgICAgIHggPSBhW2ldO1xuXHQgICAgICB5ID0gYltpXTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoeCA8IHkpIHtcblx0ICAgIHJldHVybiAtMTtcblx0ICB9XG5cdCAgaWYgKHkgPCB4KSB7XG5cdCAgICByZXR1cm4gMTtcblx0ICB9XG5cdCAgcmV0dXJuIDA7XG5cdH1cblx0ZnVuY3Rpb24gaXNCdWZmZXIoYikge1xuXHQgIGlmIChnbG9iYWwuQnVmZmVyICYmIHR5cGVvZiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihiKTtcblx0ICB9XG5cdCAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcik7XG5cdH1cblx0XG5cdC8vIGJhc2VkIG9uIG5vZGUgYXNzZXJ0LCBvcmlnaW5hbCBub3RpY2U6XG5cdFxuXHQvLyBodHRwOi8vd2lraS5jb21tb25qcy5vcmcvd2lraS9Vbml0X1Rlc3RpbmcvMS4wXG5cdC8vXG5cdC8vIFRISVMgSVMgTk9UIFRFU1RFRCBOT1IgTElLRUxZIFRPIFdPUksgT1VUU0lERSBWOCFcblx0Ly9cblx0Ly8gT3JpZ2luYWxseSBmcm9tIG5hcndoYWwuanMgKGh0dHA6Ly9uYXJ3aGFsanMub3JnKVxuXHQvLyBDb3B5cmlnaHQgKGMpIDIwMDkgVGhvbWFzIFJvYmluc29uIDwyODBub3J0aC5jb20+XG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcblx0Ly8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvXG5cdC8vIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlXG5cdC8vIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuXHQvLyBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuXHQvLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuXHQvLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcblx0Ly8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5cdC8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuXHQvLyBBVVRIT1JTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTlxuXHQvLyBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG5cdC8vIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdHZhciBwU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cdHZhciBmdW5jdGlvbnNIYXZlTmFtZXMgPSAoZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBmdW5jdGlvbiBmb28oKSB7fS5uYW1lID09PSAnZm9vJztcblx0fSgpKTtcblx0ZnVuY3Rpb24gcFRvU3RyaW5nIChvYmopIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG5cdH1cblx0ZnVuY3Rpb24gaXNWaWV3KGFycmJ1Zikge1xuXHQgIGlmIChpc0J1ZmZlcihhcnJidWYpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgZ2xvYmFsLkFycmF5QnVmZmVyICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KGFycmJ1Zik7XG5cdCAgfVxuXHQgIGlmICghYXJyYnVmKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIGlmIChhcnJidWYgaW5zdGFuY2VvZiBEYXRhVmlldykge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIGlmIChhcnJidWYuYnVmZmVyICYmIGFycmJ1Zi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHQvLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvd1xuXHQvLyBBc3NlcnRpb25FcnJvcidzIHdoZW4gcGFydGljdWxhciBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBUaGVcblx0Ly8gYXNzZXJ0IG1vZHVsZSBtdXN0IGNvbmZvcm0gdG8gdGhlIGZvbGxvd2luZyBpbnRlcmZhY2UuXG5cdFxuXHR2YXIgYXNzZXJ0ID0gbW9kdWxlLmV4cG9ydHMgPSBvaztcblx0XG5cdC8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC5cblx0Ly8gbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7IG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IGFjdHVhbCxcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KVxuXHRcblx0dmFyIHJlZ2V4ID0gL1xccypmdW5jdGlvblxccysoW15cXChcXHNdKilcXHMqLztcblx0Ly8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2xqaGFyYi9mdW5jdGlvbi5wcm90b3R5cGUubmFtZS9ibG9iL2FkZWVlZWM4YmZjYzYwNjhiMTg3ZDdkOWZiM2Q1YmIxZDNhMzA4OTkvaW1wbGVtZW50YXRpb24uanNcblx0ZnVuY3Rpb24gZ2V0TmFtZShmdW5jKSB7XG5cdCAgaWYgKCF1dGlsLmlzRnVuY3Rpb24oZnVuYykpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKGZ1bmN0aW9uc0hhdmVOYW1lcykge1xuXHQgICAgcmV0dXJuIGZ1bmMubmFtZTtcblx0ICB9XG5cdCAgdmFyIHN0ciA9IGZ1bmMudG9TdHJpbmcoKTtcblx0ICB2YXIgbWF0Y2ggPSBzdHIubWF0Y2gocmVnZXgpO1xuXHQgIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXTtcblx0fVxuXHRhc3NlcnQuQXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKSB7XG5cdCAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblx0ICB0aGlzLmFjdHVhbCA9IG9wdGlvbnMuYWN0dWFsO1xuXHQgIHRoaXMuZXhwZWN0ZWQgPSBvcHRpb25zLmV4cGVjdGVkO1xuXHQgIHRoaXMub3BlcmF0b3IgPSBvcHRpb25zLm9wZXJhdG9yO1xuXHQgIGlmIChvcHRpb25zLm1lc3NhZ2UpIHtcblx0ICAgIHRoaXMubWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTtcblx0ICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IGZhbHNlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNZXNzYWdlKHRoaXMpO1xuXHQgICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gdHJ1ZTtcblx0ICB9XG5cdCAgdmFyIHN0YWNrU3RhcnRGdW5jdGlvbiA9IG9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9uIHx8IGZhaWw7XG5cdCAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG5cdCAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBzdGFja1N0YXJ0RnVuY3Rpb24pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBub24gdjggYnJvd3NlcnMgc28gd2UgY2FuIGhhdmUgYSBzdGFja3RyYWNlXG5cdCAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cdCAgICBpZiAoZXJyLnN0YWNrKSB7XG5cdCAgICAgIHZhciBvdXQgPSBlcnIuc3RhY2s7XG5cdFxuXHQgICAgICAvLyB0cnkgdG8gc3RyaXAgdXNlbGVzcyBmcmFtZXNcblx0ICAgICAgdmFyIGZuX25hbWUgPSBnZXROYW1lKHN0YWNrU3RhcnRGdW5jdGlvbik7XG5cdCAgICAgIHZhciBpZHggPSBvdXQuaW5kZXhPZignXFxuJyArIGZuX25hbWUpO1xuXHQgICAgICBpZiAoaWR4ID49IDApIHtcblx0ICAgICAgICAvLyBvbmNlIHdlIGhhdmUgbG9jYXRlZCB0aGUgZnVuY3Rpb24gZnJhbWVcblx0ICAgICAgICAvLyB3ZSBuZWVkIHRvIHN0cmlwIG91dCBldmVyeXRoaW5nIGJlZm9yZSBpdCAoYW5kIGl0cyBsaW5lKVxuXHQgICAgICAgIHZhciBuZXh0X2xpbmUgPSBvdXQuaW5kZXhPZignXFxuJywgaWR4ICsgMSk7XG5cdCAgICAgICAgb3V0ID0gb3V0LnN1YnN0cmluZyhuZXh0X2xpbmUgKyAxKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5zdGFjayA9IG91dDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvLyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuXHR1dGlsLmluaGVyaXRzKGFzc2VydC5Bc3NlcnRpb25FcnJvciwgRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gdHJ1bmNhdGUocywgbikge1xuXHQgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBzLmxlbmd0aCA8IG4gPyBzIDogcy5zbGljZSgwLCBuKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHM7XG5cdCAgfVxuXHR9XG5cdGZ1bmN0aW9uIGluc3BlY3Qoc29tZXRoaW5nKSB7XG5cdCAgaWYgKGZ1bmN0aW9uc0hhdmVOYW1lcyB8fCAhdXRpbC5pc0Z1bmN0aW9uKHNvbWV0aGluZykpIHtcblx0ICAgIHJldHVybiB1dGlsLmluc3BlY3Qoc29tZXRoaW5nKTtcblx0ICB9XG5cdCAgdmFyIHJhd25hbWUgPSBnZXROYW1lKHNvbWV0aGluZyk7XG5cdCAgdmFyIG5hbWUgPSByYXduYW1lID8gJzogJyArIHJhd25hbWUgOiAnJztcblx0ICByZXR1cm4gJ1tGdW5jdGlvbicgKyAgbmFtZSArICddJztcblx0fVxuXHRmdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHtcblx0ICByZXR1cm4gdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmFjdHVhbCksIDEyOCkgKyAnICcgK1xuXHQgICAgICAgICBzZWxmLm9wZXJhdG9yICsgJyAnICtcblx0ICAgICAgICAgdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmV4cGVjdGVkKSwgMTI4KTtcblx0fVxuXHRcblx0Ly8gQXQgcHJlc2VudCBvbmx5IHRoZSB0aHJlZSBrZXlzIG1lbnRpb25lZCBhYm92ZSBhcmUgdXNlZCBhbmRcblx0Ly8gdW5kZXJzdG9vZCBieSB0aGUgc3BlYy4gSW1wbGVtZW50YXRpb25zIG9yIHN1YiBtb2R1bGVzIGNhbiBwYXNzXG5cdC8vIG90aGVyIGtleXMgdG8gdGhlIEFzc2VydGlvbkVycm9yJ3MgY29uc3RydWN0b3IgLSB0aGV5IHdpbGwgYmVcblx0Ly8gaWdub3JlZC5cblx0XG5cdC8vIDMuIEFsbCBvZiB0aGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBtdXN0IHRocm93IGFuIEFzc2VydGlvbkVycm9yXG5cdC8vIHdoZW4gYSBjb3JyZXNwb25kaW5nIGNvbmRpdGlvbiBpcyBub3QgbWV0LCB3aXRoIGEgbWVzc2FnZSB0aGF0XG5cdC8vIG1heSBiZSB1bmRlZmluZWQgaWYgbm90IHByb3ZpZGVkLiAgQWxsIGFzc2VydGlvbiBtZXRob2RzIHByb3ZpZGVcblx0Ly8gYm90aCB0aGUgYWN0dWFsIGFuZCBleHBlY3RlZCB2YWx1ZXMgdG8gdGhlIGFzc2VydGlvbiBlcnJvciBmb3Jcblx0Ly8gZGlzcGxheSBwdXJwb3Nlcy5cblx0XG5cdGZ1bmN0aW9uIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IsIHN0YWNrU3RhcnRGdW5jdGlvbikge1xuXHQgIHRocm93IG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3Ioe1xuXHQgICAgbWVzc2FnZTogbWVzc2FnZSxcblx0ICAgIGFjdHVhbDogYWN0dWFsLFxuXHQgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkLFxuXHQgICAgb3BlcmF0b3I6IG9wZXJhdG9yLFxuXHQgICAgc3RhY2tTdGFydEZ1bmN0aW9uOiBzdGFja1N0YXJ0RnVuY3Rpb25cblx0ICB9KTtcblx0fVxuXHRcblx0Ly8gRVhURU5TSU9OISBhbGxvd3MgZm9yIHdlbGwgYmVoYXZlZCBlcnJvcnMgZGVmaW5lZCBlbHNld2hlcmUuXG5cdGFzc2VydC5mYWlsID0gZmFpbDtcblx0XG5cdC8vIDQuIFB1cmUgYXNzZXJ0aW9uIHRlc3RzIHdoZXRoZXIgYSB2YWx1ZSBpcyB0cnV0aHksIGFzIGRldGVybWluZWRcblx0Ly8gYnkgISFndWFyZC5cblx0Ly8gYXNzZXJ0Lm9rKGd1YXJkLCBtZXNzYWdlX29wdCk7XG5cdC8vIFRoaXMgc3RhdGVtZW50IGlzIGVxdWl2YWxlbnQgdG8gYXNzZXJ0LmVxdWFsKHRydWUsICEhZ3VhcmQsXG5cdC8vIG1lc3NhZ2Vfb3B0KTsuIFRvIHRlc3Qgc3RyaWN0bHkgZm9yIHRoZSB2YWx1ZSB0cnVlLCB1c2Vcblx0Ly8gYXNzZXJ0LnN0cmljdEVxdWFsKHRydWUsIGd1YXJkLCBtZXNzYWdlX29wdCk7LlxuXHRcblx0ZnVuY3Rpb24gb2sodmFsdWUsIG1lc3NhZ2UpIHtcblx0ICBpZiAoIXZhbHVlKSBmYWlsKHZhbHVlLCB0cnVlLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQub2spO1xuXHR9XG5cdGFzc2VydC5vayA9IG9rO1xuXHRcblx0Ly8gNS4gVGhlIGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzaGFsbG93LCBjb2VyY2l2ZSBlcXVhbGl0eSB3aXRoXG5cdC8vID09LlxuXHQvLyBhc3NlcnQuZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmIChhY3R1YWwgIT0gZXhwZWN0ZWQpIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09JywgYXNzZXJ0LmVxdWFsKTtcblx0fTtcblx0XG5cdC8vIDYuIFRoZSBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciB3aGV0aGVyIHR3byBvYmplY3RzIGFyZSBub3QgZXF1YWxcblx0Ly8gd2l0aCAhPSBhc3NlcnQubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0Lm5vdEVxdWFsID0gZnVuY3Rpb24gbm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmIChhY3R1YWwgPT0gZXhwZWN0ZWQpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9JywgYXNzZXJ0Lm5vdEVxdWFsKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyA3LiBUaGUgZXF1aXZhbGVuY2UgYXNzZXJ0aW9uIHRlc3RzIGEgZGVlcCBlcXVhbGl0eSByZWxhdGlvbi5cblx0Ly8gYXNzZXJ0LmRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQuZGVlcEVxdWFsID0gZnVuY3Rpb24gZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwRXF1YWwnLCBhc3NlcnQuZGVlcEVxdWFsKTtcblx0ICB9XG5cdH07XG5cdFxuXHRhc3NlcnQuZGVlcFN0cmljdEVxdWFsID0gZnVuY3Rpb24gZGVlcFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ2RlZXBTdHJpY3RFcXVhbCcsIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgc3RyaWN0LCBtZW1vcykge1xuXHQgIC8vIDcuMS4gQWxsIGlkZW50aWNhbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGFzIGRldGVybWluZWQgYnkgPT09LlxuXHQgIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgJiYgaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG5cdCAgICByZXR1cm4gY29tcGFyZShhY3R1YWwsIGV4cGVjdGVkKSA9PT0gMDtcblx0XG5cdCAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuXHQgIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuXG5cdCAgfSBlbHNlIGlmICh1dGlsLmlzRGF0ZShhY3R1YWwpICYmIHV0aWwuaXNEYXRlKGV4cGVjdGVkKSkge1xuXHQgICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblx0XG5cdCAgLy8gNy4zIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIFJlZ0V4cCBvYmplY3QsIHRoZSBhY3R1YWwgdmFsdWUgaXNcblx0ICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZFxuXHQgIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuXG5cdCAgfSBlbHNlIGlmICh1dGlsLmlzUmVnRXhwKGFjdHVhbCkgJiYgdXRpbC5pc1JlZ0V4cChleHBlY3RlZCkpIHtcblx0ICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiZcblx0ICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiZcblx0ICAgICAgICAgICBhY3R1YWwubXVsdGlsaW5lID09PSBleHBlY3RlZC5tdWx0aWxpbmUgJiZcblx0ICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiZcblx0ICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTtcblx0XG5cdCAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuXHQgIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG5cdCAgfSBlbHNlIGlmICgoYWN0dWFsID09PSBudWxsIHx8IHR5cGVvZiBhY3R1YWwgIT09ICdvYmplY3QnKSAmJlxuXHQgICAgICAgICAgICAgKGV4cGVjdGVkID09PSBudWxsIHx8IHR5cGVvZiBleHBlY3RlZCAhPT0gJ29iamVjdCcpKSB7XG5cdCAgICByZXR1cm4gc3RyaWN0ID8gYWN0dWFsID09PSBleHBlY3RlZCA6IGFjdHVhbCA9PSBleHBlY3RlZDtcblx0XG5cdCAgLy8gSWYgYm90aCB2YWx1ZXMgYXJlIGluc3RhbmNlcyBvZiB0eXBlZCBhcnJheXMsIHdyYXAgdGhlaXIgdW5kZXJseWluZ1xuXHQgIC8vIEFycmF5QnVmZmVycyBpbiBhIEJ1ZmZlciBlYWNoIHRvIGluY3JlYXNlIHBlcmZvcm1hbmNlXG5cdCAgLy8gVGhpcyBvcHRpbWl6YXRpb24gcmVxdWlyZXMgdGhlIGFycmF5cyB0byBoYXZlIHRoZSBzYW1lIHR5cGUgYXMgY2hlY2tlZCBieVxuXHQgIC8vIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgKGFrYSBwVG9TdHJpbmcpLiBOZXZlciBwZXJmb3JtIGJpbmFyeVxuXHQgIC8vIGNvbXBhcmlzb25zIGZvciBGbG9hdCpBcnJheXMsIHRob3VnaCwgc2luY2UgZS5nLiArMCA9PT0gLTAgYnV0IHRoZWlyXG5cdCAgLy8gYml0IHBhdHRlcm5zIGFyZSBub3QgaWRlbnRpY2FsLlxuXHQgIH0gZWxzZSBpZiAoaXNWaWV3KGFjdHVhbCkgJiYgaXNWaWV3KGV4cGVjdGVkKSAmJlxuXHQgICAgICAgICAgICAgcFRvU3RyaW5nKGFjdHVhbCkgPT09IHBUb1N0cmluZyhleHBlY3RlZCkgJiZcblx0ICAgICAgICAgICAgICEoYWN0dWFsIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5IHx8XG5cdCAgICAgICAgICAgICAgIGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkpIHtcblx0ICAgIHJldHVybiBjb21wYXJlKG5ldyBVaW50OEFycmF5KGFjdHVhbC5idWZmZXIpLFxuXHQgICAgICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZXhwZWN0ZWQuYnVmZmVyKSkgPT09IDA7XG5cdFxuXHQgIC8vIDcuNSBGb3IgYWxsIG90aGVyIE9iamVjdCBwYWlycywgaW5jbHVkaW5nIEFycmF5IG9iamVjdHMsIGVxdWl2YWxlbmNlIGlzXG5cdCAgLy8gZGV0ZXJtaW5lZCBieSBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGFzIHZlcmlmaWVkXG5cdCAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuXHQgIC8vIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLCBlcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnlcblx0ICAvLyBjb3JyZXNwb25kaW5nIGtleSwgYW5kIGFuIGlkZW50aWNhbCAncHJvdG90eXBlJyBwcm9wZXJ0eS4gTm90ZTogdGhpc1xuXHQgIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuXHQgIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAhPT0gaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG1lbW9zID0gbWVtb3MgfHwge2FjdHVhbDogW10sIGV4cGVjdGVkOiBbXX07XG5cdFxuXHQgICAgdmFyIGFjdHVhbEluZGV4ID0gbWVtb3MuYWN0dWFsLmluZGV4T2YoYWN0dWFsKTtcblx0ICAgIGlmIChhY3R1YWxJbmRleCAhPT0gLTEpIHtcblx0ICAgICAgaWYgKGFjdHVhbEluZGV4ID09PSBtZW1vcy5leHBlY3RlZC5pbmRleE9mKGV4cGVjdGVkKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgbWVtb3MuYWN0dWFsLnB1c2goYWN0dWFsKTtcblx0ICAgIG1lbW9zLmV4cGVjdGVkLnB1c2goZXhwZWN0ZWQpO1xuXHRcblx0ICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzQXJndW1lbnRzKG9iamVjdCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gb2JqRXF1aXYoYSwgYiwgc3RyaWN0LCBhY3R1YWxWaXNpdGVkT2JqZWN0cykge1xuXHQgIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZClcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWVcblx0ICBpZiAodXRpbC5pc1ByaW1pdGl2ZShhKSB8fCB1dGlsLmlzUHJpbWl0aXZlKGIpKVxuXHQgICAgcmV0dXJuIGEgPT09IGI7XG5cdCAgaWYgKHN0cmljdCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkgIT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSlcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB2YXIgYUlzQXJncyA9IGlzQXJndW1lbnRzKGEpO1xuXHQgIHZhciBiSXNBcmdzID0gaXNBcmd1bWVudHMoYik7XG5cdCAgaWYgKChhSXNBcmdzICYmICFiSXNBcmdzKSB8fCAoIWFJc0FyZ3MgJiYgYklzQXJncykpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgaWYgKGFJc0FyZ3MpIHtcblx0ICAgIGEgPSBwU2xpY2UuY2FsbChhKTtcblx0ICAgIGIgPSBwU2xpY2UuY2FsbChiKTtcblx0ICAgIHJldHVybiBfZGVlcEVxdWFsKGEsIGIsIHN0cmljdCk7XG5cdCAgfVxuXHQgIHZhciBrYSA9IG9iamVjdEtleXMoYSk7XG5cdCAgdmFyIGtiID0gb2JqZWN0S2V5cyhiKTtcblx0ICB2YXIga2V5LCBpO1xuXHQgIC8vIGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoa2V5cyBpbmNvcnBvcmF0ZXNcblx0ICAvLyBoYXNPd25Qcm9wZXJ0eSlcblx0ICBpZiAoa2EubGVuZ3RoICE9PSBrYi5sZW5ndGgpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSxcblx0ICBrYS5zb3J0KCk7XG5cdCAga2Iuc29ydCgpO1xuXHQgIC8vfn5+Y2hlYXAga2V5IHRlc3Rcblx0ICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgaWYgKGthW2ldICE9PSBrYltpXSlcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICAvL2VxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeSBjb3JyZXNwb25kaW5nIGtleSwgYW5kXG5cdCAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG5cdCAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgIGtleSA9IGthW2ldO1xuXHQgICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSlcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0Ly8gOC4gVGhlIG5vbi1lcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgZm9yIGFueSBkZWVwIGluZXF1YWxpdHkuXG5cdC8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIG5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwRXF1YWwnLCBhc3NlcnQubm90RGVlcEVxdWFsKTtcblx0ICB9XG5cdH07XG5cdFxuXHRhc3NlcnQubm90RGVlcFN0cmljdEVxdWFsID0gbm90RGVlcFN0cmljdEVxdWFsO1xuXHRmdW5jdGlvbiBub3REZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmIChfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHRydWUpKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwU3RyaWN0RXF1YWwnLCBub3REZWVwU3RyaWN0RXF1YWwpO1xuXHQgIH1cblx0fVxuXHRcblx0XG5cdC8vIDkuIFRoZSBzdHJpY3QgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHN0cmljdCBlcXVhbGl0eSwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG5cdC8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQuc3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBzdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gMTAuIFRoZSBzdHJpY3Qgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igc3RyaWN0IGluZXF1YWxpdHksIGFzXG5cdC8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5ub3RTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIG5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7XG5cdCAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xuXHQgICAgcmV0dXJuIGV4cGVjdGVkLnRlc3QoYWN0dWFsKTtcblx0ICB9XG5cdFxuXHQgIHRyeSB7XG5cdCAgICBpZiAoYWN0dWFsIGluc3RhbmNlb2YgZXhwZWN0ZWQpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgLy8gSWdub3JlLiAgVGhlIGluc3RhbmNlb2YgY2hlY2sgZG9lc24ndCB3b3JrIGZvciBhcnJvdyBmdW5jdGlvbnMuXG5cdCAgfVxuXHRcblx0ICBpZiAoRXJyb3IuaXNQcm90b3R5cGVPZihleHBlY3RlZCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBleHBlY3RlZC5jYWxsKHt9LCBhY3R1YWwpID09PSB0cnVlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfdHJ5QmxvY2soYmxvY2spIHtcblx0ICB2YXIgZXJyb3I7XG5cdCAgdHJ5IHtcblx0ICAgIGJsb2NrKCk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZXJyb3IgPSBlO1xuXHQgIH1cblx0ICByZXR1cm4gZXJyb3I7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF90aHJvd3Moc2hvdWxkVGhyb3csIGJsb2NrLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIHZhciBhY3R1YWw7XG5cdFxuXHQgIGlmICh0eXBlb2YgYmxvY2sgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYmxvY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgZXhwZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBtZXNzYWdlID0gZXhwZWN0ZWQ7XG5cdCAgICBleHBlY3RlZCA9IG51bGw7XG5cdCAgfVxuXHRcblx0ICBhY3R1YWwgPSBfdHJ5QmxvY2soYmxvY2spO1xuXHRcblx0ICBtZXNzYWdlID0gKGV4cGVjdGVkICYmIGV4cGVjdGVkLm5hbWUgPyAnICgnICsgZXhwZWN0ZWQubmFtZSArICcpLicgOiAnLicpICtcblx0ICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTtcblx0XG5cdCAgaWYgKHNob3VsZFRocm93ICYmICFhY3R1YWwpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHVzZXJQcm92aWRlZE1lc3NhZ2UgPSB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZyc7XG5cdCAgdmFyIGlzVW53YW50ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgdXRpbC5pc0Vycm9yKGFjdHVhbCk7XG5cdCAgdmFyIGlzVW5leHBlY3RlZEV4Y2VwdGlvbiA9ICFzaG91bGRUaHJvdyAmJiBhY3R1YWwgJiYgIWV4cGVjdGVkO1xuXHRcblx0ICBpZiAoKGlzVW53YW50ZWRFeGNlcHRpb24gJiZcblx0ICAgICAgdXNlclByb3ZpZGVkTWVzc2FnZSAmJlxuXHQgICAgICBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHxcblx0ICAgICAgaXNVbmV4cGVjdGVkRXhjZXB0aW9uKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsICdHb3QgdW53YW50ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuXHQgIH1cblx0XG5cdCAgaWYgKChzaG91bGRUaHJvdyAmJiBhY3R1YWwgJiYgZXhwZWN0ZWQgJiZcblx0ICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHtcblx0ICAgIHRocm93IGFjdHVhbDtcblx0ICB9XG5cdH1cblx0XG5cdC8vIDExLiBFeHBlY3RlZCB0byB0aHJvdyBhbiBlcnJvcjpcblx0Ly8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQudGhyb3dzID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG5cdCAgX3Rocm93cyh0cnVlLCBibG9jaywgZXJyb3IsIG1lc3NhZ2UpO1xuXHR9O1xuXHRcblx0Ly8gRVhURU5TSU9OISBUaGlzIGlzIGFubm95aW5nIHRvIHdyaXRlIG91dHNpZGUgdGhpcyBtb2R1bGUuXG5cdGFzc2VydC5kb2VzTm90VGhyb3cgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcblx0ICBfdGhyb3dzKGZhbHNlLCBibG9jaywgZXJyb3IsIG1lc3NhZ2UpO1xuXHR9O1xuXHRcblx0YXNzZXJ0LmlmRXJyb3IgPSBmdW5jdGlvbihlcnIpIHsgaWYgKGVycikgdGhyb3cgZXJyOyB9O1xuXHRcblx0dmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIGtleXMgPSBbXTtcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcblx0ICB9XG5cdCAgcmV0dXJuIGtleXM7XG5cdH07XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHR2YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcblx0ZXhwb3J0cy5mb3JtYXQgPSBmdW5jdGlvbihmKSB7XG5cdCAgaWYgKCFpc1N0cmluZyhmKSkge1xuXHQgICAgdmFyIG9iamVjdHMgPSBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGkgPSAxO1xuXHQgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcblx0ICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7XG5cdCAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcblx0ICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG5cdCAgICBzd2l0Y2ggKHgpIHtcblx0ICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG5cdCAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuXHQgICAgICBjYXNlICclaic6XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuXHQgICAgICAgIH0gY2F0Y2ggKF8pIHtcblx0ICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG5cdCAgICAgICAgfVxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIHJldHVybiB4O1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG5cdCAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuXHQgICAgICBzdHIgKz0gJyAnICsgeDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gc3RyO1xuXHR9O1xuXHRcblx0XG5cdC8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuXG5cdC8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG5cdC8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5cdGV4cG9ydHMuZGVwcmVjYXRlID0gZnVuY3Rpb24oZm4sIG1zZykge1xuXHQgIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG5cdCAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG5cdCAgICByZXR1cm4gZm47XG5cdCAgfVxuXHRcblx0ICB2YXIgd2FybmVkID0gZmFsc2U7XG5cdCAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcblx0ICAgIGlmICghd2FybmVkKSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcblx0ICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuXHQgICAgICB9XG5cdCAgICAgIHdhcm5lZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkZXByZWNhdGVkO1xuXHR9O1xuXHRcblx0XG5cdHZhciBkZWJ1Z3MgPSB7fTtcblx0dmFyIGRlYnVnRW52aXJvbjtcblx0ZXhwb3J0cy5kZWJ1Z2xvZyA9IGZ1bmN0aW9uKHNldCkge1xuXHQgIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuXHQgICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcblx0ICBzZXQgPSBzZXQudG9VcHBlckNhc2UoKTtcblx0ICBpZiAoIWRlYnVnc1tzZXRdKSB7XG5cdCAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcblx0ICAgICAgdmFyIHBpZCA9IHByb2Nlc3MucGlkO1xuXHQgICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoJyVzICVkOiAlcycsIHNldCwgcGlkLCBtc2cpO1xuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHt9O1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZGVidWdzW3NldF07XG5cdH07XG5cdFxuXHRcblx0LyoqXG5cdCAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcblx0ICogaW4gdGhlIGJlc3Qgd2F5IHBvc3NpYmxlIGdpdmVuIHRoZSBkaWZmZXJlbnQgdHlwZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIE9wdGlvbmFsIG9wdGlvbnMgb2JqZWN0IHRoYXQgYWx0ZXJzIHRoZSBvdXRwdXQuXG5cdCAqL1xuXHQvKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5cdGZ1bmN0aW9uIGluc3BlY3Qob2JqLCBvcHRzKSB7XG5cdCAgLy8gZGVmYXVsdCBvcHRpb25zXG5cdCAgdmFyIGN0eCA9IHtcblx0ICAgIHNlZW46IFtdLFxuXHQgICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3Jcblx0ICB9O1xuXHQgIC8vIGxlZ2FjeS4uLlxuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdO1xuXHQgIGlmIChpc0Jvb2xlYW4ob3B0cykpIHtcblx0ICAgIC8vIGxlZ2FjeS4uLlxuXHQgICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzO1xuXHQgIH0gZWxzZSBpZiAob3B0cykge1xuXHQgICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuXHQgICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7XG5cdCAgfVxuXHQgIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcblx0ICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuXHQgIGlmIChpc1VuZGVmaW5lZChjdHguZGVwdGgpKSBjdHguZGVwdGggPSAyO1xuXHQgIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuXHQgIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcblx0ICBpZiAoY3R4LmNvbG9ycykgY3R4LnN0eWxpemUgPSBzdHlsaXplV2l0aENvbG9yO1xuXHQgIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcblx0fVxuXHRleHBvcnRzLmluc3BlY3QgPSBpbnNwZWN0O1xuXHRcblx0XG5cdC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSNncmFwaGljc1xuXHRpbnNwZWN0LmNvbG9ycyA9IHtcblx0ICAnYm9sZCcgOiBbMSwgMjJdLFxuXHQgICdpdGFsaWMnIDogWzMsIDIzXSxcblx0ICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG5cdCAgJ2ludmVyc2UnIDogWzcsIDI3XSxcblx0ICAnd2hpdGUnIDogWzM3LCAzOV0sXG5cdCAgJ2dyZXknIDogWzkwLCAzOV0sXG5cdCAgJ2JsYWNrJyA6IFszMCwgMzldLFxuXHQgICdibHVlJyA6IFszNCwgMzldLFxuXHQgICdjeWFuJyA6IFszNiwgMzldLFxuXHQgICdncmVlbicgOiBbMzIsIDM5XSxcblx0ICAnbWFnZW50YScgOiBbMzUsIDM5XSxcblx0ICAncmVkJyA6IFszMSwgMzldLFxuXHQgICd5ZWxsb3cnIDogWzMzLCAzOV1cblx0fTtcblx0XG5cdC8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuXHRpbnNwZWN0LnN0eWxlcyA9IHtcblx0ICAnc3BlY2lhbCc6ICdjeWFuJyxcblx0ICAnbnVtYmVyJzogJ3llbGxvdycsXG5cdCAgJ2Jvb2xlYW4nOiAneWVsbG93Jyxcblx0ICAndW5kZWZpbmVkJzogJ2dyZXknLFxuXHQgICdudWxsJzogJ2JvbGQnLFxuXHQgICdzdHJpbmcnOiAnZ3JlZW4nLFxuXHQgICdkYXRlJzogJ21hZ2VudGEnLFxuXHQgIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG5cdCAgJ3JlZ2V4cCc6ICdyZWQnXG5cdH07XG5cdFxuXHRcblx0ZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuXHQgIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cdFxuXHQgIGlmIChzdHlsZSkge1xuXHQgICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuXHQgICAgICAgICAgICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMV0gKyAnbSc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBzdHI7XG5cdCAgfVxuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcblx0ICByZXR1cm4gc3RyO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gYXJyYXlUb0hhc2goYXJyYXkpIHtcblx0ICB2YXIgaGFzaCA9IHt9O1xuXHRcblx0ICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaWR4KSB7XG5cdCAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gaGFzaDtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuXHQgIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cblx0ICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcblx0ICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiZcblx0ICAgICAgdmFsdWUgJiZcblx0ICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuXHQgICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWxcblx0ICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gZXhwb3J0cy5pbnNwZWN0ICYmXG5cdCAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuXHQgICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG5cdCAgICB2YXIgcmV0ID0gdmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMsIGN0eCk7XG5cdCAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcblx0ICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmV0O1xuXHQgIH1cblx0XG5cdCAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcblx0ICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuXHQgIGlmIChwcmltaXRpdmUpIHtcblx0ICAgIHJldHVybiBwcmltaXRpdmU7XG5cdCAgfVxuXHRcblx0ICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG5cdCAgdmFyIHZpc2libGVLZXlzID0gYXJyYXlUb0hhc2goa2V5cyk7XG5cdFxuXHQgIGlmIChjdHguc2hvd0hpZGRlbikge1xuXHQgICAga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIElFIGRvZXNuJ3QgbWFrZSBlcnJvciBmaWVsZHMgbm9uLWVudW1lcmFibGVcblx0ICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuXHQgIGlmIChpc0Vycm9yKHZhbHVlKVxuXHQgICAgICAmJiAoa2V5cy5pbmRleE9mKCdtZXNzYWdlJykgPj0gMCB8fCBrZXlzLmluZGV4T2YoJ2Rlc2NyaXB0aW9uJykgPj0gMCkpIHtcblx0ICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG5cdCAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0ICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblx0XG5cdCAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgYXJyYXkgPSB0cnVlO1xuXHQgICAgYnJhY2VzID0gWydbJywgJ10nXTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuXHQgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuXHQgICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcblx0ICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcblx0ICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG5cdCAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuXHQgIGlmIChpc0RhdGUodmFsdWUpKSB7XG5cdCAgICBiYXNlID0gJyAnICsgRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIGVycm9yIHdpdGggbWVzc2FnZSBmaXJzdCBzYXkgdGhlIGVycm9yXG5cdCAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG5cdCAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG5cdCAgICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTtcblx0ICB9XG5cdFxuXHQgIGlmIChyZWN1cnNlVGltZXMgPCAwKSB7XG5cdCAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXHRcblx0ICB2YXIgb3V0cHV0O1xuXHQgIGlmIChhcnJheSkge1xuXHQgICAgb3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGN0eC5zZWVuLnBvcCgpO1xuXHRcblx0ICByZXR1cm4gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcblx0ICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCd1bmRlZmluZWQnLCAndW5kZWZpbmVkJyk7XG5cdCAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuXHQgICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuXHQgIH1cblx0ICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcblx0ICBpZiAoaXNCb29sZWFuKHZhbHVlKSlcblx0ICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuXHQgIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cblx0ICBpZiAoaXNOdWxsKHZhbHVlKSlcblx0ICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuXHQgIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG5cdCAgdmFyIG91dHB1dCA9IFtdO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG5cdCAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcblx0ICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcblx0ICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3V0cHV0LnB1c2goJycpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdCAgICBpZiAoIWtleS5tYXRjaCgvXlxcZCskLykpIHtcblx0ICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcblx0ICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiBvdXRwdXQ7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KSB7XG5cdCAgdmFyIG5hbWUsIHN0ciwgZGVzYztcblx0ICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG5cdCAgaWYgKGRlc2MuZ2V0KSB7XG5cdCAgICBpZiAoZGVzYy5zZXQpIHtcblx0ICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoZGVzYy5zZXQpIHtcblx0ICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuXHQgICAgbmFtZSA9ICdbJyArIGtleSArICddJztcblx0ICB9XG5cdCAgaWYgKCFzdHIpIHtcblx0ICAgIGlmIChjdHguc2Vlbi5pbmRleE9mKGRlc2MudmFsdWUpIDwgMCkge1xuXHQgICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcblx0ICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG5cdCAgICAgICAgaWYgKGFycmF5KSB7XG5cdCAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTtcblx0ICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3RyID0gJ1xcbicgKyBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG5cdCAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGlzVW5kZWZpbmVkKG5hbWUpKSB7XG5cdCAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuXHQgICAgICByZXR1cm4gc3RyO1xuXHQgICAgfVxuXHQgICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcblx0ICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuXHQgICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMSwgbmFtZS5sZW5ndGggLSAyKTtcblx0ICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcblx0ICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG5cdCAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG5cdCAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnc3RyaW5nJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuXHQgIHZhciBudW1MaW5lc0VzdCA9IDA7XG5cdCAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG5cdCAgICBudW1MaW5lc0VzdCsrO1xuXHQgICAgaWYgKGN1ci5pbmRleE9mKCdcXG4nKSA+PSAwKSBudW1MaW5lc0VzdCsrO1xuXHQgICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuXHQgIH0sIDApO1xuXHRcblx0ICBpZiAobGVuZ3RoID4gNjApIHtcblx0ICAgIHJldHVybiBicmFjZXNbMF0gK1xuXHQgICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcXG4gJykgK1xuXHQgICAgICAgICAgICcgJyArXG5cdCAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcblx0ICAgICAgICAgICAnICcgK1xuXHQgICAgICAgICAgIGJyYWNlc1sxXTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG5cdH1cblx0XG5cdFxuXHQvLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcblx0Ly8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuXG5cdGZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcblx0ICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7XG5cdH1cblx0ZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblx0XG5cdGZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xuXHR9XG5cdGV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuO1xuXHRcblx0ZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cdFxuXHRmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xuXHR9XG5cdGV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcblx0XG5cdGZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJztcblx0fVxuXHRleHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cdFxuXHRmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG5cdH1cblx0ZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXHRcblx0ZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xuXHR9XG5cdGV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcblx0XG5cdGZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KHJlKSAmJiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xuXHR9XG5cdGV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXHRcblx0ZnVuY3Rpb24gaXNEYXRlKGQpIHtcblx0ICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcblx0fVxuXHRleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblx0XG5cdGZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuXHQgIHJldHVybiBpc09iamVjdChlKSAmJlxuXHQgICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcblx0fVxuXHRleHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXHRcblx0ZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXHRcblx0ZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG5cdH1cblx0ZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXHRcblx0ZXhwb3J0cy5pc0J1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0ZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBwYWQobikge1xuXHQgIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xuXHR9XG5cdFxuXHRcblx0dmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLFxuXHQgICAgICAgICAgICAgICdPY3QnLCAnTm92JywgJ0RlYyddO1xuXHRcblx0Ly8gMjYgRmViIDE2OjE5OjM0XG5cdGZ1bmN0aW9uIHRpbWVzdGFtcCgpIHtcblx0ICB2YXIgZCA9IG5ldyBEYXRlKCk7XG5cdCAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksXG5cdCAgICAgICAgICAgICAgcGFkKGQuZ2V0TWludXRlcygpKSxcblx0ICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG5cdCAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTtcblx0fVxuXHRcblx0XG5cdC8vIGxvZyBpcyBqdXN0IGEgdGhpbiB3cmFwcGVyIHRvIGNvbnNvbGUubG9nIHRoYXQgcHJlcGVuZHMgYSB0aW1lc3RhbXBcblx0ZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcblx0ICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTtcblx0fTtcblx0XG5cdFxuXHQvKipcblx0ICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuXHQgKlxuXHQgKiBUaGUgRnVuY3Rpb24ucHJvdG90eXBlLmluaGVyaXRzIGZyb20gbGFuZy5qcyByZXdyaXR0ZW4gYXMgYSBzdGFuZGFsb25lXG5cdCAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuXHQgKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZVxuXHQgKiBmdW5jdGlvbnMgYXMgcHJvdG90eXBlIHNldHVwIHVzaW5nIG5vcm1hbCBKYXZhU2NyaXB0IGRvZXMgbm90IHdvcmsgYXNcblx0ICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gaW5oZXJpdCB0aGVcblx0ICogICAgIHByb3RvdHlwZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG5cdCAqL1xuXHRleHBvcnRzLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHRleHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkge1xuXHQgIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIGFkZCBpc24ndCBhbiBvYmplY3Rcblx0ICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblx0XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhZGQpO1xuXHQgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgb3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dO1xuXHQgIH1cblx0ICByZXR1cm4gb3JpZ2luO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxOCkpKVxuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuXHQgICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nXG5cdCAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbidcblx0ICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0aWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuXHQgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3Jcblx0ICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG5cdCAgICAgIGNvbnN0cnVjdG9yOiB7XG5cdCAgICAgICAgdmFsdWU6IGN0b3IsXG5cdCAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH07XG5cdH0gZWxzZSB7XG5cdCAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuXHQgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3Jcblx0ICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG5cdCAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG5cdCAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG5cdCAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3Jcblx0ICB9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTtcblx0XG5cdHZhciBFRSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLkV2ZW50RW1pdHRlcjtcblx0dmFyIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHRpbmhlcml0cyhTdHJlYW0sIEVFKTtcblx0U3RyZWFtLlJlYWRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFN0cmVhbS5Xcml0YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHRTdHJlYW0uRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdFN0cmVhbS5UcmFuc2Zvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0U3RyZWFtLlBhc3NUaHJvdWdoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjQueFxuXHRTdHJlYW0uU3RyZWFtID0gU3RyZWFtO1xuXHRcblx0XG5cdFxuXHQvLyBvbGQtc3R5bGUgc3RyZWFtcy4gIE5vdGUgdGhhdCB0aGUgcGlwZSBtZXRob2QgKHRoZSBvbmx5IHJlbGV2YW50XG5cdC8vIHBhcnQgb2YgdGhpcyBjbGFzcykgaXMgb3ZlcnJpZGRlbiBpbiB0aGUgUmVhZGFibGUgY2xhc3MuXG5cdFxuXHRmdW5jdGlvbiBTdHJlYW0oKSB7XG5cdCAgRUUuY2FsbCh0aGlzKTtcblx0fVxuXHRcblx0U3RyZWFtLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgb3B0aW9ucykge1xuXHQgIHZhciBzb3VyY2UgPSB0aGlzO1xuXHRcblx0ICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcblx0ICAgIGlmIChkZXN0LndyaXRhYmxlKSB7XG5cdCAgICAgIGlmIChmYWxzZSA9PT0gZGVzdC53cml0ZShjaHVuaykgJiYgc291cmNlLnBhdXNlKSB7XG5cdCAgICAgICAgc291cmNlLnBhdXNlKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHNvdXJjZS5vbignZGF0YScsIG9uZGF0YSk7XG5cdFxuXHQgIGZ1bmN0aW9uIG9uZHJhaW4oKSB7XG5cdCAgICBpZiAoc291cmNlLnJlYWRhYmxlICYmIHNvdXJjZS5yZXN1bWUpIHtcblx0ICAgICAgc291cmNlLnJlc3VtZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblx0XG5cdCAgLy8gSWYgdGhlICdlbmQnIG9wdGlvbiBpcyBub3Qgc3VwcGxpZWQsIGRlc3QuZW5kKCkgd2lsbCBiZSBjYWxsZWQgd2hlblxuXHQgIC8vIHNvdXJjZSBnZXRzIHRoZSAnZW5kJyBvciAnY2xvc2UnIGV2ZW50cy4gIE9ubHkgZGVzdC5lbmQoKSBvbmNlLlxuXHQgIGlmICghZGVzdC5faXNTdGRpbyAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5lbmQgIT09IGZhbHNlKSkge1xuXHQgICAgc291cmNlLm9uKCdlbmQnLCBvbmVuZCk7XG5cdCAgICBzb3VyY2Uub24oJ2Nsb3NlJywgb25jbG9zZSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgZGlkT25FbmQgPSBmYWxzZTtcblx0ICBmdW5jdGlvbiBvbmVuZCgpIHtcblx0ICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuXHQgICAgZGlkT25FbmQgPSB0cnVlO1xuXHRcblx0ICAgIGRlc3QuZW5kKCk7XG5cdCAgfVxuXHRcblx0XG5cdCAgZnVuY3Rpb24gb25jbG9zZSgpIHtcblx0ICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuXHQgICAgZGlkT25FbmQgPSB0cnVlO1xuXHRcblx0ICAgIGlmICh0eXBlb2YgZGVzdC5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSBkZXN0LmRlc3Ryb3koKTtcblx0ICB9XG5cdFxuXHQgIC8vIGRvbid0IGxlYXZlIGRhbmdsaW5nIHBpcGVzIHdoZW4gdGhlcmUgYXJlIGVycm9ycy5cblx0ICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG5cdCAgICBjbGVhbnVwKCk7XG5cdCAgICBpZiAoRUUubGlzdGVuZXJDb3VudCh0aGlzLCAnZXJyb3InKSA9PT0gMCkge1xuXHQgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkIHN0cmVhbSBlcnJvciBpbiBwaXBlLlxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgc291cmNlLm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuXHQgIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7XG5cdFxuXHQgIC8vIHJlbW92ZSBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgYWRkZWQuXG5cdCAgZnVuY3Rpb24gY2xlYW51cCgpIHtcblx0ICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuXHRcblx0ICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuXHQgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXHRcblx0ICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cdFxuXHQgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTtcblx0ICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcblx0XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuXHQgIH1cblx0XG5cdCAgc291cmNlLm9uKCdlbmQnLCBjbGVhbnVwKTtcblx0ICBzb3VyY2Uub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cdFxuXHQgIGRlc3Qub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cdFxuXHQgIGRlc3QuZW1pdCgncGlwZScsIHNvdXJjZSk7XG5cdFxuXHQgIC8vIEFsbG93IGZvciB1bml4LWxpa2UgdXNhZ2U6IEEucGlwZShCKS5waXBlKEMpXG5cdCAgcmV0dXJuIGRlc3Q7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuXHQgIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcblx0ICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXHRcblx0Ly8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5cdEV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblx0XG5cdC8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuXHQvLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuXHRFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXHRcblx0Ly8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG5cdC8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcblx0ICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblx0ICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzKVxuXHQgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdFxuXHQgIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cblx0ICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuXHQgICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcblx0ICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcblx0ICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG5cdCAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdCAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuXHQgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuXHQgICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG5cdCAgICAgICAgdGhyb3cgZXJyO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdFxuXHQgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG5cdCAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgLy8gZmFzdCBjYXNlc1xuXHQgICAgICBjYXNlIDE6XG5cdCAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIDI6XG5cdCAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgMzpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICAvLyBzbG93ZXJcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0ICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcblx0ICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuXHQgICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcblx0ICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcblx0ICB2YXIgbTtcblx0XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzKVxuXHQgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdFxuXHQgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG5cdCAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuXHQgIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG5cdCAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcblx0ICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG5cdCAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuXHQgICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcblx0ICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuXHQgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuXHQgICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuXHQgIGVsc2Vcblx0ICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuXHQgICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXHRcblx0ICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuXHQgIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG5cdCAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcblx0ICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcblx0ICAgIH1cblx0XG5cdCAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuXHQgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcblx0ICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG5cdCAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG5cdCAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG5cdCAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcblx0ICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG5cdCAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXHRcblx0ICB2YXIgZmlyZWQgPSBmYWxzZTtcblx0XG5cdCAgZnVuY3Rpb24gZygpIHtcblx0ICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cdFxuXHQgICAgaWYgKCFmaXJlZCkge1xuXHQgICAgICBmaXJlZCA9IHRydWU7XG5cdCAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG5cdCAgdGhpcy5vbih0eXBlLCBnKTtcblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcblx0ICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblx0XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcblx0ICBwb3NpdGlvbiA9IC0xO1xuXHRcblx0ICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcblx0ICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG5cdCAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcblx0ICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblx0XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuXHQgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuXHQgICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcblx0ICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuXHQgICAgICAgIHBvc2l0aW9uID0gaTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwb3NpdGlvbiA8IDApXG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBsaXN0Lmxlbmd0aCA9IDA7XG5cdCAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcblx0ICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXHRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cylcblx0ICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuXHQgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcblx0ICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuXHQgICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcblx0ICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcblx0ICAgIH1cblx0ICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuXHQgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdFxuXHQgIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0XG5cdCAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuXHQgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuXHQgIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG5cdCAgICAvLyBMSUZPIG9yZGVyXG5cdCAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcblx0ICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcblx0ICB9XG5cdCAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICB2YXIgcmV0O1xuXHQgIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICByZXQgPSBbXTtcblx0ICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG5cdCAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcblx0ICBlbHNlXG5cdCAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIGlmICh0aGlzLl9ldmVudHMpIHtcblx0ICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuXHQgICAgICByZXR1cm4gMTtcblx0ICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG5cdCAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcblx0ICB9XG5cdCAgcmV0dXJuIDA7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcblx0ICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcblx0ICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG5cdCAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuXHQgICAgICBjb25zdHJ1Y3Rvcjoge1xuXHQgICAgICAgIHZhbHVlOiBjdG9yLFxuXHQgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXHQgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9O1xuXHR9IGVsc2Uge1xuXHQgIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcblx0ICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG5cdCAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuXHQgICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuXHQgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykge2V4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRleHBvcnRzLlN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRleHBvcnRzLlJlYWRhYmxlID0gZXhwb3J0cztcblx0ZXhwb3J0cy5Xcml0YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRleHBvcnRzLkR1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRleHBvcnRzLlRyYW5zZm9ybSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRleHBvcnRzLlBhc3NUaHJvdWdoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdGlmICghcHJvY2Vzcy5icm93c2VyICYmIHByb2Nlc3MuZW52LlJFQURBQkxFX1NUUkVBTSA9PT0gJ2Rpc2FibGUnKSB7XG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTgpKSlcblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIEJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpLkJ1ZmZlcjtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHRSZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTtcblx0XG5cdHZhciBFRSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLkV2ZW50RW1pdHRlcjtcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdGlmICghRUUubGlzdGVuZXJDb3VudCkgRUUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcblx0ICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xuXHR9O1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdHZhciBTdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHR2YXIgU3RyaW5nRGVjb2Rlcjtcblx0XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblx0aWYgKGRlYnVnICYmIGRlYnVnLmRlYnVnbG9nKSB7XG5cdCAgZGVidWcgPSBkZWJ1Zy5kZWJ1Z2xvZygnc3RyZWFtJyk7XG5cdH0gZWxzZSB7XG5cdCAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTtcblx0fVxuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdFxuXHR1dGlsLmluaGVyaXRzKFJlYWRhYmxlLCBTdHJlYW0pO1xuXHRcblx0ZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcblx0ICB2YXIgRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0ICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggaXQgc3RvcHMgY2FsbGluZyBfcmVhZCgpIHRvIGZpbGwgdGhlIGJ1ZmZlclxuXHQgIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcblx0ICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuXHQgIHZhciBkZWZhdWx0SHdtID0gb3B0aW9ucy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cdCAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gKGh3bSB8fCBod20gPT09IDApID8gaHdtIDogZGVmYXVsdEh3bTtcblx0XG5cdCAgLy8gY2FzdCB0byBpbnRzLlxuXHQgIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrO1xuXHRcblx0ICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgIHRoaXMubGVuZ3RoID0gMDtcblx0ICB0aGlzLnBpcGVzID0gbnVsbDtcblx0ICB0aGlzLnBpcGVzQ291bnQgPSAwO1xuXHQgIHRoaXMuZmxvd2luZyA9IG51bGw7XG5cdCAgdGhpcy5lbmRlZCA9IGZhbHNlO1xuXHQgIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlO1xuXHQgIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXHRcblx0ICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSxcblx0ICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuXHQgIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cblx0ICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC5cblx0ICB0aGlzLnN5bmMgPSB0cnVlO1xuXHRcblx0ICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheVxuXHQgIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLlxuXHQgIHRoaXMubmVlZFJlYWRhYmxlID0gZmFsc2U7XG5cdCAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblx0ICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7XG5cdFxuXHRcblx0ICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuXHQgIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5XG5cdCAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cdFxuXHQgIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpXG5cdCAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTtcblx0XG5cdCAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuXHQgIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cblx0ICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG5cdCAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cdFxuXHQgIC8vIHdoZW4gcGlwaW5nLCB3ZSBvbmx5IGNhcmUgYWJvdXQgJ3JlYWRhYmxlJyBldmVudHMgdGhhdCBoYXBwZW5cblx0ICAvLyBhZnRlciByZWFkKClpbmcgYWxsIHRoZSBieXRlcyBhbmQgbm90IGdldHRpbmcgYW55IHB1c2hiYWNrLlxuXHQgIHRoaXMucmFuT3V0ID0gZmFsc2U7XG5cdFxuXHQgIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG5cdCAgdGhpcy5hd2FpdERyYWluID0gMDtcblx0XG5cdCAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuXHQgIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTtcblx0XG5cdCAgdGhpcy5kZWNvZGVyID0gbnVsbDtcblx0ICB0aGlzLmVuY29kaW5nID0gbnVsbDtcblx0ICBpZiAob3B0aW9ucy5lbmNvZGluZykge1xuXHQgICAgaWYgKCFTdHJpbmdEZWNvZGVyKVxuXHQgICAgICBTdHJpbmdEZWNvZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCkuU3RyaW5nRGVjb2Rlcjtcblx0ICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKG9wdGlvbnMuZW5jb2RpbmcpO1xuXHQgICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7XG5cdCAgdmFyIER1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKVxuXHQgICAgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTtcblx0XG5cdCAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXHRcblx0ICAvLyBsZWdhY3lcblx0ICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblx0XG5cdCAgU3RyZWFtLmNhbGwodGhpcyk7XG5cdH1cblx0XG5cdC8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLlxuXHQvLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCxcblx0Ly8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZFxuXHQvLyB3cml0ZSgpIHNvbWUgbW9yZS5cblx0UmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHRcblx0ICBpZiAodXRpbC5pc1N0cmluZyhjaHVuaykgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcblx0ICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuXHQgICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykge1xuXHQgICAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTtcblx0ICAgICAgZW5jb2RpbmcgPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlKTtcblx0fTtcblx0XG5cdC8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpXG5cdFJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oY2h1bmspIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHQgIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgJycsIHRydWUpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcmVhZGFibGVBZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGFkZFRvRnJvbnQpIHtcblx0ICB2YXIgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcblx0ICBpZiAoZXIpIHtcblx0ICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblx0ICB9IGVsc2UgaWYgKHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspKSB7XG5cdCAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoIXN0YXRlLmVuZGVkKVxuXHQgICAgICBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpO1xuXHQgIH0gZWxzZSBpZiAoc3RhdGUub2JqZWN0TW9kZSB8fCBjaHVuayAmJiBjaHVuay5sZW5ndGggPiAwKSB7XG5cdCAgICBpZiAoc3RhdGUuZW5kZWQgJiYgIWFkZFRvRnJvbnQpIHtcblx0ICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ3N0cmVhbS5wdXNoKCkgYWZ0ZXIgRU9GJyk7XG5cdCAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGUpO1xuXHQgICAgfSBlbHNlIGlmIChzdGF0ZS5lbmRFbWl0dGVkICYmIGFkZFRvRnJvbnQpIHtcblx0ICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ3N0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50Jyk7XG5cdCAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIWFkZFRvRnJvbnQgJiYgIWVuY29kaW5nKVxuXHQgICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG5cdFxuXHQgICAgICBpZiAoIWFkZFRvRnJvbnQpXG5cdCAgICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuXHRcblx0ICAgICAgLy8gaWYgd2Ugd2FudCB0aGUgZGF0YSBub3csIGp1c3QgZW1pdCBpdC5cblx0ICAgICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5zeW5jKSB7XG5cdCAgICAgICAgc3RyZWFtLmVtaXQoJ2RhdGEnLCBjaHVuayk7XG5cdCAgICAgICAgc3RyZWFtLnJlYWQoMCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gdXBkYXRlIHRoZSBidWZmZXIgaW5mby5cblx0ICAgICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cdCAgICAgICAgaWYgKGFkZFRvRnJvbnQpXG5cdCAgICAgICAgICBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7XG5cdCAgICAgICAgZWxzZVxuXHQgICAgICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuXHRcblx0ICAgICAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKVxuXHQgICAgICAgICAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkge1xuXHQgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5lZWRNb3JlRGF0YShzdGF0ZSk7XG5cdH1cblx0XG5cdFxuXHRcblx0Ly8gaWYgaXQncyBwYXN0IHRoZSBoaWdoIHdhdGVyIG1hcmssIHdlIGNhbiBwdXNoIGluIHNvbWUgbW9yZS5cblx0Ly8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWVcblx0Ly8gbW9yZSBieXRlcy4gIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsXG5cdC8vIHN1Y2ggYXMgdGhlIHJlcGwuICBBbHNvLCBpZiB0aGUgcHVzaCgpIHRyaWdnZXJlZCBhXG5cdC8vIHJlYWRhYmxlIGV2ZW50LCBhbmQgdGhlIHVzZXIgY2FsbGVkIHJlYWQobGFyZ2VOdW1iZXIpIHN1Y2ggdGhhdFxuXHQvLyBuZWVkUmVhZGFibGUgd2FzIHNldCwgdGhlbiB3ZSBvdWdodCB0byBwdXNoIG1vcmUsIHNvIHRoYXQgYW5vdGhlclxuXHQvLyAncmVhZGFibGUnIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkLlxuXHRmdW5jdGlvbiBuZWVkTW9yZURhdGEoc3RhdGUpIHtcblx0ICByZXR1cm4gIXN0YXRlLmVuZGVkICYmXG5cdCAgICAgICAgIChzdGF0ZS5uZWVkUmVhZGFibGUgfHxcblx0ICAgICAgICAgIHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHxcblx0ICAgICAgICAgIHN0YXRlLmxlbmd0aCA9PT0gMCk7XG5cdH1cblx0XG5cdC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXHRSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbihlbmMpIHtcblx0ICBpZiAoIVN0cmluZ0RlY29kZXIpXG5cdCAgICBTdHJpbmdEZWNvZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCkuU3RyaW5nRGVjb2Rlcjtcblx0ICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuXHQgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvLyBEb24ndCByYWlzZSB0aGUgaHdtID4gMTI4TUJcblx0dmFyIE1BWF9IV00gPSAweDgwMDAwMDtcblx0ZnVuY3Rpb24gcm91bmRVcFRvTmV4dFBvd2VyT2YyKG4pIHtcblx0ICBpZiAobiA+PSBNQVhfSFdNKSB7XG5cdCAgICBuID0gTUFYX0hXTTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gR2V0IHRoZSBuZXh0IGhpZ2hlc3QgcG93ZXIgb2YgMlxuXHQgICAgbi0tO1xuXHQgICAgZm9yICh2YXIgcCA9IDE7IHAgPCAzMjsgcCA8PD0gMSkgbiB8PSBuID4+IHA7XG5cdCAgICBuKys7XG5cdCAgfVxuXHQgIHJldHVybiBuO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKSB7XG5cdCAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZClcblx0ICAgIHJldHVybiAwO1xuXHRcblx0ICBpZiAoc3RhdGUub2JqZWN0TW9kZSlcblx0ICAgIHJldHVybiBuID09PSAwID8gMCA6IDE7XG5cdFxuXHQgIGlmIChpc05hTihuKSB8fCB1dGlsLmlzTnVsbChuKSkge1xuXHQgICAgLy8gb25seSBmbG93IG9uZSBidWZmZXIgYXQgYSB0aW1lXG5cdCAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5idWZmZXIubGVuZ3RoKVxuXHQgICAgICByZXR1cm4gc3RhdGUuYnVmZmVyWzBdLmxlbmd0aDtcblx0ICAgIGVsc2Vcblx0ICAgICAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcblx0ICB9XG5cdFxuXHQgIGlmIChuIDw9IDApXG5cdCAgICByZXR1cm4gMDtcblx0XG5cdCAgLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIHRhcmdldCBidWZmZXIgbGV2ZWwsXG5cdCAgLy8gdGhlbiByYWlzZSB0aGUgd2F0ZXIgbWFyay4gIEJ1bXAgdXAgdG8gdGhlIG5leHQgaGlnaGVzdFxuXHQgIC8vIHBvd2VyIG9mIDIsIHRvIHByZXZlbnQgaW5jcmVhc2luZyBpdCBleGNlc3NpdmVseSBpbiB0aW55XG5cdCAgLy8gYW1vdW50cy5cblx0ICBpZiAobiA+IHN0YXRlLmhpZ2hXYXRlck1hcmspXG5cdCAgICBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gcm91bmRVcFRvTmV4dFBvd2VyT2YyKG4pO1xuXHRcblx0ICAvLyBkb24ndCBoYXZlIHRoYXQgbXVjaC4gIHJldHVybiBudWxsLCB1bmxlc3Mgd2UndmUgZW5kZWQuXG5cdCAgaWYgKG4gPiBzdGF0ZS5sZW5ndGgpIHtcblx0ICAgIGlmICghc3RhdGUuZW5kZWQpIHtcblx0ICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblx0ICAgICAgcmV0dXJuIDA7XG5cdCAgICB9IGVsc2Vcblx0ICAgICAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBuO1xuXHR9XG5cdFxuXHQvLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LlxuXHRSZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKG4pIHtcblx0ICBkZWJ1ZygncmVhZCcsIG4pO1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdCAgdmFyIG5PcmlnID0gbjtcblx0XG5cdCAgaWYgKCF1dGlsLmlzTnVtYmVyKG4pIHx8IG4gPiAwKVxuXHQgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG5cdFxuXHQgIC8vIGlmIHdlJ3JlIGRvaW5nIHJlYWQoMCkgdG8gdHJpZ2dlciBhIHJlYWRhYmxlIGV2ZW50LCBidXQgd2Vcblx0ICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyXG5cdCAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uXG5cdCAgaWYgKG4gPT09IDAgJiZcblx0ICAgICAgc3RhdGUubmVlZFJlYWRhYmxlICYmXG5cdCAgICAgIChzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5lbmRlZCkpIHtcblx0ICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTtcblx0ICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpXG5cdCAgICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuXHQgICAgZWxzZVxuXHQgICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTtcblx0XG5cdCAgLy8gaWYgd2UndmUgZW5kZWQsIGFuZCB3ZSdyZSBub3cgY2xlYXIsIHRoZW4gZmluaXNoIGl0IHVwLlxuXHQgIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7XG5cdCAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKVxuXHQgICAgICBlbmRSZWFkYWJsZSh0aGlzKTtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZVxuXHQgIC8vICpiZWxvdyogdGhlIGNhbGwgdG8gX3JlYWQuICBUaGUgcmVhc29uIGlzIHRoYXQgaW4gY2VydGFpblxuXHQgIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWRcblx0ICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlXG5cdCAgLy8gdGhlIHN0YXRlIG9mIHRoZSByZWFkIGJ1ZmZlciwgcHJvdmlkaW5nIGVub3VnaCBkYXRhIHdoZW5cblx0ICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC5cblx0ICAvL1xuXHQgIC8vIFNvLCB0aGUgc3RlcHMgYXJlOlxuXHQgIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG9cblx0ICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLlxuXHQgIC8vXG5cdCAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC5cblx0ICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXNcblx0ICAvLyBkZWVwbHkgdWdseSB0byB3cml0ZSBBUElzIHRoaXMgd2F5LCBidXQgdGhhdCBzdGlsbCBkb2Vzbid0IG1lYW5cblx0ICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlXG5cdCAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy5cblx0ICAvLyBUYWtlIG5vdGUgaWYgdGhlIF9yZWFkIGNhbGwgaXMgc3luYyBvciBhc3luYyAoaWUsIGlmIHRoZSByZWFkIGNhbGxcblx0ICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0XG5cdCAgLy8gJ3JlYWRhYmxlJyBldGMuXG5cdCAgLy9cblx0ICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uXG5cdFxuXHQgIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy5cblx0ICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlO1xuXHQgIGRlYnVnKCduZWVkIHJlYWRhYmxlJywgZG9SZWFkKTtcblx0XG5cdCAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lXG5cdCAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5sZW5ndGggLSBuIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykge1xuXHQgICAgZG9SZWFkID0gdHJ1ZTtcblx0ICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7XG5cdCAgfVxuXHRcblx0ICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeVxuXHQgIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS5cblx0ICBpZiAoc3RhdGUuZW5kZWQgfHwgc3RhdGUucmVhZGluZykge1xuXHQgICAgZG9SZWFkID0gZmFsc2U7XG5cdCAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZG9SZWFkKSB7XG5cdCAgICBkZWJ1ZygnZG8gcmVhZCcpO1xuXHQgICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG5cdCAgICBzdGF0ZS5zeW5jID0gdHJ1ZTtcblx0ICAgIC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuXG5cdCAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKVxuXHQgICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXHQgICAgLy8gY2FsbCBpbnRlcm5hbCByZWFkIG1ldGhvZFxuXHQgICAgdGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTtcblx0ICAgIHN0YXRlLnN5bmMgPSBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsXG5cdCAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLlxuXHQgIGlmIChkb1JlYWQgJiYgIXN0YXRlLnJlYWRpbmcpXG5cdCAgICBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpO1xuXHRcblx0ICB2YXIgcmV0O1xuXHQgIGlmIChuID4gMClcblx0ICAgIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTtcblx0ICBlbHNlXG5cdCAgICByZXQgPSBudWxsO1xuXHRcblx0ICBpZiAodXRpbC5pc051bGwocmV0KSkge1xuXHQgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblx0ICAgIG4gPSAwO1xuXHQgIH1cblx0XG5cdCAgc3RhdGUubGVuZ3RoIC09IG47XG5cdFxuXHQgIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vd1xuXHQgIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci5cblx0ICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5lbmRlZClcblx0ICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cdFxuXHQgIC8vIElmIHdlIHRyaWVkIHRvIHJlYWQoKSBwYXN0IHRoZSBFT0YsIHRoZW4gZW1pdCBlbmQgb24gdGhlIG5leHQgdGljay5cblx0ICBpZiAobk9yaWcgIT09IG4gJiYgc3RhdGUuZW5kZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKVxuXHQgICAgZW5kUmVhZGFibGUodGhpcyk7XG5cdFxuXHQgIGlmICghdXRpbC5pc051bGwocmV0KSlcblx0ICAgIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7XG5cdFxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG5cdCAgdmFyIGVyID0gbnVsbDtcblx0ICBpZiAoIXV0aWwuaXNCdWZmZXIoY2h1bmspICYmXG5cdCAgICAgICF1dGlsLmlzU3RyaW5nKGNodW5rKSAmJlxuXHQgICAgICAhdXRpbC5pc051bGxPclVuZGVmaW5lZChjaHVuaykgJiZcblx0ICAgICAgIXN0YXRlLm9iamVjdE1vZGUpIHtcblx0ICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuXHQgIH1cblx0ICByZXR1cm4gZXI7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHtcblx0ICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHtcblx0ICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG5cdCAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7XG5cdCAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcblx0ICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH1cblx0ICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cdFxuXHQgIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLlxuXHQgIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xuXHR9XG5cdFxuXHQvLyBEb24ndCBlbWl0IHJlYWRhYmxlIHJpZ2h0IGF3YXkgaW4gc3luYyBtb2RlLCBiZWNhdXNlIHRoaXMgY2FuIHRyaWdnZXJcblx0Ly8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyXG5cdC8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC5cblx0ZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkge1xuXHQgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcblx0ICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTtcblx0ICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkge1xuXHQgICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpO1xuXHQgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTtcblx0ICAgIGlmIChzdGF0ZS5zeW5jKVxuXHQgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGVtaXRSZWFkYWJsZV8oc3RyZWFtKTtcblx0ICAgICAgfSk7XG5cdCAgICBlbHNlXG5cdCAgICAgIGVtaXRSZWFkYWJsZV8oc3RyZWFtKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG5cdCAgZGVidWcoJ2VtaXQgcmVhZGFibGUnKTtcblx0ICBzdHJlYW0uZW1pdCgncmVhZGFibGUnKTtcblx0ICBmbG93KHN0cmVhbSk7XG5cdH1cblx0XG5cdFxuXHQvLyBhdCB0aGlzIHBvaW50LCB0aGUgdXNlciBoYXMgcHJlc3VtYWJseSBzZWVuIHRoZSAncmVhZGFibGUnIGV2ZW50LFxuXHQvLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkXG5cdC8vIGluIHR1cm4gYW5vdGhlciBfcmVhZChuKSBjYWxsLCBpbiB3aGljaCBjYXNlIHJlYWRpbmcgPSB0cnVlIGlmXG5cdC8vIGl0J3MgaW4gcHJvZ3Jlc3MuXG5cdC8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sXG5cdC8vIHRoZW4gZ28gYWhlYWQgYW5kIHRyeSB0byByZWFkIHNvbWUgbW9yZSBwcmVlbXB0aXZlbHkuXG5cdGZ1bmN0aW9uIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSkge1xuXHQgIGlmICghc3RhdGUucmVhZGluZ01vcmUpIHtcblx0ICAgIHN0YXRlLnJlYWRpbmdNb3JlID0gdHJ1ZTtcblx0ICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKSB7XG5cdCAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDtcblx0ICB3aGlsZSAoIXN0YXRlLnJlYWRpbmcgJiYgIXN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLmVuZGVkICYmXG5cdCAgICAgICAgIHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcblx0ICAgIGRlYnVnKCdtYXliZVJlYWRNb3JlIHJlYWQgMCcpO1xuXHQgICAgc3RyZWFtLnJlYWQoMCk7XG5cdCAgICBpZiAobGVuID09PSBzdGF0ZS5sZW5ndGgpXG5cdCAgICAgIC8vIGRpZG4ndCBnZXQgYW55IGRhdGEsIHN0b3Agc3Bpbm5pbmcuXG5cdCAgICAgIGJyZWFrO1xuXHQgICAgZWxzZVxuXHQgICAgICBsZW4gPSBzdGF0ZS5sZW5ndGg7XG5cdCAgfVxuXHQgIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cdH1cblx0XG5cdC8vIGFic3RyYWN0IG1ldGhvZC4gIHRvIGJlIG92ZXJyaWRkZW4gaW4gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cblx0Ly8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC5cblx0Ly8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsIFwibGVuZ3RoXCIgaXMgc29tZXdoYXRcblx0Ly8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLlxuXHRSZWFkYWJsZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbihuKSB7XG5cdCAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpO1xuXHR9O1xuXHRcblx0UmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBwaXBlT3B0cykge1xuXHQgIHZhciBzcmMgPSB0aGlzO1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdFxuXHQgIHN3aXRjaCAoc3RhdGUucGlwZXNDb3VudCkge1xuXHQgICAgY2FzZSAwOlxuXHQgICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAxOlxuXHQgICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTtcblx0ICAgICAgYnJlYWs7XG5cdCAgfVxuXHQgIHN0YXRlLnBpcGVzQ291bnQgKz0gMTtcblx0ICBkZWJ1ZygncGlwZSBjb3VudD0lZCBvcHRzPSVqJywgc3RhdGUucGlwZXNDb3VudCwgcGlwZU9wdHMpO1xuXHRcblx0ICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmXG5cdCAgICAgICAgICAgICAgZGVzdCAhPT0gcHJvY2Vzcy5zdGRvdXQgJiZcblx0ICAgICAgICAgICAgICBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjtcblx0XG5cdCAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IGNsZWFudXA7XG5cdCAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpXG5cdCAgICBwcm9jZXNzLm5leHRUaWNrKGVuZEZuKTtcblx0ICBlbHNlXG5cdCAgICBzcmMub25jZSgnZW5kJywgZW5kRm4pO1xuXHRcblx0ICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7XG5cdCAgZnVuY3Rpb24gb251bnBpcGUocmVhZGFibGUpIHtcblx0ICAgIGRlYnVnKCdvbnVucGlwZScpO1xuXHQgICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcblx0ICAgICAgY2xlYW51cCgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gb25lbmQoKSB7XG5cdCAgICBkZWJ1Zygnb25lbmQnKTtcblx0ICAgIGRlc3QuZW5kKCk7XG5cdCAgfVxuXHRcblx0ICAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyXG5cdCAgLy8gb24gdGhlIHNvdXJjZS4gIFRoaXMgd291bGQgYmUgbW9yZSBlbGVnYW50IHdpdGggYSAub25jZSgpXG5cdCAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXNcblx0ICAvLyB0b28gc2xvdy5cblx0ICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7XG5cdCAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblx0XG5cdCAgZnVuY3Rpb24gY2xlYW51cCgpIHtcblx0ICAgIGRlYnVnKCdjbGVhbnVwJyk7XG5cdCAgICAvLyBjbGVhbnVwIGV2ZW50IGhhbmRsZXJzIG9uY2UgdGhlIHBpcGUgaXMgYnJva2VuXG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7XG5cdCAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcblx0ICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG5cdCAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXHRcblx0ICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcblx0ICAgIC8vIHNwZWNpZmljIHdyaXRlciwgdGhlbiBpdCB3b3VsZCBjYXVzZSBpdCB0byBuZXZlciBzdGFydFxuXHQgICAgLy8gZmxvd2luZyBhZ2Fpbi5cblx0ICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cblx0ICAgIC8vIElmIHdlIGRvbid0IGtub3csIHRoZW4gYXNzdW1lIHRoYXQgd2UgYXJlIHdhaXRpbmcgZm9yIG9uZS5cblx0ICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmXG5cdCAgICAgICAgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSlcblx0ICAgICAgb25kcmFpbigpO1xuXHQgIH1cblx0XG5cdCAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTtcblx0ICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcblx0ICAgIGRlYnVnKCdvbmRhdGEnKTtcblx0ICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcblx0ICAgIGlmIChmYWxzZSA9PT0gcmV0KSB7XG5cdCAgICAgIGRlYnVnKCdmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UnLFxuXHQgICAgICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbik7XG5cdCAgICAgIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKys7XG5cdCAgICAgIHNyYy5wYXVzZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gaWYgdGhlIGRlc3QgaGFzIGFuIGVycm9yLCB0aGVuIHN0b3AgcGlwaW5nIGludG8gaXQuXG5cdCAgLy8gaG93ZXZlciwgZG9uJ3Qgc3VwcHJlc3MgdGhlIHRocm93aW5nIGJlaGF2aW9yIGZvciB0aGlzLlxuXHQgIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcblx0ICAgIGRlYnVnKCdvbmVycm9yJywgZXIpO1xuXHQgICAgdW5waXBlKCk7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuXHQgICAgaWYgKEVFLmxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApXG5cdCAgICAgIGRlc3QuZW1pdCgnZXJyb3InLCBlcik7XG5cdCAgfVxuXHQgIC8vIFRoaXMgaXMgYSBicnV0YWxseSB1Z2x5IGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXJcblx0ICAvLyBpcyBhdHRhY2hlZCBiZWZvcmUgYW55IHVzZXJsYW5kIG9uZXMuICBORVZFUiBETyBUSElTLlxuXHQgIGlmICghZGVzdC5fZXZlbnRzIHx8ICFkZXN0Ll9ldmVudHMuZXJyb3IpXG5cdCAgICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuXHQgIGVsc2UgaWYgKGlzQXJyYXkoZGVzdC5fZXZlbnRzLmVycm9yKSlcblx0ICAgIGRlc3QuX2V2ZW50cy5lcnJvci51bnNoaWZ0KG9uZXJyb3IpO1xuXHQgIGVsc2Vcblx0ICAgIGRlc3QuX2V2ZW50cy5lcnJvciA9IFtvbmVycm9yLCBkZXN0Ll9ldmVudHMuZXJyb3JdO1xuXHRcblx0XG5cdFxuXHQgIC8vIEJvdGggY2xvc2UgYW5kIGZpbmlzaCBzaG91bGQgdHJpZ2dlciB1bnBpcGUsIGJ1dCBvbmx5IG9uY2UuXG5cdCAgZnVuY3Rpb24gb25jbG9zZSgpIHtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblx0ICAgIHVucGlwZSgpO1xuXHQgIH1cblx0ICBkZXN0Lm9uY2UoJ2Nsb3NlJywgb25jbG9zZSk7XG5cdCAgZnVuY3Rpb24gb25maW5pc2goKSB7XG5cdCAgICBkZWJ1Zygnb25maW5pc2gnKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG5cdCAgICB1bnBpcGUoKTtcblx0ICB9XG5cdCAgZGVzdC5vbmNlKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG5cdFxuXHQgIGZ1bmN0aW9uIHVucGlwZSgpIHtcblx0ICAgIGRlYnVnKCd1bnBpcGUnKTtcblx0ICAgIHNyYy51bnBpcGUoZGVzdCk7XG5cdCAgfVxuXHRcblx0ICAvLyB0ZWxsIHRoZSBkZXN0IHRoYXQgaXQncyBiZWluZyBwaXBlZCB0b1xuXHQgIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7XG5cdFxuXHQgIC8vIHN0YXJ0IHRoZSBmbG93IGlmIGl0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgYWxyZWFkeS5cblx0ICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcblx0ICAgIGRlYnVnKCdwaXBlIHJlc3VtZScpO1xuXHQgICAgc3JjLnJlc3VtZSgpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRlc3Q7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBwaXBlT25EcmFpbihzcmMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgc3RhdGUgPSBzcmMuX3JlYWRhYmxlU3RhdGU7XG5cdCAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTtcblx0ICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKVxuXHQgICAgICBzdGF0ZS5hd2FpdERyYWluLS07XG5cdCAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRS5saXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkge1xuXHQgICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcblx0ICAgICAgZmxvdyhzcmMpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdFxuXHRSZWFkYWJsZS5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24oZGVzdCkge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdFxuXHQgIC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy5cblx0ICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMClcblx0ICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICAvLyBqdXN0IG9uZSBkZXN0aW5hdGlvbi4gIG1vc3QgY29tbW9uIGNhc2UuXG5cdCAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHtcblx0ICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuXHQgICAgaWYgKGRlc3QgJiYgZGVzdCAhPT0gc3RhdGUucGlwZXMpXG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICAgIGlmICghZGVzdClcblx0ICAgICAgZGVzdCA9IHN0YXRlLnBpcGVzO1xuXHRcblx0ICAgIC8vIGdvdCBhIG1hdGNoLlxuXHQgICAgc3RhdGUucGlwZXMgPSBudWxsO1xuXHQgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG5cdCAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG5cdCAgICBpZiAoZGVzdClcblx0ICAgICAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgLy8gc2xvdyBjYXNlLiBtdWx0aXBsZSBwaXBlIGRlc3RpbmF0aW9ucy5cblx0XG5cdCAgaWYgKCFkZXN0KSB7XG5cdCAgICAvLyByZW1vdmUgYWxsLlxuXHQgICAgdmFyIGRlc3RzID0gc3RhdGUucGlwZXM7XG5cdCAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDtcblx0ICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcblx0ICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuXHQgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXG5cdCAgICAgIGRlc3RzW2ldLmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLlxuXHQgIHZhciBpID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG5cdCAgaWYgKGkgPT09IC0xKVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgIHN0YXRlLnBpcGVzLnNwbGljZShpLCAxKTtcblx0ICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG5cdCAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpXG5cdCAgICBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdO1xuXHRcblx0ICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdC8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcblx0Ly8gRW5zdXJlIHJlYWRhYmxlIGxpc3RlbmVycyBldmVudHVhbGx5IGdldCBzb21ldGhpbmdcblx0UmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZXYsIGZuKSB7XG5cdCAgdmFyIHJlcyA9IFN0cmVhbS5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldiwgZm4pO1xuXHRcblx0ICAvLyBJZiBsaXN0ZW5pbmcgdG8gZGF0YSwgYW5kIGl0IGhhcyBub3QgZXhwbGljaXRseSBiZWVuIHBhdXNlZCxcblx0ICAvLyB0aGVuIGNhbGwgcmVzdW1lIHRvIHN0YXJ0IHRoZSBmbG93IG9mIGRhdGEgb24gdGhlIG5leHQgdGljay5cblx0ICBpZiAoZXYgPT09ICdkYXRhJyAmJiBmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7XG5cdCAgICB0aGlzLnJlc3VtZSgpO1xuXHQgIH1cblx0XG5cdCAgaWYgKGV2ID09PSAncmVhZGFibGUnICYmIHRoaXMucmVhZGFibGUpIHtcblx0ICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdCAgICBpZiAoIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nKSB7XG5cdCAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gdHJ1ZTtcblx0ICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG5cdCAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cdCAgICAgIGlmICghc3RhdGUucmVhZGluZykge1xuXHQgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpO1xuXHQgICAgICAgICAgc2VsZi5yZWFkKDApO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2UgaWYgKHN0YXRlLmxlbmd0aCkge1xuXHQgICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzLCBzdGF0ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXM7XG5cdH07XG5cdFJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjtcblx0XG5cdC8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUElcblx0Ly8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLlxuXHRSZWFkYWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0ICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcblx0ICAgIGRlYnVnKCdyZXN1bWUnKTtcblx0ICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuXHQgICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG5cdCAgICAgIGRlYnVnKCdyZXN1bWUgcmVhZCAwJyk7XG5cdCAgICAgIHRoaXMucmVhZCgwKTtcblx0ICAgIH1cblx0ICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHtcblx0ICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkge1xuXHQgICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTtcblx0ICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkge1xuXHQgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuXHQgIHN0cmVhbS5lbWl0KCdyZXN1bWUnKTtcblx0ICBmbG93KHN0cmVhbSk7XG5cdCAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpXG5cdCAgICBzdHJlYW0ucmVhZCgwKTtcblx0fVxuXHRcblx0UmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ2NhbGwgcGF1c2UgZmxvd2luZz0laicsIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7XG5cdCAgaWYgKGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHtcblx0ICAgIGRlYnVnKCdwYXVzZScpO1xuXHQgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gZmFsc2U7XG5cdCAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZmxvdyhzdHJlYW0pIHtcblx0ICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cdCAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcblx0ICBpZiAoc3RhdGUuZmxvd2luZykge1xuXHQgICAgZG8ge1xuXHQgICAgICB2YXIgY2h1bmsgPSBzdHJlYW0ucmVhZCgpO1xuXHQgICAgfSB3aGlsZSAobnVsbCAhPT0gY2h1bmsgJiYgc3RhdGUuZmxvd2luZyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyB3cmFwIGFuIG9sZC1zdHlsZSBzdHJlYW0gYXMgdGhlIGFzeW5jIGRhdGEgc291cmNlLlxuXHQvLyBUaGlzIGlzICpub3QqIHBhcnQgb2YgdGhlIHJlYWRhYmxlIHN0cmVhbSBpbnRlcmZhY2UuXG5cdC8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuXHRSZWFkYWJsZS5wcm90b3R5cGUud3JhcCA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdCAgdmFyIHBhdXNlZCA9IGZhbHNlO1xuXHRcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbigpIHtcblx0ICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpO1xuXHQgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7XG5cdCAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG5cdCAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpXG5cdCAgICAgICAgc2VsZi5wdXNoKGNodW5rKTtcblx0ICAgIH1cblx0XG5cdCAgICBzZWxmLnB1c2gobnVsbCk7XG5cdCAgfSk7XG5cdFxuXHQgIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKSB7XG5cdCAgICBkZWJ1Zygnd3JhcHBlZCBkYXRhJyk7XG5cdCAgICBpZiAoc3RhdGUuZGVjb2Rlcilcblx0ICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcblx0ICAgIGlmICghY2h1bmsgfHwgIXN0YXRlLm9iamVjdE1vZGUgJiYgIWNodW5rLmxlbmd0aClcblx0ICAgICAgcmV0dXJuO1xuXHRcblx0ICAgIHZhciByZXQgPSBzZWxmLnB1c2goY2h1bmspO1xuXHQgICAgaWYgKCFyZXQpIHtcblx0ICAgICAgcGF1c2VkID0gdHJ1ZTtcblx0ICAgICAgc3RyZWFtLnBhdXNlKCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIC8vIHByb3h5IGFsbCB0aGUgb3RoZXIgbWV0aG9kcy5cblx0ICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cblx0ICBmb3IgKHZhciBpIGluIHN0cmVhbSkge1xuXHQgICAgaWYgKHV0aWwuaXNGdW5jdGlvbihzdHJlYW1baV0pICYmIHV0aWwuaXNVbmRlZmluZWQodGhpc1tpXSkpIHtcblx0ICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uKG1ldGhvZCkgeyByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcblx0ICAgICAgfX0oaSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBwcm94eSBjZXJ0YWluIGltcG9ydGFudCBldmVudHMuXG5cdCAgdmFyIGV2ZW50cyA9IFsnZXJyb3InLCAnY2xvc2UnLCAnZGVzdHJveScsICdwYXVzZScsICdyZXN1bWUnXTtcblx0ICBmb3JFYWNoKGV2ZW50cywgZnVuY3Rpb24oZXYpIHtcblx0ICAgIHN0cmVhbS5vbihldiwgc2VsZi5lbWl0LmJpbmQoc2VsZiwgZXYpKTtcblx0ICB9KTtcblx0XG5cdCAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuXHQgIC8vIHVuZGVybHlpbmcgc3RyZWFtLlxuXHQgIHNlbGYuX3JlYWQgPSBmdW5jdGlvbihuKSB7XG5cdCAgICBkZWJ1Zygnd3JhcHBlZCBfcmVhZCcsIG4pO1xuXHQgICAgaWYgKHBhdXNlZCkge1xuXHQgICAgICBwYXVzZWQgPSBmYWxzZTtcblx0ICAgICAgc3RyZWFtLnJlc3VtZSgpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHJldHVybiBzZWxmO1xuXHR9O1xuXHRcblx0XG5cdFxuXHQvLyBleHBvc2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkuXG5cdFJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0O1xuXHRcblx0Ly8gUGx1Y2sgb2ZmIG4gYnl0ZXMgZnJvbSBhbiBhcnJheSBvZiBidWZmZXJzLlxuXHQvLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LlxuXHRmdW5jdGlvbiBmcm9tTGlzdChuLCBzdGF0ZSkge1xuXHQgIHZhciBsaXN0ID0gc3RhdGUuYnVmZmVyO1xuXHQgIHZhciBsZW5ndGggPSBzdGF0ZS5sZW5ndGg7XG5cdCAgdmFyIHN0cmluZ01vZGUgPSAhIXN0YXRlLmRlY29kZXI7XG5cdCAgdmFyIG9iamVjdE1vZGUgPSAhIXN0YXRlLm9iamVjdE1vZGU7XG5cdCAgdmFyIHJldDtcblx0XG5cdCAgLy8gbm90aGluZyBpbiB0aGUgbGlzdCwgZGVmaW5pdGVseSBlbXB0eS5cblx0ICBpZiAobGlzdC5sZW5ndGggPT09IDApXG5cdCAgICByZXR1cm4gbnVsbDtcblx0XG5cdCAgaWYgKGxlbmd0aCA9PT0gMClcblx0ICAgIHJldCA9IG51bGw7XG5cdCAgZWxzZSBpZiAob2JqZWN0TW9kZSlcblx0ICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcblx0ICBlbHNlIGlmICghbiB8fCBuID49IGxlbmd0aCkge1xuXHQgICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBhcnJheS5cblx0ICAgIGlmIChzdHJpbmdNb2RlKVxuXHQgICAgICByZXQgPSBsaXN0LmpvaW4oJycpO1xuXHQgICAgZWxzZVxuXHQgICAgICByZXQgPSBCdWZmZXIuY29uY2F0KGxpc3QsIGxlbmd0aCk7XG5cdCAgICBsaXN0Lmxlbmd0aCA9IDA7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHJlYWQganVzdCBzb21lIG9mIGl0LlxuXHQgICAgaWYgKG4gPCBsaXN0WzBdLmxlbmd0aCkge1xuXHQgICAgICAvLyBqdXN0IHRha2UgYSBwYXJ0IG9mIHRoZSBmaXJzdCBsaXN0IGl0ZW0uXG5cdCAgICAgIC8vIHNsaWNlIGlzIHRoZSBzYW1lIGZvciBidWZmZXJzIGFuZCBzdHJpbmdzLlxuXHQgICAgICB2YXIgYnVmID0gbGlzdFswXTtcblx0ICAgICAgcmV0ID0gYnVmLnNsaWNlKDAsIG4pO1xuXHQgICAgICBsaXN0WzBdID0gYnVmLnNsaWNlKG4pO1xuXHQgICAgfSBlbHNlIGlmIChuID09PSBsaXN0WzBdLmxlbmd0aCkge1xuXHQgICAgICAvLyBmaXJzdCBsaXN0IGlzIGEgcGVyZmVjdCBtYXRjaFxuXHQgICAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBjb21wbGV4IGNhc2UuXG5cdCAgICAgIC8vIHdlIGhhdmUgZW5vdWdoIHRvIGNvdmVyIGl0LCBidXQgaXQgc3BhbnMgcGFzdCB0aGUgZmlyc3QgYnVmZmVyLlxuXHQgICAgICBpZiAoc3RyaW5nTW9kZSlcblx0ICAgICAgICByZXQgPSAnJztcblx0ICAgICAgZWxzZVxuXHQgICAgICAgIHJldCA9IG5ldyBCdWZmZXIobik7XG5cdFxuXHQgICAgICB2YXIgYyA9IDA7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsICYmIGMgPCBuOyBpKyspIHtcblx0ICAgICAgICB2YXIgYnVmID0gbGlzdFswXTtcblx0ICAgICAgICB2YXIgY3B5ID0gTWF0aC5taW4obiAtIGMsIGJ1Zi5sZW5ndGgpO1xuXHRcblx0ICAgICAgICBpZiAoc3RyaW5nTW9kZSlcblx0ICAgICAgICAgIHJldCArPSBidWYuc2xpY2UoMCwgY3B5KTtcblx0ICAgICAgICBlbHNlXG5cdCAgICAgICAgICBidWYuY29weShyZXQsIGMsIDAsIGNweSk7XG5cdFxuXHQgICAgICAgIGlmIChjcHkgPCBidWYubGVuZ3RoKVxuXHQgICAgICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShjcHkpO1xuXHQgICAgICAgIGVsc2Vcblx0ICAgICAgICAgIGxpc3Quc2hpZnQoKTtcblx0XG5cdCAgICAgICAgYyArPSBjcHk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuXHQgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcblx0XG5cdCAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuXHQgIC8vIGJ1ZyBpbiBub2RlLiAgU2hvdWxkIG5ldmVyIGhhcHBlbi5cblx0ICBpZiAoc3RhdGUubGVuZ3RoID4gMClcblx0ICAgIHRocm93IG5ldyBFcnJvcignZW5kUmVhZGFibGUgY2FsbGVkIG9uIG5vbi1lbXB0eSBzdHJlYW0nKTtcblx0XG5cdCAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7XG5cdCAgICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cdCAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICAvLyBDaGVjayB0aGF0IHdlIGRpZG4ndCBnZXQgb25lIGxhc3QgdW5zaGlmdC5cblx0ICAgICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHN0YXRlLmVuZEVtaXR0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHN0cmVhbS5yZWFkYWJsZSA9IGZhbHNlO1xuXHQgICAgICAgIHN0cmVhbS5lbWl0KCdlbmQnKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JFYWNoICh4cywgZikge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBmKHhzW2ldLCBpKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluZGV4T2YgKHhzLCB4KSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTgpKSlcblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQvLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcblx0Ly8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuXG5cdFxuXHRmdW5jdGlvbiBpc0FycmF5KGFyZykge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KSB7XG5cdCAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fVxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cdFxuXHRmdW5jdGlvbiBpc051bGwoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0ZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXHRcblx0ZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xuXHR9XG5cdGV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblx0XG5cdGZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcblx0fVxuXHRleHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cdFxuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG5cdH1cblx0ZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcblx0fVxuXHRleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblx0XG5cdGZ1bmN0aW9uIGlzRGF0ZShkKSB7XG5cdCAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG5cdH1cblx0ZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cdFxuXHRmdW5jdGlvbiBpc0Vycm9yKGUpIHtcblx0ICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG5cdH1cblx0ZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblx0XG5cdGZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IG51bGwgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xuXHR9XG5cdGV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblx0XG5cdGV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTQpLkJ1ZmZlcikpXG5cbi8qKiovIH0sXG4vKiAzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0aWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuXHQgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3Jcblx0ICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG5cdCAgICAgIGNvbnN0cnVjdG9yOiB7XG5cdCAgICAgICAgdmFsdWU6IGN0b3IsXG5cdCAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH07XG5cdH0gZWxzZSB7XG5cdCAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuXHQgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3Jcblx0ICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG5cdCAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG5cdCAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG5cdCAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3Jcblx0ICB9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIChpZ25vcmVkKSAqL1xuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdC8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuXG5cdC8vIFNpbmNlIEpTIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB0aGlzIGNsYXNzXG5cdC8vIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFJlYWRhYmxlLCBhbmQgdGhlbiBwYXJhc2l0aWNhbGx5IGZyb21cblx0Ly8gV3JpdGFibGUuXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuXHQgIHZhciBrZXlzID0gW107XG5cdCAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG5cdCAgcmV0dXJuIGtleXM7XG5cdH1cblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdHZhciBSZWFkYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgV3JpdGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0XG5cdHV0aWwuaW5oZXJpdHMoRHVwbGV4LCBSZWFkYWJsZSk7XG5cdFxuXHRmb3JFYWNoKG9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKSwgZnVuY3Rpb24obWV0aG9kKSB7XG5cdCAgaWYgKCFEdXBsZXgucHJvdG90eXBlW21ldGhvZF0pXG5cdCAgICBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTtcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBEdXBsZXgob3B0aW9ucykge1xuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKVxuXHQgICAgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7XG5cdFxuXHQgIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG5cdCAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0XG5cdCAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWFkYWJsZSA9PT0gZmFsc2UpXG5cdCAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG5cdFxuXHQgIGlmIChvcHRpb25zICYmIG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKVxuXHQgICAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuXHRcblx0ICB0aGlzLmFsbG93SGFsZk9wZW4gPSB0cnVlO1xuXHQgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpXG5cdCAgICB0aGlzLmFsbG93SGFsZk9wZW4gPSBmYWxzZTtcblx0XG5cdCAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7XG5cdH1cblx0XG5cdC8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXJcblx0ZnVuY3Rpb24gb25lbmQoKSB7XG5cdCAgLy8gaWYgd2UgYWxsb3cgaGFsZi1vcGVuIHN0YXRlLCBvciBpZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCxcblx0ICAvLyB0aGVuIHdlJ3JlIG9rLlxuXHQgIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZClcblx0ICAgIHJldHVybjtcblx0XG5cdCAgLy8gbm8gbW9yZSBkYXRhIGNhbiBiZSB3cml0dGVuLlxuXHQgIC8vIEJ1dCBhbGxvdyBtb3JlIHdyaXRlcyB0byBoYXBwZW4gaW4gdGhpcyB0aWNrLlxuXHQgIHByb2Nlc3MubmV4dFRpY2sodGhpcy5lbmQuYmluZCh0aGlzKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGYoeHNbaV0sIGkpO1xuXHQgIH1cblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTgpKSlcblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQvLyBBIGJpdCBzaW1wbGVyIHRoYW4gcmVhZGFibGUgc3RyZWFtcy5cblx0Ly8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGNiKSwgYW5kIGl0J2xsIGhhbmRsZSBhbGxcblx0Ly8gdGhlIGRyYWluIGV2ZW50IGVtaXNzaW9uIGFuZCBidWZmZXJpbmcuXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlO1xuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIEJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpLkJ1ZmZlcjtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHRXcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTtcblx0XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR1dGlsLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0dmFyIFN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dXRpbC5pbmhlcml0cyhXcml0YWJsZSwgU3RyZWFtKTtcblx0XG5cdGZ1bmN0aW9uIFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICB0aGlzLmNodW5rID0gY2h1bms7XG5cdCAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuXHQgIHRoaXMuY2FsbGJhY2sgPSBjYjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gV3JpdGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcblx0ICB2YXIgRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0ICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlXG5cdCAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyB0aGF0IHdlIGFsd2F5cyByZXR1cm4gZmFsc2UgaWZcblx0ICAvLyB0aGUgZW50aXJlIGJ1ZmZlciBpcyBub3QgZmx1c2hlZCBpbW1lZGlhdGVseSBvbiB3cml0ZSgpXG5cdCAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcblx0ICB2YXIgZGVmYXVsdEh3bSA9IG9wdGlvbnMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuXHQgIHRoaXMuaGlnaFdhdGVyTWFyayA9IChod20gfHwgaHdtID09PSAwKSA/IGh3bSA6IGRlZmF1bHRId207XG5cdFxuXHQgIC8vIG9iamVjdCBzdHJlYW0gZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGlzIHN0cmVhbVxuXHQgIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cblx0ICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblx0XG5cdCAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleClcblx0ICAgIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMud3JpdGFibGVPYmplY3RNb2RlO1xuXHRcblx0ICAvLyBjYXN0IHRvIGludHMuXG5cdCAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfn50aGlzLmhpZ2hXYXRlck1hcms7XG5cdFxuXHQgIHRoaXMubmVlZERyYWluID0gZmFsc2U7XG5cdCAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKClcblx0ICB0aGlzLmVuZGluZyA9IGZhbHNlO1xuXHQgIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWRcblx0ICB0aGlzLmVuZGVkID0gZmFsc2U7XG5cdCAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkXG5cdCAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuXHRcblx0ICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT9cblx0ICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmdcblx0ICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLlxuXHQgIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7XG5cdCAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlO1xuXHRcblx0ICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG5cdCAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuXHQgIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cblx0ICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4Jztcblx0XG5cdCAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnRcblx0ICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nXG5cdCAgLy8gc29ja2V0IG9yIGZpbGUuXG5cdCAgdGhpcy5sZW5ndGggPSAwO1xuXHRcblx0ICAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLlxuXHQgIHRoaXMud3JpdGluZyA9IGZhbHNlO1xuXHRcblx0ICAvLyB3aGVuIHRydWUgYWxsIHdyaXRlcyB3aWxsIGJlIGJ1ZmZlcmVkIHVudGlsIC51bmNvcmsoKSBjYWxsXG5cdCAgdGhpcy5jb3JrZWQgPSAwO1xuXHRcblx0ICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSxcblx0ICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuXHQgIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cblx0ICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC5cblx0ICB0aGlzLnN5bmMgPSB0cnVlO1xuXHRcblx0ICAvLyBhIGZsYWcgdG8ga25vdyBpZiB3ZSdyZSBwcm9jZXNzaW5nIHByZXZpb3VzbHkgYnVmZmVyZWQgaXRlbXMsIHdoaWNoXG5cdCAgLy8gbWF5IGNhbGwgdGhlIF93cml0ZSgpIGNhbGxiYWNrIGluIHRoZSBzYW1lIHRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcblx0ICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi5cblx0ICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcblx0XG5cdCAgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKVxuXHQgIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uKGVyKSB7XG5cdCAgICBvbndyaXRlKHN0cmVhbSwgZXIpO1xuXHQgIH07XG5cdFxuXHQgIC8vIHRoZSBjYWxsYmFjayB0aGF0IHRoZSB1c2VyIHN1cHBsaWVzIHRvIHdyaXRlKGNodW5rLGVuY29kaW5nLGNiKVxuXHQgIHRoaXMud3JpdGVjYiA9IG51bGw7XG5cdFxuXHQgIC8vIHRoZSBhbW91bnQgdGhhdCBpcyBiZWluZyB3cml0dGVuIHdoZW4gX3dyaXRlIGlzIGNhbGxlZC5cblx0ICB0aGlzLndyaXRlbGVuID0gMDtcblx0XG5cdCAgdGhpcy5idWZmZXIgPSBbXTtcblx0XG5cdCAgLy8gbnVtYmVyIG9mIHBlbmRpbmcgdXNlci1zdXBwbGllZCB3cml0ZSBjYWxsYmFja3Ncblx0ICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWRcblx0ICB0aGlzLnBlbmRpbmdjYiA9IDA7XG5cdFxuXHQgIC8vIGVtaXQgcHJlZmluaXNoIGlmIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHdhaXRpbmcgZm9yIGlzIF93cml0ZSBjYnNcblx0ICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtc1xuXHQgIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTtcblx0XG5cdCAgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW5cblx0ICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBXcml0YWJsZShvcHRpb25zKSB7XG5cdCAgdmFyIER1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0ICAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRob3VnaCB0aGV5J3JlIG5vdFxuXHQgIC8vIGluc3RhbmNlb2YgV3JpdGFibGUsIHRoZXkncmUgaW5zdGFuY2VvZiBSZWFkYWJsZS5cblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgV3JpdGFibGUpICYmICEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpXG5cdCAgICByZXR1cm4gbmV3IFdyaXRhYmxlKG9wdGlvbnMpO1xuXHRcblx0ICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cdFxuXHQgIC8vIGxlZ2FjeS5cblx0ICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcblx0XG5cdCAgU3RyZWFtLmNhbGwodGhpcyk7XG5cdH1cblx0XG5cdC8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy5cblx0V3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdDYW5ub3QgcGlwZS4gTm90IHJlYWRhYmxlLicpKTtcblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG5cdCAgdmFyIGVyID0gbmV3IEVycm9yKCd3cml0ZSBhZnRlciBlbmQnKTtcblx0ICAvLyBUT0RPOiBkZWZlciBlcnJvciBldmVudHMgY29uc2lzdGVudGx5IGV2ZXJ5d2hlcmUsIG5vdCBqdXN0IHRoZSBjYlxuXHQgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblx0ICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgY2IoZXIpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvLyBJZiB3ZSBnZXQgc29tZXRoaW5nIHRoYXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZCxcblx0Ly8gYW5kIHdlJ3JlIG5vdCBpbiBvYmplY3RNb2RlLCB0aGVuIHRoYXQncyBhbiBlcnJvci5cblx0Ly8gT3RoZXJ3aXNlIHN0cmVhbSBjaHVua3MgYXJlIGFsbCBjb25zaWRlcmVkIHRvIGJlIG9mIGxlbmd0aD0xLCBhbmQgdGhlXG5cdC8vIHdhdGVybWFya3MgZGV0ZXJtaW5lIGhvdyBtYW55IG9iamVjdHMgdG8ga2VlcCBpbiB0aGUgYnVmZmVyLCByYXRoZXIgdGhhblxuXHQvLyBob3cgbWFueSBieXRlcyBvciBjaGFyYWN0ZXJzLlxuXHRmdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBjYikge1xuXHQgIHZhciB2YWxpZCA9IHRydWU7XG5cdCAgaWYgKCF1dGlsLmlzQnVmZmVyKGNodW5rKSAmJlxuXHQgICAgICAhdXRpbC5pc1N0cmluZyhjaHVuaykgJiZcblx0ICAgICAgIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspICYmXG5cdCAgICAgICFzdGF0ZS5vYmplY3RNb2RlKSB7XG5cdCAgICB2YXIgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7XG5cdCAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cdCAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICBjYihlcik7XG5cdCAgICB9KTtcblx0ICAgIHZhbGlkID0gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiB2YWxpZDtcblx0fVxuXHRcblx0V3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cdCAgdmFyIHJldCA9IGZhbHNlO1xuXHRcblx0ICBpZiAodXRpbC5pc0Z1bmN0aW9uKGVuY29kaW5nKSkge1xuXHQgICAgY2IgPSBlbmNvZGluZztcblx0ICAgIGVuY29kaW5nID0gbnVsbDtcblx0ICB9XG5cdFxuXHQgIGlmICh1dGlsLmlzQnVmZmVyKGNodW5rKSlcblx0ICAgIGVuY29kaW5nID0gJ2J1ZmZlcic7XG5cdCAgZWxzZSBpZiAoIWVuY29kaW5nKVxuXHQgICAgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cdFxuXHQgIGlmICghdXRpbC5pc0Z1bmN0aW9uKGNiKSlcblx0ICAgIGNiID0gZnVuY3Rpb24oKSB7fTtcblx0XG5cdCAgaWYgKHN0YXRlLmVuZGVkKVxuXHQgICAgd3JpdGVBZnRlckVuZCh0aGlzLCBzdGF0ZSwgY2IpO1xuXHQgIGVsc2UgaWYgKHZhbGlkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBjYikpIHtcblx0ICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuXHQgICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYik7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0V3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXHRcblx0ICBzdGF0ZS5jb3JrZWQrKztcblx0fTtcblx0XG5cdFdyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXHRcblx0ICBpZiAoc3RhdGUuY29ya2VkKSB7XG5cdCAgICBzdGF0ZS5jb3JrZWQtLTtcblx0XG5cdCAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiZcblx0ICAgICAgICAhc3RhdGUuY29ya2VkICYmXG5cdCAgICAgICAgIXN0YXRlLmZpbmlzaGVkICYmXG5cdCAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiZcblx0ICAgICAgICBzdGF0ZS5idWZmZXIubGVuZ3RoKVxuXHQgICAgICBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykge1xuXHQgIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJlxuXHQgICAgICBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJlxuXHQgICAgICB1dGlsLmlzU3RyaW5nKGNodW5rKSkge1xuXHQgICAgY2h1bmsgPSBuZXcgQnVmZmVyKGNodW5rLCBlbmNvZGluZyk7XG5cdCAgfVxuXHQgIHJldHVybiBjaHVuaztcblx0fVxuXHRcblx0Ly8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG5cdC8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlXG5cdC8vIElmIHdlIHJldHVybiBmYWxzZSwgdGhlbiB3ZSBuZWVkIGEgZHJhaW4gZXZlbnQsIHNvIHNldCB0aGF0IGZsYWcuXG5cdGZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIGNodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG5cdCAgaWYgKHV0aWwuaXNCdWZmZXIoY2h1bmspKVxuXHQgICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcblx0ICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cdFxuXHQgIHN0YXRlLmxlbmd0aCArPSBsZW47XG5cdFxuXHQgIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuXHQgIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLlxuXHQgIGlmICghcmV0KVxuXHQgICAgc3RhdGUubmVlZERyYWluID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKVxuXHQgICAgc3RhdGUuYnVmZmVyLnB1c2gobmV3IFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpKTtcblx0ICBlbHNlXG5cdCAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuXHRcblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgc3RhdGUud3JpdGVsZW4gPSBsZW47XG5cdCAgc3RhdGUud3JpdGVjYiA9IGNiO1xuXHQgIHN0YXRlLndyaXRpbmcgPSB0cnVlO1xuXHQgIHN0YXRlLnN5bmMgPSB0cnVlO1xuXHQgIGlmICh3cml0ZXYpXG5cdCAgICBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7XG5cdCAgZWxzZVxuXHQgICAgc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpO1xuXHQgIHN0YXRlLnN5bmMgPSBmYWxzZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikge1xuXHQgIGlmIChzeW5jKVxuXHQgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG5cdCAgICAgIGNiKGVyKTtcblx0ICAgIH0pO1xuXHQgIGVsc2Uge1xuXHQgICAgc3RhdGUucGVuZGluZ2NiLS07XG5cdCAgICBjYihlcik7XG5cdCAgfVxuXHRcblx0ICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcblx0ICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuXHQgIHN0YXRlLndyaXRpbmcgPSBmYWxzZTtcblx0ICBzdGF0ZS53cml0ZWNiID0gbnVsbDtcblx0ICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG5cdCAgc3RhdGUud3JpdGVsZW4gPSAwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvbndyaXRlKHN0cmVhbSwgZXIpIHtcblx0ICB2YXIgc3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG5cdCAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuXHQgIHZhciBjYiA9IHN0YXRlLndyaXRlY2I7XG5cdFxuXHQgIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cdFxuXHQgIGlmIChlcilcblx0ICAgIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpO1xuXHQgIGVsc2Uge1xuXHQgICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXRcblx0ICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cdFxuXHQgICAgaWYgKCFmaW5pc2hlZCAmJlxuXHQgICAgICAgICFzdGF0ZS5jb3JrZWQgJiZcblx0ICAgICAgICAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJlxuXHQgICAgICAgIHN0YXRlLmJ1ZmZlci5sZW5ndGgpIHtcblx0ICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN5bmMpIHtcblx0ICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpIHtcblx0ICBpZiAoIWZpbmlzaGVkKVxuXHQgICAgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpO1xuXHQgIHN0YXRlLnBlbmRpbmdjYi0tO1xuXHQgIGNiKCk7XG5cdCAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG5cdH1cblx0XG5cdC8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0XG5cdC8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cblx0Ly8gdmFsdWUsIGFuZCBoYXMgYSBjaGFuY2UgdG8gYXR0YWNoIGEgJ2RyYWluJyBsaXN0ZW5lci5cblx0ZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcblx0ICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikge1xuXHQgICAgc3RhdGUubmVlZERyYWluID0gZmFsc2U7XG5cdCAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHQvLyBpZiB0aGVyZSdzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHdhaXRpbmcsIHRoZW4gcHJvY2VzcyBpdFxuXHRmdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG5cdCAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IHRydWU7XG5cdFxuXHQgIGlmIChzdHJlYW0uX3dyaXRldiAmJiBzdGF0ZS5idWZmZXIubGVuZ3RoID4gMSkge1xuXHQgICAgLy8gRmFzdCBjYXNlLCB3cml0ZSBldmVyeXRoaW5nIHVzaW5nIF93cml0ZXYoKVxuXHQgICAgdmFyIGNicyA9IFtdO1xuXHQgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBzdGF0ZS5idWZmZXIubGVuZ3RoOyBjKyspXG5cdCAgICAgIGNicy5wdXNoKHN0YXRlLmJ1ZmZlcltjXS5jYWxsYmFjayk7XG5cdFxuXHQgICAgLy8gY291bnQgdGhlIG9uZSB3ZSBhcmUgYWRkaW5nLCBhcyB3ZWxsLlxuXHQgICAgLy8gVE9ETyhpc2FhY3MpIGNsZWFuIHRoaXMgdXBcblx0ICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuXHQgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmJ1ZmZlciwgJycsIGZ1bmN0aW9uKGVycikge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNicy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuXHQgICAgICAgIGNic1tpXShlcnIpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyBDbGVhciBidWZmZXJcblx0ICAgIHN0YXRlLmJ1ZmZlciA9IFtdO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBTbG93IGNhc2UsIHdyaXRlIGNodW5rcyBvbmUtYnktb25lXG5cdCAgICBmb3IgKHZhciBjID0gMDsgYyA8IHN0YXRlLmJ1ZmZlci5sZW5ndGg7IGMrKykge1xuXHQgICAgICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJbY107XG5cdCAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rO1xuXHQgICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZztcblx0ICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG5cdCAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblx0XG5cdCAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG5cdFxuXHQgICAgICAvLyBpZiB3ZSBkaWRuJ3QgY2FsbCB0aGUgb253cml0ZSBpbW1lZGlhdGVseSwgdGhlblxuXHQgICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLlxuXHQgICAgICAvLyBhbHNvLCB0aGF0IG1lYW5zIHRoYXQgdGhlIGNodW5rIGFuZCBjYiBhcmUgY3VycmVudGx5XG5cdCAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gbW92ZSB0aGUgYnVmZmVyIGNvdW50ZXIgcGFzdCB0aGVtLlxuXHQgICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuXHQgICAgICAgIGMrKztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChjIDwgc3RhdGUuYnVmZmVyLmxlbmd0aClcblx0ICAgICAgc3RhdGUuYnVmZmVyID0gc3RhdGUuYnVmZmVyLnNsaWNlKGMpO1xuXHQgICAgZWxzZVxuXHQgICAgICBzdGF0ZS5idWZmZXIubGVuZ3RoID0gMDtcblx0ICB9XG5cdFxuXHQgIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcblx0fVxuXHRcblx0V3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICBjYihuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpKTtcblx0XG5cdH07XG5cdFxuXHRXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldiA9IG51bGw7XG5cdFxuXHRXcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cdFxuXHQgIGlmICh1dGlsLmlzRnVuY3Rpb24oY2h1bmspKSB7XG5cdCAgICBjYiA9IGNodW5rO1xuXHQgICAgY2h1bmsgPSBudWxsO1xuXHQgICAgZW5jb2RpbmcgPSBudWxsO1xuXHQgIH0gZWxzZSBpZiAodXRpbC5pc0Z1bmN0aW9uKGVuY29kaW5nKSkge1xuXHQgICAgY2IgPSBlbmNvZGluZztcblx0ICAgIGVuY29kaW5nID0gbnVsbDtcblx0ICB9XG5cdFxuXHQgIGlmICghdXRpbC5pc051bGxPclVuZGVmaW5lZChjaHVuaykpXG5cdCAgICB0aGlzLndyaXRlKGNodW5rLCBlbmNvZGluZyk7XG5cdFxuXHQgIC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzXG5cdCAgaWYgKHN0YXRlLmNvcmtlZCkge1xuXHQgICAgc3RhdGUuY29ya2VkID0gMTtcblx0ICAgIHRoaXMudW5jb3JrKCk7XG5cdCAgfVxuXHRcblx0ICAvLyBpZ25vcmUgdW5uZWNlc3NhcnkgZW5kKCkgY2FsbHMuXG5cdCAgaWYgKCFzdGF0ZS5lbmRpbmcgJiYgIXN0YXRlLmZpbmlzaGVkKVxuXHQgICAgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTtcblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiBuZWVkRmluaXNoKHN0cmVhbSwgc3RhdGUpIHtcblx0ICByZXR1cm4gKHN0YXRlLmVuZGluZyAmJlxuXHQgICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwICYmXG5cdCAgICAgICAgICAhc3RhdGUuZmluaXNoZWQgJiZcblx0ICAgICAgICAgICFzdGF0ZS53cml0aW5nKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpIHtcblx0ICBpZiAoIXN0YXRlLnByZWZpbmlzaGVkKSB7XG5cdCAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG5cdCAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7XG5cdCAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuXHQgIGlmIChuZWVkKSB7XG5cdCAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7XG5cdCAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTtcblx0ICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlO1xuXHQgICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7XG5cdCAgICB9IGVsc2Vcblx0ICAgICAgcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuXHQgIH1cblx0ICByZXR1cm4gbmVlZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcblx0ICBzdGF0ZS5lbmRpbmcgPSB0cnVlO1xuXHQgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuXHQgIGlmIChjYikge1xuXHQgICAgaWYgKHN0YXRlLmZpbmlzaGVkKVxuXHQgICAgICBwcm9jZXNzLm5leHRUaWNrKGNiKTtcblx0ICAgIGVsc2Vcblx0ICAgICAgc3RyZWFtLm9uY2UoJ2ZpbmlzaCcsIGNiKTtcblx0ICB9XG5cdCAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxOCkpKVxuXG4vKioqLyB9LFxuLyogMzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHR2YXIgQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuQnVmZmVyO1xuXHRcblx0dmFyIGlzQnVmZmVyRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZ1xuXHQgIHx8IGZ1bmN0aW9uKGVuY29kaW5nKSB7XG5cdCAgICAgICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHtcblx0ICAgICAgICAgY2FzZSAnaGV4JzogY2FzZSAndXRmOCc6IGNhc2UgJ3V0Zi04JzogY2FzZSAnYXNjaWknOiBjYXNlICdiaW5hcnknOiBjYXNlICdiYXNlNjQnOiBjYXNlICd1Y3MyJzogY2FzZSAndWNzLTInOiBjYXNlICd1dGYxNmxlJzogY2FzZSAndXRmLTE2bGUnOiBjYXNlICdyYXcnOiByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgfVxuXHQgICAgIH1cblx0XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRFbmNvZGluZyhlbmNvZGluZykge1xuXHQgIGlmIChlbmNvZGluZyAmJiAhaXNCdWZmZXJFbmNvZGluZyhlbmNvZGluZykpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2Zcblx0Ly8gYnVmZmVycyBpbnRvIGEgc2VyaWVzIG9mIEpTIHN0cmluZ3Mgd2l0aG91dCBicmVha2luZyBhcGFydCBtdWx0aS1ieXRlXG5cdC8vIGNoYXJhY3RlcnMuIENFU1UtOCBpcyBoYW5kbGVkIGFzIHBhcnQgb2YgdGhlIFVURi04IGVuY29kaW5nLlxuXHQvL1xuXHQvLyBAVE9ETyBIYW5kbGluZyBhbGwgZW5jb2RpbmdzIGluc2lkZSBhIHNpbmdsZSBvYmplY3QgbWFrZXMgaXQgdmVyeSBkaWZmaWN1bHRcblx0Ly8gdG8gcmVhc29uIGFib3V0IHRoaXMgY29kZSwgc28gaXQgc2hvdWxkIGJlIHNwbGl0IHVwIGluIHRoZSBmdXR1cmUuXG5cdC8vIEBUT0RPIFRoZXJlIHNob3VsZCBiZSBhIHV0Zjgtc3RyaWN0IGVuY29kaW5nIHRoYXQgcmVqZWN0cyBpbnZhbGlkIFVURi04IGNvZGVcblx0Ly8gcG9pbnRzIGFzIHVzZWQgYnkgQ0VTVS04LlxuXHR2YXIgU3RyaW5nRGVjb2RlciA9IGV4cG9ydHMuU3RyaW5nRGVjb2RlciA9IGZ1bmN0aW9uKGVuY29kaW5nKSB7XG5cdCAgdGhpcy5lbmNvZGluZyA9IChlbmNvZGluZyB8fCAndXRmOCcpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sICcnKTtcblx0ICBhc3NlcnRFbmNvZGluZyhlbmNvZGluZyk7XG5cdCAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7XG5cdCAgICBjYXNlICd1dGY4Jzpcblx0ICAgICAgLy8gQ0VTVS04IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAzLWJ5dGVzXG5cdCAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDM7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAndWNzMic6XG5cdCAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgICAgLy8gVVRGLTE2IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAyLWJ5dGVzXG5cdCAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDI7XG5cdCAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgIC8vIEJhc2UtNjQgc3RvcmVzIDMgYnl0ZXMgaW4gNCBjaGFycywgYW5kIHBhZHMgdGhlIHJlbWFpbmRlci5cblx0ICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcblx0ICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IGJhc2U2NERldGVjdEluY29tcGxldGVDaGFyO1xuXHQgICAgICBicmVhaztcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIHRoaXMud3JpdGUgPSBwYXNzVGhyb3VnaFdyaXRlO1xuXHQgICAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAvLyBFbm91Z2ggc3BhY2UgdG8gc3RvcmUgYWxsIGJ5dGVzIG9mIGEgc2luZ2xlIGNoYXJhY3Rlci4gVVRGLTggbmVlZHMgNFxuXHQgIC8vIGJ5dGVzLCBidXQgQ0VTVS04IG1heSByZXF1aXJlIHVwIHRvIDYgKDMgYnl0ZXMgcGVyIHN1cnJvZ2F0ZSkuXG5cdCAgdGhpcy5jaGFyQnVmZmVyID0gbmV3IEJ1ZmZlcig2KTtcblx0ICAvLyBOdW1iZXIgb2YgYnl0ZXMgcmVjZWl2ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuXG5cdCAgdGhpcy5jaGFyUmVjZWl2ZWQgPSAwO1xuXHQgIC8vIE51bWJlciBvZiBieXRlcyBleHBlY3RlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci5cblx0ICB0aGlzLmNoYXJMZW5ndGggPSAwO1xuXHR9O1xuXHRcblx0XG5cdC8vIHdyaXRlIGRlY29kZXMgdGhlIGdpdmVuIGJ1ZmZlciBhbmQgcmV0dXJucyBpdCBhcyBKUyBzdHJpbmcgdGhhdCBpc1xuXHQvLyBndWFyYW50ZWVkIHRvIG5vdCBjb250YWluIGFueSBwYXJ0aWFsIG11bHRpLWJ5dGUgY2hhcmFjdGVycy4gQW55IHBhcnRpYWxcblx0Ly8gY2hhcmFjdGVyIGZvdW5kIGF0IHRoZSBlbmQgb2YgdGhlIGJ1ZmZlciBpcyBidWZmZXJlZCB1cCwgYW5kIHdpbGwgYmVcblx0Ly8gcmV0dXJuZWQgd2hlbiBjYWxsaW5nIHdyaXRlIGFnYWluIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcy5cblx0Ly9cblx0Ly8gTm90ZTogQ29udmVydGluZyBhIEJ1ZmZlciBjb250YWluaW5nIGFuIG9ycGhhbiBzdXJyb2dhdGUgdG8gYSBTdHJpbmdcblx0Ly8gY3VycmVudGx5IHdvcmtzLCBidXQgY29udmVydGluZyBhIFN0cmluZyB0byBhIEJ1ZmZlciAodmlhIGBuZXcgQnVmZmVyYCwgb3Jcblx0Ly8gQnVmZmVyI3dyaXRlKSB3aWxsIHJlcGxhY2UgaW5jb21wbGV0ZSBzdXJyb2dhdGVzIHdpdGggdGhlIHVuaWNvZGVcblx0Ly8gcmVwbGFjZW1lbnQgY2hhcmFjdGVyLiBTZWUgaHR0cHM6Ly9jb2RlcmV2aWV3LmNocm9taXVtLm9yZy8xMjExNzMwMDkvIC5cblx0U3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHtcblx0ICB2YXIgY2hhclN0ciA9ICcnO1xuXHQgIC8vIGlmIG91ciBsYXN0IHdyaXRlIGVuZGVkIHdpdGggYW4gaW5jb21wbGV0ZSBtdWx0aWJ5dGUgY2hhcmFjdGVyXG5cdCAgd2hpbGUgKHRoaXMuY2hhckxlbmd0aCkge1xuXHQgICAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IHJlbWFpbmluZyBieXRlcyB0aGlzIGJ1ZmZlciBoYXMgdG8gb2ZmZXIgZm9yIHRoaXMgY2hhclxuXHQgICAgdmFyIGF2YWlsYWJsZSA9IChidWZmZXIubGVuZ3RoID49IHRoaXMuY2hhckxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkKSA/XG5cdCAgICAgICAgdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQgOlxuXHQgICAgICAgIGJ1ZmZlci5sZW5ndGg7XG5cdFxuXHQgICAgLy8gYWRkIHRoZSBuZXcgYnl0ZXMgdG8gdGhlIGNoYXIgYnVmZmVyXG5cdCAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHRoaXMuY2hhclJlY2VpdmVkLCAwLCBhdmFpbGFibGUpO1xuXHQgICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gYXZhaWxhYmxlO1xuXHRcblx0ICAgIGlmICh0aGlzLmNoYXJSZWNlaXZlZCA8IHRoaXMuY2hhckxlbmd0aCkge1xuXHQgICAgICAvLyBzdGlsbCBub3QgZW5vdWdoIGNoYXJzIGluIHRoaXMgYnVmZmVyPyB3YWl0IGZvciBtb3JlIC4uLlxuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcmVtb3ZlIGJ5dGVzIGJlbG9uZ2luZyB0byB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZnJvbSB0aGUgYnVmZmVyXG5cdCAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoYXZhaWxhYmxlLCBidWZmZXIubGVuZ3RoKTtcblx0XG5cdCAgICAvLyBnZXQgdGhlIGNoYXJhY3RlciB0aGF0IHdhcyBzcGxpdFxuXHQgICAgY2hhclN0ciA9IHRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLCB0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xuXHRcblx0ICAgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXJcblx0ICAgIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChjaGFyU3RyLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHtcblx0ICAgICAgdGhpcy5jaGFyTGVuZ3RoICs9IHRoaXMuc3Vycm9nYXRlU2l6ZTtcblx0ICAgICAgY2hhclN0ciA9ICcnO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIHRoaXMuY2hhclJlY2VpdmVkID0gdGhpcy5jaGFyTGVuZ3RoID0gMDtcblx0XG5cdCAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSBieXRlcyBpbiB0aGlzIGJ1ZmZlciwganVzdCBlbWl0IG91ciBjaGFyXG5cdCAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICByZXR1cm4gY2hhclN0cjtcblx0ICAgIH1cblx0ICAgIGJyZWFrO1xuXHQgIH1cblx0XG5cdCAgLy8gZGV0ZXJtaW5lIGFuZCBzZXQgY2hhckxlbmd0aCAvIGNoYXJSZWNlaXZlZFxuXHQgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKTtcblx0XG5cdCAgdmFyIGVuZCA9IGJ1ZmZlci5sZW5ndGg7XG5cdCAgaWYgKHRoaXMuY2hhckxlbmd0aCkge1xuXHQgICAgLy8gYnVmZmVyIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlciBieXRlcyB3ZSBnb3Rcblx0ICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgYnVmZmVyLmxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkLCBlbmQpO1xuXHQgICAgZW5kIC09IHRoaXMuY2hhclJlY2VpdmVkO1xuXHQgIH1cblx0XG5cdCAgY2hhclN0ciArPSBidWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgZW5kKTtcblx0XG5cdCAgdmFyIGVuZCA9IGNoYXJTdHIubGVuZ3RoIC0gMTtcblx0ICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoZW5kKTtcblx0ICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyXG5cdCAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHtcblx0ICAgIHZhciBzaXplID0gdGhpcy5zdXJyb2dhdGVTaXplO1xuXHQgICAgdGhpcy5jaGFyTGVuZ3RoICs9IHNpemU7XG5cdCAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBzaXplO1xuXHQgICAgdGhpcy5jaGFyQnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCBzaXplLCAwLCBzaXplKTtcblx0ICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgMCwgc2l6ZSk7XG5cdCAgICByZXR1cm4gY2hhclN0ci5zdWJzdHJpbmcoMCwgZW5kKTtcblx0ICB9XG5cdFxuXHQgIC8vIG9yIGp1c3QgZW1pdCB0aGUgY2hhclN0clxuXHQgIHJldHVybiBjaGFyU3RyO1xuXHR9O1xuXHRcblx0Ly8gZGV0ZWN0SW5jb21wbGV0ZUNoYXIgZGV0ZXJtaW5lcyBpZiB0aGVyZSBpcyBhbiBpbmNvbXBsZXRlIFVURi04IGNoYXJhY3RlciBhdFxuXHQvLyB0aGUgZW5kIG9mIHRoZSBnaXZlbiBidWZmZXIuIElmIHNvLCBpdCBzZXRzIHRoaXMuY2hhckxlbmd0aCB0byB0aGUgYnl0ZVxuXHQvLyBsZW5ndGggdGhhdCBjaGFyYWN0ZXIsIGFuZCBzZXRzIHRoaXMuY2hhclJlY2VpdmVkIHRvIHRoZSBudW1iZXIgb2YgYnl0ZXNcblx0Ly8gdGhhdCBhcmUgYXZhaWxhYmxlIGZvciB0aGlzIGNoYXJhY3Rlci5cblx0U3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBmdW5jdGlvbihidWZmZXIpIHtcblx0ICAvLyBkZXRlcm1pbmUgaG93IG1hbnkgYnl0ZXMgd2UgaGF2ZSB0byBjaGVjayBhdCB0aGUgZW5kIG9mIHRoaXMgYnVmZmVyXG5cdCAgdmFyIGkgPSAoYnVmZmVyLmxlbmd0aCA+PSAzKSA/IDMgOiBidWZmZXIubGVuZ3RoO1xuXHRcblx0ICAvLyBGaWd1cmUgb3V0IGlmIG9uZSBvZiB0aGUgbGFzdCBpIGJ5dGVzIG9mIG91ciBidWZmZXIgYW5ub3VuY2VzIGFuXG5cdCAgLy8gaW5jb21wbGV0ZSBjaGFyLlxuXHQgIGZvciAoOyBpID4gMDsgaS0tKSB7XG5cdCAgICB2YXIgYyA9IGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gaV07XG5cdFxuXHQgICAgLy8gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVRGLTgjRGVzY3JpcHRpb25cblx0XG5cdCAgICAvLyAxMTBYWFhYWFxuXHQgICAgaWYgKGkgPT0gMSAmJiBjID4+IDUgPT0gMHgwNikge1xuXHQgICAgICB0aGlzLmNoYXJMZW5ndGggPSAyO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0XG5cdCAgICAvLyAxMTEwWFhYWFxuXHQgICAgaWYgKGkgPD0gMiAmJiBjID4+IDQgPT0gMHgwRSkge1xuXHQgICAgICB0aGlzLmNoYXJMZW5ndGggPSAzO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0XG5cdCAgICAvLyAxMTExMFhYWFxuXHQgICAgaWYgKGkgPD0gMyAmJiBjID4+IDMgPT0gMHgxRSkge1xuXHQgICAgICB0aGlzLmNoYXJMZW5ndGggPSA0O1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdCAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBpO1xuXHR9O1xuXHRcblx0U3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oYnVmZmVyKSB7XG5cdCAgdmFyIHJlcyA9ICcnO1xuXHQgIGlmIChidWZmZXIgJiYgYnVmZmVyLmxlbmd0aClcblx0ICAgIHJlcyA9IHRoaXMud3JpdGUoYnVmZmVyKTtcblx0XG5cdCAgaWYgKHRoaXMuY2hhclJlY2VpdmVkKSB7XG5cdCAgICB2YXIgY3IgPSB0aGlzLmNoYXJSZWNlaXZlZDtcblx0ICAgIHZhciBidWYgPSB0aGlzLmNoYXJCdWZmZXI7XG5cdCAgICB2YXIgZW5jID0gdGhpcy5lbmNvZGluZztcblx0ICAgIHJlcyArPSBidWYuc2xpY2UoMCwgY3IpLnRvU3RyaW5nKGVuYyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcGFzc1Rocm91Z2hXcml0ZShidWZmZXIpIHtcblx0ICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikge1xuXHQgIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDI7XG5cdCAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAyIDogMDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7XG5cdCAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMztcblx0ICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDMgOiAwO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0XG5cdC8vIGEgdHJhbnNmb3JtIHN0cmVhbSBpcyBhIHJlYWRhYmxlL3dyaXRhYmxlIHN0cmVhbSB3aGVyZSB5b3UgZG9cblx0Ly8gc29tZXRoaW5nIHdpdGggdGhlIGRhdGEuICBTb21ldGltZXMgaXQncyBjYWxsZWQgYSBcImZpbHRlclwiLFxuXHQvLyBidXQgdGhhdCdzIG5vdCBhIGdyZWF0IG5hbWUgZm9yIGl0LCBzaW5jZSB0aGF0IGltcGxpZXMgYSB0aGluZyB3aGVyZVxuXHQvLyBzb21lIGJpdHMgcGFzcyB0aHJvdWdoLCBhbmQgb3RoZXJzIGFyZSBzaW1wbHkgaWdub3JlZC4gIChUaGF0IHdvdWxkXG5cdC8vIGJlIGEgdmFsaWQgZXhhbXBsZSBvZiBhIHRyYW5zZm9ybSwgb2YgY291cnNlLilcblx0Ly9cblx0Ly8gV2hpbGUgdGhlIG91dHB1dCBpcyBjYXVzYWxseSByZWxhdGVkIHRvIHRoZSBpbnB1dCwgaXQncyBub3QgYVxuXHQvLyBuZWNlc3NhcmlseSBzeW1tZXRyaWMgb3Igc3luY2hyb25vdXMgdHJhbnNmb3JtYXRpb24uICBGb3IgZXhhbXBsZSxcblx0Ly8gYSB6bGliIHN0cmVhbSBtaWdodCB0YWtlIG11bHRpcGxlIHBsYWluLXRleHQgd3JpdGVzKCksIGFuZCB0aGVuXG5cdC8vIGVtaXQgYSBzaW5nbGUgY29tcHJlc3NlZCBjaHVuayBzb21lIHRpbWUgaW4gdGhlIGZ1dHVyZS5cblx0Ly9cblx0Ly8gSGVyZSdzIGhvdyB0aGlzIHdvcmtzOlxuXHQvL1xuXHQvLyBUaGUgVHJhbnNmb3JtIHN0cmVhbSBoYXMgYWxsIHRoZSBhc3BlY3RzIG9mIHRoZSByZWFkYWJsZSBhbmQgd3JpdGFibGVcblx0Ly8gc3RyZWFtIGNsYXNzZXMuICBXaGVuIHlvdSB3cml0ZShjaHVuayksIHRoYXQgY2FsbHMgX3dyaXRlKGNodW5rLGNiKVxuXHQvLyBpbnRlcm5hbGx5LCBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGVyZSdzIGEgbG90IG9mIHBlbmRpbmcgd3JpdGVzXG5cdC8vIGJ1ZmZlcmVkIHVwLiAgV2hlbiB5b3UgY2FsbCByZWFkKCksIHRoYXQgY2FsbHMgX3JlYWQobikgdW50aWxcblx0Ly8gdGhlcmUncyBlbm91Z2ggcGVuZGluZyByZWFkYWJsZSBkYXRhIGJ1ZmZlcmVkIHVwLlxuXHQvL1xuXHQvLyBJbiBhIHRyYW5zZm9ybSBzdHJlYW0sIHRoZSB3cml0dGVuIGRhdGEgaXMgcGxhY2VkIGluIGEgYnVmZmVyLiAgV2hlblxuXHQvLyBfcmVhZChuKSBpcyBjYWxsZWQsIGl0IHRyYW5zZm9ybXMgdGhlIHF1ZXVlZCB1cCBkYXRhLCBjYWxsaW5nIHRoZVxuXHQvLyBidWZmZXJlZCBfd3JpdGUgY2IncyBhcyBpdCBjb25zdW1lcyBjaHVua3MuICBJZiBjb25zdW1pbmcgYSBzaW5nbGVcblx0Ly8gd3JpdHRlbiBjaHVuayB3b3VsZCByZXN1bHQgaW4gbXVsdGlwbGUgb3V0cHV0IGNodW5rcywgdGhlbiB0aGUgZmlyc3Rcblx0Ly8gb3V0cHV0dGVkIGJpdCBjYWxscyB0aGUgcmVhZGNiLCBhbmQgc3Vic2VxdWVudCBjaHVua3MganVzdCBnbyBpbnRvXG5cdC8vIHRoZSByZWFkIGJ1ZmZlciwgYW5kIHdpbGwgY2F1c2UgaXQgdG8gZW1pdCAncmVhZGFibGUnIGlmIG5lY2Vzc2FyeS5cblx0Ly9cblx0Ly8gVGhpcyB3YXksIGJhY2stcHJlc3N1cmUgaXMgYWN0dWFsbHkgZGV0ZXJtaW5lZCBieSB0aGUgcmVhZGluZyBzaWRlLFxuXHQvLyBzaW5jZSBfcmVhZCBoYXMgdG8gYmUgY2FsbGVkIHRvIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgY2h1bmsuICBIb3dldmVyLFxuXHQvLyBhIHBhdGhvbG9naWNhbCBpbmZsYXRlIHR5cGUgb2YgdHJhbnNmb3JtIGNhbiBjYXVzZSBleGNlc3NpdmUgYnVmZmVyaW5nXG5cdC8vIGhlcmUuICBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIHN0cmVhbSB3aGVyZSBldmVyeSBieXRlIG9mIGlucHV0IGlzXG5cdC8vIGludGVycHJldGVkIGFzIGFuIGludGVnZXIgZnJvbSAwLTI1NSwgYW5kIHRoZW4gcmVzdWx0cyBpbiB0aGF0IG1hbnlcblx0Ly8gYnl0ZXMgb2Ygb3V0cHV0LiAgV3JpdGluZyB0aGUgNCBieXRlcyB7ZmYsZmYsZmYsZmZ9IHdvdWxkIHJlc3VsdCBpblxuXHQvLyAxa2Igb2YgZGF0YSBiZWluZyBvdXRwdXQuICBJbiB0aGlzIGNhc2UsIHlvdSBjb3VsZCB3cml0ZSBhIHZlcnkgc21hbGxcblx0Ly8gYW1vdW50IG9mIGlucHV0LCBhbmQgZW5kIHVwIHdpdGggYSB2ZXJ5IGxhcmdlIGFtb3VudCBvZiBvdXRwdXQuICBJblxuXHQvLyBzdWNoIGEgcGF0aG9sb2dpY2FsIGluZmxhdGluZyBtZWNoYW5pc20sIHRoZXJlJ2QgYmUgbm8gd2F5IHRvIHRlbGxcblx0Ly8gdGhlIHN5c3RlbSB0byBzdG9wIGRvaW5nIHRoZSB0cmFuc2Zvcm0uICBBIHNpbmdsZSA0TUIgd3JpdGUgY291bGRcblx0Ly8gY2F1c2UgdGhlIHN5c3RlbSB0byBydW4gb3V0IG9mIG1lbW9yeS5cblx0Ly9cblx0Ly8gSG93ZXZlciwgZXZlbiBpbiBzdWNoIGEgcGF0aG9sb2dpY2FsIGNhc2UsIG9ubHkgYSBzaW5nbGUgd3JpdHRlbiBjaHVua1xuXHQvLyB3b3VsZCBiZSBjb25zdW1lZCwgYW5kIHRoZW4gdGhlIHJlc3Qgd291bGQgd2FpdCAodW4tdHJhbnNmb3JtZWQpIHVudGlsXG5cdC8vIHRoZSByZXN1bHRzIG9mIHRoZSBwcmV2aW91cyB0cmFuc2Zvcm1lZCBjaHVuayB3ZXJlIGNvbnN1bWVkLlxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cdFxuXHR2YXIgRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR1dGlsLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0dXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cdFxuXHRcblx0ZnVuY3Rpb24gVHJhbnNmb3JtU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG5cdCAgdGhpcy5hZnRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uKGVyLCBkYXRhKSB7XG5cdCAgICByZXR1cm4gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSk7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5uZWVkVHJhbnNmb3JtID0gZmFsc2U7XG5cdCAgdGhpcy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblx0ICB0aGlzLndyaXRlY2IgPSBudWxsO1xuXHQgIHRoaXMud3JpdGVjaHVuayA9IG51bGw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpIHtcblx0ICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlO1xuXHQgIHRzLnRyYW5zZm9ybWluZyA9IGZhbHNlO1xuXHRcblx0ICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXHRcblx0ICBpZiAoIWNiKVxuXHQgICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3MnKSk7XG5cdFxuXHQgIHRzLndyaXRlY2h1bmsgPSBudWxsO1xuXHQgIHRzLndyaXRlY2IgPSBudWxsO1xuXHRcblx0ICBpZiAoIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoZGF0YSkpXG5cdCAgICBzdHJlYW0ucHVzaChkYXRhKTtcblx0XG5cdCAgaWYgKGNiKVxuXHQgICAgY2IoZXIpO1xuXHRcblx0ICB2YXIgcnMgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cdCAgcnMucmVhZGluZyA9IGZhbHNlO1xuXHQgIGlmIChycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykge1xuXHQgICAgc3RyZWFtLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuXHQgIH1cblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFRyYW5zZm9ybSkpXG5cdCAgICByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblx0XG5cdCAgRHVwbGV4LmNhbGwodGhpcywgb3B0aW9ucyk7XG5cdFxuXHQgIHRoaXMuX3RyYW5zZm9ybVN0YXRlID0gbmV3IFRyYW5zZm9ybVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXHRcblx0ICAvLyB3aGVuIHRoZSB3cml0YWJsZSBzaWRlIGZpbmlzaGVzLCB0aGVuIGZsdXNoIG91dCBhbnl0aGluZyByZW1haW5pbmcuXG5cdCAgdmFyIHN0cmVhbSA9IHRoaXM7XG5cdFxuXHQgIC8vIHN0YXJ0IG91dCBhc2tpbmcgZm9yIGEgcmVhZGFibGUgZXZlbnQgb25jZSBkYXRhIGlzIHRyYW5zZm9ybWVkLlxuXHQgIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblx0XG5cdCAgLy8gd2UgaGF2ZSBpbXBsZW1lbnRlZCB0aGUgX3JlYWQgbWV0aG9kLCBhbmQgZG9uZSB0aGUgb3RoZXIgdGhpbmdzXG5cdCAgLy8gdGhhdCBSZWFkYWJsZSB3YW50cyBiZWZvcmUgdGhlIGZpcnN0IF9yZWFkIGNhbGwsIHNvIHVuc2V0IHRoZVxuXHQgIC8vIHN5bmMgZ3VhcmQgZmxhZy5cblx0ICB0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmMgPSBmYWxzZTtcblx0XG5cdCAgdGhpcy5vbmNlKCdwcmVmaW5pc2gnLCBmdW5jdGlvbigpIHtcblx0ICAgIGlmICh1dGlsLmlzRnVuY3Rpb24odGhpcy5fZmx1c2gpKVxuXHQgICAgICB0aGlzLl9mbHVzaChmdW5jdGlvbihlcikge1xuXHQgICAgICAgIGRvbmUoc3RyZWFtLCBlcik7XG5cdCAgICAgIH0pO1xuXHQgICAgZWxzZVxuXHQgICAgICBkb25lKHN0cmVhbSk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdFRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZykge1xuXHQgIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcblx0ICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTtcblx0fTtcblx0XG5cdC8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIVxuXHQvLyBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uIGluIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG5cdC8vICdjaHVuaycgaXMgYW4gaW5wdXQgY2h1bmsuXG5cdC8vXG5cdC8vIENhbGwgYHB1c2gobmV3Q2h1bmspYCB0byBwYXNzIGFsb25nIHRyYW5zZm9ybWVkIG91dHB1dFxuXHQvLyB0byB0aGUgcmVhZGFibGUgc2lkZS4gIFlvdSBtYXkgY2FsbCAncHVzaCcgemVybyBvciBtb3JlIHRpbWVzLlxuXHQvL1xuXHQvLyBDYWxsIGBjYihlcnIpYCB3aGVuIHlvdSBhcmUgZG9uZSB3aXRoIHRoaXMgY2h1bmsuICBJZiB5b3UgcGFzc1xuXHQvLyBhbiBlcnJvciwgdGhlbiB0aGF0J2xsIHB1dCB0aGUgaHVydCBvbiB0aGUgd2hvbGUgb3BlcmF0aW9uLiAgSWYgeW91XG5cdC8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuXG5cdFRyYW5zZm9ybS5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpO1xuXHR9O1xuXHRcblx0VHJhbnNmb3JtLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG5cdCAgdHMud3JpdGVjYiA9IGNiO1xuXHQgIHRzLndyaXRlY2h1bmsgPSBjaHVuaztcblx0ICB0cy53cml0ZWVuY29kaW5nID0gZW5jb2Rpbmc7XG5cdCAgaWYgKCF0cy50cmFuc2Zvcm1pbmcpIHtcblx0ICAgIHZhciBycyA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdCAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fFxuXHQgICAgICAgIHJzLm5lZWRSZWFkYWJsZSB8fFxuXHQgICAgICAgIHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspXG5cdCAgICAgIHRoaXMuX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gRG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgYXJncyBhcmUgaGVyZS5cblx0Ly8gX3RyYW5zZm9ybSBkb2VzIGFsbCB0aGUgd29yay5cblx0Ly8gVGhhdCB3ZSBnb3QgaGVyZSBtZWFucyB0aGF0IHRoZSByZWFkYWJsZSBzaWRlIHdhbnRzIG1vcmUgZGF0YS5cblx0VHJhbnNmb3JtLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcblx0ICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcblx0XG5cdCAgaWYgKCF1dGlsLmlzTnVsbCh0cy53cml0ZWNodW5rKSAmJiB0cy53cml0ZWNiICYmICF0cy50cmFuc2Zvcm1pbmcpIHtcblx0ICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7XG5cdCAgICB0aGlzLl90cmFuc2Zvcm0odHMud3JpdGVjaHVuaywgdHMud3JpdGVlbmNvZGluZywgdHMuYWZ0ZXJUcmFuc2Zvcm0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluXG5cdCAgICAvLyB3aWxsIGdldCBwcm9jZXNzZWQsIG5vdyB0aGF0IHdlJ3ZlIGFza2VkIGZvciBpdC5cblx0ICAgIHRzLm5lZWRUcmFuc2Zvcm0gPSB0cnVlO1xuXHQgIH1cblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiBkb25lKHN0cmVhbSwgZXIpIHtcblx0ICBpZiAoZXIpXG5cdCAgICByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXHRcblx0ICAvLyBpZiB0aGVyZSdzIG5vdGhpbmcgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhlbiB0aGF0IG1lYW5zXG5cdCAgLy8gdGhhdCBub3RoaW5nIG1vcmUgd2lsbCBldmVyIGJlIHByb3ZpZGVkXG5cdCAgdmFyIHdzID0gc3RyZWFtLl93cml0YWJsZVN0YXRlO1xuXHQgIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG5cdFxuXHQgIGlmICh3cy5sZW5ndGgpXG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpO1xuXHRcblx0ICBpZiAodHMudHJhbnNmb3JtaW5nKVxuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nJyk7XG5cdFxuXHQgIHJldHVybiBzdHJlYW0ucHVzaChudWxsKTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdC8vIGEgcGFzc3Rocm91Z2ggc3RyZWFtLlxuXHQvLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS5cblx0Ly8gRXZlcnkgd3JpdHRlbiBjaHVuayBnZXRzIG91dHB1dCBhcy1pcy5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7XG5cdFxuXHR2YXIgVHJhbnNmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR1dGlsLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0dXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTtcblx0XG5cdGZ1bmN0aW9uIFBhc3NUaHJvdWdoKG9wdGlvbnMpIHtcblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKVxuXHQgICAgcmV0dXJuIG5ldyBQYXNzVGhyb3VnaChvcHRpb25zKTtcblx0XG5cdCAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG5cdH1cblx0XG5cdFBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIGNiKG51bGwsIGNodW5rKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMylcblxuXG4vKioqLyB9LFxuLyogMzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMilcblxuXG4vKioqLyB9LFxuLyogMzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSlcblxuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNilcblxuXG4vKioqLyB9LFxuLyogNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7Lypcblx0ICogZXh0c3ByaW50Zi5qczogZXh0ZW5kZWQgUE9TSVgtc3R5bGUgc3ByaW50ZlxuXHQgKi9cblx0XG5cdHZhciBtb2RfYXNzZXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciBtb2RfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0Lypcblx0ICogUHVibGljIGludGVyZmFjZVxuXHQgKi9cblx0ZXhwb3J0cy5zcHJpbnRmID0ganNTcHJpbnRmO1xuXHRleHBvcnRzLnByaW50ZiA9IGpzUHJpbnRmO1xuXHRleHBvcnRzLmZwcmludGYgPSBqc0ZwcmludGY7XG5cdFxuXHQvKlxuXHQgKiBTdHJpcHBlZCBkb3duIHZlcnNpb24gb2Ygc1tuXXByaW50ZigzYykuICBXZSBtYWtlIGEgYmVzdCBlZmZvcnQgdG8gdGhyb3cgYW5cblx0ICogZXhjZXB0aW9uIHdoZW4gZ2l2ZW4gYSBmb3JtYXQgc3RyaW5nIHdlIGRvbid0IHVuZGVyc3RhbmQsIHJhdGhlciB0aGFuXG5cdCAqIGlnbm9yaW5nIGl0LCBzbyB0aGF0IHdlIHdvbid0IGJyZWFrIGV4aXN0aW5nIHByb2dyYW1zIGlmL3doZW4gd2UgZ28gaW1wbGVtZW50XG5cdCAqIHRoZSByZXN0IG9mIHRoaXMuXG5cdCAqXG5cdCAqIFRoaXMgaW1wbGVtZW50YXRpb24gY3VycmVudGx5IHN1cHBvcnRzIHNwZWNpZnlpbmdcblx0ICpcdC0gZmllbGQgYWxpZ25tZW50ICgnLScgZmxhZyksXG5cdCAqIFx0LSB6ZXJvLXBhZCAoJzAnIGZsYWcpXG5cdCAqXHQtIGFsd2F5cyBzaG93IG51bWVyaWMgc2lnbiAoJysnIGZsYWcpLFxuXHQgKlx0LSBmaWVsZCB3aWR0aFxuXHQgKlx0LSBjb252ZXJzaW9ucyBmb3Igc3RyaW5ncywgZGVjaW1hbCBpbnRlZ2VycywgYW5kIGZsb2F0cyAobnVtYmVycykuXG5cdCAqXHQtIGFyZ3VtZW50IHNpemUgc3BlY2lmaWVycy4gIFRoZXNlIGFyZSBhbGwgYWNjZXB0ZWQgYnV0IGlnbm9yZWQsIHNpbmNlXG5cdCAqXHQgIEphdmFzY3JpcHQgaGFzIG5vIG5vdGlvbiBvZiB0aGUgcGh5c2ljYWwgc2l6ZSBvZiBhbiBhcmd1bWVudC5cblx0ICpcblx0ICogRXZlcnl0aGluZyBlbHNlIGlzIGN1cnJlbnRseSB1bnN1cHBvcnRlZCwgbW9zdCBub3RhYmx5IHByZWNpc2lvbiwgdW5zaWduZWRcblx0ICogbnVtYmVycywgbm9uLWRlY2ltYWwgbnVtYmVycywgYW5kIGNoYXJhY3RlcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBqc1NwcmludGYoZm10KVxuXHR7XG5cdFx0dmFyIHJlZ2V4ID0gW1xuXHRcdCAgICAnKFteJV0qKScsXHRcdFx0XHQvKiBub3JtYWwgdGV4dCAqL1xuXHRcdCAgICAnJScsXHRcdFx0XHQvKiBzdGFydCBvZiBmb3JtYXQgKi9cblx0XHQgICAgJyhbXFwnXFxcXC0rICMwXSo/KScsXHRcdFx0LyogZmxhZ3MgKG9wdGlvbmFsKSAqL1xuXHRcdCAgICAnKFsxLTldXFxcXGQqKT8nLFx0XHRcdC8qIHdpZHRoIChvcHRpb25hbCkgKi9cblx0XHQgICAgJyhcXFxcLihbMS05XVxcXFxkKikpPycsXHRcdC8qIHByZWNpc2lvbiAob3B0aW9uYWwpICovXG5cdFx0ICAgICdbbGhqenRMXSo/JyxcdFx0XHQvKiBsZW5ndGggbW9kcyAoaWdub3JlZCkgKi9cblx0XHQgICAgJyhbZGlvdXhYZkZlRWdHYUFjQ3NTcCVqcl0pJ1x0LyogY29udmVyc2lvbiAqL1xuXHRcdF0uam9pbignJyk7XG5cdFxuXHRcdHZhciByZSA9IG5ldyBSZWdFeHAocmVnZXgpO1xuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0XHR2YXIgZmxhZ3MsIHdpZHRoLCBwcmVjaXNpb24sIGNvbnZlcnNpb247XG5cdFx0dmFyIGxlZnQsIHBhZCwgc2lnbiwgYXJnLCBtYXRjaDtcblx0XHR2YXIgcmV0ID0gJyc7XG5cdFx0dmFyIGFyZ24gPSAxO1xuXHRcblx0XHRtb2RfYXNzZXJ0LmVxdWFsKCdzdHJpbmcnLCB0eXBlb2YgKGZtdCkpO1xuXHRcblx0XHR3aGlsZSAoKG1hdGNoID0gcmUuZXhlYyhmbXQpKSAhPT0gbnVsbCkge1xuXHRcdFx0cmV0ICs9IG1hdGNoWzFdO1xuXHRcdFx0Zm10ID0gZm10LnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuXHRcblx0XHRcdGZsYWdzID0gbWF0Y2hbMl0gfHwgJyc7XG5cdFx0XHR3aWR0aCA9IG1hdGNoWzNdIHx8IDA7XG5cdFx0XHRwcmVjaXNpb24gPSBtYXRjaFs0XSB8fCAnJztcblx0XHRcdGNvbnZlcnNpb24gPSBtYXRjaFs2XTtcblx0XHRcdGxlZnQgPSBmYWxzZTtcblx0XHRcdHNpZ24gPSBmYWxzZTtcblx0XHRcdHBhZCA9ICcgJztcblx0XG5cdFx0XHRpZiAoY29udmVyc2lvbiA9PSAnJScpIHtcblx0XHRcdFx0cmV0ICs9ICclJztcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKGFyZ3MubGVuZ3RoID09PSAwKVxuXHRcdFx0XHR0aHJvdyAobmV3IEVycm9yKCd0b28gZmV3IGFyZ3MgdG8gc3ByaW50ZicpKTtcblx0XG5cdFx0XHRhcmcgPSBhcmdzLnNoaWZ0KCk7XG5cdFx0XHRhcmduKys7XG5cdFxuXHRcdFx0aWYgKGZsYWdzLm1hdGNoKC9bXFwnICNdLykpXG5cdFx0XHRcdHRocm93IChuZXcgRXJyb3IoXG5cdFx0XHRcdCAgICAndW5zdXBwb3J0ZWQgZmxhZ3M6ICcgKyBmbGFncykpO1xuXHRcblx0XHRcdGlmIChwcmVjaXNpb24ubGVuZ3RoID4gMClcblx0XHRcdFx0dGhyb3cgKG5ldyBFcnJvcihcblx0XHRcdFx0ICAgICdub24temVybyBwcmVjaXNpb24gbm90IHN1cHBvcnRlZCcpKTtcblx0XG5cdFx0XHRpZiAoZmxhZ3MubWF0Y2goLy0vKSlcblx0XHRcdFx0bGVmdCA9IHRydWU7XG5cdFxuXHRcdFx0aWYgKGZsYWdzLm1hdGNoKC8wLykpXG5cdFx0XHRcdHBhZCA9ICcwJztcblx0XG5cdFx0XHRpZiAoZmxhZ3MubWF0Y2goL1xcKy8pKVxuXHRcdFx0XHRzaWduID0gdHJ1ZTtcblx0XG5cdFx0XHRzd2l0Y2ggKGNvbnZlcnNpb24pIHtcblx0XHRcdGNhc2UgJ3MnOlxuXHRcdFx0XHRpZiAoYXJnID09PSB1bmRlZmluZWQgfHwgYXJnID09PSBudWxsKVxuXHRcdFx0XHRcdHRocm93IChuZXcgRXJyb3IoJ2FyZ3VtZW50ICcgKyBhcmduICtcblx0XHRcdFx0XHQgICAgJzogYXR0ZW1wdGVkIHRvIHByaW50IHVuZGVmaW5lZCBvciBudWxsICcgK1xuXHRcdFx0XHRcdCAgICAnYXMgYSBzdHJpbmcnKSk7XG5cdFx0XHRcdHJldCArPSBkb1BhZChwYWQsIHdpZHRoLCBsZWZ0LCBhcmcudG9TdHJpbmcoKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcblx0XHRcdGNhc2UgJ2QnOlxuXHRcdFx0XHRhcmcgPSBNYXRoLmZsb29yKGFyZyk7XG5cdFx0XHRcdC8qanNsOmZhbGx0aHJ1Ki9cblx0XHRcdGNhc2UgJ2YnOlxuXHRcdFx0XHRzaWduID0gc2lnbiAmJiBhcmcgPiAwID8gJysnIDogJyc7XG5cdFx0XHRcdHJldCArPSBzaWduICsgZG9QYWQocGFkLCB3aWR0aCwgbGVmdCxcblx0XHRcdFx0ICAgIGFyZy50b1N0cmluZygpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFxuXHRcdFx0Y2FzZSAneCc6XG5cdFx0XHRcdHJldCArPSBkb1BhZChwYWQsIHdpZHRoLCBsZWZ0LCBhcmcudG9TdHJpbmcoMTYpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFxuXHRcdFx0Y2FzZSAnaic6IC8qIG5vbi1zdGFuZGFyZCAqL1xuXHRcdFx0XHRpZiAod2lkdGggPT09IDApXG5cdFx0XHRcdFx0d2lkdGggPSAxMDtcblx0XHRcdFx0cmV0ICs9IG1vZF91dGlsLmluc3BlY3QoYXJnLCBmYWxzZSwgd2lkdGgpO1xuXHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRjYXNlICdyJzogLyogbm9uLXN0YW5kYXJkICovXG5cdFx0XHRcdHJldCArPSBkdW1wRXhjZXB0aW9uKGFyZyk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IChuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIGNvbnZlcnNpb246ICcgK1xuXHRcdFx0XHQgICAgY29udmVyc2lvbikpO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0ICs9IGZtdDtcblx0XHRyZXR1cm4gKHJldCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGpzUHJpbnRmKCkge1xuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XHRhcmdzLnVuc2hpZnQocHJvY2Vzcy5zdGRvdXQpO1xuXHRcdGpzRnByaW50Zi5hcHBseShudWxsLCBhcmdzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24ganNGcHJpbnRmKHN0cmVhbSkge1xuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0XHRyZXR1cm4gKHN0cmVhbS53cml0ZShqc1NwcmludGYuYXBwbHkodGhpcywgYXJncykpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZG9QYWQoY2hyLCB3aWR0aCwgbGVmdCwgc3RyKVxuXHR7XG5cdFx0dmFyIHJldCA9IHN0cjtcblx0XG5cdFx0d2hpbGUgKHJldC5sZW5ndGggPCB3aWR0aCkge1xuXHRcdFx0aWYgKGxlZnQpXG5cdFx0XHRcdHJldCArPSBjaHI7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHJldCA9IGNociArIHJldDtcblx0XHR9XG5cdFxuXHRcdHJldHVybiAocmV0KTtcblx0fVxuXHRcblx0Lypcblx0ICogVGhpcyBmdW5jdGlvbiBkdW1wcyBsb25nIHN0YWNrIHRyYWNlcyBmb3IgZXhjZXB0aW9ucyBoYXZpbmcgYSBjYXVzZSgpIG1ldGhvZC5cblx0ICogU2VlIG5vZGUtdmVycm9yIGZvciBhbiBleGFtcGxlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZHVtcEV4Y2VwdGlvbihleClcblx0e1xuXHRcdHZhciByZXQ7XG5cdFxuXHRcdGlmICghKGV4IGluc3RhbmNlb2YgRXJyb3IpKVxuXHRcdFx0dGhyb3cgKG5ldyBFcnJvcihqc1NwcmludGYoJ2ludmFsaWQgdHlwZSBmb3IgJSVyOiAlaicsIGV4KSkpO1xuXHRcblx0XHQvKiBOb3RlIHRoYXQgVjggcHJlcGVuZHMgXCJleC5zdGFja1wiIHdpdGggZXgudG9TdHJpbmcoKS4gKi9cblx0XHRyZXQgPSAnRVhDRVBUSU9OOiAnICsgZXguY29uc3RydWN0b3IubmFtZSArICc6ICcgKyBleC5zdGFjaztcblx0XG5cdFx0aWYgKGV4LmNhdXNlICYmIHR5cGVvZiAoZXguY2F1c2UpID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHR2YXIgY2V4ID0gZXguY2F1c2UoKTtcblx0XHRcdGlmIChjZXgpIHtcblx0XHRcdFx0cmV0ICs9ICdcXG5DYXVzZWQgYnk6ICcgKyBkdW1wRXhjZXB0aW9uKGNleCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKHJldCk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQvLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcblx0Ly8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuXG5cdFxuXHRmdW5jdGlvbiBpc0FycmF5KGFyZykge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KSB7XG5cdCAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fVxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cdFxuXHRmdW5jdGlvbiBpc051bGwoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0ZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXHRcblx0ZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xuXHR9XG5cdGV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblx0XG5cdGZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcblx0fVxuXHRleHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cdFxuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG5cdH1cblx0ZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcblx0fVxuXHRleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblx0XG5cdGZ1bmN0aW9uIGlzRGF0ZShkKSB7XG5cdCAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG5cdH1cblx0ZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cdFxuXHRmdW5jdGlvbiBpc0Vycm9yKGUpIHtcblx0ICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG5cdH1cblx0ZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblx0XG5cdGZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IG51bGwgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xuXHR9XG5cdGV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblx0XG5cdGV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTQpLkJ1ZmZlcikpXG5cbi8qKiovIH0sXG4vKiA0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBDaXJjdWxhckRlcGVuZGVuY3lFcnJvciA9IGZ1bmN0aW9uIChfRGlzbEVycm9yKSB7XG5cdCAgX2luaGVyaXRzKENpcmN1bGFyRGVwZW5kZW5jeUVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDaXJjdWxhckRlcGVuZGVuY3lFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKENpcmN1bGFyRGVwZW5kZW5jeUVycm9yLCBudWxsLCBbe1xuXHQgICAga2V5OiAnY3JlYXRlRXJyb3InLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2VydmljZXNcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q2lyY3VsYXJEZXBlbmRlbmN5RXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihzZXJ2aWNlcykge1xuXHQgICAgICBpZiAoIShBcnJheS5pc0FycmF5KHNlcnZpY2VzKSAmJiBzZXJ2aWNlcy5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZyc7XG5cdCAgICAgIH0pKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwic2VydmljZXNcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheTxzdHJpbmc+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChzZXJ2aWNlcykpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcGF0aCA9IFtdLmNvbmNhdChzZXJ2aWNlcykucmV2ZXJzZSgpLmpvaW4oJyA8LSAnKTtcblx0XG5cdCAgICAgIHJldHVybiBuZXcgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3Ioe1xuXHQgICAgICAgIHNlcnZpY2VzOiBzZXJ2aWNlc1xuXHQgICAgICB9LCAnQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDogJXMnLCBwYXRoKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKGlkZW50aWZpZXIpIHtcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yKHtcblx0ICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG5cdCAgICAgIH0sICdGYWN0b3J5IG1ldGhvZCBmb3IgaWRlbnRpZmllciBcIiVzXCIgcmV0dXJucyBub3RoaW5nJywgaWRlbnRpZmllcik7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzbEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIE1ldGhvZERvZXNOb3RFeGlzdEVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBNZXRob2REb2VzTm90RXhpc3RFcnJvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZXRob2REb2VzTm90RXhpc3RFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNZXRob2REb2VzTm90RXhpc3RFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1ldGhvZERvZXNOb3RFeGlzdEVycm9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWVcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7TWV0aG9kRG9lc05vdEV4aXN0RXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXRob2ROYW1lKSB7XG5cdCAgICAgIGlmICghKHR5cGVvZiBtZXRob2ROYW1lID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcIm1ldGhvZE5hbWVcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KG1ldGhvZE5hbWUpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBNZXRob2REb2VzTm90RXhpc3RFcnJvcih7XG5cdCAgICAgICAgbWV0aG9kTmFtZTogbWV0aG9kTmFtZVxuXHQgICAgICB9LCAnTWV0aG9kIFwiJXNcIiBkb2VzIG5vdCBleGlzdCcsIG1ldGhvZE5hbWUpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIE1ldGhvZERvZXNOb3RFeGlzdEVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTWV0aG9kRG9lc05vdEV4aXN0RXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3Ioe1xuXHQgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcblx0ICAgICAgfSwgJ1NlcnZpY2UgZGVmaW5pdGlvbiBmb3IgXCIlc1wiIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2UsIHJlZnVzaW5nIHRvIG1vZGlmeSBpdCcsIGlkZW50aWZpZXIpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQ3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzbEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVbmRlZmluZWRQYXJhbWV0ZXJFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVuZGVmaW5lZFBhcmFtZXRlckVycm9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkUGFyYW1ldGVyRXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcih7XG5cdCAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuXHQgICAgICB9LCAnVW5kZWZpbmVkIHBhcmFtZXRlciBmb3IgaWRlbnRpZmllciBcIiVzXCInLCBpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoaWRlbnRpZmllcikge1xuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKHtcblx0ICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG5cdCAgICAgIH0sICdVbmRlZmluZWQgc2VydmljZSBkZWZpbml0aW9uIGFuZCBpbnN0YW5jZSBmb3IgaWRlbnRpZmllciBcIiVzXCInLCBpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKGlkZW50aWZpZXIpIHtcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3Ioe1xuXHQgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcblx0ICAgICAgfSwgJ1VuZGVmaW5lZCBzZXJ2aWNlIGRlZmluaXRpb24gZm9yIGlkZW50aWZpZXIgXCIlc1wiJywgaWRlbnRpZmllcik7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHthbnl9IGFyZ1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoYXJnKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcih7XG5cdCAgICAgICAgYXJnOiBhcmdcblx0ICAgICAgfSwgJ1Vuc3VwcG9ydGVkIGFyZyBvZiB0eXBlIFwiJXNcIicsIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGFyZykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgR2V0U2VydmljZUVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoR2V0U2VydmljZUVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gR2V0U2VydmljZUVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdldFNlcnZpY2VFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChHZXRTZXJ2aWNlRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihHZXRTZXJ2aWNlRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhHZXRTZXJ2aWNlRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqIEBwYXJhbSB7RXJyb3J9IGNhdXNlXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge01ldGhvZERvZXNOb3RFeGlzdEVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoaWRlbnRpZmllciwgY2F1c2UpIHtcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIShjYXVzZSBpbnN0YW5jZW9mIEVycm9yKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiY2F1c2VcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5FcnJvclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoY2F1c2UpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBHZXRTZXJ2aWNlRXJyb3Ioe1xuXHQgICAgICAgIGNhdXNlOiBjYXVzZSxcblx0ICAgICAgICBpbmZvOiB7XG5cdCAgICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAnRXJyb3IgZ2V0dGluZyBzZXJ2aWNlIFwiJXNcIicsIGlkZW50aWZpZXIpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEdldFNlcnZpY2VFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEdldFNlcnZpY2VFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBkaS1kZXYuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAwOTBhM2QxMDY3MTdlMmY1NjY2OCIsImltcG9ydCBDb250YWluZXIgZnJvbSAnLi9zcmMvY29udGFpbmVyJ1xuaW1wb3J0IENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uIGZyb20gJy4vc3JjL2NsYXNzLWNvbnN0cnVjdG9yLWRlZmluaXRpb24nXG5pbXBvcnQgRmFjdG9yeURlZmluaXRpb24gZnJvbSAnLi9zcmMvZmFjdG9yeS1kZWZpbml0aW9uJ1xuaW1wb3J0IFJlZmVyZW5jZSBmcm9tICcuL3NyYy9yZWZlcmVuY2UnXG5pbXBvcnQgUGFyYW1ldGVyIGZyb20gJy4vc3JjL3BhcmFtZXRlcidcbmltcG9ydCBNZXRob2RDYWxsIGZyb20gJy4vc3JjL21ldGhvZC1jYWxsJ1xuaW1wb3J0IGVycm9ycyBmcm9tICcuL3NyYy9lcnJvcnMnXG5cbmNvbnN0IGV4cG9ydHMgPSB7XG4gIENvbnRhaW5lcixcbiAgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24sXG4gIEZhY3RvcnlEZWZpbml0aW9uLFxuICBSZWZlcmVuY2UsXG4gIFBhcmFtZXRlcixcbiAgTWV0aG9kQ2FsbFxufVxuXG5mb3IgKGxldCBpIGluIGVycm9ycykge1xuICBpZiAoZXJyb3JzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgZXhwb3J0c1tpXSA9IGVycm9yc1tpXVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaW5kZXguanMiLCJpbXBvcnQgRGVmaW5pdGlvbiBmcm9tICcuL2RlZmluaXRpb24nXG5pbXBvcnQgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24gZnJvbSAnLi9jbGFzcy1jb25zdHJ1Y3Rvci1kZWZpbml0aW9uJ1xuaW1wb3J0IEZhY3RvcnlEZWZpbml0aW9uIGZyb20gJy4vZmFjdG9yeS1kZWZpbml0aW9uJ1xuaW1wb3J0IFJlZmVyZW5jZSBmcm9tICcuL3JlZmVyZW5jZSdcbmltcG9ydCBQYXJhbWV0ZXIgZnJvbSAnLi9wYXJhbWV0ZXInXG5pbXBvcnQgTWV0aG9kQ2FsbCBmcm9tICcuL21ldGhvZC1jYWxsJ1xuXG5pbXBvcnQge1xuICBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcixcbiAgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcixcbiAgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLFxuICBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLFxuICBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IsXG4gIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yLFxuICBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcixcbiAgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IsXG4gIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IsXG4gIEdldFNlcnZpY2VFcnJvclxufSBmcm9tICcuL2Vycm9ycydcblxuaW1wb3J0IHR5cGUge0luamVjdGFibGVBcmd1bWVudHN9IGZyb20gJy4vdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMnXG50eXBlIHNjYWxhciA9IChzdHJpbmd8bnVtYmVyfGJvb2xlYW58bnVsbClcbnR5cGUgTG9hZGluZ09iamVjdCA9IHtcbiAgb2JqOiBPYmplY3Q8c3RyaW5nLCBib29sZWFuPixcbiAgYXJyOiBBcnJheTxzdHJpbmc+XG59XG50eXBlIExvY2F0b3JDYWxsYmFjayA9IChpZGVudGlmaWVyOiBzdHJpbmcpID0+ICg/RnVuY3Rpb24pXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDb250YWluZXIge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXIgPSB7fVxuICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllciA9IHt9XG4gICAgdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllciA9IHt9XG4gICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyID0ge31cbiAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMgPSBbXVxuICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMgPSBbXVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgc2VydmljZSBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0gey4uLnN0cmluZ30gaWRlbnRpZmllcnNcbiAgICpcbiAgICogQHByb21pc2VcbiAgICogQHJlc29sdmUge0FycmF5PE9iamVjdHxGdW5jdGlvbj59IGFuIGFycmF5IG9mIHNlcnZpY2VzXG4gICAqIEByZWplY3Qge0dldFNlcnZpY2VFcnJvcn0gaW4gY2FzZSBhbnkgRXJyb3IgaXMgcmFpc2VkIHdoZW4gaW5zdGFudGlhdGluZyBzZXJ2aWNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldCguLi5pZGVudGlmaWVyczogQXJyYXk8c3RyaW5nPik6IFByb21pc2U8QXJyYXk8T2JqZWN0fEZ1bmN0aW9uPj4ge1xuICAgIGNvbnN0IHByb21pc2VzID0gW11cblxuICAgIGlkZW50aWZpZXJzLmZvckVhY2goKGlkZW50aWZpZXIpID0+IHtcbiAgICAgIHByb21pc2VzLnB1c2goXG4gICAgICAgIHRoaXNcbiAgICAgICAgICAuX2RvR2V0U2VydmljZShpZGVudGlmaWVyLCB7IG9iajoge30sIGFycjogW10gfSlcbiAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIHRocm93IEdldFNlcnZpY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyLCBlKVxuICAgICAgICAgIH0pXG4gICAgICApXG4gICAgfSlcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NvY2lhdGVzIHNlcnZpY2Ugd2l0aCBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBpbnN0YW5jZSBzZXJ2aWNlIGluc3RhbmNlXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldChpZGVudGlmaWVyOiBzdHJpbmcsIGluc3RhbmNlOiAoT2JqZWN0fEZ1bmN0aW9uKSk6IENvbnRhaW5lciB7XG4gICAgdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSBpbnN0YW5jZVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgY29udGFpbmVyIGhhcyBzZXJ2aWNlLCB0aGF0IGlzIGVpdGhlciBpZjpcbiAgICogKiBpdCBoYXMgYSB7QGxpbmsgRGVmaW5pdGlvbn1cbiAgICogKiBpdCBoYXMgYmVlbiBpbnN0YW50aWF0ZWRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXMoaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaGFzRGVmaW5pdGlvbihpZGVudGlmaWVyKSB8fCB0aGlzLmhhc0luc3RhbmNlKGlkZW50aWZpZXIpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXJ2aWNlIGhhcyBhIGRlZmluaXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhhc0RlZmluaXRpb24oaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAhPT0gdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXJ2aWNlIGhhcyBhbiBpbnN0YW5jZSwgZWl0aGVyIGJlY2F1c2U6XG4gICAqICogaXQgaGFzIGJlZW4gaW5zdGFudGlhdGVkIHZpYSBpdHMge0BsaW5rIERlZmluaXRpb259XG4gICAqICogaXQgaGFzIGJlZW4gc2V0IGRpcmVjdGx5IHZpYSB7QGxpbmsgc2V0fSBtZXRob2RcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhhc0luc3RhbmNlKGlkZW50aWZpZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB1bmRlZmluZWQgIT09IHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBzZXJ2aWNlIHtAbGluayBEZWZpbml0aW9ufSBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7RGVmaW5pdGlvbn1cbiAgICpcbiAgICogQHRocm93cyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcn0gaWYgdGhlcmUgaXMgbm8gc2VydmljZSBkZWZpbml0aW9uIGZvciBnaXZlbiBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldERlZmluaXRpb24oaWRlbnRpZmllcjogc3RyaW5nKTogRGVmaW5pdGlvbiB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXVxuXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gZGVmaW5pdGlvbikge1xuICAgICAgdGhyb3cgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKVxuICAgIH1cblxuICAgIHJldHVybiBkZWZpbml0aW9uXG4gIH1cblxuICAvKipcbiAgICogQXNzb2NpYXRlcyBzZXJ2aWNlIHtAbGluayBEZWZpbml0aW9ufSB3aXRoIGlkZW50aWZpZXJcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXIgc2VydmljZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7RGVmaW5pdGlvbn0gZGVmaW5pdGlvbiBzZXJ2aWNlIGRlZmluaXRpb25cbiAgICpcbiAgICogQHJldHVybnMge0NvbnRhaW5lcn0gY3VycmVudCBDb250YWluZXIgaW5zdGFuY2VcbiAgICpcbiAgICogQHRocm93cyB7U2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yfSBpZiB0aGUgc2VydmljZSBkZWZpbml0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2VcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2V0RGVmaW5pdGlvbihpZGVudGlmaWVyOiBzdHJpbmcsIGRlZmluaXRpb246IERlZmluaXRpb24pOiBDb250YWluZXIge1xuICAgIGlmICh0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pIHtcbiAgICAgIHRocm93IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKVxuICAgIH1cblxuICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllcltpZGVudGlmaWVyXSA9IGZhbHNlXG4gICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gZGVmaW5pdGlvblxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHBhcmFtZXRlciBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciBwYXJhbWV0ZXIgaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7c2NhbGFyfSBwYXJhbWV0ZXIgdmFsdWVcbiAgICpcbiAgICogQHRocm93cyB7VW5kZWZpbmVkUGFyYW1ldGVyRXJyb3J9IGlmIHRoZXJlIGlzIG5vIHBhcmFtZXRlciBmb3IgZ2l2ZW4gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRQYXJhbWV0ZXIoaWRlbnRpZmllcjogc3RyaW5nKTogc2NhbGFyIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKSB7XG4gICAgICB0aHJvdyBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG4gIH1cblxuICAvKipcbiAgICogQXNzb2NpYXRlcyBwYXJhbWV0ZXIgd2l0aCBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7c2NhbGFyfSB2YWx1ZVxuICAgKlxuICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRQYXJhbWV0ZXIoaWRlbnRpZmllcjogc3RyaW5nLCB2YWx1ZTogc2NhbGFyKTogQ29udGFpbmVyIHtcbiAgICB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gdmFsdWVcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGNvbnRhaW5lciBoYXMgcGFyYW1ldGVyLCBmYWxzZSBvdGhlcndpc2VcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXNQYXJhbWV0ZXIoaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAhPT0gdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBcbiAgICogXG4gICAqIEBwYXJhbSB7TG9jYXRvckNhbGxiYWNrfSBsb2NhdG9yXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlZ2lzdGVyQ2xhc3NDb25zdHJ1Y3RvckxvY2F0b3IobG9jYXRvcjogTG9jYXRvckNhbGxiYWNrKTogQ29udGFpbmVyIHtcbiAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMucHVzaChsb2NhdG9yKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0xvY2F0b3JDYWxsYmFja30gbG9jYXRvclxuICAgKlxuICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZWdpc3Rlckluc3RhbmNlTG9jYXRvcihsb2NhdG9yOiBMb2NhdG9yQ2FsbGJhY2spOiBDb250YWluZXIge1xuICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMucHVzaChsb2NhdG9yKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlcyBzZXJ2aWNlIGRlZmluaXRpb24gYXJndW1lbnRzLCB0aGVuIHVzZXMgdGhlbSB0byBpbnN0YW50aWF0ZSB0aGUgc2VydmljZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSB7TG9hZGluZ09iamVjdH0gbG9hZGluZyBhbiBvYmplY3QgdGhhdCBrZWVwcyB0cmFjayBvZiBzZXJ2aWNlIGluc3RhbnRpYXRpb25zLFxuICAgKiB1c2VkIHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwZW5kZW5jeSByZWxhdGVkIGluZmluaXRlIGxvb3BzXG4gICAqXG4gICAqIEBwcm9taXNlXG4gICAqIEByZXNvbHZlIHtPYmplY3R9XG4gICAqIEByZWplY3Qge0ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yfSBpbiBjYXNlIGEgZmFjdG9yeSBtZXRob2QgcmV0dXJucyBub3RoaW5nXG4gICAqIEByZWplY3Qge01ldGhvZERvZXNOb3RFeGlzdEVycm9yfSBpbiBjYXNlIGEgbWV0aG9kIGNhbGwgY2FsbHMgYSBtZXRob2QgdGhhdCBkb2VzIG5vdCBleGlzdFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2luc3RhbnRpYXRlKGlkZW50aWZpZXI6IHN0cmluZywgZGVmaW5pdGlvbjogRGVmaW5pdGlvbiwgbG9hZGluZzogTG9hZGluZ09iamVjdCk6IFByb21pc2U8T2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXNcbiAgICAgIC5fcmVzb2x2ZUFyZ3MoZGVmaW5pdGlvbi5hcmdzLCBsb2FkaW5nKVxuICAgICAgLnRoZW4oKGFyZ3M6IEFycmF5KTogUHJvbWlzZSA9PiB7XG4gICAgICAgIGxldCBpbnN0YW5jZVxuXG4gICAgICAgIGlmIChkZWZpbml0aW9uIGluc3RhbmNlb2YgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pIHtcbiAgICAgICAgICBjb25zdCBjbGFzc0NvbnN0cnVjdG9yID0gdGhpcy5fbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IoZGVmaW5pdGlvbi5jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcilcblxuICAgICAgICAgIGluc3RhbmNlID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjbGFzc0NvbnN0cnVjdG9yLCBbIHVuZGVmaW5lZCBdLmNvbmNhdChhcmdzKSkpXG4gICAgICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIEZhY3RvcnlEZWZpbml0aW9uKSB7XG4gICAgICAgICAgaW5zdGFuY2UgPSBkZWZpbml0aW9uLmZhY3RvcnkuYXBwbHkodW5kZWZpbmVkLCBhcmdzKVxuXG4gICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1ldGhvZENhbGxzUHJvbWlzZXMgPSBbXVxuXG4gICAgICAgICAgbGV0IGksIG1ldGhvZENhbGxcblxuICAgICAgICAgIGNvbnN0IGNhbGxNZXRob2QgPSAobWV0aG9kVG9DYWxsOiBGdW5jdGlvbikgPT4ge1xuICAgICAgICAgICAgbWV0aG9kQ2FsbHNQcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgLl9yZXNvbHZlQXJncyhtZXRob2RDYWxsLmFyZ3MsIGxvYWRpbmcpXG4gICAgICAgICAgICAgICAgLnRoZW4oKGFyZ3M6IEFycmF5KTogPyhQcm9taXNlfG1peGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kVG9DYWxsLmFwcGx5KGluc3RhbmNlLCBhcmdzKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0TWV0aG9kQ2FsbChpKTogTWV0aG9kQ2FsbCB7XG4gICAgICAgICAgICByZXR1cm4gZGVmaW5pdGlvbi5tZXRob2RDYWxsc1tpXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAoaSBpbiBkZWZpbml0aW9uLm1ldGhvZENhbGxzKSB7XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5tZXRob2RDYWxscy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICBtZXRob2RDYWxsID0gZ2V0TWV0aG9kQ2FsbChpKVxuXG4gICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2RDYWxsLm5hbWVcbiAgICAgICAgICAgICAgY29uc3QgbWV0aG9kVG9DYWxsID0gaW5zdGFuY2VbbWV0aG9kTmFtZV1cblxuICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBtZXRob2RUb0NhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KE1ldGhvZERvZXNOb3RFeGlzdEVycm9yLmNyZWF0ZUVycm9yKG1ldGhvZE5hbWUpKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2FsbE1ldGhvZChtZXRob2RUb0NhbGwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoXG4gICAgICAgICAgICBQcm9taXNlXG4gICAgICAgICAgICAgIC5hbGwobWV0aG9kQ2FsbHNQcm9taXNlcylcbiAgICAgICAgICAgICAgLnRoZW4oKCk6IE9iamVjdCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGludGVybmFsbHkgdG8gbG9jYXRlIGEgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvciwgaWYgaXQgaGFzIGJlZW4gbWFkZSBhdmFpbGFibGUgdG8gdGhlIGNvbnRhaW5lciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBhIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3JcbiAgICpcbiAgICogQHRocm93cyB7Q2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcn0gaWYgdGhlIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3IgY2Fubm90IGJlIGZvdW5kXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IoaWRlbnRpZmllcjogc3RyaW5nKTogRnVuY3Rpb24ge1xuICAgIGxldCBpLCBjbGFzc0NvbnN0cnVjdG9yXG5cbiAgICBmb3IgKGkgaW4gdGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzKSB7XG4gICAgICBpZiAodGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNsYXNzQ29uc3RydWN0b3IgPSB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnNbaV0oaWRlbnRpZmllcilcblxuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBjbGFzc0NvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIGNsYXNzQ29uc3RydWN0b3JcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcilcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R8dm9pZH1cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9sb2NhdGVJbnN0YW5jZShpZGVudGlmaWVyOiBzdHJpbmcpOiBPYmplY3R8dm9pZCB7XG4gICAgbGV0IGlcbiAgICBsZXQgaW5zdGFuY2VcblxuICAgIGZvciAoaSBpbiB0aGlzLl9pbnN0YW5jZUxvY2F0b3JzKSB7XG4gICAgICBpZiAodGhpcy5faW5zdGFuY2VMb2NhdG9ycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICBpbnN0YW5jZSA9IHRoaXMuX2luc3RhbmNlTG9jYXRvcnNbaV0oaWRlbnRpZmllcilcblxuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBpbnN0YW5jZSkge1xuICAgICAgICAgIHJldHVybiBpbnN0YW5jZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmVzIGdpdmVuIGFyZ3VtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtJbmplY3RhYmxlQXJndW1lbnRzfSBhcmdzXG4gICAqIEBwYXJhbSB7TG9hZGluZ09iamVjdH0gbG9hZGluZyBhbiBvYmplY3QgdGhhdCBrZWVwcyB0cmFjayBvZiBzZXJ2aWNlIGluc3RhbnRpYXRpb25zLFxuICAgKiB1c2VkIHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwZW5kZW5jeSByZWxhdGVkIGluZmluaXRlIGxvb3BzXG4gICAqXG4gICAqIEBwcm9taXNlIHtBcnJheTxhbnk+fSBhcmd1bWVudHMgb2YgYW55IHR5cGVcbiAgICogQHJlamVjdCB7VW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcn1cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZXNvbHZlQXJncyhhcmdzOiBJbmplY3RhYmxlQXJndW1lbnRzLCBsb2FkaW5nOiBMb2FkaW5nT2JqZWN0KTogUHJvbWlzZSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBpLCBhcmdcblxuICAgICAgZm9yIChpIGluIGFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZ3MuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBhcmcgPSBhcmdzW2ldXG5cbiAgICAgICAgICBpZiAoYXJnIGluc3RhbmNlb2YgUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGFyZy5pZFxuXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzLl9kb0dldFNlcnZpY2UoaWQsIENvbnRhaW5lci5fZGVlcENvcHlMb2FkaW5nKGxvYWRpbmcpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgUGFyYW1ldGVyKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzLmdldFBhcmFtZXRlcihhcmcuaWQpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvci5jcmVhdGVFcnJvcihhcmcpKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzb2x2ZShcbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGludGVybmFsbHkgdG8gcmV0cmlldmUgYSBzZXJ2aWNlIGJ5IGl0cyBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciB0aGUgaWRlbnRpZmllciBvZiB0aGUgc2VydmljZVxuICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcbiAgICogdXNlZCB0byBwcmV2ZW50IGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVsYXRlZCBpbmZpbml0ZSBsb29wc1xuICAgKlxuICAgKiBAcHJvbWlzZVxuICAgKiBAcmVzb2x2ZSB7T2JqZWN0fEZ1bmN0aW9ufSBhIHNlcnZpY2VcbiAgICogQHJlamVjdCB7Q2lyY3VsYXJEZXBlbmRlbmN5RXJyb3J9IGluIGNhc2Ugb2YgYSBjaXJjdWxhciBkZXBlbmRlbmN5XG4gICAqIEByZWplY3Qge1VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcn0gaW4gY2FzZSBuZWl0aGVyIGFuIGluc3RhbmNlIG5vciBhIGRlZmluaXRpb24gaXMgZm91bmRcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kb0dldFNlcnZpY2UoaWRlbnRpZmllcjogc3RyaW5nLCBsb2FkaW5nOiBMb2FkaW5nT2JqZWN0KTogUHJvbWlzZSB7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gbG9hZGluZy5vYmpbaWRlbnRpZmllcl0pIHtcbiAgICAgIGNvbnN0IHNlcnZpY2VzID0gW11cbiAgICAgICAgLmNvbmNhdChsb2FkaW5nLmFycilcbiAgICAgICAgLmNvbmNhdChbIGlkZW50aWZpZXIgXSlcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICBDaXJjdWxhckRlcGVuZGVuY3lFcnJvci5jcmVhdGVFcnJvcihzZXJ2aWNlcylcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpIHtcbiAgICAgIGlmICghdGhpcy5oYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2xvY2F0ZUluc3RhbmNlKGlkZW50aWZpZXIpXG5cbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gcmVzdWx0KSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSW4gY2FzZSBsb2NhdGUgaW5zdGFuY2UgcmV0dXJucyBhIHByb21pc2UsIHJlc29sdmUgcHJvbWlzZVxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKChpbnN0YW5jZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpbnN0YW5jZSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSlcbiAgICAgIH1cblxuICAgICAgbG9hZGluZy5vYmpbaWRlbnRpZmllcl0gPSB0cnVlXG4gICAgICBsb2FkaW5nLmFyci5wdXNoKGlkZW50aWZpZXIpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9pbnN0YW50aWF0ZShpZGVudGlmaWVyLCB0aGlzLmdldERlZmluaXRpb24oaWRlbnRpZmllciksIGxvYWRpbmcpXG5cbiAgICAgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gdHJ1ZVxuXG4gICAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gcHJvbWlzZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pXG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgYSBkZWVwIGNvcHkgb2YgbG9hZGluZyBvYmplY3Qgc28gYXMgbm90IHRvIG1vZGlmeSBpdCBieSByZWZlcmVuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsb2FkaW5nXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGxvYWRpbmcgYSBkZWVwIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGxvYWRpbmcgcGFyYW1ldGVyXG4gICAqIEByZXR1cm5zIHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gbG9hZGluZy5vYmpcbiAgICogQHJldHVybnMge0FycmF5PHN0cmluZz59IGxvYWRpbmcuYXJyXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2RlZXBDb3B5TG9hZGluZyhsb2FkaW5nOiBPYmplY3QpOiBPYmplY3Qge1xuICAgIGNvbnN0IG5ld0xvYWRpbmcgPSB7XG4gICAgICBvYmo6IHt9LFxuICAgICAgYXJyOiBbXS5jb25jYXQobG9hZGluZy5hcnIpXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSBpbiBsb2FkaW5nLm9iaikge1xuICAgICAgaWYgKGxvYWRpbmcub2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIG5ld0xvYWRpbmcub2JqW2ldID0gbG9hZGluZy5vYmpbaV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3TG9hZGluZ1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRhaW5lclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb250YWluZXIuanMiLCJpbXBvcnQgTWV0aG9kQ2FsbCBmcm9tICcuL21ldGhvZC1jYWxsJ1xuXG5pbXBvcnQgdHlwZSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gZnJvbSAnLi90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBEZWZpbml0aW9uIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgdGhpcy5fbWV0aG9kQ2FsbHMgPSBbXVxuICAgIHRoaXMuX2FyZ3MgPSBhcmdzXG4gIH1cblxuICAvKipcbiAgICogU2V0cyBtZXRob2RDYWxsc1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PE1ldGhvZENhbGw+fSBtZXRob2RDYWxsc1xuICAgKi9cbiAgc2V0IG1ldGhvZENhbGxzKG1ldGhvZENhbGxzOiBBcnJheTxNZXRob2RDYWxsPik6IHZvaWQge1xuICAgIHRoaXMuX21ldGhvZENhbGxzID0gbWV0aG9kQ2FsbHNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG1ldGhvZENhbGxzXG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheTxNZXRob2RDYWxsPn1cbiAgICovXG4gIGdldCBtZXRob2RDYWxscygpOiBBcnJheTxNZXRob2RDYWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX21ldGhvZENhbGxzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhcmdzXG4gICAqXG4gICAqIEByZXR1cm5zIHtJbmplY3RhYmxlQXJndW1lbnRzfVxuICAgKi9cbiAgZ2V0IGFyZ3MoKTogSW5qZWN0YWJsZUFyZ3VtZW50cyB7XG4gICAgcmV0dXJuIHRoaXMuX2FyZ3NcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEZWZpbml0aW9uXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2RlZmluaXRpb24uanMiLCJpbXBvcnQgdHlwZSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gZnJvbSAnLi90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIE1ldGhvZENhbGwge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBtZXRob2QgbmFtZVxuICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWVcbiAgICB0aGlzLl9hcmdzID0gYXJnc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgbmFtZVxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9uYW1lXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhcmdzXG4gICAqXG4gICAqIEByZXR1cm5zIHtJbmplY3RhYmxlQXJndW1lbnRzfVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQgYXJncygpOiBJbmplY3RhYmxlQXJndW1lbnRzIHtcbiAgICByZXR1cm4gdGhpcy5fYXJnc1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1ldGhvZENhbGxcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvbWV0aG9kLWNhbGwuanMiLCJpbXBvcnQgUmVmZXJlbmNlIGZyb20gJy4uL3JlZmVyZW5jZSdcbmltcG9ydCBQYXJhbWV0ZXIgZnJvbSAnLi4vcGFyYW1ldGVyJ1xuXG5leHBvcnQgdHlwZSBJbmplY3RhYmxlQXJndW1lbnRzID0gQXJyYXk8UmVmZXJlbmNlfFBhcmFtZXRlcj5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cy5qcyIsIi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBSZWZlcmVuY2Uge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKiBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9pZCA9IGlkXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBpZFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5faWRcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWZlcmVuY2VcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVmZXJlbmNlLmpzIiwiLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFBhcmFtZXRlciB7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5faWQgPSBpZFxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgaWRcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2lkXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFyYW1ldGVyXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BhcmFtZXRlci5qcyIsImltcG9ydCBEZWZpbml0aW9uIGZyb20gJy4vZGVmaW5pdGlvbidcblxuaW1wb3J0IHR5cGUge0luamVjdGFibGVBcmd1bWVudHN9IGZyb20gJy4vdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMnXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiBleHRlbmRzIERlZmluaXRpb24ge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcbiAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcjogc3RyaW5nLCBhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgc3VwZXIoYXJncylcblxuICAgIHRoaXMuX2NsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyID0gY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jbGFzcy1jb25zdHJ1Y3Rvci1kZWZpbml0aW9uLmpzIiwiaW1wb3J0IERlZmluaXRpb24gZnJvbSAnLi9kZWZpbml0aW9uJ1xuXG5pbXBvcnQgdHlwZSB7SW5qZWN0YWJsZUFyZ3VtZW50c30gZnJvbSAnLi90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEZhY3RvcnlEZWZpbml0aW9uIGV4dGVuZHMgRGVmaW5pdGlvbiB7XG4gIFxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeVxuICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKGZhY3Rvcnk6IEZ1bmN0aW9uLCBhcmdzOiA/SW5qZWN0YWJsZUFyZ3VtZW50cyA9IFtdKSB7XG4gICAgc3VwZXIoYXJncylcblxuICAgIHRoaXMuX2ZhY3RvcnkgPSBmYWN0b3J5XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBmYWN0b3J5XG4gICAqXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICovXG4gIGdldCBmYWN0b3J5KCk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm4gdGhpcy5fZmFjdG9yeVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZhY3RvcnlEZWZpbml0aW9uXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZhY3RvcnktZGVmaW5pdGlvbi5qcyIsImltcG9ydCBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yIGZyb20gJy4vZXJyb3JzL2Nhbm5vdC1sb2NhdGUtc2VydmljZS1jbGFzcy1jb25zdHJ1Y3Rvci1lcnJvcidcbmltcG9ydCBDaXJjdWxhckRlcGVuZGVuY3lFcnJvciBmcm9tICcuL2Vycm9ycy9jaXJjdWxhci1kZXBlbmRlbmN5LWVycm9yJ1xuaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Vycm9ycy9kaXNsLWVycm9yJ1xuaW1wb3J0IEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yIGZyb20gJy4vZXJyb3JzL2ZhY3RvcnktbWV0aG9kLXJldHVybnMtbm90aGluZy1lcnJvcidcbmltcG9ydCBNZXRob2REb2VzTm90RXhpc3RFcnJvciBmcm9tICcuL2Vycm9ycy9tZXRob2QtZG9lcy1ub3QtZXhpc3QtZXJyb3InXG5pbXBvcnQgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yIGZyb20gJy4vZXJyb3JzL3NlcnZpY2UtZGVmaW5pdGlvbi1hbHJlYWR5LXVzZWQtZXJyb3InXG5pbXBvcnQgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IgZnJvbSAnLi9lcnJvcnMvdW5kZWZpbmVkLXBhcmFtZXRlci1lcnJvcidcbmltcG9ydCBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IgZnJvbSAnLi9lcnJvcnMvdW5kZWZpbmVkLXNlcnZpY2UtZGVmaW5pdGlvbi1hbmQtaW5zdGFuY2UtZXJyb3InXG5pbXBvcnQgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciBmcm9tICcuL2Vycm9ycy91bmRlZmluZWQtc2VydmljZS1kZWZpbml0aW9uLWVycm9yJ1xuaW1wb3J0IFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IgZnJvbSAnLi9lcnJvcnMvdW5zdXBwb3J0ZWQtYXJndW1lbnQtdHlwZS1lcnJvcidcbmltcG9ydCBHZXRTZXJ2aWNlRXJyb3IgZnJvbSAnLi9lcnJvcnMvZ2V0LXNlcnZpY2UtZXJyb3InXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yLFxuICBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcixcbiAgRGlzbEVycm9yLFxuICBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcixcbiAgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IsXG4gIFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcixcbiAgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IsXG4gIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcixcbiAgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcixcbiAgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcixcbiAgR2V0U2VydmljZUVycm9yXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICpcbiAgICogQHJldHVybnMge0Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IoY2xhc3NOYW1lOiBzdHJpbmcpOiBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yIHtcbiAgICByZXR1cm4gbmV3IENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZVxuICAgICAgfSxcbiAgICAgICdDYW5ub3QgbG9jYXRlIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3IgZm9yIGNsYXNzIFwiJXNcIicsXG4gICAgICBjbGFzc05hbWVcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy9jYW5ub3QtbG9jYXRlLXNlcnZpY2UtY2xhc3MtY29uc3RydWN0b3ItZXJyb3IuanMiLCJpbXBvcnQgVkVycm9yIGZyb20gJ3ZlcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIERpc2xFcnJvciBleHRlbmRzIFZFcnJvciB7XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlzbEVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL2Rpc2wtZXJyb3IuanMiLCIvKlxuICogdmVycm9yLmpzOiByaWNoZXIgSmF2YVNjcmlwdCBlcnJvcnNcbiAqL1xuXG52YXIgbW9kX2Fzc2VydHBsdXMgPSByZXF1aXJlKCdhc3NlcnQtcGx1cycpO1xudmFyIG1vZF91dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuXG52YXIgbW9kX2V4dHNwcmludGYgPSByZXF1aXJlKCdleHRzcHJpbnRmJyk7XG52YXIgbW9kX2lzRXJyb3IgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKS5pc0Vycm9yO1xudmFyIHNwcmludGYgPSBtb2RfZXh0c3ByaW50Zi5zcHJpbnRmO1xuXG4vKlxuICogUHVibGljIGludGVyZmFjZVxuICovXG5cbi8qIFNvIHlvdSBjYW4gJ3ZhciBWRXJyb3IgPSByZXF1aXJlKCd2ZXJyb3InKScgKi9cbm1vZHVsZS5leHBvcnRzID0gVkVycm9yO1xuLyogRm9yIGNvbXBhdGliaWxpdHkgKi9cblZFcnJvci5WRXJyb3IgPSBWRXJyb3I7XG4vKiBPdGhlciBleHBvcnRlZCBjbGFzc2VzICovXG5WRXJyb3IuU0Vycm9yID0gU0Vycm9yO1xuVkVycm9yLldFcnJvciA9IFdFcnJvcjtcblZFcnJvci5NdWx0aUVycm9yID0gTXVsdGlFcnJvcjtcblxuLypcbiAqIENvbW1vbiBmdW5jdGlvbiB1c2VkIHRvIHBhcnNlIGNvbnN0cnVjdG9yIGFyZ3VtZW50cyBmb3IgVkVycm9yLCBXRXJyb3IsIGFuZFxuICogU0Vycm9yLiAgTmFtZWQgYXJndW1lbnRzIHRvIHRoaXMgZnVuY3Rpb246XG4gKlxuICogICAgIHN0cmljdFx0XHRmb3JjZSBzdHJpY3QgaW50ZXJwcmV0YXRpb24gb2Ygc3ByaW50ZiBhcmd1bWVudHMsIGV2ZW5cbiAqICAgICBcdFx0XHRpZiB0aGUgb3B0aW9ucyBpbiBcImFyZ3ZcIiBkb24ndCBzYXkgc29cbiAqXG4gKiAgICAgYXJndlx0XHRlcnJvcidzIGNvbnN0cnVjdG9yIGFyZ3VtZW50cywgd2hpY2ggYXJlIHRvIGJlXG4gKiAgICAgXHRcdFx0aW50ZXJwcmV0ZWQgYXMgZGVzY3JpYmVkIGluIFJFQURNRS5tZC4gIEZvciBxdWlja1xuICogICAgIFx0XHRcdHJlZmVyZW5jZSwgXCJhcmd2XCIgaGFzIG9uZSBvZiB0aGUgZm9sbG93aW5nIGZvcm1zOlxuICpcbiAqICAgICAgICAgIFsgc3ByaW50Zl9hcmdzLi4uIF0gICAgICAgICAgIChhcmd2WzBdIGlzIGEgc3RyaW5nKVxuICogICAgICAgICAgWyBjYXVzZSwgc3ByaW50Zl9hcmdzLi4uIF0gICAgKGFyZ3ZbMF0gaXMgYW4gRXJyb3IpXG4gKiAgICAgICAgICBbIG9wdGlvbnMsIHNwcmludGZfYXJncy4uLiBdICAoYXJndlswXSBpcyBhbiBvYmplY3QpXG4gKlxuICogVGhpcyBmdW5jdGlvbiBub3JtYWxpemVzIHRoZXNlIGZvcm1zLCBwcm9kdWNpbmcgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZ1xuICogcHJvcGVydGllczpcbiAqXG4gKiAgICBvcHRpb25zICAgICAgICAgICBlcXVpdmFsZW50IHRvIFwib3B0aW9uc1wiIGluIHRoaXJkIGZvcm0uICBUaGlzIHdpbGwgbmV2ZXJcbiAqICAgIFx0XHRcdGJlIGEgZGlyZWN0IHJlZmVyZW5jZSB0byB3aGF0IHRoZSBjYWxsZXIgcGFzc2VkIGluXG4gKiAgICBcdFx0XHQoaS5lLiwgaXQgbWF5IGJlIGEgc2hhbGxvdyBjb3B5KSwgc28gaXQgY2FuIGJlIGZyZWVseVxuICogICAgXHRcdFx0bW9kaWZpZWQuXG4gKlxuICogICAgc2hvcnRtZXNzYWdlICAgICAgcmVzdWx0IG9mIHNwcmludGYoc3ByaW50Zl9hcmdzKSwgdGFraW5nIG9wdGlvbnMuc3RyaWN0XG4gKiAgICBcdFx0XHRpbnRvIGFjY291bnQgYXMgZGVzY3JpYmVkIGluIFJFQURNRS5tZC5cbiAqL1xuZnVuY3Rpb24gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyhhcmdzKVxue1xuXHR2YXIgYXJndiwgb3B0aW9ucywgc3ByaW50Zl9hcmdzLCBzaG9ydG1lc3NhZ2UsIGs7XG5cblx0bW9kX2Fzc2VydHBsdXMub2JqZWN0KGFyZ3MsICdhcmdzJyk7XG5cdG1vZF9hc3NlcnRwbHVzLmJvb2woYXJncy5zdHJpY3QsICdhcmdzLnN0cmljdCcpO1xuXHRtb2RfYXNzZXJ0cGx1cy5hcnJheShhcmdzLmFyZ3YsICdhcmdzLmFyZ3YnKTtcblx0YXJndiA9IGFyZ3MuYXJndjtcblxuXHQvKlxuXHQgKiBGaXJzdCwgZmlndXJlIG91dCB3aGljaCBmb3JtIG9mIGludm9jYXRpb24gd2UndmUgYmVlbiBnaXZlbi5cblx0ICovXG5cdGlmIChhcmd2Lmxlbmd0aCA9PT0gMCkge1xuXHRcdG9wdGlvbnMgPSB7fTtcblx0XHRzcHJpbnRmX2FyZ3MgPSBbXTtcblx0fSBlbHNlIGlmIChtb2RfaXNFcnJvcihhcmd2WzBdKSkge1xuXHRcdG9wdGlvbnMgPSB7ICdjYXVzZSc6IGFyZ3ZbMF0gfTtcblx0XHRzcHJpbnRmX2FyZ3MgPSBhcmd2LnNsaWNlKDEpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiAoYXJndlswXSkgPT09ICdvYmplY3QnKSB7XG5cdFx0b3B0aW9ucyA9IHt9O1xuXHRcdGZvciAoayBpbiBhcmd2WzBdKSB7XG5cdFx0XHRvcHRpb25zW2tdID0gYXJndlswXVtrXTtcblx0XHR9XG5cdFx0c3ByaW50Zl9hcmdzID0gYXJndi5zbGljZSgxKTtcblx0fSBlbHNlIHtcblx0XHRtb2RfYXNzZXJ0cGx1cy5zdHJpbmcoYXJndlswXSxcblx0XHQgICAgJ2ZpcnN0IGFyZ3VtZW50IHRvIFZFcnJvciwgU0Vycm9yLCBvciBXRXJyb3IgJyArXG5cdFx0ICAgICdjb25zdHJ1Y3RvciBtdXN0IGJlIGEgc3RyaW5nLCBvYmplY3QsIG9yIEVycm9yJyk7XG5cdFx0b3B0aW9ucyA9IHt9O1xuXHRcdHNwcmludGZfYXJncyA9IGFyZ3Y7XG5cdH1cblxuXHQvKlxuXHQgKiBOb3cgY29uc3RydWN0IHRoZSBlcnJvcidzIG1lc3NhZ2UuXG5cdCAqXG5cdCAqIGV4dHNwcmludGYgKHdoaWNoIHdlIGludm9rZSBoZXJlIHdpdGggb3VyIGNhbGxlcidzIGFyZ3VtZW50cyBpbiBvcmRlclxuXHQgKiB0byBjb25zdHJ1Y3QgdGhpcyBFcnJvcidzIG1lc3NhZ2UpIGlzIHN0cmljdCBpbiBpdHMgaW50ZXJwcmV0YXRpb24gb2Zcblx0ICogdmFsdWVzIHRvIGJlIHByb2Nlc3NlZCBieSB0aGUgXCIlc1wiIHNwZWNpZmllci4gIFRoZSB2YWx1ZSBwYXNzZWQgdG9cblx0ICogZXh0c3ByaW50ZiBtdXN0IGFjdHVhbGx5IGJlIGEgc3RyaW5nIG9yIHNvbWV0aGluZyBjb252ZXJ0aWJsZSB0byBhXG5cdCAqIFN0cmluZyB1c2luZyAudG9TdHJpbmcoKS4gIFBhc3Npbmcgb3RoZXIgdmFsdWVzIChub3RhYmx5IFwibnVsbFwiIGFuZFxuXHQgKiBcInVuZGVmaW5lZFwiKSBpcyBjb25zaWRlcmVkIGEgcHJvZ3JhbW1lciBlcnJvci4gIFRoZSBhc3N1bXB0aW9uIGlzXG5cdCAqIHRoYXQgaWYgeW91IGFjdHVhbGx5IHdhbnQgdG8gcHJpbnQgdGhlIHN0cmluZyBcIm51bGxcIiBvciBcInVuZGVmaW5lZFwiLFxuXHQgKiB0aGVuIHRoYXQncyBlYXN5IHRvIGRvIHRoYXQgd2hlbiB5b3UncmUgY2FsbGluZyBleHRzcHJpbnRmOyBvbiB0aGVcblx0ICogb3RoZXIgaGFuZCwgaWYgeW91IGRpZCBOT1Qgd2FudCB0aGF0IChpLmUuLCB0aGVyZSdzIGFjdHVhbGx5IGEgYnVnXG5cdCAqIHdoZXJlIHRoZSBwcm9ncmFtIGFzc3VtZXMgc29tZSB2YXJpYWJsZSBpcyBub24tbnVsbCBhbmQgdHJpZXMgdG9cblx0ICogcHJpbnQgaXQsIHdoaWNoIG1pZ2h0IGhhcHBlbiB3aGVuIGNvbnN0cnVjdGluZyBhIHBhY2tldCBvciBmaWxlIGluXG5cdCAqIHNvbWUgc3BlY2lmaWMgZm9ybWF0KSwgdGhlbiBpdCdzIGJldHRlciB0byBzdG9wIGltbWVkaWF0ZWx5IHRoYW5cblx0ICogcHJvZHVjZSBib2d1cyBvdXRwdXQuXG5cdCAqXG5cdCAqIEhvd2V2ZXIsIHNvbWV0aW1lcyB0aGUgYnVnIGlzIG9ubHkgaW4gdGhlIGNvZGUgY2FsbGluZyBWRXJyb3IsIGFuZCBhXG5cdCAqIHByb2dyYW1tZXIgbWlnaHQgcHJlZmVyIHRvIGhhdmUgdGhlIGVycm9yIG1lc3NhZ2UgY29udGFpbiBcIm51bGxcIiBvclxuXHQgKiBcInVuZGVmaW5lZFwiIHJhdGhlciB0aGFuIGhhdmUgdGhlIGJ1ZyBpbiB0aGUgZXJyb3IgcGF0aCBjcmFzaCB0aGVcblx0ICogcHJvZ3JhbSAobWFraW5nIHRoZSBmaXJzdCBidWcgaGFyZGVyIHRvIGlkZW50aWZ5KS4gIEZvciB0aGF0IHJlYXNvbixcblx0ICogYnkgZGVmYXVsdCBWRXJyb3IgY29udmVydHMgXCJudWxsXCIgb3IgXCJ1bmRlZmluZWRcIiBhcmd1bWVudHMgdG8gdGhlaXJcblx0ICogc3RyaW5nIHJlcHJlc2VudGF0aW9ucyBhbmQgcGFzc2VzIHRob3NlIHRvIGV4dHNwcmludGYuICBQcm9ncmFtbWVyc1xuXHQgKiBkZXNpcmluZyB0aGUgc3RyaWN0IGJlaGF2aW9yIGNhbiB1c2UgdGhlIFNFcnJvciBjbGFzcyBvciBwYXNzIHRoZVxuXHQgKiBcInN0cmljdFwiIG9wdGlvbiB0byB0aGUgVkVycm9yIGNvbnN0cnVjdG9yLlxuXHQgKi9cblx0bW9kX2Fzc2VydHBsdXMub2JqZWN0KG9wdGlvbnMpO1xuXHRpZiAoIW9wdGlvbnMuc3RyaWN0ICYmICFhcmdzLnN0cmljdCkge1xuXHRcdHNwcmludGZfYXJncyA9IHNwcmludGZfYXJncy5tYXAoZnVuY3Rpb24gKGEpIHtcblx0XHRcdHJldHVybiAoYSA9PT0gbnVsbCA/ICdudWxsJyA6XG5cdFx0XHQgICAgYSA9PT0gdW5kZWZpbmVkID8gJ3VuZGVmaW5lZCcgOiBhKTtcblx0XHR9KTtcblx0fVxuXG5cdGlmIChzcHJpbnRmX2FyZ3MubGVuZ3RoID09PSAwKSB7XG5cdFx0c2hvcnRtZXNzYWdlID0gJyc7XG5cdH0gZWxzZSB7XG5cdFx0c2hvcnRtZXNzYWdlID0gc3ByaW50Zi5hcHBseShudWxsLCBzcHJpbnRmX2FyZ3MpO1xuXHR9XG5cblx0cmV0dXJuICh7XG5cdCAgICAnb3B0aW9ucyc6IG9wdGlvbnMsXG5cdCAgICAnc2hvcnRtZXNzYWdlJzogc2hvcnRtZXNzYWdlXG5cdH0pO1xufVxuXG4vKlxuICogU2VlIFJFQURNRS5tZCBmb3IgcmVmZXJlbmNlIGRvY3VtZW50YXRpb24uXG4gKi9cbmZ1bmN0aW9uIFZFcnJvcigpXG57XG5cdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgY2F1c2UsIGN0b3IsIG1lc3NhZ2UsIGs7XG5cblx0YXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG5cblx0Lypcblx0ICogVGhpcyBpcyBhIHJlZ3JldHRhYmxlIHBhdHRlcm4sIGJ1dCBKYXZhU2NyaXB0J3MgYnVpbHQtaW4gRXJyb3IgY2xhc3Ncblx0ICogaXMgZGVmaW5lZCB0byB3b3JrIHRoaXMgd2F5LCBzbyB3ZSBhbGxvdyB0aGUgY29uc3RydWN0b3IgdG8gYmUgY2FsbGVkXG5cdCAqIHdpdGhvdXQgXCJuZXdcIi5cblx0ICovXG5cdGlmICghKHRoaXMgaW5zdGFuY2VvZiBWRXJyb3IpKSB7XG5cdFx0b2JqID0gT2JqZWN0LmNyZWF0ZShWRXJyb3IucHJvdG90eXBlKTtcblx0XHRWRXJyb3IuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiAob2JqKTtcblx0fVxuXG5cdC8qXG5cdCAqIEZvciBjb252ZW5pZW5jZSBhbmQgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIHdlIHN1cHBvcnQgc2V2ZXJhbFxuXHQgKiBkaWZmZXJlbnQgY2FsbGluZyBmb3Jtcy4gIE5vcm1hbGl6ZSB0aGVtIGhlcmUuXG5cdCAqL1xuXHRwYXJzZWQgPSBwYXJzZUNvbnN0cnVjdG9yQXJndW1lbnRzKHtcblx0ICAgICdhcmd2JzogYXJncyxcblx0ICAgICdzdHJpY3QnOiBmYWxzZVxuXHR9KTtcblxuXHQvKlxuXHQgKiBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgbmFtZSwgYXBwbHkgaXQgbm93LlxuXHQgKi9cblx0aWYgKHBhcnNlZC5vcHRpb25zLm5hbWUpIHtcblx0XHRtb2RfYXNzZXJ0cGx1cy5zdHJpbmcocGFyc2VkLm9wdGlvbnMubmFtZSxcblx0XHQgICAgJ2Vycm9yXFwncyBcIm5hbWVcIiBtdXN0IGJlIGEgc3RyaW5nJyk7XG5cdFx0dGhpcy5uYW1lID0gcGFyc2VkLm9wdGlvbnMubmFtZTtcblx0fVxuXG5cdC8qXG5cdCAqIEZvciBkZWJ1Z2dpbmcsIHdlIGtlZXAgdHJhY2sgb2YgdGhlIG9yaWdpbmFsIHNob3J0IG1lc3NhZ2UgKGF0dGFjaGVkXG5cdCAqIHRoaXMgRXJyb3IgcGFydGljdWxhcmx5KSBzZXBhcmF0ZWx5IGZyb20gdGhlIGNvbXBsZXRlIG1lc3NhZ2UgKHdoaWNoXG5cdCAqIGluY2x1ZGVzIHRoZSBtZXNzYWdlcyBvZiBvdXIgY2F1c2UgY2hhaW4pLlxuXHQgKi9cblx0dGhpcy5qc2Vfc2hvcnRtc2cgPSBwYXJzZWQuc2hvcnRtZXNzYWdlO1xuXHRtZXNzYWdlID0gcGFyc2VkLnNob3J0bWVzc2FnZTtcblxuXHQvKlxuXHQgKiBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgY2F1c2UsIHJlY29yZCBhIHJlZmVyZW5jZSB0byBpdCBhbmQgdXBkYXRlIG91clxuXHQgKiBtZXNzYWdlIGFwcHJvcHJpYXRlbHkuXG5cdCAqL1xuXHRjYXVzZSA9IHBhcnNlZC5vcHRpb25zLmNhdXNlO1xuXHRpZiAoY2F1c2UpIHtcblx0XHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihjYXVzZSksICdjYXVzZSBpcyBub3QgYW4gRXJyb3InKTtcblx0XHR0aGlzLmpzZV9jYXVzZSA9IGNhdXNlO1xuXG5cdFx0aWYgKCFwYXJzZWQub3B0aW9ucy5za2lwQ2F1c2VNZXNzYWdlKSB7XG5cdFx0XHRtZXNzYWdlICs9ICc6ICcgKyBjYXVzZS5tZXNzYWdlO1xuXHRcdH1cblx0fVxuXG5cdC8qXG5cdCAqIElmIHdlJ3ZlIGJlZW4gZ2l2ZW4gYW4gb2JqZWN0IHdpdGggcHJvcGVydGllcywgc2hhbGxvdy1jb3B5IHRoYXRcblx0ICogaGVyZS4gIFdlIGRvbid0IHdhbnQgdG8gdXNlIGEgZGVlcCBjb3B5IGluIGNhc2UgdGhlcmUgYXJlIG5vbi1wbGFpblxuXHQgKiBvYmplY3RzIGhlcmUsIGJ1dCB3ZSBkb24ndCB3YW50IHRvIHVzZSB0aGUgb3JpZ2luYWwgb2JqZWN0IGluIGNhc2Vcblx0ICogdGhlIGNhbGxlciBtb2RpZmllcyBpdCBsYXRlci5cblx0ICovXG5cdHRoaXMuanNlX2luZm8gPSB7fTtcblx0aWYgKHBhcnNlZC5vcHRpb25zLmluZm8pIHtcblx0XHRmb3IgKGsgaW4gcGFyc2VkLm9wdGlvbnMuaW5mbykge1xuXHRcdFx0dGhpcy5qc2VfaW5mb1trXSA9IHBhcnNlZC5vcHRpb25zLmluZm9ba107XG5cdFx0fVxuXHR9XG5cblx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0RXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblxuXHRpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcblx0XHRjdG9yID0gcGFyc2VkLm9wdGlvbnMuY29uc3RydWN0b3JPcHQgfHwgdGhpcy5jb25zdHJ1Y3Rvcjtcblx0XHRFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBjdG9yKTtcblx0fVxuXG5cdHJldHVybiAodGhpcyk7XG59XG5cbm1vZF91dGlsLmluaGVyaXRzKFZFcnJvciwgRXJyb3IpO1xuVkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ1ZFcnJvcic7XG5cblZFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB2ZV90b1N0cmluZygpXG57XG5cdHZhciBzdHIgPSAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpICYmIHRoaXMubmFtZSB8fFxuXHRcdHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lKTtcblx0aWYgKHRoaXMubWVzc2FnZSlcblx0XHRzdHIgKz0gJzogJyArIHRoaXMubWVzc2FnZTtcblxuXHRyZXR1cm4gKHN0cik7XG59O1xuXG4vKlxuICogVGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgZm9yIGNvbXBhdGliaWxpdHkuICBOZXcgY2FsbGVycyBzaG91bGQgdXNlXG4gKiBWRXJyb3IuY2F1c2UoKSBpbnN0ZWFkLiAgVGhhdCBtZXRob2QgYWxzbyB1c2VzIHRoZSBzYW5lciBgbnVsbGAgcmV0dXJuIHZhbHVlXG4gKiB3aGVuIHRoZXJlIGlzIG5vIGNhdXNlLlxuICovXG5WRXJyb3IucHJvdG90eXBlLmNhdXNlID0gZnVuY3Rpb24gdmVfY2F1c2UoKVxue1xuXHR2YXIgY2F1c2UgPSBWRXJyb3IuY2F1c2UodGhpcyk7XG5cdHJldHVybiAoY2F1c2UgPT09IG51bGwgPyB1bmRlZmluZWQgOiBjYXVzZSk7XG59O1xuXG4vKlxuICogU3RhdGljIG1ldGhvZHNcbiAqXG4gKiBUaGVzZSBjbGFzcy1sZXZlbCBtZXRob2RzIGFyZSBwcm92aWRlZCBzbyB0aGF0IGNhbGxlcnMgY2FuIHVzZSB0aGVtIG9uXG4gKiBpbnN0YW5jZXMgb2YgRXJyb3JzIHRoYXQgYXJlIG5vdCBWRXJyb3JzLiAgTmV3IGludGVyZmFjZXMgc2hvdWxkIGJlIHByb3ZpZGVkXG4gKiBvbmx5IHVzaW5nIHN0YXRpYyBtZXRob2RzIHRvIGVsaW1pbmF0ZSB0aGUgY2xhc3Mgb2YgcHJvZ3JhbW1pbmcgbWlzdGFrZSB3aGVyZVxuICogcGVvcGxlIGZhaWwgdG8gY2hlY2sgd2hldGhlciB0aGUgRXJyb3Igb2JqZWN0IGhhcyB0aGUgY29ycmVzcG9uZGluZyBtZXRob2RzLlxuICovXG5cblZFcnJvci5jYXVzZSA9IGZ1bmN0aW9uIChlcnIpXG57XG5cdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRyZXR1cm4gKG1vZF9pc0Vycm9yKGVyci5qc2VfY2F1c2UpID8gZXJyLmpzZV9jYXVzZSA6IG51bGwpO1xufTtcblxuVkVycm9yLmluZm8gPSBmdW5jdGlvbiAoZXJyKVxue1xuXHR2YXIgcnYsIGNhdXNlLCBrO1xuXG5cdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRjYXVzZSA9IFZFcnJvci5jYXVzZShlcnIpO1xuXHRpZiAoY2F1c2UgIT09IG51bGwpIHtcblx0XHRydiA9IFZFcnJvci5pbmZvKGNhdXNlKTtcblx0fSBlbHNlIHtcblx0XHRydiA9IHt9O1xuXHR9XG5cblx0aWYgKHR5cGVvZiAoZXJyLmpzZV9pbmZvKSA9PSAnb2JqZWN0JyAmJiBlcnIuanNlX2luZm8gIT09IG51bGwpIHtcblx0XHRmb3IgKGsgaW4gZXJyLmpzZV9pbmZvKSB7XG5cdFx0XHRydltrXSA9IGVyci5qc2VfaW5mb1trXTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gKHJ2KTtcbn07XG5cblZFcnJvci5maW5kQ2F1c2VCeU5hbWUgPSBmdW5jdGlvbiAoZXJyLCBuYW1lKVxue1xuXHR2YXIgY2F1c2U7XG5cblx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoZXJyKSwgJ2VyciBtdXN0IGJlIGFuIEVycm9yJyk7XG5cdG1vZF9hc3NlcnRwbHVzLnN0cmluZyhuYW1lKTtcblx0bW9kX2Fzc2VydHBsdXMub2sobmFtZS5sZW5ndGggPiAwLCAnbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcblxuXHRmb3IgKGNhdXNlID0gZXJyOyBjYXVzZSAhPT0gbnVsbDsgY2F1c2UgPSBWRXJyb3IuY2F1c2UoY2F1c2UpKSB7XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoY2F1c2UpKTtcblx0XHRpZiAoY2F1c2UubmFtZSA9PSBuYW1lKSB7XG5cdFx0XHRyZXR1cm4gKGNhdXNlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gKG51bGwpO1xufTtcblxuVkVycm9yLmZ1bGxTdGFjayA9IGZ1bmN0aW9uIChlcnIpXG57XG5cdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXG5cdHZhciBjYXVzZSA9IFZFcnJvci5jYXVzZShlcnIpO1xuXG5cdGlmIChjYXVzZSkge1xuXHRcdHJldHVybiAoZXJyLnN0YWNrICsgJ1xcbmNhdXNlZCBieTogJyArIFZFcnJvci5mdWxsU3RhY2soY2F1c2UpKTtcblx0fVxuXG5cdHJldHVybiAoZXJyLnN0YWNrKTtcbn07XG5cblxuLypcbiAqIFNFcnJvciBpcyBsaWtlIFZFcnJvciwgYnV0IHN0cmljdGVyIGFib3V0IHR5cGVzLiAgWW91IGNhbm5vdCBwYXNzIFwibnVsbFwiIG9yXG4gKiBcInVuZGVmaW5lZFwiIGFzIHN0cmluZyBhcmd1bWVudHMgdG8gdGhlIGZvcm1hdHRlci5cbiAqL1xuZnVuY3Rpb24gU0Vycm9yKClcbntcblx0dmFyIGFyZ3MsIG9iaiwgcGFyc2VkLCBvcHRpb25zO1xuXG5cdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXHRpZiAoISh0aGlzIGluc3RhbmNlb2YgU0Vycm9yKSkge1xuXHRcdG9iaiA9IE9iamVjdC5jcmVhdGUoU0Vycm9yLnByb3RvdHlwZSk7XG5cdFx0U0Vycm9yLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gKG9iaik7XG5cdH1cblxuXHRwYXJzZWQgPSBwYXJzZUNvbnN0cnVjdG9yQXJndW1lbnRzKHtcblx0ICAgICdhcmd2JzogYXJncyxcblx0ICAgICdzdHJpY3QnOiB0cnVlXG5cdH0pO1xuXG5cdG9wdGlvbnMgPSBwYXJzZWQub3B0aW9ucztcblx0VkVycm9yLmNhbGwodGhpcywgb3B0aW9ucywgJyVzJywgcGFyc2VkLnNob3J0bWVzc2FnZSk7XG5cblx0cmV0dXJuICh0aGlzKTtcbn1cblxuLypcbiAqIFdlIGRvbid0IGJvdGhlciBzZXR0aW5nIFNFcnJvci5wcm90b3R5cGUubmFtZSBiZWNhdXNlIG9uY2UgY29uc3RydWN0ZWQsXG4gKiBTRXJyb3JzIGFyZSBqdXN0IGxpa2UgVkVycm9ycy5cbiAqL1xubW9kX3V0aWwuaW5oZXJpdHMoU0Vycm9yLCBWRXJyb3IpO1xuXG5cbi8qXG4gKiBSZXByZXNlbnRzIGEgY29sbGVjdGlvbiBvZiBlcnJvcnMgZm9yIHRoZSBwdXJwb3NlIG9mIGNvbnN1bWVycyB0aGF0IGdlbmVyYWxseVxuICogb25seSBkZWFsIHdpdGggb25lIGVycm9yLiAgQ2FsbGVycyBjYW4gZXh0cmFjdCB0aGUgaW5kaXZpZHVhbCBlcnJvcnNcbiAqIGNvbnRhaW5lZCBpbiB0aGlzIG9iamVjdCwgYnV0IG1heSBhbHNvIGp1c3QgdHJlYXQgaXQgYXMgYSBub3JtYWwgc2luZ2xlXG4gKiBlcnJvciwgaW4gd2hpY2ggY2FzZSBhIHN1bW1hcnkgbWVzc2FnZSB3aWxsIGJlIHByaW50ZWQuXG4gKi9cbmZ1bmN0aW9uIE11bHRpRXJyb3IoZXJyb3JzKVxue1xuXHRtb2RfYXNzZXJ0cGx1cy5hcnJheShlcnJvcnMsICdsaXN0IG9mIGVycm9ycycpO1xuXHRtb2RfYXNzZXJ0cGx1cy5vayhlcnJvcnMubGVuZ3RoID4gMCwgJ211c3QgYmUgYXQgbGVhc3Qgb25lIGVycm9yJyk7XG5cdHRoaXMuYXNlX2Vycm9ycyA9IGVycm9ycztcblxuXHRWRXJyb3IuY2FsbCh0aGlzLCB7XG5cdCAgICAnY2F1c2UnOiBlcnJvcnNbMF1cblx0fSwgJ2ZpcnN0IG9mICVkIGVycm9yJXMnLCBlcnJvcnMubGVuZ3RoLCBlcnJvcnMubGVuZ3RoID09IDEgPyAnJyA6ICdzJyk7XG59XG5cbm1vZF91dGlsLmluaGVyaXRzKE11bHRpRXJyb3IsIFZFcnJvcik7XG5NdWx0aUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ011bHRpRXJyb3InO1xuXG5NdWx0aUVycm9yLnByb3RvdHlwZS5lcnJvcnMgPSBmdW5jdGlvbiBtZV9lcnJvcnMoKVxue1xuXHRyZXR1cm4gKHRoaXMuYXNlX2Vycm9ycy5zbGljZSgwKSk7XG59O1xuXG5cbi8qXG4gKiBTZWUgUkVBRE1FLm1kIGZvciByZWZlcmVuY2UgZGV0YWlscy5cbiAqL1xuZnVuY3Rpb24gV0Vycm9yKClcbntcblx0dmFyIGFyZ3MsIG9iaiwgcGFyc2VkLCBvcHRpb25zO1xuXG5cdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXHRpZiAoISh0aGlzIGluc3RhbmNlb2YgV0Vycm9yKSkge1xuXHRcdG9iaiA9IE9iamVjdC5jcmVhdGUoV0Vycm9yLnByb3RvdHlwZSk7XG5cdFx0V0Vycm9yLmFwcGx5KG9iaiwgYXJncyk7XG5cdFx0cmV0dXJuIChvYmopO1xuXHR9XG5cblx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdCAgICAnYXJndic6IGFyZ3MsXG5cdCAgICAnc3RyaWN0JzogZmFsc2Vcblx0fSk7XG5cblx0b3B0aW9ucyA9IHBhcnNlZC5vcHRpb25zO1xuXHRvcHRpb25zWydza2lwQ2F1c2VNZXNzYWdlJ10gPSB0cnVlO1xuXHRWRXJyb3IuY2FsbCh0aGlzLCBvcHRpb25zLCAnJXMnLCBwYXJzZWQuc2hvcnRtZXNzYWdlKTtcblxuXHRyZXR1cm4gKHRoaXMpO1xufVxuXG5tb2RfdXRpbC5pbmhlcml0cyhXRXJyb3IsIFZFcnJvcik7XG5XRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnV0Vycm9yJztcblxuV0Vycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHdlX3RvU3RyaW5nKClcbntcblx0dmFyIHN0ciA9ICh0aGlzLmhhc093blByb3BlcnR5KCduYW1lJykgJiYgdGhpcy5uYW1lIHx8XG5cdFx0dGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlLm5hbWUpO1xuXHRpZiAodGhpcy5tZXNzYWdlKVxuXHRcdHN0ciArPSAnOiAnICsgdGhpcy5tZXNzYWdlO1xuXHRpZiAodGhpcy5qc2VfY2F1c2UgJiYgdGhpcy5qc2VfY2F1c2UubWVzc2FnZSlcblx0XHRzdHIgKz0gJzsgY2F1c2VkIGJ5ICcgKyB0aGlzLmpzZV9jYXVzZS50b1N0cmluZygpO1xuXG5cdHJldHVybiAoc3RyKTtcbn07XG5cbi8qXG4gKiBGb3IgcHVyZWx5IGhpc3RvcmljYWwgcmVhc29ucywgV0Vycm9yJ3MgY2F1c2UoKSBmdW5jdGlvbiBhbGxvd3MgeW91IHRvIHNldFxuICogdGhlIGNhdXNlLlxuICovXG5XRXJyb3IucHJvdG90eXBlLmNhdXNlID0gZnVuY3Rpb24gd2VfY2F1c2UoYylcbntcblx0aWYgKG1vZF9pc0Vycm9yKGMpKVxuXHRcdHRoaXMuanNlX2NhdXNlID0gYztcblxuXHRyZXR1cm4gKHRoaXMuanNlX2NhdXNlKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdmVycm9yL2xpYi92ZXJyb3IuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCAoYykgMjAxMiwgTWFyayBDYXZhZ2UuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBDb3B5cmlnaHQgMjAxNSBKb3llbnQsIEluYy5cblxudmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpO1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpLlN0cmVhbTtcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuXG5cbi8vLy0tLSBHbG9iYWxzXG5cbi8qIEpTU1RZTEVEICovXG52YXIgVVVJRF9SRUdFWFAgPSAvXlthLWZBLUYwLTldezh9LVthLWZBLUYwLTldezR9LVthLWZBLUYwLTldezR9LVthLWZBLUYwLTldezR9LVthLWZBLUYwLTldezEyfSQvO1xuXG5cbi8vLy0tLSBJbnRlcm5hbFxuXG5mdW5jdGlvbiBfY2FwaXRhbGl6ZShzdHIpIHtcbiAgICByZXR1cm4gKHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKSk7XG59XG5cbmZ1bmN0aW9uIF90b3NzKG5hbWUsIGV4cGVjdGVkLCBvcGVyLCBhcmcsIGFjdHVhbCkge1xuICAgIHRocm93IG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiB1dGlsLmZvcm1hdCgnJXMgKCVzKSBpcyByZXF1aXJlZCcsIG5hbWUsIGV4cGVjdGVkKSxcbiAgICAgICAgYWN0dWFsOiAoYWN0dWFsID09PSB1bmRlZmluZWQpID8gdHlwZW9mIChhcmcpIDogYWN0dWFsKGFyZyksXG4gICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCxcbiAgICAgICAgb3BlcmF0b3I6IG9wZXIgfHwgJz09PScsXG4gICAgICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogX3Rvc3MuY2FsbGVyXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9nZXRDbGFzcyhhcmcpIHtcbiAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpLnNsaWNlKDgsIC0xKSk7XG59XG5cbmZ1bmN0aW9uIG5vb3AoKSB7XG4gICAgLy8gV2h5IGV2ZW4gYm90aGVyIHdpdGggYXNzZXJ0cz9cbn1cblxuXG4vLy8tLS0gRXhwb3J0c1xuXG52YXIgdHlwZXMgPSB7XG4gICAgYm9vbDoge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnYm9vbGVhbic7IH1cbiAgICB9LFxuICAgIGZ1bmM6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ2Z1bmN0aW9uJzsgfVxuICAgIH0sXG4gICAgc3RyaW5nOiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdzdHJpbmcnOyB9XG4gICAgfSxcbiAgICBvYmplY3Q6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbnVtYmVyOiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oYXJnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZmluaXRlOiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oYXJnKSAmJiBpc0Zpbml0ZShhcmcpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBidWZmZXI6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihhcmcpOyB9LFxuICAgICAgICBvcGVyYXRvcjogJ0J1ZmZlci5pc0J1ZmZlcidcbiAgICB9LFxuICAgIGFycmF5OiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7IH0sXG4gICAgICAgIG9wZXJhdG9yOiAnQXJyYXkuaXNBcnJheSdcbiAgICB9LFxuICAgIHN0cmVhbToge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnIGluc3RhbmNlb2YgU3RyZWFtOyB9LFxuICAgICAgICBvcGVyYXRvcjogJ2luc3RhbmNlb2YnLFxuICAgICAgICBhY3R1YWw6IF9nZXRDbGFzc1xuICAgIH0sXG4gICAgZGF0ZToge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnIGluc3RhbmNlb2YgRGF0ZTsgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcbiAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3NcbiAgICB9LFxuICAgIHJlZ2V4cDoge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnIGluc3RhbmNlb2YgUmVnRXhwOyB9LFxuICAgICAgICBvcGVyYXRvcjogJ2luc3RhbmNlb2YnLFxuICAgICAgICBhY3R1YWw6IF9nZXRDbGFzc1xuICAgIH0sXG4gICAgdXVpZDoge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ3N0cmluZycgJiYgVVVJRF9SRUdFWFAudGVzdChhcmcpO1xuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRvcjogJ2lzVVVJRCdcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBfc2V0RXhwb3J0cyhuZGVidWcpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHR5cGVzKTtcbiAgICB2YXIgb3V0O1xuXG4gICAgLyogcmUtZXhwb3J0IHN0YW5kYXJkIGFzc2VydCAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX05ERUJVRykge1xuICAgICAgICBvdXQgPSBub29wO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG91dCA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuICAgICAgICAgICAgaWYgKCFhcmcpIHtcbiAgICAgICAgICAgICAgICBfdG9zcyhtc2csICd0cnVlJywgYXJnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKiBzdGFuZGFyZCBjaGVja3MgKi9cbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKG5kZWJ1Zykge1xuICAgICAgICAgICAgb3V0W2tdID0gbm9vcDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuICAgICAgICBvdXRba10gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmICghdHlwZS5jaGVjayhhcmcpKSB7XG4gICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBrLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qIG9wdGlvbmFsIGNoZWNrcyAqL1xuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICB2YXIgbmFtZSA9ICdvcHRpb25hbCcgKyBfY2FwaXRhbGl6ZShrKTtcbiAgICAgICAgaWYgKG5kZWJ1Zykge1xuICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmIChhcmcgPT09IHVuZGVmaW5lZCB8fCBhcmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnKSkge1xuICAgICAgICAgICAgICAgIF90b3NzKG1zZywgaywgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKiBhcnJheU9mIGNoZWNrcyAqL1xuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICB2YXIgbmFtZSA9ICdhcnJheU9mJyArIF9jYXBpdGFsaXplKGspO1xuICAgICAgICBpZiAobmRlYnVnKSB7XG4gICAgICAgICAgICBvdXRbbmFtZV0gPSBub29wO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNba107XG4gICAgICAgIHZhciBleHBlY3RlZCA9ICdbJyArIGsgKyAnXSc7XG4gICAgICAgIG91dFtuYW1lXSA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFyZykpIHtcbiAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghdHlwZS5jaGVjayhhcmdbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIF90b3NzKG1zZywgZXhwZWN0ZWQsIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qIG9wdGlvbmFsQXJyYXlPZiBjaGVja3MgKi9cbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIG5hbWUgPSAnb3B0aW9uYWxBcnJheU9mJyArIF9jYXBpdGFsaXplKGspO1xuICAgICAgICBpZiAobmRlYnVnKSB7XG4gICAgICAgICAgICBvdXRbbmFtZV0gPSBub29wO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNba107XG4gICAgICAgIHZhciBleHBlY3RlZCA9ICdbJyArIGsgKyAnXSc7XG4gICAgICAgIG91dFtuYW1lXSA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuICAgICAgICAgICAgaWYgKGFyZyA9PT0gdW5kZWZpbmVkIHx8IGFyZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKiByZS1leHBvcnQgYnVpbHQtaW4gYXNzZXJ0aW9ucyAqL1xuICAgIE9iamVjdC5rZXlzKGFzc2VydCkuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICBpZiAoayA9PT0gJ0Fzc2VydGlvbkVycm9yJykge1xuICAgICAgICAgICAgb3V0W2tdID0gYXNzZXJ0W2tdO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZGVidWcpIHtcbiAgICAgICAgICAgIG91dFtrXSA9IG5vb3A7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgb3V0W2tdID0gYXNzZXJ0W2tdO1xuICAgIH0pO1xuXG4gICAgLyogZXhwb3J0IG91cnNlbHZlcyAoZm9yIHVuaXQgdGVzdHMgX29ubHlfKSAqL1xuICAgIG91dC5fc2V0RXhwb3J0cyA9IF9zZXRFeHBvcnRzO1xuXG4gICAgcmV0dXJuIG91dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfc2V0RXhwb3J0cyhwcm9jZXNzLmVudi5OT0RFX05ERUJVRyk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdmVycm9yL34vYXNzZXJ0LXBsdXMvYXNzZXJ0LmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG4ndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuLypcbiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cbiAqL1xuZXhwb3J0cy5rTWF4TGVuZ3RoID0ga01heExlbmd0aCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuX19wcm90b19fID0ge19fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsIGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfX1cbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoa01heExlbmd0aCgpIDwgbGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcbiAgfVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICBpZiAodGhhdCA9PT0gbnVsbCkge1xuICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICAgIH1cbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKHRoaXMsIGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxuLy8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gZnJvbSAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcbiAgfVxuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoYXQsIHZhbHVlKVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG4gKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cbiAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuICogQnVmZmVyLmZyb20oYnVmZmVyKVxuICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG4gKiovXG5CdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxuICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG4gICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTdcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJylcbiAgfVxufVxuXG5mdW5jdGlvbiBhbGxvYyAodGhhdCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICBpZiAoc2l6ZSA8PSAwKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuICB9XG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcbiAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gU2xvd0J1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICovXG5CdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgfVxuXG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXG4gIHZhciBhY3R1YWwgPSB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cbiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG4gICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG4gICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cbiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcbiAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ2xlbmd0aFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcbiAgfSBlbHNlIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gYXJyYXlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMFxuICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuKVxuXG4gICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhhdFxuICAgIH1cblxuICAgIG9iai5jb3B5KHRoYXQsIDAsIDAsIGxlbilcbiAgICByZXR1cm4gdGhhdFxuICB9XG5cbiAgaWYgKG9iaikge1xuICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApXG4gICAgICB9XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG4gICAgfVxuXG4gICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpXG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG4gICAgbGVuZ3RoID0gMFxuICB9XG4gIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aClcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldXG4gICAgICB5ID0gYltpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVmID0gbGlzdFtpXVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nXG4gIH1cblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcbiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblxuICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmRcbiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxuICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoZW5kIDw9IDApIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXG4gIGVuZCA+Pj49IDBcbiAgc3RhcnQgPj4+PSAwXG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cbmZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcbiAgdmFyIGkgPSBiW25dXG4gIGJbbl0gPSBiW21dXG4gIGJbbV0gPSBpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgNCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDggIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KVxuICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KVxuICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIH1cblxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMFxuICB9XG4gIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xXG4gIH1cbiAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBzdGFydCA+Pj49IDBcbiAgZW5kID4+Pj0gMFxuICB0aGlzU3RhcnQgPj4+PSAwXG4gIHRoaXNFbmQgPj4+PSAwXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcbiAgdmFyIHkgPSBlbmQgLSBzdGFydFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG4gICAgICB4ID0gdGhpc0NvcHlbaV1cbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cbi8vXG4vLyBBcmd1bWVudHM6XG4vLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuLy8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcbi8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG4gICAgYnl0ZU9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG4gICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJlxuICAgICAgICB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICB2YXIgaW5kZXhTaXplID0gMVxuICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aFxuICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXG4gIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9XG4gICAgICBpbmRleFNpemUgPSAyXG4gICAgICBhcnJMZW5ndGggLz0gMlxuICAgICAgdmFsTGVuZ3RoIC89IDJcbiAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkge1xuICAgIGlmIChpbmRleFNpemUgPT09IDEpIHtcbiAgICAgIHJldHVybiBidWZbaV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSlcbiAgICB9XG4gIH1cblxuICB2YXIgaVxuICBpZiAoZGlyKSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleFxuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHJldHVybiBpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcbiAgdmFyIHJlcyA9IFtdXG5cbiAgdmFyIGkgPSBzdGFydFxuICB3aGlsZSAoaSA8IGVuZCkge1xuICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG4gICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcbiAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxudmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcbiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuICB9XG5cbiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuICB2YXIgcmVzID0gJydcbiAgdmFyIGkgPSAwXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuXG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcbiAgICBzdGFydCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuXG4gICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICB2YXIgbmV3QnVmXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG4gICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xuICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcbiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgdGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcbiAgICAgIHRhcmdldCxcbiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcbiAgICAgIHRhcmdldFN0YXJ0XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBVc2FnZTpcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcbiAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczpcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gc3RhcnRcbiAgICAgIHN0YXJ0ID0gMFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuZFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcbiAgICAgIGlmIChjb2RlIDwgMjU2KSB7XG4gICAgICAgIHZhbCA9IGNvZGVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAyNTVcbiAgfVxuXG4gIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwXG5cbiAgaWYgKCF2YWwpIHZhbCA9IDBcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICB0aGlzW2ldID0gdmFsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGNvZGVQb2ludFxuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdmFyIGJ5dGVzID0gW11cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuICB9XG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcbiAgdmFyIGMsIGhpLCBsb1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIGlzbmFuICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gcGxhY2VIb2xkZXJzQ291bnQgKGI2NCkge1xuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICB9XG5cbiAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcbiAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuICAvLyByZXByZXNlbnQgb25lIGJ5dGVcbiAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG4gIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2VcbiAgcmV0dXJuIGI2NFtsZW4gLSAyXSA9PT0gJz0nID8gMiA6IGI2NFtsZW4gLSAxXSA9PT0gJz0nID8gMSA6IDBcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuICByZXR1cm4gYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxufVxuXG5mdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG4gIHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG4gIHBsYWNlSG9sZGVycyA9IHBsYWNlSG9sZGVyc0NvdW50KGI2NClcblxuICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuXG5cbiAgdmFyIEwgPSAwXG5cbiAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgb3V0cHV0ID0gJydcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpKSlcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDJdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gJz09J1xuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pXG4gICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMTBdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXVxuICAgIG91dHB1dCArPSAnPSdcbiAgfVxuXG4gIHBhcnRzLnB1c2gob3V0cHV0KVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9iYXNlNjQtanMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9pZWVlNzU0L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaXNhcnJheS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcHJvY2Vzcy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8vIGNvbXBhcmUgYW5kIGlzQnVmZmVyIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvYmxvYi82ODBlOWU1ZTQ4OGYyMmFhYzI3NTk5YTU3ZGM4NDRhNjMxNTkyOGRkL2luZGV4LmpzXG4vLyBvcmlnaW5hbCBub3RpY2U6XG5cbi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmUoYSwgYikge1xuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdmFyIHggPSBhLmxlbmd0aDtcbiAgdmFyIHkgPSBiLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXTtcbiAgICAgIHkgPSBiW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmICh5IDwgeCkge1xuICAgIHJldHVybiAxO1xuICB9XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gaXNCdWZmZXIoYikge1xuICBpZiAoZ2xvYmFsLkJ1ZmZlciAmJiB0eXBlb2YgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyKGIpO1xuICB9XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpO1xufVxuXG4vLyBiYXNlZCBvbiBub2RlIGFzc2VydCwgb3JpZ2luYWwgbm90aWNlOlxuXG4vLyBodHRwOi8vd2lraS5jb21tb25qcy5vcmcvd2lraS9Vbml0X1Rlc3RpbmcvMS4wXG4vL1xuLy8gVEhJUyBJUyBOT1QgVEVTVEVEIE5PUiBMSUtFTFkgVE8gV09SSyBPVVRTSURFIFY4IVxuLy9cbi8vIE9yaWdpbmFsbHkgZnJvbSBuYXJ3aGFsLmpzIChodHRwOi8vbmFyd2hhbGpzLm9yZylcbi8vIENvcHlyaWdodCAoYykgMjAwOSBUaG9tYXMgUm9iaW5zb24gPDI4MG5vcnRoLmNvbT5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG9cbi8vIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlXG4vLyByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Jcbi8vIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOXG4vLyBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4vLyBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsLycpO1xudmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGZ1bmN0aW9uc0hhdmVOYW1lcyA9IChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiBmb28oKSB7fS5uYW1lID09PSAnZm9vJztcbn0oKSk7XG5mdW5jdGlvbiBwVG9TdHJpbmcgKG9iaikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG59XG5mdW5jdGlvbiBpc1ZpZXcoYXJyYnVmKSB7XG4gIGlmIChpc0J1ZmZlcihhcnJidWYpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZ2xvYmFsLkFycmF5QnVmZmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhhcnJidWYpO1xuICB9XG4gIGlmICghYXJyYnVmKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChhcnJidWYgaW5zdGFuY2VvZiBEYXRhVmlldykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChhcnJidWYuYnVmZmVyICYmIGFycmJ1Zi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbi8vIDEuIFRoZSBhc3NlcnQgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9ucyB0aGF0IHRocm93XG4vLyBBc3NlcnRpb25FcnJvcidzIHdoZW4gcGFydGljdWxhciBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBUaGVcbi8vIGFzc2VydCBtb2R1bGUgbXVzdCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlLlxuXG52YXIgYXNzZXJ0ID0gbW9kdWxlLmV4cG9ydHMgPSBvaztcblxuLy8gMi4gVGhlIEFzc2VydGlvbkVycm9yIGlzIGRlZmluZWQgaW4gYXNzZXJ0LlxuLy8gbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7IG1lc3NhZ2U6IG1lc3NhZ2UsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiBhY3R1YWwsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkIH0pXG5cbnZhciByZWdleCA9IC9cXHMqZnVuY3Rpb25cXHMrKFteXFwoXFxzXSopXFxzKi87XG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL2Z1bmN0aW9uLnByb3RvdHlwZS5uYW1lL2Jsb2IvYWRlZWVlYzhiZmNjNjA2OGIxODdkN2Q5ZmIzZDViYjFkM2EzMDg5OS9pbXBsZW1lbnRhdGlvbi5qc1xuZnVuY3Rpb24gZ2V0TmFtZShmdW5jKSB7XG4gIGlmICghdXRpbC5pc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMpIHtcbiAgICByZXR1cm4gZnVuYy5uYW1lO1xuICB9XG4gIHZhciBzdHIgPSBmdW5jLnRvU3RyaW5nKCk7XG4gIHZhciBtYXRjaCA9IHN0ci5tYXRjaChyZWdleCk7XG4gIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXTtcbn1cbmFzc2VydC5Bc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKG9wdGlvbnMpIHtcbiAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcbiAgdGhpcy5hY3R1YWwgPSBvcHRpb25zLmFjdHVhbDtcbiAgdGhpcy5leHBlY3RlZCA9IG9wdGlvbnMuZXhwZWN0ZWQ7XG4gIHRoaXMub3BlcmF0b3IgPSBvcHRpb25zLm9wZXJhdG9yO1xuICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubWVzc2FnZSA9IGdldE1lc3NhZ2UodGhpcyk7XG4gICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gdHJ1ZTtcbiAgfVxuICB2YXIgc3RhY2tTdGFydEZ1bmN0aW9uID0gb3B0aW9ucy5zdGFja1N0YXJ0RnVuY3Rpb24gfHwgZmFpbDtcbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3RhY2tTdGFydEZ1bmN0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBub24gdjggYnJvd3NlcnMgc28gd2UgY2FuIGhhdmUgYSBzdGFja3RyYWNlXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuICAgIGlmIChlcnIuc3RhY2spIHtcbiAgICAgIHZhciBvdXQgPSBlcnIuc3RhY2s7XG5cbiAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lc1xuICAgICAgdmFyIGZuX25hbWUgPSBnZXROYW1lKHN0YWNrU3RhcnRGdW5jdGlvbik7XG4gICAgICB2YXIgaWR4ID0gb3V0LmluZGV4T2YoJ1xcbicgKyBmbl9uYW1lKTtcbiAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAvLyBvbmNlIHdlIGhhdmUgbG9jYXRlZCB0aGUgZnVuY3Rpb24gZnJhbWVcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzdHJpcCBvdXQgZXZlcnl0aGluZyBiZWZvcmUgaXQgKGFuZCBpdHMgbGluZSlcbiAgICAgICAgdmFyIG5leHRfbGluZSA9IG91dC5pbmRleE9mKCdcXG4nLCBpZHggKyAxKTtcbiAgICAgICAgb3V0ID0gb3V0LnN1YnN0cmluZyhuZXh0X2xpbmUgKyAxKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGFjayA9IG91dDtcbiAgICB9XG4gIH1cbn07XG5cbi8vIGFzc2VydC5Bc3NlcnRpb25FcnJvciBpbnN0YW5jZW9mIEVycm9yXG51dGlsLmluaGVyaXRzKGFzc2VydC5Bc3NlcnRpb25FcnJvciwgRXJyb3IpO1xuXG5mdW5jdGlvbiB0cnVuY2F0ZShzLCBuKSB7XG4gIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcy5sZW5ndGggPCBuID8gcyA6IHMuc2xpY2UoMCwgbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHM7XG4gIH1cbn1cbmZ1bmN0aW9uIGluc3BlY3Qoc29tZXRoaW5nKSB7XG4gIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMgfHwgIXV0aWwuaXNGdW5jdGlvbihzb21ldGhpbmcpKSB7XG4gICAgcmV0dXJuIHV0aWwuaW5zcGVjdChzb21ldGhpbmcpO1xuICB9XG4gIHZhciByYXduYW1lID0gZ2V0TmFtZShzb21ldGhpbmcpO1xuICB2YXIgbmFtZSA9IHJhd25hbWUgPyAnOiAnICsgcmF3bmFtZSA6ICcnO1xuICByZXR1cm4gJ1tGdW5jdGlvbicgKyAgbmFtZSArICddJztcbn1cbmZ1bmN0aW9uIGdldE1lc3NhZ2Uoc2VsZikge1xuICByZXR1cm4gdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmFjdHVhbCksIDEyOCkgKyAnICcgK1xuICAgICAgICAgc2VsZi5vcGVyYXRvciArICcgJyArXG4gICAgICAgICB0cnVuY2F0ZShpbnNwZWN0KHNlbGYuZXhwZWN0ZWQpLCAxMjgpO1xufVxuXG4vLyBBdCBwcmVzZW50IG9ubHkgdGhlIHRocmVlIGtleXMgbWVudGlvbmVkIGFib3ZlIGFyZSB1c2VkIGFuZFxuLy8gdW5kZXJzdG9vZCBieSB0aGUgc3BlYy4gSW1wbGVtZW50YXRpb25zIG9yIHN1YiBtb2R1bGVzIGNhbiBwYXNzXG4vLyBvdGhlciBrZXlzIHRvIHRoZSBBc3NlcnRpb25FcnJvcidzIGNvbnN0cnVjdG9yIC0gdGhleSB3aWxsIGJlXG4vLyBpZ25vcmVkLlxuXG4vLyAzLiBBbGwgb2YgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgbXVzdCB0aHJvdyBhbiBBc3NlcnRpb25FcnJvclxuLy8gd2hlbiBhIGNvcnJlc3BvbmRpbmcgY29uZGl0aW9uIGlzIG5vdCBtZXQsIHdpdGggYSBtZXNzYWdlIHRoYXRcbi8vIG1heSBiZSB1bmRlZmluZWQgaWYgbm90IHByb3ZpZGVkLiAgQWxsIGFzc2VydGlvbiBtZXRob2RzIHByb3ZpZGVcbi8vIGJvdGggdGhlIGFjdHVhbCBhbmQgZXhwZWN0ZWQgdmFsdWVzIHRvIHRoZSBhc3NlcnRpb24gZXJyb3IgZm9yXG4vLyBkaXNwbGF5IHB1cnBvc2VzLlxuXG5mdW5jdGlvbiBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yLCBzdGFja1N0YXJ0RnVuY3Rpb24pIHtcbiAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7XG4gICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICBhY3R1YWw6IGFjdHVhbCxcbiAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG4gICAgb3BlcmF0b3I6IG9wZXJhdG9yLFxuICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogc3RhY2tTdGFydEZ1bmN0aW9uXG4gIH0pO1xufVxuXG4vLyBFWFRFTlNJT04hIGFsbG93cyBmb3Igd2VsbCBiZWhhdmVkIGVycm9ycyBkZWZpbmVkIGVsc2V3aGVyZS5cbmFzc2VydC5mYWlsID0gZmFpbDtcblxuLy8gNC4gUHVyZSBhc3NlcnRpb24gdGVzdHMgd2hldGhlciBhIHZhbHVlIGlzIHRydXRoeSwgYXMgZGV0ZXJtaW5lZFxuLy8gYnkgISFndWFyZC5cbi8vIGFzc2VydC5vayhndWFyZCwgbWVzc2FnZV9vcHQpO1xuLy8gVGhpcyBzdGF0ZW1lbnQgaXMgZXF1aXZhbGVudCB0byBhc3NlcnQuZXF1YWwodHJ1ZSwgISFndWFyZCxcbi8vIG1lc3NhZ2Vfb3B0KTsuIFRvIHRlc3Qgc3RyaWN0bHkgZm9yIHRoZSB2YWx1ZSB0cnVlLCB1c2Vcbi8vIGFzc2VydC5zdHJpY3RFcXVhbCh0cnVlLCBndWFyZCwgbWVzc2FnZV9vcHQpOy5cblxuZnVuY3Rpb24gb2sodmFsdWUsIG1lc3NhZ2UpIHtcbiAgaWYgKCF2YWx1ZSkgZmFpbCh2YWx1ZSwgdHJ1ZSwgbWVzc2FnZSwgJz09JywgYXNzZXJ0Lm9rKTtcbn1cbmFzc2VydC5vayA9IG9rO1xuXG4vLyA1LiBUaGUgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHNoYWxsb3csIGNvZXJjaXZlIGVxdWFsaXR5IHdpdGhcbi8vID09LlxuLy8gYXNzZXJ0LmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsICE9IGV4cGVjdGVkKSBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5lcXVhbCk7XG59O1xuXG4vLyA2LiBUaGUgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igd2hldGhlciB0d28gb2JqZWN0cyBhcmUgbm90IGVxdWFsXG4vLyB3aXRoICE9IGFzc2VydC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5ub3RFcXVhbCA9IGZ1bmN0aW9uIG5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCA9PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9JywgYXNzZXJ0Lm5vdEVxdWFsKTtcbiAgfVxufTtcblxuLy8gNy4gVGhlIGVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBhIGRlZXAgZXF1YWxpdHkgcmVsYXRpb24uXG4vLyBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIGRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBmYWxzZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwRXF1YWwnLCBhc3NlcnQuZGVlcEVxdWFsKTtcbiAgfVxufTtcblxuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIGRlZXBTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ2RlZXBTdHJpY3RFcXVhbCcsIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHN0cmljdCwgbWVtb3MpIHtcbiAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAmJiBpc0J1ZmZlcihleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gY29tcGFyZShhY3R1YWwsIGV4cGVjdGVkKSA9PT0gMDtcblxuICAvLyA3LjIuIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIERhdGUgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuXG4gIH0gZWxzZSBpZiAodXRpbC5pc0RhdGUoYWN0dWFsKSAmJiB1dGlsLmlzRGF0ZShleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpO1xuXG4gIC8vIDcuMyBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIFJlZ0V4cCBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzb3VyY2UgYW5kXG4gIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuXG4gIH0gZWxzZSBpZiAodXRpbC5pc1JlZ0V4cChhY3R1YWwpICYmIHV0aWwuaXNSZWdFeHAoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5zb3VyY2UgPT09IGV4cGVjdGVkLnNvdXJjZSAmJlxuICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiZcbiAgICAgICAgICAgYWN0dWFsLm11bHRpbGluZSA9PT0gZXhwZWN0ZWQubXVsdGlsaW5lICYmXG4gICAgICAgICAgIGFjdHVhbC5sYXN0SW5kZXggPT09IGV4cGVjdGVkLmxhc3RJbmRleCAmJlxuICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTtcblxuICAvLyA3LjQuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsXG4gIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG4gIH0gZWxzZSBpZiAoKGFjdHVhbCA9PT0gbnVsbCB8fCB0eXBlb2YgYWN0dWFsICE9PSAnb2JqZWN0JykgJiZcbiAgICAgICAgICAgICAoZXhwZWN0ZWQgPT09IG51bGwgfHwgdHlwZW9mIGV4cGVjdGVkICE9PSAnb2JqZWN0JykpIHtcbiAgICByZXR1cm4gc3RyaWN0ID8gYWN0dWFsID09PSBleHBlY3RlZCA6IGFjdHVhbCA9PSBleHBlY3RlZDtcblxuICAvLyBJZiBib3RoIHZhbHVlcyBhcmUgaW5zdGFuY2VzIG9mIHR5cGVkIGFycmF5cywgd3JhcCB0aGVpciB1bmRlcmx5aW5nXG4gIC8vIEFycmF5QnVmZmVycyBpbiBhIEJ1ZmZlciBlYWNoIHRvIGluY3JlYXNlIHBlcmZvcm1hbmNlXG4gIC8vIFRoaXMgb3B0aW1pemF0aW9uIHJlcXVpcmVzIHRoZSBhcnJheXMgdG8gaGF2ZSB0aGUgc2FtZSB0eXBlIGFzIGNoZWNrZWQgYnlcbiAgLy8gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyAoYWthIHBUb1N0cmluZykuIE5ldmVyIHBlcmZvcm0gYmluYXJ5XG4gIC8vIGNvbXBhcmlzb25zIGZvciBGbG9hdCpBcnJheXMsIHRob3VnaCwgc2luY2UgZS5nLiArMCA9PT0gLTAgYnV0IHRoZWlyXG4gIC8vIGJpdCBwYXR0ZXJucyBhcmUgbm90IGlkZW50aWNhbC5cbiAgfSBlbHNlIGlmIChpc1ZpZXcoYWN0dWFsKSAmJiBpc1ZpZXcoZXhwZWN0ZWQpICYmXG4gICAgICAgICAgICAgcFRvU3RyaW5nKGFjdHVhbCkgPT09IHBUb1N0cmluZyhleHBlY3RlZCkgJiZcbiAgICAgICAgICAgICAhKGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSB8fFxuICAgICAgICAgICAgICAgYWN0dWFsIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSkge1xuICAgIHJldHVybiBjb21wYXJlKG5ldyBVaW50OEFycmF5KGFjdHVhbC5idWZmZXIpLFxuICAgICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KGV4cGVjdGVkLmJ1ZmZlcikpID09PSAwO1xuXG4gIC8vIDcuNSBGb3IgYWxsIG90aGVyIE9iamVjdCBwYWlycywgaW5jbHVkaW5nIEFycmF5IG9iamVjdHMsIGVxdWl2YWxlbmNlIGlzXG4gIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZFxuICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzXG4gIC8vIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLCBlcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnlcbiAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXNcbiAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuXG4gIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAhPT0gaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIG1lbW9zID0gbWVtb3MgfHwge2FjdHVhbDogW10sIGV4cGVjdGVkOiBbXX07XG5cbiAgICB2YXIgYWN0dWFsSW5kZXggPSBtZW1vcy5hY3R1YWwuaW5kZXhPZihhY3R1YWwpO1xuICAgIGlmIChhY3R1YWxJbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChhY3R1YWxJbmRleCA9PT0gbWVtb3MuZXhwZWN0ZWQuaW5kZXhPZihleHBlY3RlZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbWVtb3MuYWN0dWFsLnB1c2goYWN0dWFsKTtcbiAgICBtZW1vcy5leHBlY3RlZC5wdXNoKGV4cGVjdGVkKTtcblxuICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xufVxuXG5mdW5jdGlvbiBvYmpFcXVpdihhLCBiLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSB7XG4gIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vIGlmIG9uZSBpcyBhIHByaW1pdGl2ZSwgdGhlIG90aGVyIG11c3QgYmUgc2FtZVxuICBpZiAodXRpbC5pc1ByaW1pdGl2ZShhKSB8fCB1dGlsLmlzUHJpbWl0aXZlKGIpKVxuICAgIHJldHVybiBhID09PSBiO1xuICBpZiAoc3RyaWN0ICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSAhPT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgdmFyIGFJc0FyZ3MgPSBpc0FyZ3VtZW50cyhhKTtcbiAgdmFyIGJJc0FyZ3MgPSBpc0FyZ3VtZW50cyhiKTtcbiAgaWYgKChhSXNBcmdzICYmICFiSXNBcmdzKSB8fCAoIWFJc0FyZ3MgJiYgYklzQXJncykpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAoYUlzQXJncykge1xuICAgIGEgPSBwU2xpY2UuY2FsbChhKTtcbiAgICBiID0gcFNsaWNlLmNhbGwoYik7XG4gICAgcmV0dXJuIF9kZWVwRXF1YWwoYSwgYiwgc3RyaWN0KTtcbiAgfVxuICB2YXIga2EgPSBvYmplY3RLZXlzKGEpO1xuICB2YXIga2IgPSBvYmplY3RLZXlzKGIpO1xuICB2YXIga2V5LCBpO1xuICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG4gIC8vIGhhc093blByb3BlcnR5KVxuICBpZiAoa2EubGVuZ3RoICE9PSBrYi5sZW5ndGgpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvL3RoZSBzYW1lIHNldCBvZiBrZXlzIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLFxuICBrYS5zb3J0KCk7XG4gIGtiLnNvcnQoKTtcbiAgLy9+fn5jaGVhcCBrZXkgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChrYVtpXSAhPT0ga2JbaV0pXG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy9lcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnkgY29ycmVzcG9uZGluZyBrZXksIGFuZFxuICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBrZXkgPSBrYVtpXTtcbiAgICBpZiAoIV9kZWVwRXF1YWwoYVtrZXldLCBiW2tleV0sIHN0cmljdCwgYWN0dWFsVmlzaXRlZE9iamVjdHMpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS5cbi8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcEVxdWFsJywgYXNzZXJ0Lm5vdERlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmFzc2VydC5ub3REZWVwU3RyaWN0RXF1YWwgPSBub3REZWVwU3RyaWN0RXF1YWw7XG5mdW5jdGlvbiBub3REZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBTdHJpY3RFcXVhbCcsIG5vdERlZXBTdHJpY3RFcXVhbCk7XG4gIH1cbn1cblxuXG4vLyA5LiBUaGUgc3RyaWN0IGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzdHJpY3QgZXF1YWxpdHksIGFzIGRldGVybWluZWQgYnkgPT09LlxuLy8gYXNzZXJ0LnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnN0cmljdEVxdWFsID0gZnVuY3Rpb24gc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDEwLiBUaGUgc3RyaWN0IG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHN0cmljdCBpbmVxdWFsaXR5LCBhc1xuLy8gZGV0ZXJtaW5lZCBieSAhPT0uICBhc3NlcnQubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkge1xuICBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xuICAgIHJldHVybiBleHBlY3RlZC50ZXN0KGFjdHVhbCk7XG4gIH1cblxuICB0cnkge1xuICAgIGlmIChhY3R1YWwgaW5zdGFuY2VvZiBleHBlY3RlZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWdub3JlLiAgVGhlIGluc3RhbmNlb2YgY2hlY2sgZG9lc24ndCB3b3JrIGZvciBhcnJvdyBmdW5jdGlvbnMuXG4gIH1cblxuICBpZiAoRXJyb3IuaXNQcm90b3R5cGVPZihleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gX3RyeUJsb2NrKGJsb2NrKSB7XG4gIHZhciBlcnJvcjtcbiAgdHJ5IHtcbiAgICBibG9jaygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3IgPSBlO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuZnVuY3Rpb24gX3Rocm93cyhzaG91bGRUaHJvdywgYmxvY2ssIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIHZhciBhY3R1YWw7XG5cbiAgaWYgKHR5cGVvZiBibG9jayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYmxvY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZXhwZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgbWVzc2FnZSA9IGV4cGVjdGVkO1xuICAgIGV4cGVjdGVkID0gbnVsbDtcbiAgfVxuXG4gIGFjdHVhbCA9IF90cnlCbG9jayhibG9jayk7XG5cbiAgbWVzc2FnZSA9IChleHBlY3RlZCAmJiBleHBlY3RlZC5uYW1lID8gJyAoJyArIGV4cGVjdGVkLm5hbWUgKyAnKS4nIDogJy4nKSArXG4gICAgICAgICAgICAobWVzc2FnZSA/ICcgJyArIG1lc3NhZ2UgOiAnLicpO1xuXG4gIGlmIChzaG91bGRUaHJvdyAmJiAhYWN0dWFsKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICB2YXIgdXNlclByb3ZpZGVkTWVzc2FnZSA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJztcbiAgdmFyIGlzVW53YW50ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgdXRpbC5pc0Vycm9yKGFjdHVhbCk7XG4gIHZhciBpc1VuZXhwZWN0ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmICFleHBlY3RlZDtcblxuICBpZiAoKGlzVW53YW50ZWRFeGNlcHRpb24gJiZcbiAgICAgIHVzZXJQcm92aWRlZE1lc3NhZ2UgJiZcbiAgICAgIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fFxuICAgICAgaXNVbmV4cGVjdGVkRXhjZXB0aW9uKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcbiAgfVxuXG4gIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmXG4gICAgICAhZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkpIHx8ICghc2hvdWxkVGhyb3cgJiYgYWN0dWFsKSkge1xuICAgIHRocm93IGFjdHVhbDtcbiAgfVxufVxuXG4vLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6XG4vLyBhc3NlcnQudGhyb3dzKGJsb2NrLCBFcnJvcl9vcHQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuICBfdGhyb3dzKHRydWUsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG59O1xuXG4vLyBFWFRFTlNJT04hIFRoaXMgaXMgYW5ub3lpbmcgdG8gd3JpdGUgb3V0c2lkZSB0aGlzIG1vZHVsZS5cbmFzc2VydC5kb2VzTm90VGhyb3cgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cyhmYWxzZSwgYmxvY2ssIGVycm9yLCBtZXNzYWdlKTtcbn07XG5cbmFzc2VydC5pZkVycm9yID0gZnVuY3Rpb24oZXJyKSB7IGlmIChlcnIpIHRocm93IGVycjsgfTtcblxudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2Fzc2VydC9hc3NlcnQuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcbmV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikge1xuICBpZiAoIWlzU3RyaW5nKGYpKSB7XG4gICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHZhciBpID0gMTtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG4gICAgc3dpdGNoICh4KSB7XG4gICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWonOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9KTtcbiAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcbiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuICAgICAgc3RyICs9ICcgJyArIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuXG4vLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuLy8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5leHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHtcbiAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cbiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn07XG5cblxudmFyIGRlYnVncyA9IHt9O1xudmFyIGRlYnVnRW52aXJvbjtcbmV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG4gICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcbiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG4gIGlmICghZGVidWdzW3NldF0pIHtcbiAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcbiAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlYnVnc1tzZXRdO1xufTtcblxuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5mdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykge1xuICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgdmFyIGN0eCA9IHtcbiAgICBzZWVuOiBbXSxcbiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuICB9O1xuICAvLyBsZWdhY3kuLi5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdO1xuICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7XG4gICAgLy8gbGVnYWN5Li4uXG4gICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzO1xuICB9IGVsc2UgaWYgKG9wdHMpIHtcbiAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG4gICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7XG4gIH1cbiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcbiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDtcblxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuICAnYm9sZCcgOiBbMSwgMjJdLFxuICAnaXRhbGljJyA6IFszLCAyM10sXG4gICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcbiAgJ2ludmVyc2UnIDogWzcsIDI3XSxcbiAgJ3doaXRlJyA6IFszNywgMzldLFxuICAnZ3JleScgOiBbOTAsIDM5XSxcbiAgJ2JsYWNrJyA6IFszMCwgMzldLFxuICAnYmx1ZScgOiBbMzQsIDM5XSxcbiAgJ2N5YW4nIDogWzM2LCAzOV0sXG4gICdncmVlbicgOiBbMzIsIDM5XSxcbiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG4gICdyZWQnIDogWzMxLCAzOV0sXG4gICd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG4gICdzcGVjaWFsJzogJ2N5YW4nLFxuICAnbnVtYmVyJzogJ3llbGxvdycsXG4gICdib29sZWFuJzogJ3llbGxvdycsXG4gICd1bmRlZmluZWQnOiAnZ3JleScsXG4gICdudWxsJzogJ2JvbGQnLFxuICAnc3RyaW5nJzogJ2dyZWVuJyxcbiAgJ2RhdGUnOiAnbWFnZW50YScsXG4gIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG4gICdyZWdleHAnOiAncmVkJ1xufTtcblxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cbiAgaWYgKHN0eWxlKSB7XG4gICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICByZXR1cm4gc3RyO1xufVxuXG5cbmZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7XG4gIHZhciBoYXNoID0ge307XG5cbiAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuICAgIGhhc2hbdmFsXSA9IHRydWU7XG4gIH0pO1xuXG4gIHJldHVybiBoYXNoO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG4gIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiZcbiAgICAgIHZhbHVlICYmXG4gICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG4gICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWxcbiAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXG4gIGlmIChjdHguc2hvd0hpZGRlbikge1xuICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIH1cblxuICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG4gIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG4gIGlmIChpc0Vycm9yKHZhbHVlKVxuICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cbiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhcnJheSA9IHRydWU7XG4gICAgYnJhY2VzID0gWydbJywgJ10nXTtcbiAgfVxuXG4gIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuICB9XG5cbiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcbiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG4gIH1cblxuICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXG4gIHZhciBvdXRwdXQ7XG4gIGlmIChhcnJheSkge1xuICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY3R4LnNlZW4ucG9wKCk7XG5cbiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChkZXNjLmdldCkge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG4gIH1cbiAgaWYgKCFzdHIpIHtcbiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG4gIH0sIDApO1xuXG4gIGlmIChsZW5ndGggPiA2MCkge1xuICAgIHJldHVybiBicmFjZXNbMF0gK1xuICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgYnJhY2VzWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuZnVuY3Rpb24gaXNBcnJheShhcikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gaXNPYmplY3QoZSkgJiZcbiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG4gICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcbn1cbmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblxuZXhwb3J0cy5pc0J1ZmZlciA9IHJlcXVpcmUoJy4vc3VwcG9ydC9pc0J1ZmZlcicpO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuZnVuY3Rpb24gcGFkKG4pIHtcbiAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG59XG5cblxudmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLFxuICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTtcblxuLy8gMjYgRmViIDE2OjE5OjM0XG5mdW5jdGlvbiB0aW1lc3RhbXAoKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKTtcbiAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcbiAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTtcbn1cblxuXG4vLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wXG5leHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTtcbn07XG5cblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZVxuICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG4gKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZVxuICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzXG4gKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlXG4gKiAgICAgcHJvdG90eXBlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG4gKi9cbmV4cG9ydHMuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5leHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkge1xuICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG4gIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gb3JpZ2luO1xufTtcblxuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdXRpbC91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQnVmZmVyKGFyZykge1xuICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG4gICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5maWxsID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi91dGlsL3N1cHBvcnQvaXNCdWZmZXJCcm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdXRpbC9+L2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTtcblxudmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuaW5oZXJpdHMoU3RyZWFtLCBFRSk7XG5TdHJlYW0uUmVhZGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMnKTtcblN0cmVhbS5Xcml0YWJsZSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS93cml0YWJsZS5qcycpO1xuU3RyZWFtLkR1cGxleCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMnKTtcblN0cmVhbS5UcmFuc2Zvcm0gPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzJyk7XG5TdHJlYW0uUGFzc1Rocm91Z2ggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcGFzc3Rocm91Z2guanMnKTtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40LnhcblN0cmVhbS5TdHJlYW0gPSBTdHJlYW07XG5cblxuXG4vLyBvbGQtc3R5bGUgc3RyZWFtcy4gIE5vdGUgdGhhdCB0aGUgcGlwZSBtZXRob2QgKHRoZSBvbmx5IHJlbGV2YW50XG4vLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLlxuXG5mdW5jdGlvbiBTdHJlYW0oKSB7XG4gIEVFLmNhbGwodGhpcyk7XG59XG5cblN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHNvdXJjZSA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgaWYgKGRlc3Qud3JpdGFibGUpIHtcbiAgICAgIGlmIChmYWxzZSA9PT0gZGVzdC53cml0ZShjaHVuaykgJiYgc291cmNlLnBhdXNlKSB7XG4gICAgICAgIHNvdXJjZS5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNvdXJjZS5vbignZGF0YScsIG9uZGF0YSk7XG5cbiAgZnVuY3Rpb24gb25kcmFpbigpIHtcbiAgICBpZiAoc291cmNlLnJlYWRhYmxlICYmIHNvdXJjZS5yZXN1bWUpIHtcbiAgICAgIHNvdXJjZS5yZXN1bWUoKTtcbiAgICB9XG4gIH1cblxuICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgLy8gc291cmNlIGdldHMgdGhlICdlbmQnIG9yICdjbG9zZScgZXZlbnRzLiAgT25seSBkZXN0LmVuZCgpIG9uY2UuXG4gIGlmICghZGVzdC5faXNTdGRpbyAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5lbmQgIT09IGZhbHNlKSkge1xuICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpO1xuICAgIHNvdXJjZS5vbignY2xvc2UnLCBvbmNsb3NlKTtcbiAgfVxuXG4gIHZhciBkaWRPbkVuZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cblxuICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuICAgIGRpZE9uRW5kID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZGVzdC5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSBkZXN0LmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8vIGRvbid0IGxlYXZlIGRhbmdsaW5nIHBpcGVzIHdoZW4gdGhlcmUgYXJlIGVycm9ycy5cbiAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuICAgIGNsZWFudXAoKTtcbiAgICBpZiAoRUUubGlzdGVuZXJDb3VudCh0aGlzLCAnZXJyb3InKSA9PT0gMCkge1xuICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS5cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7XG4gIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgLy8gcmVtb3ZlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZC5cbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuXG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcbiAgfVxuXG4gIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7XG4gIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApO1xuXG4gIGRlc3QuZW1pdCgncGlwZScsIHNvdXJjZSk7XG5cbiAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQylcbiAgcmV0dXJuIGRlc3Q7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9zdHJlYW0tYnJvd3NlcmlmeS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9ldmVudHMvZXZlbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyZWFtLWJyb3dzZXJpZnkvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzJyk7XG5leHBvcnRzLlN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuZXhwb3J0cy5SZWFkYWJsZSA9IGV4cG9ydHM7XG5leHBvcnRzLldyaXRhYmxlID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcycpO1xuZXhwb3J0cy5EdXBsZXggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX2R1cGxleC5qcycpO1xuZXhwb3J0cy5UcmFuc2Zvcm0gPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcycpO1xuZXhwb3J0cy5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMnKTtcbmlmICghcHJvY2Vzcy5icm93c2VyICYmIHByb2Nlc3MuZW52LlJFQURBQkxFX1NUUkVBTSA9PT0gJ2Rpc2FibGUnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnc3RyZWFtJyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhZGFibGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblJlYWRhYmxlLlJlYWRhYmxlU3RhdGUgPSBSZWFkYWJsZVN0YXRlO1xuXG52YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cbi8qPHJlcGxhY2VtZW50PiovXG5pZiAoIUVFLmxpc3RlbmVyQ291bnQpIEVFLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7XG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgU3RyaW5nRGVjb2RlcjtcblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGRlYnVnID0gcmVxdWlyZSgndXRpbCcpO1xuaWYgKGRlYnVnICYmIGRlYnVnLmRlYnVnbG9nKSB7XG4gIGRlYnVnID0gZGVidWcuZGVidWdsb2coJ3N0cmVhbScpO1xufSBlbHNlIHtcbiAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTtcbn1cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cbnV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7XG5cbmZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIHZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIGl0IHN0b3BzIGNhbGxpbmcgX3JlYWQoKSB0byBmaWxsIHRoZSBidWZmZXJcbiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyBcImRvbid0IGNhbGwgX3JlYWQgcHJlZW1wdGl2ZWx5IGV2ZXJcIlxuICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuICB2YXIgZGVmYXVsdEh3bSA9IG9wdGlvbnMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtO1xuXG4gIC8vIGNhc3QgdG8gaW50cy5cbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfn50aGlzLmhpZ2hXYXRlck1hcms7XG5cbiAgdGhpcy5idWZmZXIgPSBbXTtcbiAgdGhpcy5sZW5ndGggPSAwO1xuICB0aGlzLnBpcGVzID0gbnVsbDtcbiAgdGhpcy5waXBlc0NvdW50ID0gMDtcbiAgdGhpcy5mbG93aW5nID0gbnVsbDtcbiAgdGhpcy5lbmRlZCA9IGZhbHNlO1xuICB0aGlzLmVuZEVtaXR0ZWQgPSBmYWxzZTtcbiAgdGhpcy5yZWFkaW5nID0gZmFsc2U7XG5cbiAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG4gIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG4gIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG4gIHRoaXMuc3luYyA9IHRydWU7XG5cbiAgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXlcbiAgLy8gdGhhdCB3ZSdyZSBhd2FpdGluZyBhICdyZWFkYWJsZScgZXZlbnQgZW1pc3Npb24uXG4gIHRoaXMubmVlZFJlYWRhYmxlID0gZmFsc2U7XG4gIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gIHRoaXMucmVhZGFibGVMaXN0ZW5pbmcgPSBmYWxzZTtcblxuXG4gIC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvXG4gIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5XG4gIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXG4gIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpXG4gICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGU7XG5cbiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG4gIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgLy8gd2hlbiBwaXBpbmcsIHdlIG9ubHkgY2FyZSBhYm91dCAncmVhZGFibGUnIGV2ZW50cyB0aGF0IGhhcHBlblxuICAvLyBhZnRlciByZWFkKClpbmcgYWxsIHRoZSBieXRlcyBhbmQgbm90IGdldHRpbmcgYW55IHB1c2hiYWNrLlxuICB0aGlzLnJhbk91dCA9IGZhbHNlO1xuXG4gIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG4gIHRoaXMuYXdhaXREcmFpbiA9IDA7XG5cbiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG4gIGlmIChvcHRpb25zLmVuY29kaW5nKSB7XG4gICAgaWYgKCFTdHJpbmdEZWNvZGVyKVxuICAgICAgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7XG4gICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpXG4gICAgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTtcblxuICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuXG4gIFN0cmVhbS5jYWxsKHRoaXMpO1xufVxuXG4vLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci5cbi8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LFxuLy8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZFxuLy8gd3JpdGUoKSBzb21lIG1vcmUuXG5SZWFkYWJsZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXG4gIGlmICh1dGlsLmlzU3RyaW5nKGNodW5rKSAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUuZW5jb2RpbmcpIHtcbiAgICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpO1xuICAgICAgZW5jb2RpbmcgPSAnJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBmYWxzZSk7XG59O1xuXG4vLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKVxuUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbihjaHVuaykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssICcnLCB0cnVlKTtcbn07XG5cbmZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250KSB7XG4gIHZhciBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspO1xuICBpZiAoZXIpIHtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gIH0gZWxzZSBpZiAodXRpbC5pc051bGxPclVuZGVmaW5lZChjaHVuaykpIHtcbiAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgaWYgKCFzdGF0ZS5lbmRlZClcbiAgICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7XG4gIH0gZWxzZSBpZiAoc3RhdGUub2JqZWN0TW9kZSB8fCBjaHVuayAmJiBjaHVuay5sZW5ndGggPiAwKSB7XG4gICAgaWYgKHN0YXRlLmVuZGVkICYmICFhZGRUb0Zyb250KSB7XG4gICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKTtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGUpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kRW1pdHRlZCAmJiBhZGRUb0Zyb250KSB7XG4gICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhYWRkVG9Gcm9udCAmJiAhZW5jb2RpbmcpXG4gICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG5cbiAgICAgIGlmICghYWRkVG9Gcm9udClcbiAgICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBpZiB3ZSB3YW50IHRoZSBkYXRhIG5vdywganVzdCBlbWl0IGl0LlxuICAgICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5zeW5jKSB7XG4gICAgICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICAgICAgICBzdHJlYW0ucmVhZCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICAgICAgaWYgKGFkZFRvRnJvbnQpXG4gICAgICAgICAgc3RhdGUuYnVmZmVyLnVuc2hpZnQoY2h1bmspO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuXG4gICAgICAgIGlmIChzdGF0ZS5uZWVkUmVhZGFibGUpXG4gICAgICAgICAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG4gICAgICB9XG5cbiAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIG5lZWRNb3JlRGF0YShzdGF0ZSk7XG59XG5cblxuXG4vLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLlxuLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWVcbi8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLFxuLy8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGFcbi8vIHJlYWRhYmxlIGV2ZW50LCBhbmQgdGhlIHVzZXIgY2FsbGVkIHJlYWQobGFyZ2VOdW1iZXIpIHN1Y2ggdGhhdFxuLy8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXJcbi8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuXG5mdW5jdGlvbiBuZWVkTW9yZURhdGEoc3RhdGUpIHtcbiAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJlxuICAgICAgICAgKHN0YXRlLm5lZWRSZWFkYWJsZSB8fFxuICAgICAgICAgIHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHxcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPT09IDApO1xufVxuXG4vLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cblJlYWRhYmxlLnByb3RvdHlwZS5zZXRFbmNvZGluZyA9IGZ1bmN0aW9uKGVuYykge1xuICBpZiAoIVN0cmluZ0RlY29kZXIpXG4gICAgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDEyOE1CXG52YXIgTUFYX0hXTSA9IDB4ODAwMDAwO1xuZnVuY3Rpb24gcm91bmRVcFRvTmV4dFBvd2VyT2YyKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDJcbiAgICBuLS07XG4gICAgZm9yICh2YXIgcCA9IDE7IHAgPCAzMjsgcCA8PD0gMSkgbiB8PSBuID4+IHA7XG4gICAgbisrO1xuICB9XG4gIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpXG4gICAgcmV0dXJuIDA7XG5cbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpXG4gICAgcmV0dXJuIG4gPT09IDAgPyAwIDogMTtcblxuICBpZiAoaXNOYU4obikgfHwgdXRpbC5pc051bGwobikpIHtcbiAgICAvLyBvbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWVcbiAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5idWZmZXIubGVuZ3RoKVxuICAgICAgcmV0dXJuIHN0YXRlLmJ1ZmZlclswXS5sZW5ndGg7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbiAgfVxuXG4gIGlmIChuIDw9IDApXG4gICAgcmV0dXJuIDA7XG5cbiAgLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIHRhcmdldCBidWZmZXIgbGV2ZWwsXG4gIC8vIHRoZW4gcmFpc2UgdGhlIHdhdGVyIG1hcmsuICBCdW1wIHVwIHRvIHRoZSBuZXh0IGhpZ2hlc3RcbiAgLy8gcG93ZXIgb2YgMiwgdG8gcHJldmVudCBpbmNyZWFzaW5nIGl0IGV4Y2Vzc2l2ZWx5IGluIHRpbnlcbiAgLy8gYW1vdW50cy5cbiAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKVxuICAgIHN0YXRlLmhpZ2hXYXRlck1hcmsgPSByb3VuZFVwVG9OZXh0UG93ZXJPZjIobik7XG5cbiAgLy8gZG9uJ3QgaGF2ZSB0aGF0IG11Y2guICByZXR1cm4gbnVsbCwgdW5sZXNzIHdlJ3ZlIGVuZGVkLlxuICBpZiAobiA+IHN0YXRlLmxlbmd0aCkge1xuICAgIGlmICghc3RhdGUuZW5kZWQpIHtcbiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gIH1cblxuICByZXR1cm4gbjtcbn1cblxuLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy5cblJlYWRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24obikge1xuICBkZWJ1ZygncmVhZCcsIG4pO1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgbk9yaWcgPSBuO1xuXG4gIGlmICghdXRpbC5pc051bWJlcihuKSB8fCBuID4gMClcbiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblxuICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXJcbiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uXG4gIGlmIChuID09PSAwICYmXG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgJiZcbiAgICAgIChzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5lbmRlZCkpIHtcbiAgICBkZWJ1ZygncmVhZDogZW1pdFJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5lbmRlZCk7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZClcbiAgICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuICAgIGVsc2VcbiAgICAgIGVtaXRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTtcblxuICAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMClcbiAgICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZVxuICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW5cbiAgLy8gc3ludGhldGljIHN0cmVhbSBjYXNlcywgc3VjaCBhcyBwYXNzdGhyb3VnaCBzdHJlYW1zLCBfcmVhZFxuICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlXG4gIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuXG4gIC8vIGJlZm9yZSB0aGVyZSB3YXMgKm5vdCogZW5vdWdoLlxuICAvL1xuICAvLyBTbywgdGhlIHN0ZXBzIGFyZTpcbiAgLy8gMS4gRmlndXJlIG91dCB3aGF0IHRoZSBzdGF0ZSBvZiB0aGluZ3Mgd2lsbCBiZSBhZnRlciB3ZSBkb1xuICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLlxuICAvL1xuICAvLyAyLiBJZiB0aGF0IHJlc3VsdGluZyBzdGF0ZSB3aWxsIHRyaWdnZXIgYSBfcmVhZCwgdGhlbiBjYWxsIF9yZWFkLlxuICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXNcbiAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuXG4gIC8vIHRoYXQgdGhlIFJlYWRhYmxlIGNsYXNzIHNob3VsZCBiZWhhdmUgaW1wcm9wZXJseSwgYXMgc3RyZWFtcyBhcmVcbiAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy5cbiAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsXG4gIC8vIGhhcyByZXR1cm5lZCB5ZXQpLCBzbyB0aGF0IHdlIGtub3cgd2hldGhlciBvciBub3QgaXQncyBzYWZlIHRvIGVtaXRcbiAgLy8gJ3JlYWRhYmxlJyBldGMuXG4gIC8vXG4gIC8vIDMuIEFjdHVhbGx5IHB1bGwgdGhlIHJlcXVlc3RlZCBjaHVua3Mgb3V0IG9mIHRoZSBidWZmZXIgYW5kIHJldHVybi5cblxuICAvLyBpZiB3ZSBuZWVkIGEgcmVhZGFibGUgZXZlbnQsIHRoZW4gd2UgbmVlZCB0byBkbyBzb21lIHJlYWRpbmcuXG4gIHZhciBkb1JlYWQgPSBzdGF0ZS5uZWVkUmVhZGFibGU7XG4gIGRlYnVnKCduZWVkIHJlYWRhYmxlJywgZG9SZWFkKTtcblxuICAvLyBpZiB3ZSBjdXJyZW50bHkgaGF2ZSBsZXNzIHRoYW4gdGhlIGhpZ2hXYXRlck1hcmssIHRoZW4gYWxzbyByZWFkIHNvbWVcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5sZW5ndGggLSBuIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykge1xuICAgIGRvUmVhZCA9IHRydWU7XG4gICAgZGVidWcoJ2xlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrJywgZG9SZWFkKTtcbiAgfVxuXG4gIC8vIGhvd2V2ZXIsIGlmIHdlJ3ZlIGVuZGVkLCB0aGVuIHRoZXJlJ3Mgbm8gcG9pbnQsIGFuZCBpZiB3ZSdyZSBhbHJlYWR5XG4gIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS5cbiAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHtcbiAgICBkb1JlYWQgPSBmYWxzZTtcbiAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7XG4gIH1cblxuICBpZiAoZG9SZWFkKSB7XG4gICAgZGVidWcoJ2RvIHJlYWQnKTtcbiAgICBzdGF0ZS5yZWFkaW5nID0gdHJ1ZTtcbiAgICBzdGF0ZS5zeW5jID0gdHJ1ZTtcbiAgICAvLyBpZiB0aGUgbGVuZ3RoIGlzIGN1cnJlbnRseSB6ZXJvLCB0aGVuIHdlICpuZWVkKiBhIHJlYWRhYmxlIGV2ZW50LlxuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApXG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2RcbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuICAgIHN0YXRlLnN5bmMgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsXG4gIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cbiAgaWYgKGRvUmVhZCAmJiAhc3RhdGUucmVhZGluZylcbiAgICBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpO1xuXG4gIHZhciByZXQ7XG4gIGlmIChuID4gMClcbiAgICByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7XG4gIGVsc2VcbiAgICByZXQgPSBudWxsO1xuXG4gIGlmICh1dGlsLmlzTnVsbChyZXQpKSB7XG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICBuID0gMDtcbiAgfVxuXG4gIHN0YXRlLmxlbmd0aCAtPSBuO1xuXG4gIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vd1xuICAvLyBhcyBzb29uIGFzIHdlICpkbyogZ2V0IHNvbWV0aGluZyBpbnRvIHRoZSBidWZmZXIuXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLmVuZGVkKVxuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLlxuICBpZiAobk9yaWcgIT09IG4gJiYgc3RhdGUuZW5kZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKVxuICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuXG4gIGlmICghdXRpbC5pc051bGwocmV0KSlcbiAgICB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpO1xuXG4gIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG4gIHZhciBlciA9IG51bGw7XG4gIGlmICghdXRpbC5pc0J1ZmZlcihjaHVuaykgJiZcbiAgICAgICF1dGlsLmlzU3RyaW5nKGNodW5rKSAmJlxuICAgICAgIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspICYmXG4gICAgICAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICB9XG4gIHJldHVybiBlcjtcbn1cblxuXG5mdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7XG4gICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7XG4gICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG4gICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gICAgfVxuICB9XG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcblxuICAvLyBlbWl0ICdyZWFkYWJsZScgbm93IHRvIG1ha2Ugc3VyZSBpdCBnZXRzIHBpY2tlZCB1cC5cbiAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG59XG5cbi8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlclxuLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyXG4vLyBhIG5leHRUaWNrIHJlY3Vyc2lvbiB3YXJuaW5nLCBidXQgdGhhdCdzIG5vdCBzbyBiYWQuXG5mdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgc3RhdGUubmVlZFJlYWRhYmxlID0gZmFsc2U7XG4gIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpO1xuICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgaWYgKHN0YXRlLnN5bmMpXG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gICAgICB9KTtcbiAgICBlbHNlXG4gICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHtcbiAgZGVidWcoJ2VtaXQgcmVhZGFibGUnKTtcbiAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG4gIGZsb3coc3RyZWFtKTtcbn1cblxuXG4vLyBhdCB0aGlzIHBvaW50LCB0aGUgdXNlciBoYXMgcHJlc3VtYWJseSBzZWVuIHRoZSAncmVhZGFibGUnIGV2ZW50LFxuLy8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZFxuLy8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWZcbi8vIGl0J3MgaW4gcHJvZ3Jlc3MuXG4vLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLFxuLy8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7XG4gICAgc3RhdGUucmVhZGluZ01vcmUgPSB0cnVlO1xuICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBsZW4gPSBzdGF0ZS5sZW5ndGg7XG4gIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUuZW5kZWQgJiZcbiAgICAgICAgIHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcbiAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTtcbiAgICBzdHJlYW0ucmVhZCgwKTtcbiAgICBpZiAobGVuID09PSBzdGF0ZS5sZW5ndGgpXG4gICAgICAvLyBkaWRuJ3QgZ2V0IGFueSBkYXRhLCBzdG9wIHNwaW5uaW5nLlxuICAgICAgYnJlYWs7XG4gICAgZWxzZVxuICAgICAgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB9XG4gIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7XG59XG5cbi8vIGFic3RyYWN0IG1ldGhvZC4gIHRvIGJlIG92ZXJyaWRkZW4gaW4gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguXG4vLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgXCJsZW5ndGhcIiBpcyBzb21ld2hhdFxuLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLlxuUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24obikge1xuICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7XG59O1xuXG5SZWFkYWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIHBpcGVPcHRzKSB7XG4gIHZhciBzcmMgPSB0aGlzO1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXG4gIHN3aXRjaCAoc3RhdGUucGlwZXNDb3VudCkge1xuICAgIGNhc2UgMDpcbiAgICAgIHN0YXRlLnBpcGVzID0gZGVzdDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTpcbiAgICAgIHN0YXRlLnBpcGVzID0gW3N0YXRlLnBpcGVzLCBkZXN0XTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgc3RhdGUucGlwZXNDb3VudCArPSAxO1xuICBkZWJ1ZygncGlwZSBjb3VudD0lZCBvcHRzPSVqJywgc3RhdGUucGlwZXNDb3VudCwgcGlwZU9wdHMpO1xuXG4gIHZhciBkb0VuZCA9ICghcGlwZU9wdHMgfHwgcGlwZU9wdHMuZW5kICE9PSBmYWxzZSkgJiZcbiAgICAgICAgICAgICAgZGVzdCAhPT0gcHJvY2Vzcy5zdGRvdXQgJiZcbiAgICAgICAgICAgICAgZGVzdCAhPT0gcHJvY2Vzcy5zdGRlcnI7XG5cbiAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IGNsZWFudXA7XG4gIGlmIChzdGF0ZS5lbmRFbWl0dGVkKVxuICAgIHByb2Nlc3MubmV4dFRpY2soZW5kRm4pO1xuICBlbHNlXG4gICAgc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTtcblxuICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ29udW5waXBlJyk7XG4gICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBkZWJ1Zygnb25lbmQnKTtcbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cbiAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlclxuICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKClcbiAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXNcbiAgLy8gdG9vIHNsb3cuXG4gIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTtcbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIGRlYnVnKCdjbGVhbnVwJyk7XG4gICAgLy8gY2xlYW51cCBldmVudCBoYW5kbGVycyBvbmNlIHRoZSBwaXBlIGlzIGJyb2tlblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXG4gICAgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpc1xuICAgIC8vIHNwZWNpZmljIHdyaXRlciwgdGhlbiBpdCB3b3VsZCBjYXVzZSBpdCB0byBuZXZlciBzdGFydFxuICAgIC8vIGZsb3dpbmcgYWdhaW4uXG4gICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LlxuICAgIC8vIElmIHdlIGRvbid0IGtub3csIHRoZW4gYXNzdW1lIHRoYXQgd2UgYXJlIHdhaXRpbmcgZm9yIG9uZS5cbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiAmJlxuICAgICAgICAoIWRlc3QuX3dyaXRhYmxlU3RhdGUgfHwgZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKVxuICAgICAgb25kcmFpbigpO1xuICB9XG5cbiAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTtcbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgZGVidWcoJ29uZGF0YScpO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBpZiAoZmFsc2UgPT09IHJldCkge1xuICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsXG4gICAgICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbik7XG4gICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrO1xuICAgICAgc3JjLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIGRlc3QgaGFzIGFuIGVycm9yLCB0aGVuIHN0b3AgcGlwaW5nIGludG8gaXQuXG4gIC8vIGhvd2V2ZXIsIGRvbid0IHN1cHByZXNzIHRoZSB0aHJvd2luZyBiZWhhdmlvciBmb3IgdGhpcy5cbiAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuICAgIGRlYnVnKCdvbmVycm9yJywgZXIpO1xuICAgIHVucGlwZSgpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgaWYgKEVFLmxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApXG4gICAgICBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9XG4gIC8vIFRoaXMgaXMgYSBicnV0YWxseSB1Z2x5IGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXJcbiAgLy8gaXMgYXR0YWNoZWQgYmVmb3JlIGFueSB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy5cbiAgaWYgKCFkZXN0Ll9ldmVudHMgfHwgIWRlc3QuX2V2ZW50cy5lcnJvcilcbiAgICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuICBlbHNlIGlmIChpc0FycmF5KGRlc3QuX2V2ZW50cy5lcnJvcikpXG4gICAgZGVzdC5fZXZlbnRzLmVycm9yLnVuc2hpZnQob25lcnJvcik7XG4gIGVsc2VcbiAgICBkZXN0Ll9ldmVudHMuZXJyb3IgPSBbb25lcnJvciwgZGVzdC5fZXZlbnRzLmVycm9yXTtcblxuXG5cbiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuICBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcbiAgICBkZWJ1Zygnb25maW5pc2gnKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpO1xuXG4gIGZ1bmN0aW9uIHVucGlwZSgpIHtcbiAgICBkZWJ1ZygndW5waXBlJyk7XG4gICAgc3JjLnVucGlwZShkZXN0KTtcbiAgfVxuXG4gIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvXG4gIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7XG5cbiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LlxuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcbiAgICBzcmMucmVzdW1lKCk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlO1xuICAgIGRlYnVnKCdwaXBlT25EcmFpbicsIHN0YXRlLmF3YWl0RHJhaW4pO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKVxuICAgICAgc3RhdGUuYXdhaXREcmFpbi0tO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFLmxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7XG4gICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcbiAgICAgIGZsb3coc3JjKTtcbiAgICB9XG4gIH07XG59XG5cblxuUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uKGRlc3QpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICAvLyBpZiB3ZSdyZSBub3QgcGlwaW5nIGFueXdoZXJlLCB0aGVuIGRvIG5vdGhpbmcuXG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS5cbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHtcbiAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS5cbiAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcylcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKCFkZXN0KVxuICAgICAgZGVzdCA9IHN0YXRlLnBpcGVzO1xuXG4gICAgLy8gZ290IGEgbWF0Y2guXG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICBpZiAoZGVzdClcbiAgICAgIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBzbG93IGNhc2UuIG11bHRpcGxlIHBpcGUgZGVzdGluYXRpb25zLlxuXG4gIGlmICghZGVzdCkge1xuICAgIC8vIHJlbW92ZSBhbGwuXG4gICAgdmFyIGRlc3RzID0gc3RhdGUucGlwZXM7XG4gICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7XG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuXG4gIHZhciBpID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpID09PSAtMSlcbiAgICByZXR1cm4gdGhpcztcblxuICBzdGF0ZS5waXBlcy5zcGxpY2UoaSwgMSk7XG4gIHN0YXRlLnBpcGVzQ291bnQgLT0gMTtcbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpXG4gICAgc3RhdGUucGlwZXMgPSBzdGF0ZS5waXBlc1swXTtcblxuICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gc2V0IHVwIGRhdGEgZXZlbnRzIGlmIHRoZXkgYXJlIGFza2VkIGZvclxuLy8gRW5zdXJlIHJlYWRhYmxlIGxpc3RlbmVycyBldmVudHVhbGx5IGdldCBzb21ldGhpbmdcblJlYWRhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG5cbiAgLy8gSWYgbGlzdGVuaW5nIHRvIGRhdGEsIGFuZCBpdCBoYXMgbm90IGV4cGxpY2l0bHkgYmVlbiBwYXVzZWQsXG4gIC8vIHRoZW4gY2FsbCByZXN1bWUgdG8gc3RhcnQgdGhlIGZsb3cgb2YgZGF0YSBvbiB0aGUgbmV4dCB0aWNrLlxuICBpZiAoZXYgPT09ICdkYXRhJyAmJiBmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7XG4gICAgdGhpcy5yZXN1bWUoKTtcbiAgfVxuXG4gIGlmIChldiA9PT0gJ3JlYWRhYmxlJyAmJiB0aGlzLnJlYWRhYmxlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAoIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nKSB7XG4gICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHRydWU7XG4gICAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRlYnVnKCdyZWFkYWJsZSBuZXh0dGljayByZWFkIDAnKTtcbiAgICAgICAgICBzZWxmLnJlYWQoMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMsIHN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufTtcblJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjtcblxuLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSVxuLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLlxuUmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncmVzdW1lJyk7XG4gICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG4gICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpO1xuICAgICAgdGhpcy5yZWFkKDApO1xuICAgIH1cbiAgICByZXN1bWUodGhpcywgc3RhdGUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpIHtcbiAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlO1xuICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICByZXN1bWVfKHN0cmVhbSwgc3RhdGUpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkge1xuICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTtcbiAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpO1xuICBmbG93KHN0cmVhbSk7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKVxuICAgIHN0cmVhbS5yZWFkKDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2NhbGwgcGF1c2UgZmxvd2luZz0laicsIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7XG4gIGlmIChmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3BhdXNlJyk7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gZmFsc2U7XG4gICAgdGhpcy5lbWl0KCdwYXVzZScpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gZmxvdyhzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBkZWJ1ZygnZmxvdycsIHN0YXRlLmZsb3dpbmcpO1xuICBpZiAoc3RhdGUuZmxvd2luZykge1xuICAgIGRvIHtcbiAgICAgIHZhciBjaHVuayA9IHN0cmVhbS5yZWFkKCk7XG4gICAgfSB3aGlsZSAobnVsbCAhPT0gY2h1bmsgJiYgc3RhdGUuZmxvd2luZyk7XG4gIH1cbn1cblxuLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cbi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cbi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHBhdXNlZCA9IGZhbHNlO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBlbmQnKTtcbiAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHtcbiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKVxuICAgICAgICBzZWxmLnB1c2goY2h1bmspO1xuICAgIH1cblxuICAgIHNlbGYucHVzaChudWxsKTtcbiAgfSk7XG5cbiAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24oY2h1bmspIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBkYXRhJyk7XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpXG4gICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuICAgIGlmICghY2h1bmsgfHwgIXN0YXRlLm9iamVjdE1vZGUgJiYgIWNodW5rLmxlbmd0aClcbiAgICAgIHJldHVybjtcblxuICAgIHZhciByZXQgPSBzZWxmLnB1c2goY2h1bmspO1xuICAgIGlmICghcmV0KSB7XG4gICAgICBwYXVzZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLnBhdXNlKCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBwcm94eSBhbGwgdGhlIG90aGVyIG1ldGhvZHMuXG4gIC8vIGltcG9ydGFudCB3aGVuIHdyYXBwaW5nIGZpbHRlcnMgYW5kIGR1cGxleGVzLlxuICBmb3IgKHZhciBpIGluIHN0cmVhbSkge1xuICAgIGlmICh1dGlsLmlzRnVuY3Rpb24oc3RyZWFtW2ldKSAmJiB1dGlsLmlzVW5kZWZpbmVkKHRoaXNbaV0pKSB7XG4gICAgICB0aGlzW2ldID0gZnVuY3Rpb24obWV0aG9kKSB7IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgIH19KGkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy5cbiAgdmFyIGV2ZW50cyA9IFsnZXJyb3InLCAnY2xvc2UnLCAnZGVzdHJveScsICdwYXVzZScsICdyZXN1bWUnXTtcbiAgZm9yRWFjaChldmVudHMsIGZ1bmN0aW9uKGV2KSB7XG4gICAgc3RyZWFtLm9uKGV2LCBzZWxmLmVtaXQuYmluZChzZWxmLCBldikpO1xuICB9KTtcblxuICAvLyB3aGVuIHdlIHRyeSB0byBjb25zdW1lIHNvbWUgbW9yZSBieXRlcywgc2ltcGx5IHVucGF1c2UgdGhlXG4gIC8vIHVuZGVybHlpbmcgc3RyZWFtLlxuICBzZWxmLl9yZWFkID0gZnVuY3Rpb24obikge1xuICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7XG4gICAgaWYgKHBhdXNlZCkge1xuICAgICAgcGF1c2VkID0gZmFsc2U7XG4gICAgICBzdHJlYW0ucmVzdW1lKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBzZWxmO1xufTtcblxuXG5cbi8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS5cblJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0O1xuXG4vLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuXG4vLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LlxuZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHtcbiAgdmFyIGxpc3QgPSBzdGF0ZS5idWZmZXI7XG4gIHZhciBsZW5ndGggPSBzdGF0ZS5sZW5ndGg7XG4gIHZhciBzdHJpbmdNb2RlID0gISFzdGF0ZS5kZWNvZGVyO1xuICB2YXIgb2JqZWN0TW9kZSA9ICEhc3RhdGUub2JqZWN0TW9kZTtcbiAgdmFyIHJldDtcblxuICAvLyBub3RoaW5nIGluIHRoZSBsaXN0LCBkZWZpbml0ZWx5IGVtcHR5LlxuICBpZiAobGlzdC5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIG51bGw7XG5cbiAgaWYgKGxlbmd0aCA9PT0gMClcbiAgICByZXQgPSBudWxsO1xuICBlbHNlIGlmIChvYmplY3RNb2RlKVxuICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcbiAgZWxzZSBpZiAoIW4gfHwgbiA+PSBsZW5ndGgpIHtcbiAgICAvLyByZWFkIGl0IGFsbCwgdHJ1bmNhdGUgdGhlIGFycmF5LlxuICAgIGlmIChzdHJpbmdNb2RlKVxuICAgICAgcmV0ID0gbGlzdC5qb2luKCcnKTtcbiAgICBlbHNlXG4gICAgICByZXQgPSBCdWZmZXIuY29uY2F0KGxpc3QsIGxlbmd0aCk7XG4gICAgbGlzdC5sZW5ndGggPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIHJlYWQganVzdCBzb21lIG9mIGl0LlxuICAgIGlmIChuIDwgbGlzdFswXS5sZW5ndGgpIHtcbiAgICAgIC8vIGp1c3QgdGFrZSBhIHBhcnQgb2YgdGhlIGZpcnN0IGxpc3QgaXRlbS5cbiAgICAgIC8vIHNsaWNlIGlzIHRoZSBzYW1lIGZvciBidWZmZXJzIGFuZCBzdHJpbmdzLlxuICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07XG4gICAgICByZXQgPSBidWYuc2xpY2UoMCwgbik7XG4gICAgICBsaXN0WzBdID0gYnVmLnNsaWNlKG4pO1xuICAgIH0gZWxzZSBpZiAobiA9PT0gbGlzdFswXS5sZW5ndGgpIHtcbiAgICAgIC8vIGZpcnN0IGxpc3QgaXMgYSBwZXJmZWN0IG1hdGNoXG4gICAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbXBsZXggY2FzZS5cbiAgICAgIC8vIHdlIGhhdmUgZW5vdWdoIHRvIGNvdmVyIGl0LCBidXQgaXQgc3BhbnMgcGFzdCB0aGUgZmlyc3QgYnVmZmVyLlxuICAgICAgaWYgKHN0cmluZ01vZGUpXG4gICAgICAgIHJldCA9ICcnO1xuICAgICAgZWxzZVxuICAgICAgICByZXQgPSBuZXcgQnVmZmVyKG4pO1xuXG4gICAgICB2YXIgYyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbCAmJiBjIDwgbjsgaSsrKSB7XG4gICAgICAgIHZhciBidWYgPSBsaXN0WzBdO1xuICAgICAgICB2YXIgY3B5ID0gTWF0aC5taW4obiAtIGMsIGJ1Zi5sZW5ndGgpO1xuXG4gICAgICAgIGlmIChzdHJpbmdNb2RlKVxuICAgICAgICAgIHJldCArPSBidWYuc2xpY2UoMCwgY3B5KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGJ1Zi5jb3B5KHJldCwgYywgMCwgY3B5KTtcblxuICAgICAgICBpZiAoY3B5IDwgYnVmLmxlbmd0aClcbiAgICAgICAgICBsaXN0WzBdID0gYnVmLnNsaWNlKGNweSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG5cbiAgICAgICAgYyArPSBjcHk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZW5kUmVhZGFibGUoc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcblxuICAvLyBJZiB3ZSBnZXQgaGVyZSBiZWZvcmUgY29uc3VtaW5nIGFsbCB0aGUgYnl0ZXMsIHRoZW4gdGhhdCBpcyBhXG4gIC8vIGJ1ZyBpbiBub2RlLiAgU2hvdWxkIG5ldmVyIGhhcHBlbi5cbiAgaWYgKHN0YXRlLmxlbmd0aCA+IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKCdlbmRSZWFkYWJsZSBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbScpO1xuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCkge1xuICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG4gICAgICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHN0YXRlLmVuZEVtaXR0ZWQgPSB0cnVlO1xuICAgICAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICAgICAgc3RyZWFtLmVtaXQoJ2VuZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZih4c1tpXSwgaSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5kZXhPZiAoeHMsIHgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoeHNbaV0gPT09IHgpIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9+L2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXG5mdW5jdGlvbiBpc0FycmF5KGFyZykge1xuICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vY29yZS11dGlsLWlzL2xpYi91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuXG4vLyBTaW5jZSBKUyBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgcHJvdG90eXBhbCBpbmhlcml0YW5jZSwgdGhpcyBjbGFzc1xuLy8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbVxuLy8gV3JpdGFibGUuXG5cbm1vZHVsZS5leHBvcnRzID0gRHVwbGV4O1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICByZXR1cm4ga2V5cztcbn1cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIFJlYWRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3JlYWRhYmxlJyk7XG52YXIgV3JpdGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fd3JpdGFibGUnKTtcblxudXRpbC5pbmhlcml0cyhEdXBsZXgsIFJlYWRhYmxlKTtcblxuZm9yRWFjaChvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSksIGZ1bmN0aW9uKG1ldGhvZCkge1xuICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSlcbiAgICBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTtcbn0pO1xuXG5mdW5jdGlvbiBEdXBsZXgob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSlcbiAgICByZXR1cm4gbmV3IER1cGxleChvcHRpb25zKTtcblxuICBSZWFkYWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICBXcml0YWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKVxuICAgIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSlcbiAgICB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cbiAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTtcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSlcbiAgICB0aGlzLmFsbG93SGFsZk9wZW4gPSBmYWxzZTtcblxuICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTtcbn1cblxuLy8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlclxuZnVuY3Rpb24gb25lbmQoKSB7XG4gIC8vIGlmIHdlIGFsbG93IGhhbGYtb3BlbiBzdGF0ZSwgb3IgaWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsXG4gIC8vIHRoZW4gd2UncmUgb2suXG4gIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZClcbiAgICByZXR1cm47XG5cbiAgLy8gbm8gbW9yZSBkYXRhIGNhbiBiZSB3cml0dGVuLlxuICAvLyBCdXQgYWxsb3cgbW9yZSB3cml0ZXMgdG8gaGFwcGVuIGluIHRoaXMgdGljay5cbiAgcHJvY2Vzcy5uZXh0VGljayh0aGlzLmVuZC5iaW5kKHRoaXMpKTtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaCAoeHMsIGYpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmKHhzW2ldLCBpKTtcbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gQSBiaXQgc2ltcGxlciB0aGFuIHJlYWRhYmxlIHN0cmVhbXMuXG4vLyBJbXBsZW1lbnQgYW4gYXN5bmMgLl93cml0ZShjaHVuaywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbFxuLy8gdGhlIGRyYWluIGV2ZW50IGVtaXNzaW9uIGFuZCBidWZmZXJpbmcuXG5cbm1vZHVsZS5leHBvcnRzID0gV3JpdGFibGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbldyaXRhYmxlLldyaXRhYmxlU3RhdGUgPSBXcml0YWJsZVN0YXRlO1xuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuXG51dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pO1xuXG5mdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuICB0aGlzLmNhbGxiYWNrID0gY2I7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIHZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZVxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIHRoYXQgd2UgYWx3YXlzIHJldHVybiBmYWxzZSBpZlxuICAvLyB0aGUgZW50aXJlIGJ1ZmZlciBpcyBub3QgZmx1c2hlZCBpbW1lZGlhdGVseSBvbiB3cml0ZSgpXG4gIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gb3B0aW9ucy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IChod20gfHwgaHdtID09PSAwKSA/IGh3bSA6IGRlZmF1bHRId207XG5cbiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG4gIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cbiAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleClcbiAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyBjYXN0IHRvIGludHMuXG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrO1xuXG4gIHRoaXMubmVlZERyYWluID0gZmFsc2U7XG4gIC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpXG4gIHRoaXMuZW5kaW5nID0gZmFsc2U7XG4gIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWRcbiAgdGhpcy5lbmRlZCA9IGZhbHNlO1xuICAvLyB3aGVuICdmaW5pc2gnIGlzIGVtaXR0ZWRcbiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIHNob3VsZCB3ZSBkZWNvZGUgc3RyaW5ncyBpbnRvIGJ1ZmZlcnMgYmVmb3JlIHBhc3NpbmcgdG8gX3dyaXRlP1xuICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmdcbiAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC5cbiAgdmFyIG5vRGVjb2RlID0gb3B0aW9ucy5kZWNvZGVTdHJpbmdzID09PSBmYWxzZTtcbiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIG5vdCBhbiBhY3R1YWwgYnVmZmVyIHdlIGtlZXAgdHJhY2sgb2YsIGJ1dCBhIG1lYXN1cmVtZW50XG4gIC8vIG9mIGhvdyBtdWNoIHdlJ3JlIHdhaXRpbmcgdG8gZ2V0IHB1c2hlZCB0byBzb21lIHVuZGVybHlpbmdcbiAgLy8gc29ja2V0IG9yIGZpbGUuXG4gIHRoaXMubGVuZ3RoID0gMDtcblxuICAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLlxuICB0aGlzLndyaXRpbmcgPSBmYWxzZTtcblxuICAvLyB3aGVuIHRydWUgYWxsIHdyaXRlcyB3aWxsIGJlIGJ1ZmZlcmVkIHVudGlsIC51bmNvcmsoKSBjYWxsXG4gIHRoaXMuY29ya2VkID0gMDtcblxuICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSxcbiAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnlcbiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgXCJsYXRlclwiIHNob3VsZCBnZW5lcmFsbHkgYWxzb1xuICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC5cbiAgdGhpcy5zeW5jID0gdHJ1ZTtcblxuICAvLyBhIGZsYWcgdG8ga25vdyBpZiB3ZSdyZSBwcm9jZXNzaW5nIHByZXZpb3VzbHkgYnVmZmVyZWQgaXRlbXMsIHdoaWNoXG4gIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0XG4gIC8vIGVuZCB1cCBpbiBhbiBvdmVybGFwcGVkIG9ud3JpdGUgc2l0dWF0aW9uLlxuICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCB0byBfd3JpdGUoY2h1bmssY2IpXG4gIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uKGVyKSB7XG4gICAgb253cml0ZShzdHJlYW0sIGVyKTtcbiAgfTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYilcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcblxuICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuXG4gIHRoaXMuYnVmZmVyID0gW107XG5cbiAgLy8gbnVtYmVyIG9mIHBlbmRpbmcgdXNlci1zdXBwbGllZCB3cml0ZSBjYWxsYmFja3NcbiAgLy8gdGhpcyBtdXN0IGJlIDAgYmVmb3JlICdmaW5pc2gnIGNhbiBiZSBlbWl0dGVkXG4gIHRoaXMucGVuZGluZ2NiID0gMDtcblxuICAvLyBlbWl0IHByZWZpbmlzaCBpZiB0aGUgb25seSB0aGluZyB3ZSdyZSB3YWl0aW5nIGZvciBpcyBfd3JpdGUgY2JzXG4gIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zXG4gIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTtcblxuICAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpblxuICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZShvcHRpb25zKSB7XG4gIHZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgLy8gV3JpdGFibGUgY3RvciBpcyBhcHBsaWVkIHRvIER1cGxleGVzLCB0aG91Z2ggdGhleSdyZSBub3RcbiAgLy8gaW5zdGFuY2VvZiBXcml0YWJsZSwgdGhleSdyZSBpbnN0YW5jZW9mIFJlYWRhYmxlLlxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgV3JpdGFibGUpICYmICEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpXG4gICAgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTtcblxuICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5LlxuICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLlxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignQ2Fubm90IHBpcGUuIE5vdCByZWFkYWJsZS4nKSk7XG59O1xuXG5cbmZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgdmFyIGVyID0gbmV3IEVycm9yKCd3cml0ZSBhZnRlciBlbmQnKTtcbiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2JcbiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgIGNiKGVyKTtcbiAgfSk7XG59XG5cbi8vIElmIHdlIGdldCBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBidWZmZXIsIHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkLFxuLy8gYW5kIHdlJ3JlIG5vdCBpbiBvYmplY3RNb2RlLCB0aGVuIHRoYXQncyBhbiBlcnJvci5cbi8vIE90aGVyd2lzZSBzdHJlYW0gY2h1bmtzIGFyZSBhbGwgY29uc2lkZXJlZCB0byBiZSBvZiBsZW5ndGg9MSwgYW5kIHRoZVxuLy8gd2F0ZXJtYXJrcyBkZXRlcm1pbmUgaG93IG1hbnkgb2JqZWN0cyB0byBrZWVwIGluIHRoZSBidWZmZXIsIHJhdGhlciB0aGFuXG4vLyBob3cgbWFueSBieXRlcyBvciBjaGFyYWN0ZXJzLlxuZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHtcbiAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgaWYgKCF1dGlsLmlzQnVmZmVyKGNodW5rKSAmJlxuICAgICAgIXV0aWwuaXNTdHJpbmcoY2h1bmspICYmXG4gICAgICAhdXRpbC5pc051bGxPclVuZGVmaW5lZChjaHVuaykgJiZcbiAgICAgICFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgdmFyIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgY2IoZXIpO1xuICAgIH0pO1xuICAgIHZhbGlkID0gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHZhbGlkO1xufVxuXG5Xcml0YWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG4gIHZhciByZXQgPSBmYWxzZTtcblxuICBpZiAodXRpbC5pc0Z1bmN0aW9uKGVuY29kaW5nKSkge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKHV0aWwuaXNCdWZmZXIoY2h1bmspKVxuICAgIGVuY29kaW5nID0gJ2J1ZmZlcic7XG4gIGVsc2UgaWYgKCFlbmNvZGluZylcbiAgICBlbmNvZGluZyA9IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcblxuICBpZiAoIXV0aWwuaXNGdW5jdGlvbihjYikpXG4gICAgY2IgPSBmdW5jdGlvbigpIHt9O1xuXG4gIGlmIChzdGF0ZS5lbmRlZClcbiAgICB3cml0ZUFmdGVyRW5kKHRoaXMsIHN0YXRlLCBjYik7XG4gIGVsc2UgaWYgKHZhbGlkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBjYikpIHtcbiAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICByZXQgPSB3cml0ZU9yQnVmZmVyKHRoaXMsIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuY29yayA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIHN0YXRlLmNvcmtlZCsrO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQtLTtcblxuICAgIGlmICghc3RhdGUud3JpdGluZyAmJlxuICAgICAgICAhc3RhdGUuY29ya2VkICYmXG4gICAgICAgICFzdGF0ZS5maW5pc2hlZCAmJlxuICAgICAgICAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJlxuICAgICAgICBzdGF0ZS5idWZmZXIubGVuZ3RoKVxuICAgICAgY2xlYXJCdWZmZXIodGhpcywgc3RhdGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKSB7XG4gIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJlxuICAgICAgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiZcbiAgICAgIHV0aWwuaXNTdHJpbmcoY2h1bmspKSB7XG4gICAgY2h1bmsgPSBuZXcgQnVmZmVyKGNodW5rLCBlbmNvZGluZyk7XG4gIH1cbiAgcmV0dXJuIGNodW5rO1xufVxuXG4vLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXNcbi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlXG4vLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLlxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG4gIGlmICh1dGlsLmlzQnVmZmVyKGNodW5rKSlcbiAgICBlbmNvZGluZyA9ICdidWZmZXInO1xuICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cbiAgc3RhdGUubGVuZ3RoICs9IGxlbjtcblxuICB2YXIgcmV0ID0gc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaztcbiAgLy8gd2UgbXVzdCBlbnN1cmUgdGhhdCBwcmV2aW91cyBuZWVkRHJhaW4gd2lsbCBub3QgYmUgcmVzZXQgdG8gZmFsc2UuXG4gIGlmICghcmV0KVxuICAgIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7XG5cbiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKVxuICAgIHN0YXRlLmJ1ZmZlci5wdXNoKG5ldyBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSk7XG4gIGVsc2VcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgd3JpdGV2LCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgc3RhdGUud3JpdGVsZW4gPSBsZW47XG4gIHN0YXRlLndyaXRlY2IgPSBjYjtcbiAgc3RhdGUud3JpdGluZyA9IHRydWU7XG4gIHN0YXRlLnN5bmMgPSB0cnVlO1xuICBpZiAod3JpdGV2KVxuICAgIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtcbiAgZWxzZVxuICAgIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIGlmIChzeW5jKVxuICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgICAgIGNiKGVyKTtcbiAgICB9KTtcbiAgZWxzZSB7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgY2IoZXIpO1xuICB9XG5cbiAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbn1cblxuZnVuY3Rpb24gb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKSB7XG4gIHN0YXRlLndyaXRpbmcgPSBmYWxzZTtcbiAgc3RhdGUud3JpdGVjYiA9IG51bGw7XG4gIHN0YXRlLmxlbmd0aCAtPSBzdGF0ZS53cml0ZWxlbjtcbiAgc3RhdGUud3JpdGVsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlKHN0cmVhbSwgZXIpIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlO1xuICB2YXIgc3luYyA9IHN0YXRlLnN5bmM7XG4gIHZhciBjYiA9IHN0YXRlLndyaXRlY2I7XG5cbiAgb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKTtcblxuICBpZiAoZXIpXG4gICAgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7XG4gIGVsc2Uge1xuICAgIC8vIENoZWNrIGlmIHdlJ3JlIGFjdHVhbGx5IHJlYWR5IHRvIGZpbmlzaCwgYnV0IGRvbid0IGVtaXQgeWV0XG4gICAgdmFyIGZpbmlzaGVkID0gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKTtcblxuICAgIGlmICghZmluaXNoZWQgJiZcbiAgICAgICAgIXN0YXRlLmNvcmtlZCAmJlxuICAgICAgICAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJlxuICAgICAgICBzdGF0ZS5idWZmZXIubGVuZ3RoKSB7XG4gICAgICBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKTtcbiAgICB9XG5cbiAgICBpZiAoc3luYykge1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpIHtcbiAgaWYgKCFmaW5pc2hlZClcbiAgICBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG4gIHN0YXRlLnBlbmRpbmdjYi0tO1xuICBjYigpO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbn1cblxuLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcbi8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cbi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5mdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikge1xuICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlO1xuICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpO1xuICB9XG59XG5cblxuLy8gaWYgdGhlcmUncyBzb21ldGhpbmcgaW4gdGhlIGJ1ZmZlciB3YWl0aW5nLCB0aGVuIHByb2Nlc3MgaXRcbmZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IHRydWU7XG5cbiAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIHN0YXRlLmJ1ZmZlci5sZW5ndGggPiAxKSB7XG4gICAgLy8gRmFzdCBjYXNlLCB3cml0ZSBldmVyeXRoaW5nIHVzaW5nIF93cml0ZXYoKVxuICAgIHZhciBjYnMgPSBbXTtcbiAgICBmb3IgKHZhciBjID0gMDsgYyA8IHN0YXRlLmJ1ZmZlci5sZW5ndGg7IGMrKylcbiAgICAgIGNicy5wdXNoKHN0YXRlLmJ1ZmZlcltjXS5jYWxsYmFjayk7XG5cbiAgICAvLyBjb3VudCB0aGUgb25lIHdlIGFyZSBhZGRpbmcsIGFzIHdlbGwuXG4gICAgLy8gVE9ETyhpc2FhY3MpIGNsZWFuIHRoaXMgdXBcbiAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHRydWUsIHN0YXRlLmxlbmd0aCwgc3RhdGUuYnVmZmVyLCAnJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNicy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgICAgICAgY2JzW2ldKGVycik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDbGVhciBidWZmZXJcbiAgICBzdGF0ZS5idWZmZXIgPSBbXTtcbiAgfSBlbHNlIHtcbiAgICAvLyBTbG93IGNhc2UsIHdyaXRlIGNodW5rcyBvbmUtYnktb25lXG4gICAgZm9yICh2YXIgYyA9IDA7IGMgPCBzdGF0ZS5idWZmZXIubGVuZ3RoOyBjKyspIHtcbiAgICAgIHZhciBlbnRyeSA9IHN0YXRlLmJ1ZmZlcltjXTtcbiAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rO1xuICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7XG4gICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjaztcbiAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcblxuICAgICAgLy8gaWYgd2UgZGlkbid0IGNhbGwgdGhlIG9ud3JpdGUgaW1tZWRpYXRlbHksIHRoZW5cbiAgICAgIC8vIGl0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byB3YWl0IHVudGlsIGl0IGRvZXMuXG4gICAgICAvLyBhbHNvLCB0aGF0IG1lYW5zIHRoYXQgdGhlIGNodW5rIGFuZCBjYiBhcmUgY3VycmVudGx5XG4gICAgICAvLyBiZWluZyBwcm9jZXNzZWQsIHNvIG1vdmUgdGhlIGJ1ZmZlciBjb3VudGVyIHBhc3QgdGhlbS5cbiAgICAgIGlmIChzdGF0ZS53cml0aW5nKSB7XG4gICAgICAgIGMrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGMgPCBzdGF0ZS5idWZmZXIubGVuZ3RoKVxuICAgICAgc3RhdGUuYnVmZmVyID0gc3RhdGUuYnVmZmVyLnNsaWNlKGMpO1xuICAgIGVsc2VcbiAgICAgIHN0YXRlLmJ1ZmZlci5sZW5ndGggPSAwO1xuICB9XG5cbiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xufVxuXG5Xcml0YWJsZS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjYihuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpKTtcblxufTtcblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsO1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmICh1dGlsLmlzRnVuY3Rpb24oY2h1bmspKSB7XG4gICAgY2IgPSBjaHVuaztcbiAgICBjaHVuayA9IG51bGw7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9IGVsc2UgaWYgKHV0aWwuaXNGdW5jdGlvbihlbmNvZGluZykpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmICghdXRpbC5pc051bGxPclVuZGVmaW5lZChjaHVuaykpXG4gICAgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpO1xuXG4gIC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQgPSAxO1xuICAgIHRoaXMudW5jb3JrKCk7XG4gIH1cblxuICAvLyBpZ25vcmUgdW5uZWNlc3NhcnkgZW5kKCkgY2FsbHMuXG4gIGlmICghc3RhdGUuZW5kaW5nICYmICFzdGF0ZS5maW5pc2hlZClcbiAgICBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpO1xufTtcblxuXG5mdW5jdGlvbiBuZWVkRmluaXNoKHN0cmVhbSwgc3RhdGUpIHtcbiAgcmV0dXJuIChzdGF0ZS5lbmRpbmcgJiZcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAhc3RhdGUuZmluaXNoZWQgJiZcbiAgICAgICAgICAhc3RhdGUud3JpdGluZyk7XG59XG5cbmZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucHJlZmluaXNoZWQpIHtcbiAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuICBpZiAobmVlZCkge1xuICAgIGlmIChzdGF0ZS5wZW5kaW5nY2IgPT09IDApIHtcbiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHN0YXRlLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5lbWl0KCdmaW5pc2gnKTtcbiAgICB9IGVsc2VcbiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTtcbiAgfVxuICByZXR1cm4gbmVlZDtcbn1cblxuZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIGlmIChjYikge1xuICAgIGlmIChzdGF0ZS5maW5pc2hlZClcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soY2IpO1xuICAgIGVsc2VcbiAgICAgIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fd3JpdGFibGUuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuXG52YXIgaXNCdWZmZXJFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nXG4gIHx8IGZ1bmN0aW9uKGVuY29kaW5nKSB7XG4gICAgICAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICBjYXNlICdoZXgnOiBjYXNlICd1dGY4JzogY2FzZSAndXRmLTgnOiBjYXNlICdhc2NpaSc6IGNhc2UgJ2JpbmFyeSc6IGNhc2UgJ2Jhc2U2NCc6IGNhc2UgJ3VjczInOiBjYXNlICd1Y3MtMic6IGNhc2UgJ3V0ZjE2bGUnOiBjYXNlICd1dGYtMTZsZSc6IGNhc2UgJ3Jhdyc6IHJldHVybiB0cnVlO1xuICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xuICAgICAgIH1cbiAgICAgfVxuXG5cbmZ1bmN0aW9uIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKSB7XG4gIGlmIChlbmNvZGluZyAmJiAhaXNCdWZmZXJFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7XG4gIH1cbn1cblxuLy8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZlxuLy8gYnVmZmVycyBpbnRvIGEgc2VyaWVzIG9mIEpTIHN0cmluZ3Mgd2l0aG91dCBicmVha2luZyBhcGFydCBtdWx0aS1ieXRlXG4vLyBjaGFyYWN0ZXJzLiBDRVNVLTggaXMgaGFuZGxlZCBhcyBwYXJ0IG9mIHRoZSBVVEYtOCBlbmNvZGluZy5cbi8vXG4vLyBAVE9ETyBIYW5kbGluZyBhbGwgZW5jb2RpbmdzIGluc2lkZSBhIHNpbmdsZSBvYmplY3QgbWFrZXMgaXQgdmVyeSBkaWZmaWN1bHRcbi8vIHRvIHJlYXNvbiBhYm91dCB0aGlzIGNvZGUsIHNvIGl0IHNob3VsZCBiZSBzcGxpdCB1cCBpbiB0aGUgZnV0dXJlLlxuLy8gQFRPRE8gVGhlcmUgc2hvdWxkIGJlIGEgdXRmOC1zdHJpY3QgZW5jb2RpbmcgdGhhdCByZWplY3RzIGludmFsaWQgVVRGLTggY29kZVxuLy8gcG9pbnRzIGFzIHVzZWQgYnkgQ0VTVS04LlxudmFyIFN0cmluZ0RlY29kZXIgPSBleHBvcnRzLlN0cmluZ0RlY29kZXIgPSBmdW5jdGlvbihlbmNvZGluZykge1xuICB0aGlzLmVuY29kaW5nID0gKGVuY29kaW5nIHx8ICd1dGY4JykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9dLywgJycpO1xuICBhc3NlcnRFbmNvZGluZyhlbmNvZGluZyk7XG4gIHN3aXRjaCAodGhpcy5lbmNvZGluZykge1xuICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgLy8gQ0VTVS04IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAzLWJ5dGVzXG4gICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICAvLyBVVEYtMTYgcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDItYnl0ZXNcbiAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDI7XG4gICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAvLyBCYXNlLTY0IHN0b3JlcyAzIGJ5dGVzIGluIDQgY2hhcnMsIGFuZCBwYWRzIHRoZSByZW1haW5kZXIuXG4gICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzO1xuICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IGJhc2U2NERldGVjdEluY29tcGxldGVDaGFyO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMud3JpdGUgPSBwYXNzVGhyb3VnaFdyaXRlO1xuICAgICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRW5vdWdoIHNwYWNlIHRvIHN0b3JlIGFsbCBieXRlcyBvZiBhIHNpbmdsZSBjaGFyYWN0ZXIuIFVURi04IG5lZWRzIDRcbiAgLy8gYnl0ZXMsIGJ1dCBDRVNVLTggbWF5IHJlcXVpcmUgdXAgdG8gNiAoMyBieXRlcyBwZXIgc3Vycm9nYXRlKS5cbiAgdGhpcy5jaGFyQnVmZmVyID0gbmV3IEJ1ZmZlcig2KTtcbiAgLy8gTnVtYmVyIG9mIGJ5dGVzIHJlY2VpdmVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLlxuICB0aGlzLmNoYXJSZWNlaXZlZCA9IDA7XG4gIC8vIE51bWJlciBvZiBieXRlcyBleHBlY3RlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci5cbiAgdGhpcy5jaGFyTGVuZ3RoID0gMDtcbn07XG5cblxuLy8gd3JpdGUgZGVjb2RlcyB0aGUgZ2l2ZW4gYnVmZmVyIGFuZCByZXR1cm5zIGl0IGFzIEpTIHN0cmluZyB0aGF0IGlzXG4vLyBndWFyYW50ZWVkIHRvIG5vdCBjb250YWluIGFueSBwYXJ0aWFsIG11bHRpLWJ5dGUgY2hhcmFjdGVycy4gQW55IHBhcnRpYWxcbi8vIGNoYXJhY3RlciBmb3VuZCBhdCB0aGUgZW5kIG9mIHRoZSBidWZmZXIgaXMgYnVmZmVyZWQgdXAsIGFuZCB3aWxsIGJlXG4vLyByZXR1cm5lZCB3aGVuIGNhbGxpbmcgd3JpdGUgYWdhaW4gd2l0aCB0aGUgcmVtYWluaW5nIGJ5dGVzLlxuLy9cbi8vIE5vdGU6IENvbnZlcnRpbmcgYSBCdWZmZXIgY29udGFpbmluZyBhbiBvcnBoYW4gc3Vycm9nYXRlIHRvIGEgU3RyaW5nXG4vLyBjdXJyZW50bHkgd29ya3MsIGJ1dCBjb252ZXJ0aW5nIGEgU3RyaW5nIHRvIGEgQnVmZmVyICh2aWEgYG5ldyBCdWZmZXJgLCBvclxuLy8gQnVmZmVyI3dyaXRlKSB3aWxsIHJlcGxhY2UgaW5jb21wbGV0ZSBzdXJyb2dhdGVzIHdpdGggdGhlIHVuaWNvZGVcbi8vIHJlcGxhY2VtZW50IGNoYXJhY3Rlci4gU2VlIGh0dHBzOi8vY29kZXJldmlldy5jaHJvbWl1bS5vcmcvMTIxMTczMDA5LyAuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICB2YXIgY2hhclN0ciA9ICcnO1xuICAvLyBpZiBvdXIgbGFzdCB3cml0ZSBlbmRlZCB3aXRoIGFuIGluY29tcGxldGUgbXVsdGlieXRlIGNoYXJhY3RlclxuICB3aGlsZSAodGhpcy5jaGFyTGVuZ3RoKSB7XG4gICAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IHJlbWFpbmluZyBieXRlcyB0aGlzIGJ1ZmZlciBoYXMgdG8gb2ZmZXIgZm9yIHRoaXMgY2hhclxuICAgIHZhciBhdmFpbGFibGUgPSAoYnVmZmVyLmxlbmd0aCA+PSB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCkgP1xuICAgICAgICB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCA6XG4gICAgICAgIGJ1ZmZlci5sZW5ndGg7XG5cbiAgICAvLyBhZGQgdGhlIG5ldyBieXRlcyB0byB0aGUgY2hhciBidWZmZXJcbiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHRoaXMuY2hhclJlY2VpdmVkLCAwLCBhdmFpbGFibGUpO1xuICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IGF2YWlsYWJsZTtcblxuICAgIGlmICh0aGlzLmNoYXJSZWNlaXZlZCA8IHRoaXMuY2hhckxlbmd0aCkge1xuICAgICAgLy8gc3RpbGwgbm90IGVub3VnaCBjaGFycyBpbiB0aGlzIGJ1ZmZlcj8gd2FpdCBmb3IgbW9yZSAuLi5cbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgYnl0ZXMgYmVsb25naW5nIHRvIHRoZSBjdXJyZW50IGNoYXJhY3RlciBmcm9tIHRoZSBidWZmZXJcbiAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoYXZhaWxhYmxlLCBidWZmZXIubGVuZ3RoKTtcblxuICAgIC8vIGdldCB0aGUgY2hhcmFjdGVyIHRoYXQgd2FzIHNwbGl0XG4gICAgY2hhclN0ciA9IHRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLCB0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xuXG4gICAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlclxuICAgIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChjaGFyU3RyLmxlbmd0aCAtIDEpO1xuICAgIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7XG4gICAgICB0aGlzLmNoYXJMZW5ndGggKz0gdGhpcy5zdXJyb2dhdGVTaXplO1xuICAgICAgY2hhclN0ciA9ICcnO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHRoaXMuY2hhclJlY2VpdmVkID0gdGhpcy5jaGFyTGVuZ3RoID0gMDtcblxuICAgIC8vIGlmIHRoZXJlIGFyZSBubyBtb3JlIGJ5dGVzIGluIHRoaXMgYnVmZmVyLCBqdXN0IGVtaXQgb3VyIGNoYXJcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGNoYXJTdHI7XG4gICAgfVxuICAgIGJyZWFrO1xuICB9XG5cbiAgLy8gZGV0ZXJtaW5lIGFuZCBzZXQgY2hhckxlbmd0aCAvIGNoYXJSZWNlaXZlZFxuICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcik7XG5cbiAgdmFyIGVuZCA9IGJ1ZmZlci5sZW5ndGg7XG4gIGlmICh0aGlzLmNoYXJMZW5ndGgpIHtcbiAgICAvLyBidWZmZXIgdGhlIGluY29tcGxldGUgY2hhcmFjdGVyIGJ5dGVzIHdlIGdvdFxuICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgYnVmZmVyLmxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkLCBlbmQpO1xuICAgIGVuZCAtPSB0aGlzLmNoYXJSZWNlaXZlZDtcbiAgfVxuXG4gIGNoYXJTdHIgKz0gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIGVuZCk7XG5cbiAgdmFyIGVuZCA9IGNoYXJTdHIubGVuZ3RoIC0gMTtcbiAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGVuZCk7XG4gIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXJcbiAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHtcbiAgICB2YXIgc2l6ZSA9IHRoaXMuc3Vycm9nYXRlU2l6ZTtcbiAgICB0aGlzLmNoYXJMZW5ndGggKz0gc2l6ZTtcbiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBzaXplO1xuICAgIHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgc2l6ZSwgMCwgc2l6ZSk7XG4gICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCAwLCBzaXplKTtcbiAgICByZXR1cm4gY2hhclN0ci5zdWJzdHJpbmcoMCwgZW5kKTtcbiAgfVxuXG4gIC8vIG9yIGp1c3QgZW1pdCB0aGUgY2hhclN0clxuICByZXR1cm4gY2hhclN0cjtcbn07XG5cbi8vIGRldGVjdEluY29tcGxldGVDaGFyIGRldGVybWluZXMgaWYgdGhlcmUgaXMgYW4gaW5jb21wbGV0ZSBVVEYtOCBjaGFyYWN0ZXIgYXRcbi8vIHRoZSBlbmQgb2YgdGhlIGdpdmVuIGJ1ZmZlci4gSWYgc28sIGl0IHNldHMgdGhpcy5jaGFyTGVuZ3RoIHRvIHRoZSBieXRlXG4vLyBsZW5ndGggdGhhdCBjaGFyYWN0ZXIsIGFuZCBzZXRzIHRoaXMuY2hhclJlY2VpdmVkIHRvIHRoZSBudW1iZXIgb2YgYnl0ZXNcbi8vIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgdGhpcyBjaGFyYWN0ZXIuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAvLyBkZXRlcm1pbmUgaG93IG1hbnkgYnl0ZXMgd2UgaGF2ZSB0byBjaGVjayBhdCB0aGUgZW5kIG9mIHRoaXMgYnVmZmVyXG4gIHZhciBpID0gKGJ1ZmZlci5sZW5ndGggPj0gMykgPyAzIDogYnVmZmVyLmxlbmd0aDtcblxuICAvLyBGaWd1cmUgb3V0IGlmIG9uZSBvZiB0aGUgbGFzdCBpIGJ5dGVzIG9mIG91ciBidWZmZXIgYW5ub3VuY2VzIGFuXG4gIC8vIGluY29tcGxldGUgY2hhci5cbiAgZm9yICg7IGkgPiAwOyBpLS0pIHtcbiAgICB2YXIgYyA9IGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gaV07XG5cbiAgICAvLyBTZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VVEYtOCNEZXNjcmlwdGlvblxuXG4gICAgLy8gMTEwWFhYWFhcbiAgICBpZiAoaSA9PSAxICYmIGMgPj4gNSA9PSAweDA2KSB7XG4gICAgICB0aGlzLmNoYXJMZW5ndGggPSAyO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gMTExMFhYWFhcbiAgICBpZiAoaSA8PSAyICYmIGMgPj4gNCA9PSAweDBFKSB7XG4gICAgICB0aGlzLmNoYXJMZW5ndGggPSAzO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gMTExMTBYWFhcbiAgICBpZiAoaSA8PSAzICYmIGMgPj4gMyA9PSAweDFFKSB7XG4gICAgICB0aGlzLmNoYXJMZW5ndGggPSA0O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHRoaXMuY2hhclJlY2VpdmVkID0gaTtcbn07XG5cblN0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICB2YXIgcmVzID0gJyc7XG4gIGlmIChidWZmZXIgJiYgYnVmZmVyLmxlbmd0aClcbiAgICByZXMgPSB0aGlzLndyaXRlKGJ1ZmZlcik7XG5cbiAgaWYgKHRoaXMuY2hhclJlY2VpdmVkKSB7XG4gICAgdmFyIGNyID0gdGhpcy5jaGFyUmVjZWl2ZWQ7XG4gICAgdmFyIGJ1ZiA9IHRoaXMuY2hhckJ1ZmZlcjtcbiAgICB2YXIgZW5jID0gdGhpcy5lbmNvZGluZztcbiAgICByZXMgKz0gYnVmLnNsaWNlKDAsIGNyKS50b1N0cmluZyhlbmMpO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cbmZ1bmN0aW9uIHBhc3NUaHJvdWdoV3JpdGUoYnVmZmVyKSB7XG4gIHJldHVybiBidWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7XG59XG5cbmZ1bmN0aW9uIHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7XG4gIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDI7XG4gIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMiA6IDA7XG59XG5cbmZ1bmN0aW9uIGJhc2U2NERldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikge1xuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAzO1xuICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDMgOiAwO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9zdHJpbmdfZGVjb2Rlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cblxuLy8gYSB0cmFuc2Zvcm0gc3RyZWFtIGlzIGEgcmVhZGFibGUvd3JpdGFibGUgc3RyZWFtIHdoZXJlIHlvdSBkb1xuLy8gc29tZXRoaW5nIHdpdGggdGhlIGRhdGEuICBTb21ldGltZXMgaXQncyBjYWxsZWQgYSBcImZpbHRlclwiLFxuLy8gYnV0IHRoYXQncyBub3QgYSBncmVhdCBuYW1lIGZvciBpdCwgc2luY2UgdGhhdCBpbXBsaWVzIGEgdGhpbmcgd2hlcmVcbi8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGRcbi8vIGJlIGEgdmFsaWQgZXhhbXBsZSBvZiBhIHRyYW5zZm9ybSwgb2YgY291cnNlLilcbi8vXG4vLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhXG4vLyBuZWNlc3NhcmlseSBzeW1tZXRyaWMgb3Igc3luY2hyb25vdXMgdHJhbnNmb3JtYXRpb24uICBGb3IgZXhhbXBsZSxcbi8vIGEgemxpYiBzdHJlYW0gbWlnaHQgdGFrZSBtdWx0aXBsZSBwbGFpbi10ZXh0IHdyaXRlcygpLCBhbmQgdGhlblxuLy8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLlxuLy9cbi8vIEhlcmUncyBob3cgdGhpcyB3b3Jrczpcbi8vXG4vLyBUaGUgVHJhbnNmb3JtIHN0cmVhbSBoYXMgYWxsIHRoZSBhc3BlY3RzIG9mIHRoZSByZWFkYWJsZSBhbmQgd3JpdGFibGVcbi8vIHN0cmVhbSBjbGFzc2VzLiAgV2hlbiB5b3Ugd3JpdGUoY2h1bmspLCB0aGF0IGNhbGxzIF93cml0ZShjaHVuayxjYilcbi8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXNcbi8vIGJ1ZmZlcmVkIHVwLiAgV2hlbiB5b3UgY2FsbCByZWFkKCksIHRoYXQgY2FsbHMgX3JlYWQobikgdW50aWxcbi8vIHRoZXJlJ3MgZW5vdWdoIHBlbmRpbmcgcmVhZGFibGUgZGF0YSBidWZmZXJlZCB1cC5cbi8vXG4vLyBJbiBhIHRyYW5zZm9ybSBzdHJlYW0sIHRoZSB3cml0dGVuIGRhdGEgaXMgcGxhY2VkIGluIGEgYnVmZmVyLiAgV2hlblxuLy8gX3JlYWQobikgaXMgY2FsbGVkLCBpdCB0cmFuc2Zvcm1zIHRoZSBxdWV1ZWQgdXAgZGF0YSwgY2FsbGluZyB0aGVcbi8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZVxuLy8gd3JpdHRlbiBjaHVuayB3b3VsZCByZXN1bHQgaW4gbXVsdGlwbGUgb3V0cHV0IGNodW5rcywgdGhlbiB0aGUgZmlyc3Rcbi8vIG91dHB1dHRlZCBiaXQgY2FsbHMgdGhlIHJlYWRjYiwgYW5kIHN1YnNlcXVlbnQgY2h1bmtzIGp1c3QgZ28gaW50b1xuLy8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LlxuLy9cbi8vIFRoaXMgd2F5LCBiYWNrLXByZXNzdXJlIGlzIGFjdHVhbGx5IGRldGVybWluZWQgYnkgdGhlIHJlYWRpbmcgc2lkZSxcbi8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsXG4vLyBhIHBhdGhvbG9naWNhbCBpbmZsYXRlIHR5cGUgb2YgdHJhbnNmb3JtIGNhbiBjYXVzZSBleGNlc3NpdmUgYnVmZmVyaW5nXG4vLyBoZXJlLiAgRm9yIGV4YW1wbGUsIGltYWdpbmUgYSBzdHJlYW0gd2hlcmUgZXZlcnkgYnl0ZSBvZiBpbnB1dCBpc1xuLy8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueVxuLy8gYnl0ZXMgb2Ygb3V0cHV0LiAgV3JpdGluZyB0aGUgNCBieXRlcyB7ZmYsZmYsZmYsZmZ9IHdvdWxkIHJlc3VsdCBpblxuLy8gMWtiIG9mIGRhdGEgYmVpbmcgb3V0cHV0LiAgSW4gdGhpcyBjYXNlLCB5b3UgY291bGQgd3JpdGUgYSB2ZXJ5IHNtYWxsXG4vLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluXG4vLyBzdWNoIGEgcGF0aG9sb2dpY2FsIGluZmxhdGluZyBtZWNoYW5pc20sIHRoZXJlJ2QgYmUgbm8gd2F5IHRvIHRlbGxcbi8vIHRoZSBzeXN0ZW0gdG8gc3RvcCBkb2luZyB0aGUgdHJhbnNmb3JtLiAgQSBzaW5nbGUgNE1CIHdyaXRlIGNvdWxkXG4vLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LlxuLy9cbi8vIEhvd2V2ZXIsIGV2ZW4gaW4gc3VjaCBhIHBhdGhvbG9naWNhbCBjYXNlLCBvbmx5IGEgc2luZ2xlIHdyaXR0ZW4gY2h1bmtcbi8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWxcbi8vIHRoZSByZXN1bHRzIG9mIHRoZSBwcmV2aW91cyB0cmFuc2Zvcm1lZCBjaHVuayB3ZXJlIGNvbnN1bWVkLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zZm9ybTtcblxudmFyIER1cGxleCA9IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG51dGlsLmluaGVyaXRzKFRyYW5zZm9ybSwgRHVwbGV4KTtcblxuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcbiAgdGhpcy5hZnRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uKGVyLCBkYXRhKSB7XG4gICAgcmV0dXJuIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpO1xuICB9O1xuXG4gIHRoaXMubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuICB0aGlzLnRyYW5zZm9ybWluZyA9IGZhbHNlO1xuICB0aGlzLndyaXRlY2IgPSBudWxsO1xuICB0aGlzLndyaXRlY2h1bmsgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKSB7XG4gIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG4gIHRzLnRyYW5zZm9ybWluZyA9IGZhbHNlO1xuXG4gIHZhciBjYiA9IHRzLndyaXRlY2I7XG5cbiAgaWYgKCFjYilcbiAgICByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdubyB3cml0ZWNiIGluIFRyYW5zZm9ybSBjbGFzcycpKTtcblxuICB0cy53cml0ZWNodW5rID0gbnVsbDtcbiAgdHMud3JpdGVjYiA9IG51bGw7XG5cbiAgaWYgKCF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEpKVxuICAgIHN0cmVhbS5wdXNoKGRhdGEpO1xuXG4gIGlmIChjYilcbiAgICBjYihlcik7XG5cbiAgdmFyIHJzID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBycy5yZWFkaW5nID0gZmFsc2U7XG4gIGlmIChycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykge1xuICAgIHN0cmVhbS5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0pKVxuICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKG9wdGlvbnMpO1xuXG4gIER1cGxleC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gIHRoaXMuX3RyYW5zZm9ybVN0YXRlID0gbmV3IFRyYW5zZm9ybVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIHdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy5cbiAgdmFyIHN0cmVhbSA9IHRoaXM7XG5cbiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblxuICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3NcbiAgLy8gdGhhdCBSZWFkYWJsZSB3YW50cyBiZWZvcmUgdGhlIGZpcnN0IF9yZWFkIGNhbGwsIHNvIHVuc2V0IHRoZVxuICAvLyBzeW5jIGd1YXJkIGZsYWcuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlO1xuXG4gIHRoaXMub25jZSgncHJlZmluaXNoJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKHV0aWwuaXNGdW5jdGlvbih0aGlzLl9mbHVzaCkpXG4gICAgICB0aGlzLl9mbHVzaChmdW5jdGlvbihlcikge1xuICAgICAgICBkb25lKHN0cmVhbSwgZXIpO1xuICAgICAgfSk7XG4gICAgZWxzZVxuICAgICAgZG9uZShzdHJlYW0pO1xuICB9KTtcbn1cblxuVHJhbnNmb3JtLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nKSB7XG4gIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7XG59O1xuXG4vLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiFcbi8vIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gaW4gaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vICdjaHVuaycgaXMgYW4gaW5wdXQgY2h1bmsuXG4vL1xuLy8gQ2FsbCBgcHVzaChuZXdDaHVuaylgIHRvIHBhc3MgYWxvbmcgdHJhbnNmb3JtZWQgb3V0cHV0XG4vLyB0byB0aGUgcmVhZGFibGUgc2lkZS4gIFlvdSBtYXkgY2FsbCAncHVzaCcgemVybyBvciBtb3JlIHRpbWVzLlxuLy9cbi8vIENhbGwgYGNiKGVycilgIHdoZW4geW91IGFyZSBkb25lIHdpdGggdGhpcyBjaHVuay4gIElmIHlvdSBwYXNzXG4vLyBhbiBlcnJvciwgdGhlbiB0aGF0J2xsIHB1dCB0aGUgaHVydCBvbiB0aGUgd2hvbGUgb3BlcmF0aW9uLiAgSWYgeW91XG4vLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpO1xufTtcblxuVHJhbnNmb3JtLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuICB0cy53cml0ZWNiID0gY2I7XG4gIHRzLndyaXRlY2h1bmsgPSBjaHVuaztcbiAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nO1xuICBpZiAoIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHZhciBycyA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHxcbiAgICAgICAgcnMubmVlZFJlYWRhYmxlIHx8XG4gICAgICAgIHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspXG4gICAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59O1xuXG4vLyBEb2Vzbid0IG1hdHRlciB3aGF0IHRoZSBhcmdzIGFyZSBoZXJlLlxuLy8gX3RyYW5zZm9ybSBkb2VzIGFsbCB0aGUgd29yay5cbi8vIFRoYXQgd2UgZ290IGhlcmUgbWVhbnMgdGhhdCB0aGUgcmVhZGFibGUgc2lkZSB3YW50cyBtb3JlIGRhdGEuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24obikge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcblxuICBpZiAoIXV0aWwuaXNOdWxsKHRzLndyaXRlY2h1bmspICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7XG4gICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluXG4gICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuXG4gICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7XG4gIH1cbn07XG5cblxuZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyKSB7XG4gIGlmIChlcilcbiAgICByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXG4gIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnNcbiAgLy8gdGhhdCBub3RoaW5nIG1vcmUgd2lsbCBldmVyIGJlIHByb3ZpZGVkXG4gIHZhciB3cyA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTtcblxuICBpZiAod3MubGVuZ3RoKVxuICAgIHRocm93IG5ldyBFcnJvcignY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7XG5cbiAgaWYgKHRzLnRyYW5zZm9ybWluZylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTtcblxuICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIHBhc3N0aHJvdWdoIHN0cmVhbS5cbi8vIGJhc2ljYWxseSBqdXN0IHRoZSBtb3N0IG1pbmltYWwgc29ydCBvZiBUcmFuc2Zvcm0gc3RyZWFtLlxuLy8gRXZlcnkgd3JpdHRlbiBjaHVuayBnZXRzIG91dHB1dCBhcy1pcy5cblxubW9kdWxlLmV4cG9ydHMgPSBQYXNzVGhyb3VnaDtcblxudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vX3N0cmVhbV90cmFuc2Zvcm0nKTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG51dGlsLmluaGVyaXRzKFBhc3NUaHJvdWdoLCBUcmFuc2Zvcm0pO1xuXG5mdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpXG4gICAgcmV0dXJuIG5ldyBQYXNzVGhyb3VnaChvcHRpb25zKTtcblxuICBUcmFuc2Zvcm0uY2FsbCh0aGlzLCBvcHRpb25zKTtcbn1cblxuUGFzc1Rocm91Z2gucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG51bGwsIGNodW5rKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qc1wiKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanNcbi8vIG1vZHVsZSBpZCA9IDM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vbGliL19zdHJlYW1fZHVwbGV4LmpzXCIpXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzXCIpXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanNcbi8vIG1vZHVsZSBpZCA9IDM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanNcIilcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogZXh0c3ByaW50Zi5qczogZXh0ZW5kZWQgUE9TSVgtc3R5bGUgc3ByaW50ZlxuICovXG5cbnZhciBtb2RfYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG52YXIgbW9kX3V0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8qXG4gKiBQdWJsaWMgaW50ZXJmYWNlXG4gKi9cbmV4cG9ydHMuc3ByaW50ZiA9IGpzU3ByaW50ZjtcbmV4cG9ydHMucHJpbnRmID0ganNQcmludGY7XG5leHBvcnRzLmZwcmludGYgPSBqc0ZwcmludGY7XG5cbi8qXG4gKiBTdHJpcHBlZCBkb3duIHZlcnNpb24gb2Ygc1tuXXByaW50ZigzYykuICBXZSBtYWtlIGEgYmVzdCBlZmZvcnQgdG8gdGhyb3cgYW5cbiAqIGV4Y2VwdGlvbiB3aGVuIGdpdmVuIGEgZm9ybWF0IHN0cmluZyB3ZSBkb24ndCB1bmRlcnN0YW5kLCByYXRoZXIgdGhhblxuICogaWdub3JpbmcgaXQsIHNvIHRoYXQgd2Ugd29uJ3QgYnJlYWsgZXhpc3RpbmcgcHJvZ3JhbXMgaWYvd2hlbiB3ZSBnbyBpbXBsZW1lbnRcbiAqIHRoZSByZXN0IG9mIHRoaXMuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjdXJyZW50bHkgc3VwcG9ydHMgc3BlY2lmeWluZ1xuICpcdC0gZmllbGQgYWxpZ25tZW50ICgnLScgZmxhZyksXG4gKiBcdC0gemVyby1wYWQgKCcwJyBmbGFnKVxuICpcdC0gYWx3YXlzIHNob3cgbnVtZXJpYyBzaWduICgnKycgZmxhZyksXG4gKlx0LSBmaWVsZCB3aWR0aFxuICpcdC0gY29udmVyc2lvbnMgZm9yIHN0cmluZ3MsIGRlY2ltYWwgaW50ZWdlcnMsIGFuZCBmbG9hdHMgKG51bWJlcnMpLlxuICpcdC0gYXJndW1lbnQgc2l6ZSBzcGVjaWZpZXJzLiAgVGhlc2UgYXJlIGFsbCBhY2NlcHRlZCBidXQgaWdub3JlZCwgc2luY2VcbiAqXHQgIEphdmFzY3JpcHQgaGFzIG5vIG5vdGlvbiBvZiB0aGUgcGh5c2ljYWwgc2l6ZSBvZiBhbiBhcmd1bWVudC5cbiAqXG4gKiBFdmVyeXRoaW5nIGVsc2UgaXMgY3VycmVudGx5IHVuc3VwcG9ydGVkLCBtb3N0IG5vdGFibHkgcHJlY2lzaW9uLCB1bnNpZ25lZFxuICogbnVtYmVycywgbm9uLWRlY2ltYWwgbnVtYmVycywgYW5kIGNoYXJhY3RlcnMuXG4gKi9cbmZ1bmN0aW9uIGpzU3ByaW50ZihmbXQpXG57XG5cdHZhciByZWdleCA9IFtcblx0ICAgICcoW14lXSopJyxcdFx0XHRcdC8qIG5vcm1hbCB0ZXh0ICovXG5cdCAgICAnJScsXHRcdFx0XHQvKiBzdGFydCBvZiBmb3JtYXQgKi9cblx0ICAgICcoW1xcJ1xcXFwtKyAjMF0qPyknLFx0XHRcdC8qIGZsYWdzIChvcHRpb25hbCkgKi9cblx0ICAgICcoWzEtOV1cXFxcZCopPycsXHRcdFx0Lyogd2lkdGggKG9wdGlvbmFsKSAqL1xuXHQgICAgJyhcXFxcLihbMS05XVxcXFxkKikpPycsXHRcdC8qIHByZWNpc2lvbiAob3B0aW9uYWwpICovXG5cdCAgICAnW2xoanp0TF0qPycsXHRcdFx0LyogbGVuZ3RoIG1vZHMgKGlnbm9yZWQpICovXG5cdCAgICAnKFtkaW91eFhmRmVFZ0dhQWNDc1NwJWpyXSknXHQvKiBjb252ZXJzaW9uICovXG5cdF0uam9pbignJyk7XG5cblx0dmFyIHJlID0gbmV3IFJlZ0V4cChyZWdleCk7XG5cdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0dmFyIGZsYWdzLCB3aWR0aCwgcHJlY2lzaW9uLCBjb252ZXJzaW9uO1xuXHR2YXIgbGVmdCwgcGFkLCBzaWduLCBhcmcsIG1hdGNoO1xuXHR2YXIgcmV0ID0gJyc7XG5cdHZhciBhcmduID0gMTtcblxuXHRtb2RfYXNzZXJ0LmVxdWFsKCdzdHJpbmcnLCB0eXBlb2YgKGZtdCkpO1xuXG5cdHdoaWxlICgobWF0Y2ggPSByZS5leGVjKGZtdCkpICE9PSBudWxsKSB7XG5cdFx0cmV0ICs9IG1hdGNoWzFdO1xuXHRcdGZtdCA9IGZtdC5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcblxuXHRcdGZsYWdzID0gbWF0Y2hbMl0gfHwgJyc7XG5cdFx0d2lkdGggPSBtYXRjaFszXSB8fCAwO1xuXHRcdHByZWNpc2lvbiA9IG1hdGNoWzRdIHx8ICcnO1xuXHRcdGNvbnZlcnNpb24gPSBtYXRjaFs2XTtcblx0XHRsZWZ0ID0gZmFsc2U7XG5cdFx0c2lnbiA9IGZhbHNlO1xuXHRcdHBhZCA9ICcgJztcblxuXHRcdGlmIChjb252ZXJzaW9uID09ICclJykge1xuXHRcdFx0cmV0ICs9ICclJztcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGlmIChhcmdzLmxlbmd0aCA9PT0gMClcblx0XHRcdHRocm93IChuZXcgRXJyb3IoJ3RvbyBmZXcgYXJncyB0byBzcHJpbnRmJykpO1xuXG5cdFx0YXJnID0gYXJncy5zaGlmdCgpO1xuXHRcdGFyZ24rKztcblxuXHRcdGlmIChmbGFncy5tYXRjaCgvW1xcJyAjXS8pKVxuXHRcdFx0dGhyb3cgKG5ldyBFcnJvcihcblx0XHRcdCAgICAndW5zdXBwb3J0ZWQgZmxhZ3M6ICcgKyBmbGFncykpO1xuXG5cdFx0aWYgKHByZWNpc2lvbi5sZW5ndGggPiAwKVxuXHRcdFx0dGhyb3cgKG5ldyBFcnJvcihcblx0XHRcdCAgICAnbm9uLXplcm8gcHJlY2lzaW9uIG5vdCBzdXBwb3J0ZWQnKSk7XG5cblx0XHRpZiAoZmxhZ3MubWF0Y2goLy0vKSlcblx0XHRcdGxlZnQgPSB0cnVlO1xuXG5cdFx0aWYgKGZsYWdzLm1hdGNoKC8wLykpXG5cdFx0XHRwYWQgPSAnMCc7XG5cblx0XHRpZiAoZmxhZ3MubWF0Y2goL1xcKy8pKVxuXHRcdFx0c2lnbiA9IHRydWU7XG5cblx0XHRzd2l0Y2ggKGNvbnZlcnNpb24pIHtcblx0XHRjYXNlICdzJzpcblx0XHRcdGlmIChhcmcgPT09IHVuZGVmaW5lZCB8fCBhcmcgPT09IG51bGwpXG5cdFx0XHRcdHRocm93IChuZXcgRXJyb3IoJ2FyZ3VtZW50ICcgKyBhcmduICtcblx0XHRcdFx0ICAgICc6IGF0dGVtcHRlZCB0byBwcmludCB1bmRlZmluZWQgb3IgbnVsbCAnICtcblx0XHRcdFx0ICAgICdhcyBhIHN0cmluZycpKTtcblx0XHRcdHJldCArPSBkb1BhZChwYWQsIHdpZHRoLCBsZWZ0LCBhcmcudG9TdHJpbmcoKSk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ2QnOlxuXHRcdFx0YXJnID0gTWF0aC5mbG9vcihhcmcpO1xuXHRcdFx0Lypqc2w6ZmFsbHRocnUqL1xuXHRcdGNhc2UgJ2YnOlxuXHRcdFx0c2lnbiA9IHNpZ24gJiYgYXJnID4gMCA/ICcrJyA6ICcnO1xuXHRcdFx0cmV0ICs9IHNpZ24gKyBkb1BhZChwYWQsIHdpZHRoLCBsZWZ0LFxuXHRcdFx0ICAgIGFyZy50b1N0cmluZygpKTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAneCc6XG5cdFx0XHRyZXQgKz0gZG9QYWQocGFkLCB3aWR0aCwgbGVmdCwgYXJnLnRvU3RyaW5nKDE2KSk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ2onOiAvKiBub24tc3RhbmRhcmQgKi9cblx0XHRcdGlmICh3aWR0aCA9PT0gMClcblx0XHRcdFx0d2lkdGggPSAxMDtcblx0XHRcdHJldCArPSBtb2RfdXRpbC5pbnNwZWN0KGFyZywgZmFsc2UsIHdpZHRoKTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAncic6IC8qIG5vbi1zdGFuZGFyZCAqL1xuXHRcdFx0cmV0ICs9IGR1bXBFeGNlcHRpb24oYXJnKTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IChuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIGNvbnZlcnNpb246ICcgK1xuXHRcdFx0ICAgIGNvbnZlcnNpb24pKTtcblx0XHR9XG5cdH1cblxuXHRyZXQgKz0gZm10O1xuXHRyZXR1cm4gKHJldCk7XG59XG5cbmZ1bmN0aW9uIGpzUHJpbnRmKCkge1xuXHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdGFyZ3MudW5zaGlmdChwcm9jZXNzLnN0ZG91dCk7XG5cdGpzRnByaW50Zi5hcHBseShudWxsLCBhcmdzKTtcbn1cblxuZnVuY3Rpb24ganNGcHJpbnRmKHN0cmVhbSkge1xuXHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdHJldHVybiAoc3RyZWFtLndyaXRlKGpzU3ByaW50Zi5hcHBseSh0aGlzLCBhcmdzKSkpO1xufVxuXG5mdW5jdGlvbiBkb1BhZChjaHIsIHdpZHRoLCBsZWZ0LCBzdHIpXG57XG5cdHZhciByZXQgPSBzdHI7XG5cblx0d2hpbGUgKHJldC5sZW5ndGggPCB3aWR0aCkge1xuXHRcdGlmIChsZWZ0KVxuXHRcdFx0cmV0ICs9IGNocjtcblx0XHRlbHNlXG5cdFx0XHRyZXQgPSBjaHIgKyByZXQ7XG5cdH1cblxuXHRyZXR1cm4gKHJldCk7XG59XG5cbi8qXG4gKiBUaGlzIGZ1bmN0aW9uIGR1bXBzIGxvbmcgc3RhY2sgdHJhY2VzIGZvciBleGNlcHRpb25zIGhhdmluZyBhIGNhdXNlKCkgbWV0aG9kLlxuICogU2VlIG5vZGUtdmVycm9yIGZvciBhbiBleGFtcGxlLlxuICovXG5mdW5jdGlvbiBkdW1wRXhjZXB0aW9uKGV4KVxue1xuXHR2YXIgcmV0O1xuXG5cdGlmICghKGV4IGluc3RhbmNlb2YgRXJyb3IpKVxuXHRcdHRocm93IChuZXcgRXJyb3IoanNTcHJpbnRmKCdpbnZhbGlkIHR5cGUgZm9yICUlcjogJWonLCBleCkpKTtcblxuXHQvKiBOb3RlIHRoYXQgVjggcHJlcGVuZHMgXCJleC5zdGFja1wiIHdpdGggZXgudG9TdHJpbmcoKS4gKi9cblx0cmV0ID0gJ0VYQ0VQVElPTjogJyArIGV4LmNvbnN0cnVjdG9yLm5hbWUgKyAnOiAnICsgZXguc3RhY2s7XG5cblx0aWYgKGV4LmNhdXNlICYmIHR5cGVvZiAoZXguY2F1c2UpID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0dmFyIGNleCA9IGV4LmNhdXNlKCk7XG5cdFx0aWYgKGNleCkge1xuXHRcdFx0cmV0ICs9ICdcXG5DYXVzZWQgYnk6ICcgKyBkdW1wRXhjZXB0aW9uKGNleCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIChyZXQpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3ZlcnJvci9+L2V4dHNwcmludGYvbGliL2V4dHNwcmludGYuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXG5mdW5jdGlvbiBpc0FycmF5KGFyZykge1xuICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92ZXJyb3Ivfi9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuICBcbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gc2VydmljZXNcbiAgICpcbiAgICogQHJldHVybnMge0NpcmN1bGFyRGVwZW5kZW5jeUVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKHNlcnZpY2VzOiBBcnJheTxzdHJpbmc+KTogQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3Ige1xuICAgIGNvbnN0IHBhdGggPSBbXS5jb25jYXQoc2VydmljZXMpXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAuam9pbignIDwtICcpXG5cbiAgICByZXR1cm4gbmV3IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yKFxuICAgICAge1xuICAgICAgICBzZXJ2aWNlc1xuICAgICAgfSxcbiAgICAgICdDaXJjdWxhciBkZXBlbmRlbmN5IGZvdW5kOiAlcycsXG4gICAgICBwYXRoXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy9jaXJjdWxhci1kZXBlbmRlbmN5LWVycm9yLmpzIiwiaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Rpc2wtZXJyb3InXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihpZGVudGlmaWVyOiBzdHJpbmcpOiBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcihcbiAgICAgIHtcbiAgICAgICAgaWRlbnRpZmllclxuICAgICAgfSxcbiAgICAgICdGYWN0b3J5IG1ldGhvZCBmb3IgaWRlbnRpZmllciBcIiVzXCIgcmV0dXJucyBub3RoaW5nJyxcbiAgICAgIGlkZW50aWZpZXJcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvZmFjdG9yeS1tZXRob2QtcmV0dXJucy1ub3RoaW5nLWVycm9yLmpzIiwiaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Rpc2wtZXJyb3InXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBNZXRob2REb2VzTm90RXhpc3RFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lXG4gICAqXG4gICAqIEByZXR1cm5zIHtNZXRob2REb2VzTm90RXhpc3RFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihtZXRob2ROYW1lOiBzdHJpbmcpOiBNZXRob2REb2VzTm90RXhpc3RFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBNZXRob2REb2VzTm90RXhpc3RFcnJvcihcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kTmFtZVxuICAgICAgfSxcbiAgICAgICdNZXRob2QgXCIlc1wiIGRvZXMgbm90IGV4aXN0JyxcbiAgICAgIG1ldGhvZE5hbWVcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvbWV0aG9kLWRvZXMtbm90LWV4aXN0LWVycm9yLmpzIiwiaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Rpc2wtZXJyb3InXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7U2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGlkZW50aWZpZXI6IHN0cmluZyk6IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGlkZW50aWZpZXJcbiAgICAgIH0sXG4gICAgICAnU2VydmljZSBkZWZpbml0aW9uIGZvciBcIiVzXCIgaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIGluc3RhbnRpYXRlIGEgc2VydmljZSwgcmVmdXNpbmcgdG8gbW9kaWZ5IGl0JyxcbiAgICAgIGlkZW50aWZpZXJcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL3NlcnZpY2UtZGVmaW5pdGlvbi1hbHJlYWR5LXVzZWQtZXJyb3IuanMiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yIGV4dGVuZHMgRGlzbEVycm9yIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge1VuZGVmaW5lZFBhcmFtZXRlckVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGlkZW50aWZpZXI6IHN0cmluZyk6IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yIHtcbiAgICByZXR1cm4gbmV3IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yKFxuICAgICAge1xuICAgICAgICBpZGVudGlmaWVyXG4gICAgICB9LFxuICAgICAgJ1VuZGVmaW5lZCBwYXJhbWV0ZXIgZm9yIGlkZW50aWZpZXIgXCIlc1wiJyxcbiAgICAgIGlkZW50aWZpZXJcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvdW5kZWZpbmVkLXBhcmFtZXRlci1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yIGV4dGVuZHMgRGlzbEVycm9yIHtcbiAgXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGlkZW50aWZpZXI6IHN0cmluZyk6IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGlkZW50aWZpZXJcbiAgICAgIH0sXG4gICAgICAnVW5kZWZpbmVkIHNlcnZpY2UgZGVmaW5pdGlvbiBhbmQgaW5zdGFuY2UgZm9yIGlkZW50aWZpZXIgXCIlc1wiJyxcbiAgICAgIGlkZW50aWZpZXJcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy91bmRlZmluZWQtc2VydmljZS1kZWZpbml0aW9uLWFuZC1pbnN0YW5jZS1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGlkZW50aWZpZXI6IHN0cmluZyk6IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3Ige1xuICAgIHJldHVybiBuZXcgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcihcbiAgICAgIHtcbiAgICAgICAgaWRlbnRpZmllclxuICAgICAgfSxcbiAgICAgICdVbmRlZmluZWQgc2VydmljZSBkZWZpbml0aW9uIGZvciBpZGVudGlmaWVyIFwiJXNcIicsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvdW5kZWZpbmVkLXNlcnZpY2UtZGVmaW5pdGlvbi1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7YW55fSBhcmdcbiAgICpcbiAgICogQHJldHVybnMge1Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IoYXJnOiBhbnkpOiBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yIHtcbiAgICByZXR1cm4gbmV3IFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGFyZ1xuICAgICAgfSxcbiAgICAgICdVbnN1cHBvcnRlZCBhcmcgb2YgdHlwZSBcIiVzXCInLFxuICAgICAgdHlwZW9mIGFyZ1xuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL3Vuc3VwcG9ydGVkLWFyZ3VtZW50LXR5cGUtZXJyb3IuanMiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdldFNlcnZpY2VFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7RXJyb3J9IGNhdXNlXG4gICAqXG4gICAqIEByZXR1cm5zIHtNZXRob2REb2VzTm90RXhpc3RFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihpZGVudGlmaWVyOiBzdHJpbmcsIGNhdXNlOiBFcnJvcik6IEdldFNlcnZpY2VFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBHZXRTZXJ2aWNlRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGNhdXNlLFxuICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgaWRlbnRpZmllclxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ0Vycm9yIGdldHRpbmcgc2VydmljZSBcIiVzXCInLFxuICAgICAgaWRlbnRpZmllclxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHZXRTZXJ2aWNlRXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvZ2V0LXNlcnZpY2UtZXJyb3IuanMiXSwic291cmNlUm9vdCI6IiJ9