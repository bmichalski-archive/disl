!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(1),i=r(o),u=n(7),a=r(u),c=n(8),f=r(c),s=n(5),l=r(s),p=n(6),h=r(p),y=n(3),d=r(y),v=n(9),g=r(v),b={Container:i.default,ClassConstructorDefinition:a.default,FactoryDefinition:f.default,Reference:l.default,Parameter:h.default,MethodCall:d.default};for(var m in g.default)g.default.hasOwnProperty(m)&&(b[m]=g.default[m]);e.exports=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":u(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var a="  ".repeat(t-1),c=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(e[n],t)+";"}).join("\n  "+a);return o.length>=r&&(c+="\n  "+a+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=i(e[0],t);return e.every(function(e){return i(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return i(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":u(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),f=r(c),s=n(7),l=r(s),p=n(8),h=r(p),y=n(5),d=r(y),v=n(6),g=r(v),b=n(3),m=r(b),w=n(9),E=n(52),_=n(4),j=n(53),O=E.Service,S=_.InjectableArguments,A=j.scalar,T=function(){function e(e){return null!=e&&e.obj instanceof Object&&Array.isArray(e.arr)&&e.arr.every(function(e){return"string"==typeof e})}return Object.defineProperty(e,Symbol.hasInstance,{value:function(t){return e(t)}}),e}(),x=function(){function e(e){return"function"==typeof e}return Object.defineProperty(e,Symbol.hasInstance,{value:function(t){return e(t)}}),e}(),k=function(){function e(){o(this,e),this._servicesByIdentifier={},this._serviceDefinitionsByIdentifier={},this._parametersByIdentifier={},this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier={},this._classConstructorLocators=[],this._instanceLocators=[]}return a(e,[{key:"get",value:function(){function e(e){if(!(e instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Array<Service>>\n\nGot:\n"+i(e));return e}for(var t=this,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!Array.isArray(r)||!r.every(function(e){return"string"==typeof e}))throw new TypeError('Value of argument "identifiers" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(r));var u=[];return r.forEach(function(e){if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));u.push(t._doGetService(e,{obj:{},arr:[]}).catch(function(t){if(!(t instanceof Error))throw new TypeError('Value of argument "e" violates contract.\n\nExpected:\nError\n\nGot:\n'+i(t));throw w.GetServiceError.createError(e,t)}))}),e(Promise.all(u))}},{key:"set",value:function(t,n){function r(t){if(!(t instanceof e))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!O(n))throw new TypeError('Value of argument "instance" violates contract.\n\nExpected:\nService\n\nGot:\n'+i(n));return this._servicesByIdentifier[t]=n,r(this)}},{key:"has",value:function(e){function t(e){if("boolean"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return t(this.hasDefinition(e)||this.hasInstance(e))}},{key:"hasDefinition",value:function(e){function t(e){if("boolean"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return t(void 0!==this._serviceDefinitionsByIdentifier[e])}},{key:"hasInstance",value:function(e){function t(e){if("boolean"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return t(void 0!==this._servicesByIdentifier[e])}},{key:"getDefinition",value:function(e){function t(e){if(!(e instanceof f.default))throw new TypeError("Function return value violates contract.\n\nExpected:\nDefinition\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));var n=this._serviceDefinitionsByIdentifier[e];if(void 0===n)throw w.UndefinedServiceDefinitionError.createError(e);return t(n)}},{key:"setDefinition",value:function(t,n){function r(t){if(!(t instanceof e))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!(n instanceof f.default))throw new TypeError('Value of argument "definition" violates contract.\n\nExpected:\nDefinition\n\nGot:\n'+i(n));if(this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[t])throw w.ServiceDefinitionAlreadyUsedError.createError(t);return this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[t]=!1,this._serviceDefinitionsByIdentifier[t]=n,r(this)}},{key:"getParameter",value:function(e){function t(e){if(!A(e))throw new TypeError("Function return value violates contract.\n\nExpected:\nscalar\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(void 0===this._parametersByIdentifier[e])throw w.UndefinedParameterError.createError(e);return t(this._parametersByIdentifier[e])}},{key:"setParameter",value:function(t,n){function r(t){if(!(t instanceof e))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(t));return t}if("string"!=typeof t)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!A(n))throw new TypeError('Value of argument "value" violates contract.\n\nExpected:\nscalar\n\nGot:\n'+i(n));return this._parametersByIdentifier[t]=n,r(this)}},{key:"hasParameter",value:function(e){function t(e){if("boolean"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return t(void 0!==this._parametersByIdentifier[e])}},{key:"registerClassConstructorLocator",value:function(t){function n(t){if(!(t instanceof e))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(t));return t}if(!x(t))throw new TypeError('Value of argument "locator" violates contract.\n\nExpected:\nLocatorCallback\n\nGot:\n'+i(t));return this._classConstructorLocators.push(t),n(this)}},{key:"registerInstanceLocator",value:function(t){function n(t){if(!(t instanceof e))throw new TypeError("Function return value violates contract.\n\nExpected:\nContainer\n\nGot:\n"+i(t));return t}if(!x(t))throw new TypeError('Value of argument "locator" violates contract.\n\nExpected:\nLocatorCallback\n\nGot:\n'+i(t));return this._instanceLocators.push(t),n(this)}},{key:"_instantiate",value:function(e,t,n){function r(e){if(!(e instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Service>\n\nGot:\n"+i(e));return e}var o=this;if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!(t instanceof f.default))throw new TypeError('Value of argument "definition" violates contract.\n\nExpected:\nDefinition\n\nGot:\n'+i(t));if(!T(n))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(n));return r(this._resolveArgs(t.args,n).then(function(r){function u(e){if(!(e instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise\n\nGot:\n"+i(e));return e}if(!Array.isArray(r))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nArray\n\nGot:\n'+i(r));var a=void 0;if(t instanceof l.default){var c=o._locateServiceClassConstructor(t.classConstructorIdentifier);a=new(Function.prototype.bind.apply(c,[void 0].concat(r)))}else if(t instanceof h.default&&(a=t.factory.apply(void 0,r),void 0===a))return u(Promise.reject(w.FactoryMethodReturnsNothingError.createError(e)));return new Promise(function(e,r){function u(e){function n(e){if(!(e instanceof m.default))throw new TypeError('Function "getMethodCall" return value violates contract.\n\nExpected:\nMethodCall\n\nGot:\n'+i(e));return e}return n(t.methodCalls[e])}var c=[],f=void 0,s=void 0,l=function(e){if("function"!=typeof e)throw new TypeError('Value of argument "methodToCall" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+i(e));c.push(o._resolveArgs(s.args,n).then(function(t){function n(e){if(!(null==e||e instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\n?Promise | mixed\n\nGot:\n"+i(e));return e}if(!Array.isArray(t))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nArray\n\nGot:\n'+i(t));return n(e.apply(a,t))}))};for(f in t.methodCalls)if(t.methodCalls.hasOwnProperty(f)){s=u(f);var p=s.name,h=a[p];if(void 0===h)return r(w.MethodDoesNotExistError.createError(p));l(h)}return e(Promise.all(c).then(function(){function e(e){if(!O(e))throw new TypeError("Function return value violates contract.\n\nExpected:\nService\n\nGot:\n"+i(e));return e}return e(a)}))})}))}},{key:"_locateServiceClassConstructor",value:function(e){function t(e){if("function"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nFunction\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));var n=void 0,r=void 0;for(n in this._classConstructorLocators)if(this._classConstructorLocators.hasOwnProperty(n)&&(r=this._classConstructorLocators[n](e),void 0!==r))return t(r);throw w.CannotLocateServiceClassConstructorError.createError(e)}},{key:"_locateInstance",value:function(e){function t(e){if(null!=e&&!O(e))throw new TypeError("Function return value violates contract.\n\nExpected:\n?Service\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));var n=void 0,r=void 0;for(n in this._instanceLocators)if(this._instanceLocators.hasOwnProperty(n)&&(r=this._instanceLocators[n](e),void 0!==r))return t(r)}},{key:"_resolveArgs",value:function(t,n){function r(e){if(!(e instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Array<Service | scalar>>\n\nGot:\n"+i(e));return e}var o=this;if(!S(t))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n'+i(t));if(!T(n))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(n));var u=[];return r(new Promise(function(r,a){function c(e){if(null!=e)throw new TypeError("Function return value violates contract.\n\nExpected:\nvoid\n\nGot:\n"+i(e));return e}if("function"!=typeof r)throw new TypeError('Value of argument "resolve" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+i(r));if("function"!=typeof a)throw new TypeError('Value of argument "reject" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+i(a));var f=void 0,s=void 0;for(f in t)if(t.hasOwnProperty(f))if(s=t[f],s instanceof d.default){var l=s.id;u.push(o._doGetService(l,e._deepCopyLoading(n)))}else{if(!(s instanceof g.default))return c(a(w.UnsupportedArgumentTypeError.createError(s)));u.push(o.getParameter(s.id))}return c(r(Promise.all(u)))}))}},{key:"_doGetService",value:function(e,t){function n(e){if(!(e instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Service | CircularDependencyError | UndefinedServiceDefinitionAndInstanceError>\n\nGot:\n"+i(e));return e}if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!T(t))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(t));if(void 0!==t.obj[e]){var r=[].concat(t.arr).concat([e]);return n(Promise.reject(w.CircularDependencyError.createError(r)))}if(!this.hasInstance(e)){if(!this.hasDefinition(e)){var o=this._locateInstance(e);return n(void 0!==o?Promise.resolve(o).then(function(t){function n(e){if(!(e instanceof Promise))throw new TypeError("Function return value violates contract.\n\nExpected:\nPromise<Service | UndefinedServiceDefinitionAndInstanceError>\n\nGot:\n"+i(e));return e}if(null!=t&&!O(t))throw new TypeError('Value of argument "instance" violates contract.\n\nExpected:\n?Service\n\nGot:\n'+i(t));return n(void 0===t?Promise.reject(w.UndefinedServiceDefinitionAndInstanceError.createError(e)):Promise.resolve(t))}):Promise.reject(w.UndefinedServiceDefinitionAndInstanceError.createError(e)))}t.obj[e]=!0,t.arr.push(e);try{var u=this._instantiate(e,this.getDefinition(e),t);this._serviceDefinitionsAlreadyUsedToInstantiateByIdentifier[e]=!0,this._servicesByIdentifier[e]=u}catch(e){return n(Promise.reject(e))}}return n(Promise.resolve(this._servicesByIdentifier[e]))}}],[{key:"_deepCopyLoading",value:function(e){function t(e){if(!T(e))throw new TypeError("Function return value violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n"+i(e));return e}if(!T(e))throw new TypeError('Value of argument "loading" violates contract.\n\nExpected:\nLoadingObject\n\nGot:\n'+i(e));var n={obj:{},arr:[].concat(e.arr)};for(var r in e.obj)e.obj.hasOwnProperty(r)&&(n.obj[r]=e.obj[r]);return t(n)}}]),e}();t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":u(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var a="  ".repeat(t-1),c=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(e[n],t)+";"}).join("\n  "+a);return o.length>=r&&(c+="\n  "+a+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=i(e[0],t);return e.every(function(e){return i(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return i(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":u(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(3),f=r(c),s=n(4),l=s.InjectableArguments,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(o(this,e),null!=t&&!l(t))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+i(t));this._methodCalls=[],this._args=t}return a(e,[{key:"methodCalls",set:function(e){if(!Array.isArray(e)||!e.every(function(e){return e instanceof f.default}))throw new TypeError('Value of argument "methodCalls" violates contract.\n\nExpected:\nArray<MethodCall>\n\nGot:\n'+i(e));this._methodCalls=e},get:function(){function e(e){if(!Array.isArray(e)||!e.every(function(e){return e instanceof f.default}))throw new TypeError("Function return value violates contract.\n\nExpected:\nArray<MethodCall>\n\nGot:\n"+i(e));return e}return e(this._methodCalls)}},{key:"args",get:function(){function e(e){if(!l(e))throw new TypeError("Function return value violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n"+i(e));return e}return e(this._args)}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":i(e);if(!Array.isArray(e)){var u=Object.keys(e);if(!u.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var a="  ".repeat(t-1),c=u.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+o(e[n],t)+";"}).join("\n  "+a);return u.length>=r&&(c+="\n  "+a+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var i=o(e[0],t);return e.every(function(e){return o(e,t)===i})?{v:i.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return o(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":i(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),c=a.InjectableArguments,f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(this,e),"string"!=typeof t)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));if(null!=n&&!c(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+o(n));this._name=t,this._args=n}return u(e,[{key:"name",get:function(){function e(e){if("string"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+o(e));return e}return e(this._name)}},{key:"args",get:function(){function e(e){if(!c(e))throw new TypeError("Function return value violates contract.\n\nExpected:\nInjectableArguments\n\nGot:\n"+o(e));return e}return e(this._args)}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.InjectableArguments=void 0;var o=n(5),i=r(o),u=n(6),a=r(u);t.InjectableArguments=function(){function e(e){return Array.isArray(e)&&e.every(function(e){return e instanceof i.default||e instanceof a.default})}return Object.defineProperty(e,Symbol.hasInstance,{value:function(t){return e(t)}}),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=4,i=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":o(e);if(!Array.isArray(e)){var u=Object.keys(e);if(!u.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var a="  ".repeat(t-1),c=u.slice(0,i).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(e[n],t)+";"}).join("\n  "+a);return u.length>=i&&(c+="\n  "+a+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=r(e[0],t);return e.every(function(e){return r(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,i).map(function(e){return r(e,t)}).join(", ")+(e.length>=i?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":o(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t){if(n(this,e),"string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(t));this._id=t}return i(e,[{key:"id",get:function(){function e(e){if("string"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+r(e));return e}return e(this._id)}}]),e}();t.default=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=4,i=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":o(e);if(!Array.isArray(e)){var u=Object.keys(e);if(!u.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var a="  ".repeat(t-1),c=u.slice(0,i).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+r(e[n],t)+";"}).join("\n  "+a);return u.length>=i&&(c+="\n  "+a+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=r(e[0],t);return e.every(function(e){return r(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,i).map(function(e){return r(e,t)}).join(", ")+(e.length>=i?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":o(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t){if(n(this,e),"string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+r(t));this._id=t}return i(e,[{key:"id",get:function(){function e(e){if("string"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+r(e));return e}return e(this._id)}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=r(s),p=n(4),h=p.InjectableArguments,y=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o(this,t),"string"!=typeof e)throw new TypeError('Value of argument "classConstructorIdentifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(null!=n&&!h(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+a(n));var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r._classConstructorIdentifier=e,r}return u(t,e),f(t,[{key:"classConstructorIdentifier",get:function(){function e(e){if("string"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nstring\n\nGot:\n"+a(e));return e}return e(this._classConstructorIdentifier)}}]),t}(l.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=r(s),p=n(4),h=p.InjectableArguments,y=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o(this,t),"function"!=typeof e)throw new TypeError('Value of argument "factory" violates contract.\n\nExpected:\nFunction\n\nGot:\n'+a(e));if(null!=n&&!h(n))throw new TypeError('Value of argument "args" violates contract.\n\nExpected:\n?InjectableArguments\n\nGot:\n'+a(n));var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r._factory=e,r}return u(t,e),f(t,[{key:"factory",get:function(){function e(e){if("function"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nFunction\n\nGot:\n"+a(e));return e}return e(this._factory)}}]),t}(l.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(10),i=r(o),u=n(43),a=r(u),c=n(11),f=r(c),s=n(44),l=r(s),p=n(45),h=r(p),y=n(46),d=r(y),v=n(47),g=r(v),b=n(48),m=r(b),w=n(49),E=r(w),_=n(50),j=r(_),O=n(51),S=r(O);e.exports={CannotLocateServiceClassConstructorError:i.default,CircularDependencyError:a.default,DislError:f.default,FactoryMethodReturnsNothingError:l.default,MethodDoesNotExistError:h.default,ServiceDefinitionAlreadyUsedError:d.default,UndefinedParameterError:g.default,UndefinedServiceDefinitionAndInstanceError:m.default,
UndefinedServiceDefinitionError:E.default,UnsupportedArgumentTypeError:j.default,GetServiceError:S.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if("string"!=typeof e)throw new TypeError('Value of argument "className" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));return new t({className:e},'Cannot locate service class constructor for class "%s"',e)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),c=r(a),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(c.default);t.default=f},function(e,t,n){function r(e){var t,n,r,o,i;if(c.object(e,"args"),c.bool(e.strict,"args.strict"),c.array(e.argv,"args.argv"),t=e.argv,0===t.length)n={},r=[];else if(l(t[0]))n={cause:t[0]},r=t.slice(1);else if("object"==typeof t[0]){n={};for(i in t[0])n[i]=t[0][i];r=t.slice(1)}else c.string(t[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),n={},r=t;return c.object(n),n.strict||e.strict||(r=r.map(function(e){return null===e?"null":void 0===e?"undefined":e})),o=0===r.length?"":p.apply(null,r),{options:n,shortmessage:o}}function o(){var e,t,n,i,u,a,f;if(e=Array.prototype.slice.call(arguments,0),!(this instanceof o))return t=Object.create(o.prototype),o.apply(t,arguments),t;if(n=r({argv:e,strict:!1}),n.options.name&&(c.string(n.options.name,'error\'s "name" must be a string'),this.name=n.options.name),this.jse_shortmsg=n.shortmessage,a=n.shortmessage,i=n.options.cause,i&&(c.ok(l(i),"cause is not an Error"),this.jse_cause=i,n.options.skipCauseMessage||(a+=": "+i.message)),this.jse_info={},n.options.info)for(f in n.options.info)this.jse_info[f]=n.options.info[f];return this.message=a,Error.call(this,a),Error.captureStackTrace&&(u=n.options.constructorOpt||this.constructor,Error.captureStackTrace(this,u)),this}function i(){var e,t,n,u;return e=Array.prototype.slice.call(arguments,0),this instanceof i?(n=r({argv:e,strict:!0}),u=n.options,o.call(this,u,"%s",n.shortmessage),this):(t=Object.create(i.prototype),i.apply(t,arguments),t)}function u(e){c.array(e,"list of errors"),c.ok(e.length>0,"must be at least one error"),this.ase_errors=e,o.call(this,{cause:e[0]},"first of %d error%s",e.length,1==e.length?"":"s")}function a(){var e,t,n,i;return e=Array.prototype.slice.call(arguments,0),this instanceof a?(n=r({argv:e,strict:!1}),i=n.options,i.skipCauseMessage=!0,o.call(this,i,"%s",n.shortmessage),this):(t=Object.create(a.prototype),a.apply(t,e),t)}var c=n(13),f=n(20),s=n(41),l=n(42).isError,p=s.sprintf;e.exports=o,o.VError=o,o.SError=i,o.WError=a,o.MultiError=u,f.inherits(o,Error),o.prototype.name="VError",o.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e},o.prototype.cause=function(){var e=o.cause(this);return null===e?void 0:e},o.cause=function(e){return c.ok(l(e),"err must be an Error"),l(e.jse_cause)?e.jse_cause:null},o.info=function(e){var t,n,r;if(c.ok(l(e),"err must be an Error"),n=o.cause(e),t=null!==n?o.info(n):{},"object"==typeof e.jse_info&&null!==e.jse_info)for(r in e.jse_info)t[r]=e.jse_info[r];return t},o.findCauseByName=function(e,t){var n;for(c.ok(l(e),"err must be an Error"),c.string(t),c.ok(t.length>0,"name cannot be empty"),n=e;null!==n;n=o.cause(n))if(c.ok(l(n)),n.name==t)return n;return null},o.fullStack=function(e){c.ok(l(e),"err must be an Error");var t=o.cause(e);return t?e.stack+"\ncaused by: "+o.fullStack(t):e.stack},f.inherits(i,o),f.inherits(u,o),u.prototype.name="MultiError",u.prototype.errors=function(){return this.ase_errors.slice(0)},f.inherits(a,o),a.prototype.name="WError",a.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(e+="; caused by "+this.jse_cause.toString()),e},a.prototype.cause=function(e){return l(e)&&(this.jse_cause=e),this.jse_cause}},function(e,t,n){(function(t,r){function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t,n,r,o){throw new f.AssertionError({message:l.format("%s (%s) is required",e,t),actual:void 0===o?typeof r:o(r),expected:t,operator:n||"===",stackStartFunction:i.caller})}function u(e){return Object.prototype.toString.call(e).slice(8,-1)}function a(){}function c(e){var t,n=Object.keys(h);return t=r.env.NODE_NDEBUG?a:function(e,t){e||i(t,"true",e)},n.forEach(function(n){if(e)return void(t[n]=a);var r=h[n];t[n]=function(e,t){r.check(e)||i(t,n,r.operator,e,r.actual)}}),n.forEach(function(n){var r="optional"+o(n);if(e)return void(t[r]=a);var u=h[n];t[r]=function(e,t){void 0!==e&&null!==e&&(u.check(e)||i(t,n,u.operator,e,u.actual))}}),n.forEach(function(n){var r="arrayOf"+o(n);if(e)return void(t[r]=a);var u=h[n],c="["+n+"]";t[r]=function(e,t){Array.isArray(e)||i(t,c,u.operator,e,u.actual);var n;for(n=0;n<e.length;n++)u.check(e[n])||i(t,c,u.operator,e,u.actual)}}),n.forEach(function(n){var r="optionalArrayOf"+o(n);if(e)return void(t[r]=a);var u=h[n],c="["+n+"]";t[r]=function(e,t){if(void 0!==e&&null!==e){Array.isArray(e)||i(t,c,u.operator,e,u.actual);var n;for(n=0;n<e.length;n++)u.check(e[n])||i(t,c,u.operator,e,u.actual)}}}),Object.keys(f).forEach(function(n){return"AssertionError"===n?void(t[n]=f[n]):e?void(t[n]=a):void(t[n]=f[n])}),t._setExports=c,t}var f=n(19),s=n(23).Stream,l=n(20),p=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,h={bool:{check:function(e){return"boolean"==typeof e}},func:{check:function(e){return"function"==typeof e}},string:{check:function(e){return"string"==typeof e}},object:{check:function(e){return"object"==typeof e&&null!==e}},number:{check:function(e){return"number"==typeof e&&!isNaN(e)}},finite:{check:function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}},buffer:{check:function(e){return t.isBuffer(e)},operator:"Buffer.isBuffer"},array:{check:function(e){return Array.isArray(e)},operator:"Array.isArray"},stream:{check:function(e){return e instanceof s},operator:"instanceof",actual:u},date:{check:function(e){return e instanceof Date},operator:"instanceof",actual:u},regexp:{check:function(e){return e instanceof RegExp},operator:"instanceof",actual:u},uuid:{check:function(e){return"string"==typeof e&&p.test(e)},operator:"isUUID"}};e.exports=c(r.env.NODE_NDEBUG)}).call(t,n(14).Buffer,n(18))},function(e,t,n){(function(e,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,n){if(i()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,r){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,r);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return s(this,t)}return a(this,t,n,r)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?l(e,t,n):y(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,n,r){return c(t),t<=0?u(e,t):void 0!==n?"string"==typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}function s(t,n){if(c(n),t=u(t,n<0?0:0|d(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)t[r]=0;return t}function l(t,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|g(n,r);t=u(t,o);var i=t.write(n,r);return i!==o&&(t=t.slice(0,i)),t}function p(e,t){var n=t.length<0?0:0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(t,n,r,o){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===o?new Uint8Array(n):void 0===o?new Uint8Array(n,r):new Uint8Array(n,r,o),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=p(t,n),t}function y(t,n){if(e.isBuffer(n)){var r=0|d(n.length);return t=u(t,r),0===t.length?t:(n.copy(t,0,0,r),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||H(n.length)?u(t,0):p(t,n);if("Buffer"===n.type&&Q(n.data))return p(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(t){return+t!=t&&(t=0),e.alloc(+t)}function g(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(t).length;default:if(o)return z(t).length;n=(""+n).toLowerCase(),o=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(t,n,r,o,i){if(0===t.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=e.from(n,o)),e.isBuffer(n))return 0===n.length?-1:E(t,n,r,o,i);if("number"==typeof n)return n&=255,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):E(t,[n],r,o,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,o){function i(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}var u=1,a=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;u=2,a/=2,c/=2,n/=2}var f;if(o){var s=-1;for(f=n;f<a;f++)if(i(e,f)===i(t,s===-1?0:f-s)){if(s===-1&&(s=f),f-s+1===c)return s*u}else s!==-1&&(f-=f-s),s=-1}else for(n+c>a&&(n=a-c),f=n;f>=0;f--){for(var l=!0,p=0;p<c;p++)if(i(e,f+p)!==i(t,p)){l=!1;break}if(l)return f}return-1}function _(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var u=0;u<r;++u){var a=parseInt(t.substr(2*u,2),16);if(isNaN(a))return u;e[n+u]=a}return u}function j(e,t,n,r){return q(z(t,e.length-n),e,n,r)}function O(e,t,n,r){return q(Z(t),e,n,r)}function S(e,t,n,r){return O(e,t,n,r)}function A(e,t,n,r){return q(J(t),e,n,r)}function T(e,t,n,r){return q(W(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],u=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c,f,s,l;switch(a){case 1:i<128&&(u=i);break;case 2:c=e[o+1],128===(192&c)&&(l=(31&i)<<6|63&c,l>127&&(u=l));break;case 3:c=e[o+1],f=e[o+2],128===(192&c)&&128===(192&f)&&(l=(15&i)<<12|(63&c)<<6|63&f,l>2047&&(l<55296||l>57343)&&(u=l));break;case 4:c=e[o+1],f=e[o+2],s=e[o+3],128===(192&c)&&128===(192&f)&&128===(192&s)&&(l=(15&i)<<18|(63&c)<<12|(63&f)<<6|63&s,l>65535&&l<1114112&&(u=l))}}null===u?(u=65533,a=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=a}return P(r)}function P(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=Y(e[i]);return o}function L(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function B(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,n,r,o,i,u){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<u)throw new RangeError('"value" argument is out of bounds');if(r+o>t.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function G(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,o){return o||G(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||G(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,n,r,52,8),n+8}function V(e){if(e=$(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function $(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],u=0;u<r;++u){if(n=e.charCodeAt(u),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(u+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Z(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,r,o,i=[],u=0;u<e.length&&!((t-=2)<0);++u)n=e.charCodeAt(u),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function J(e){return X.toByteArray(V(e))}function q(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function H(e){return e!==e}var X=n(15),K=n(16),Q=n(17);t.Buffer=e,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),t.kMaxLength=i(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return a(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return f(null,e,t,n)},e.allocUnsafe=function(e){return s(null,e)},e.allocUnsafeSlow=function(e){return s(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,o=n.length,i=0,u=Math.min(r,o);i<u;++i)if(t[i]!==n[i]){r=t[i],o=n[i];break}return r<o?-1:o<r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var o=e.allocUnsafe(n),i=0;for(r=0;r<t.length;++r){var u=t[r];if(!e.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(o,i),i+=u.length}return o},e.byteLength=g,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):b.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,r,o,i){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),n<0||r>t.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&n>=r)return 0;if(o>=i)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,o>>>=0,i>>>=0,this===t)return 0;for(var u=i-o,a=r-n,c=Math.min(u,a),f=this.slice(o,i),s=t.slice(n,r),l=0;l<c;++l)if(f[l]!==s[l]){u=f[l],a=s[l];break}return u<a?-1:a<u?1:0},e.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},e.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return j(this,e,t,n);case"ascii":return O(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<t&&(n=t);var o;if(e.TYPED_ARRAY_SUPPORT)o=this.subarray(t,n),o.__proto__=e.prototype;else{var i=n-t;o=new e(i,void 0);for(var u=0;u<i;++u)o[u]=this[u+t]}return o},e.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},e.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},e.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},e.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),K.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),K.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),K.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),K.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;I(this,e,t,n,o,0)}var i=1,u=0;for(this[t]=255&e;++u<n&&(i*=256);)this[t+u]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;I(this,e,t,n,o,0)}var i=n-1,u=1;for(this[t+i]=255&e;--i>=0&&(u*=256);)this[t+i]=e/u&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):D(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):D(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):U(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):U(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=0,u=1,a=0;for(this[t]=255&e;++i<n&&(u*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/u>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=n-1,u=1,a=0;for(this[t+i]=255&e;--i>=0&&(u*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/u>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):D(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):D(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):U(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):U(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=t.length&&(n=t.length),n||(n=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-n<o-r&&(o=t.length-n+r);var i,u=o-r;if(this===t&&r<n&&n<o)for(i=u-1;i>=0;--i)t[i+n]=this[i+r];else if(u<1e3||!e.TYPED_ARRAY_SUPPORT)for(i=0;i<u;++i)t[i+n]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+u),n);return u},e.prototype.fill=function(t,n,r,o){if("string"==typeof t){if("string"==typeof n?(o=n,n=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!e.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var u;if("number"==typeof t)for(u=n;u<r;++u)this[u]=t;else{var a=e.isBuffer(t)?t:z(new e(t,o).toString()),c=a.length;for(u=0;u<r-n;++u)this[u+n]=a[u%c]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(14).Buffer,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function o(e){var t,r,o,i,u,a,c=e.length;u=n(e),a=new s(3*c/4-u),o=u>0?c-4:c;var l=0;for(t=0,r=0;t<o;t+=4,r+=3)i=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===u?(i=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,a[l++]=255&i):1===u&&(i=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}function i(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function u(e,t,n){for(var r,o=[],u=t;u<n;u+=3)r=(e[u]<<16)+(e[u+1]<<8)+e[u+2],o.push(i(r));return o.join("")}function a(e){for(var t,n=e.length,r=n%3,o="",i=[],a=16383,f=0,s=n-r;f<s;f+=a)i.push(u(e,f,f+a>s?s:f+a));return 1===r?(t=e[n-1],o+=c[t>>2],o+=c[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=c[t>>10],o+=c[t>>4&63],o+=c[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=r,t.toByteArray=o,t.fromByteArray=a;for(var c=[],f=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=l.length;p<h;++p)c[p]=l[p],f[l.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,u,a=8*o-r-1,c=(1<<a)-1,f=c>>1,s=-7,l=n?o-1:0,p=n?-1:1,h=e[t+l];for(l+=p,i=h&(1<<-s)-1,h>>=-s,s+=a;s>0;i=256*i+e[t+l],l+=p,s-=8);for(u=i&(1<<-s)-1,i>>=-s,s+=r;s>0;u=256*u+e[t+l],l+=p,s-=8);if(0===i)i=1-f;else{if(i===c)return u?NaN:(h?-1:1)*(1/0);u+=Math.pow(2,r),i-=f}return(h?-1:1)*u*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var u,a,c,f=8*i-o-1,s=(1<<f)-1,l=s>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,y=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,u=s):(u=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-u))<1&&(u--,c*=2),t+=u+l>=1?p/c:p*Math.pow(2,1-l),t*c>=2&&(u++,c/=2),u+l>=s?(a=0,u=s):u+l>=1?(a=(t*c-1)*Math.pow(2,o),u+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),u=0));o>=8;e[n+h]=255&a,h+=y,a/=256,o-=8);for(u=u<<o|a,f+=o;f>0;e[n+h]=255&u,h+=y,u/=256,f-=8);e[n+h-y]|=128*d}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function u(){d&&h&&(d=!1,h.length?y=h.concat(y):v=-1,y.length&&a())}function a(){if(!d){var e=o(u);d=!0;for(var t=y.length;t;){for(h=y,y=[];++v<t;)h&&h[v].run();v=-1,t=y.length}h=null,d=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function f(){}var s,l,p=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var h,y=[],d=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];y.push(new c(e,t)),1!==y.length||d||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function u(e){return!o(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function a(e){if(w.isFunction(e)){if(j)return e.name;var t=e.toString(),n=t.match(S);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function f(e){if(j||!w.isFunction(e))return w.inspect(e);var t=a(e),n=t?": "+t:"";return"[Function"+n+"]"}function s(e){return c(f(e.actual),128)+" "+e.operator+" "+c(f(e.expected),128)}function l(e,t,n,r,o){throw new O.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function p(e,t){e||l(e,!0,t,"==",O.ok)}function h(e,t,n,a){if(e===t)return!0;if(o(e)&&o(t))return 0===r(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(u(e)&&u(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;a=a||{actual:[],expected:[]};var c=a.actual.indexOf(e);return c!==-1&&c===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),d(e,t,n,a))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function d(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=y(e),i=y(t);if(o&&!i||!o&&i)return!1;if(o)return e=_.call(e),t=_.call(t),h(e,t,n);var u,a,c=A(e),f=A(t);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),a=c.length-1;a>=0;a--)if(c[a]!==f[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!h(e[u],t[u],n,r))return!1;return!0}function v(e,t,n){h(e,t,!0)&&l(e,t,n,"notDeepStrictEqual",v)}function g(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&t.call({},e)===!0}function b(e){var t;try{e()}catch(e){t=e}return t}function m(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=b(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&l(o,n,"Missing expected exception"+r);var i="string"==typeof r,u=!e&&w.isError(o),a=!e&&o&&!n;if((u&&i&&g(o,n)||a)&&l(o,n,"Got unwanted exception"+r),e&&o&&n&&!g(o,n)||!e&&o)throw o}var w=n(20),E=Object.prototype.hasOwnProperty,_=Array.prototype.slice,j=function(){return"foo"===function(){}.name}(),O=e.exports=p,S=/\s*function\s+([^\(\s]*)\s*/;O.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=a(t),i=r.indexOf("\n"+o);if(i>=0){var u=r.indexOf("\n",i+1);r=r.substring(u+1)}this.stack=r}}},w.inherits(O.AssertionError,Error),O.fail=l,O.ok=p,O.equal=function(e,t,n){e!=t&&l(e,t,n,"==",O.equal)},O.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",O.notEqual)},O.deepEqual=function(e,t,n){h(e,t,!1)||l(e,t,n,"deepEqual",O.deepEqual)},O.deepStrictEqual=function(e,t,n){h(e,t,!0)||l(e,t,n,"deepStrictEqual",O.deepStrictEqual)},O.notDeepEqual=function(e,t,n){h(e,t,!1)&&l(e,t,n,"notDeepEqual",O.notDeepEqual)},O.notDeepStrictEqual=v,O.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",O.strictEqual)},O.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",O.notStrictEqual)},O.throws=function(e,t,n){m(!0,e,t,n)},O.doesNotThrow=function(e,t,n){m(!1,e,t,n)},O.ifError=function(e){if(e)throw e};var A=Object.keys||function(e){var t=[];for(var n in e)E.call(e,n)&&t.push(n);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),c(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function u(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&A(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return m(o)||(o=c(e,o,r)),o}var i=f(e,n);if(i)return i;var u=Object.keys(n),d=a(u);if(e.showHidden&&(u=Object.getOwnPropertyNames(n)),S(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return s(n);if(0===u.length){if(A(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return s(n)}var g="",b=!1,w=["{","}"];if(y(n)&&(b=!0,w=["[","]"]),A(n)){var E=n.name?": "+n.name:"";g=" [Function"+E+"]"}if(_(n)&&(g=" "+RegExp.prototype.toString.call(n)),O(n)&&(g=" "+Date.prototype.toUTCString.call(n)),S(n)&&(g=" "+s(n)),0===u.length&&(!b||0==n.length))return w[0]+g+w[1];if(r<0)return _(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var j;return j=b?l(e,n,r,d,u):u.map(function(t){return p(e,n,r,d,t,b)}),e.seen.pop(),h(j,g,w)}function f(e,t){if(E(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o){for(var i=[],u=0,a=t.length;u<a;++u)R(t,String(u))?i.push(p(e,t,n,r,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,n,r,o,!0))}),i}function p(e,t,n,r,o,i){var u,a,f;if(f=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},f.get?a=f.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):f.set&&(a=e.stylize("[Setter]","special")),R(r,o)||(u="["+o+"]"),a||(e.seen.indexOf(f.value)<0?(a=v(n)?c(e,f.value,null):c(e,f.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),E(u)){if(i&&o.match(/^\d+$/))return a;u=JSON.stringify(""+o),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+a}function h(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function y(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function v(e){return null===e}function g(e){return null==e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function E(e){return void 0===e}function _(e){return j(e)&&"[object RegExp]"===x(e)}function j(e){return"object"==typeof e&&null!==e}function O(e){return j(e)&&"[object Date]"===x(e)}function S(e){return j(e)&&("[object Error]"===x(e)||e instanceof Error)}function A(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function x(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,u=String(e).replace(M,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])u+=v(a)||!j(a)?" "+a:" "+o(a);return u},t.deprecate=function(n,o){function i(){if(!u){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),u=!0}return n.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var u=!1;return i};var C,L={};t.debuglog=function(e){if(E(C)&&(C=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(C)){var n=r.pid;L[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else L[e]=function(){};return L[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=y,t.isBoolean=d,t.isNull=v,t.isNullOrUndefined=g,t.isNumber=b,t.isString=m,t.isSymbol=w,t.isUndefined=E,t.isRegExp=_,t.isObject=j,t.isDate=O,t.isError=S,t.isFunction=A,t.isPrimitive=T,t.isBuffer=n(21);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=n(22),t._extend=function(e,t){if(!t||!j(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(18))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){function r(){o.call(this)}e.exports=r;var o=n(24).EventEmitter,i=n(25);i(r,o),r.Readable=n(26),r.Writable=n(37),r.Duplex=n(38),r.Transform=n(39),r.PassThrough=n(40),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&f.pause&&f.pause()}function r(){f.readable&&f.resume&&f.resume()}function i(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(c(),0===o.listenerCount(this,"error"))throw e}function c(){f.removeListener("data",n),e.removeListener("drain",r),f.removeListener("end",i),f.removeListener("close",u),f.removeListener("error",a),e.removeListener("error",a),f.removeListener("end",c),f.removeListener("close",c),e.removeListener("close",c)}var f=this;f.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(f.on("end",i),f.on("close",u));var s=!1;return f.on("error",a),e.on("error",a),f.on("end",c),f.on("close",c),e.on("close",c),e.emit("pipe",f),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,c,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(n=this._events[e],u(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),f=n.slice(),o=f.length,c=0;c<o;c++)f[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,u,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],u=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=u;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){t=e.exports=n(27),t.Stream=n(23),t.Readable=t,t.Writable=n(33),t.Duplex=n(32),t.Transform=n(35),t.PassThrough=n(36),r.browser||"disable"!==r.env.READABLE_STREAM||(e.exports=n(23))}).call(t,n(18))},function(e,t,n){(function(t){function r(e,t){var r=n(32);e=e||{};var o=e.highWaterMark,i=e.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(x||(x=n(34).StringDecoder),this.decoder=new x(e.encoding),this.encoding=e.encoding)}function o(e){n(32);return this instanceof o?(this._readableState=new r(e,this),this.readable=!0,void A.call(this)):new o(e)}function i(e,t,n,r,o){var i=f(t,n);if(i)e.emit("error",i);else if(T.isNullOrUndefined(n))t.reading=!1,t.ended||s(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&o){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||o||r||(n=t.decoder.write(n)),o||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),h(e,t);else o||(t.reading=!1);return u(t)}function u(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=P)e=P;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function c(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||T.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var n=null;return T.isBuffer(t)||T.isString(t)||T.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function s(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}function l(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(k("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){p(e)}):p(e))}function p(e){k("emit readable"),e.emit("readable"),b(e)}function h(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){y(e,n)}))}function y(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(k("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function d(e){return function(){var t=e._readableState;k("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&S.listenerCount(e,"data")&&(t.flowing=!0,b(e))}}function v(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){g(e,n)}))}function g(e,t){t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;if(k("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function m(e,t){var n,r=t.buffer,o=t.length,i=!!t.decoder,u=!!t.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(u)n=r.shift();else if(!e||e>=o)n=i?r.join(""):O.concat(r,o),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=i?"":new O(e);for(var c=0,f=0,s=r.length;f<s&&c<e;f++){var a=r[0],l=Math.min(e-c,a.length);i?n+=a.slice(0,l):a.copy(n,c,0,l),l<a.length?r[0]=a.slice(l):r.shift(),c+=l}}return n}function w(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function E(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function _(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}e.exports=o;var j=n(28),O=n(14).Buffer;o.ReadableState=r;var S=n(24).EventEmitter;S.listenerCount||(S.listenerCount=function(e,t){return e.listeners(t).length});var A=n(23),T=n(29);T.inherits=n(30);var x,k=n(31);k=k&&k.debuglog?k.debuglog("stream"):function(){},T.inherits(o,A),o.prototype.push=function(e,t){var n=this._readableState;return T.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new O(e,t),t="")),i(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return i(this,t,e,"",!0)},o.prototype.setEncoding=function(e){return x||(x=n(34).StringDecoder),this._readableState.decoder=new x(e),this._readableState.encoding=e,this};var P=8388608;o.prototype.read=function(e){k("read",e);var t=this._readableState,n=e;if((!T.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return k("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):l(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;k("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,k("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,k("reading or ended",r)),r&&(k("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=c(n,t));var o;return o=e>0?m(e,t):null,T.isNull(o)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),T.isNull(o)||this.emit("data",o),o},o.prototype._read=function(e){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(e,n){function r(e){k("onunpipe"),e===l&&i()}function o(){k("onend"),e.end()}function i(){k("cleanup"),e.removeListener("close",c),e.removeListener("finish",f),e.removeListener("drain",v),e.removeListener("error",a),e.removeListener("unpipe",r),l.removeListener("end",o),l.removeListener("end",i),l.removeListener("data",u),!p.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function u(t){k("ondata");var n=e.write(t);!1===n&&(k("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(t){k("onerror",t),s(),e.removeListener("error",a),0===S.listenerCount(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",f),s()}function f(){k("onfinish"),e.removeListener("close",c),s()}function s(){k("unpipe"),l.unpipe(e)}var l=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,k("pipe count=%d opts=%j",p.pipesCount,n);var h=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,y=h?o:i;p.endEmitted?t.nextTick(y):l.once("end",y),e.on("unpipe",r);var v=d(l);return e.on("drain",v),l.on("data",u),e._events&&e._events.error?j(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",c),e.once("finish",f),e.emit("pipe",l),p.flowing||(k("pipe resume"),l.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}var o=_(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,n){var r=A.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var o=this._readableState;if(!o.readableListening)if(o.readableListening=!0,o.emittedReadable=!1,o.needReadable=!0,o.reading)o.length&&l(this,o);else{var i=this;t.nextTick(function(){k("readable nexttick read 0"),i.read(0)})}}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(k("resume"),e.flowing=!0,e.reading||(k("resume read 0"),this.read(0)),v(this,e)),this},o.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(k("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(o){if(k("wrapped data"),t.decoder&&(o=t.decoder.write(o)),o&&(t.objectMode||o.length)){var i=r.push(o);i||(n=!0,e.pause())}});for(var o in e)T.isFunction(e[o])&&T.isUndefined(this[o])&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return E(i,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){k("wrapped _read",t),n&&(n=!1,e.resume())},r},o._fromList=m}).call(t,n(18))},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"==typeof e}function o(e){return null===e}function i(e){return null==e}function u(e){return"number"==typeof e}function a(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function f(e){return void 0===e}function s(e){return"[object RegExp]"===v(e)}function l(e){return"object"==typeof e&&null!==e}function p(e){return"[object Date]"===v(e)}function h(e){return"[object Error]"===v(e)||e instanceof Error}function y(e){return"function"==typeof e}function d(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=o,t.isNullOrUndefined=i,t.isNumber=u,t.isString=a,t.isSymbol=c,t.isUndefined=f,t.isRegExp=s,t.isObject=l,t.isDate=p,t.isError=h,t.isFunction=y,t.isPrimitive=d,t.isBuffer=e.isBuffer}).call(t,n(14).Buffer)},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){},function(e,t,n){(function(t){function r(e){return this instanceof r?(c.call(this,e),f.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new r(e)}function o(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function i(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}e.exports=r;var u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=n(29);a.inherits=n(30);var c=n(27),f=n(33);a.inherits(r,c),i(u(f.prototype),function(e){r.prototype[e]||(r.prototype[e]=f.prototype[e])})}).call(t,n(18))},function(e,t,n){(function(t){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function o(e,t){var r=n(32);e=e||{};var o=e.highWaterMark,i=e.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var u=e.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){h(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function i(e){var t=n(32);return this instanceof i||this instanceof t?(this._writableState=new o(e,this),this.writable=!0,void j.call(this)):new i(e)}function u(e,n,r){var o=new Error("write after end");e.emit("error",o),t.nextTick(function(){r(o)})}function a(e,n,r,o){var i=!0;if(!(_.isBuffer(r)||_.isString(r)||_.isNullOrUndefined(r)||n.objectMode)){var u=new TypeError("Invalid non-string/buffer chunk");e.emit("error",u),t.nextTick(function(){o(u)}),i=!1}return i}function c(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&_.isString(t)&&(t=new E(t,n)),t}function f(e,t,n,o,i){n=c(t,n,o),_.isBuffer(n)&&(o="buffer");var u=t.objectMode?1:n.length;t.length+=u;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new r(n,o,i)):s(e,t,!1,u,n,o,i),a}function s(e,t,n,r,o,i,u){t.writelen=r,t.writecb=u,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function l(e,n,r,o,i){r?t.nextTick(function(){n.pendingcb--,i(o)}):(n.pendingcb--,i(o)),e._writableState.errorEmitted=!0,e.emit("error",o)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function h(e,n){var r=e._writableState,o=r.sync,i=r.writecb;if(p(r),n)l(e,r,o,n,i);else{var u=g(e,r);u||r.corked||r.bufferProcessing||!r.buffer.length||v(e,r),o?t.nextTick(function(){y(e,r,u,i)}):y(e,r,u,i)}}function y(e,t,n,r){n||d(e,t),t.pendingcb--,r(),m(e,t)}function d(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,s(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var o=t.buffer[r],i=o.chunk,u=o.encoding,a=o.callback,c=t.objectMode?1:i.length;if(s(e,t,!1,c,i,u,a),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function g(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var n=g(e,t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function w(e,n,r){n.ending=!0,m(e,n),r&&(n.finished?t.nextTick(r):e.once("finish",r)),n.ended=!0}e.exports=i;var E=n(14).Buffer;i.WritableState=o;var _=n(29);_.inherits=n(30);var j=n(23);_.inherits(i,j),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return _.isFunction(t)&&(n=t,t=null),_.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),_.isFunction(n)||(n=function(){}),r.ended?u(this,r,n):a(this,r,e,n)&&(r.pendingcb++,o=f(this,r,e,t,n)),o},i.prototype.cork=function(){var e=this._writableState;e.corked++},i.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||v(this,e))},i.prototype._write=function(e,t,n){n(new Error("not implemented"))},i.prototype._writev=null,i.prototype.end=function(e,t,n){var r=this._writableState;_.isFunction(e)?(n=e,e=null,t=null):_.isFunction(t)&&(n=t,t=null),_.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(t,n(18))},function(e,t,n){function r(e){if(e&&!c(e))throw new Error("Unknown encoding: "+e)}function o(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=n(14).Buffer,c=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;
break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=o)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var o=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,o),o-=this.charReceived),t+=e.toString(this.encoding,0,o);var o=t.length-1,r=t.charCodeAt(o);if(r>=55296&&r<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,o)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;t+=r.slice(0,n).toString(o)}return t}},function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return o(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,c.isNullOrUndefined(n)||e.push(n),o&&o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);a.call(this,e),this._transformState=new r(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(e){u(t,e)}):u(t)})}function u(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=i;var a=n(32),c=n(29);c.inherits=n(30),c.inherits(i,a),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;c.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,n){function r(e){return this instanceof r?void o.call(this,e):new r(e)}e.exports=r;var o=n(35),i=n(29);i.inherits=n(30),i.inherits(r,o),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(33)},function(e,t,n){e.exports=n(32)},function(e,t,n){e.exports=n(35)},function(e,t,n){e.exports=n(36)},function(e,t,n){(function(e){function r(e){var t,n,r,o,i,s,l,p,h,y=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),d=new RegExp(y),v=Array.prototype.slice.call(arguments,1),g="",b=1;for(c.equal("string",typeof e);null!==(h=d.exec(e));)if(g+=h[1],e=e.substring(h[0].length),t=h[2]||"",n=h[3]||0,r=h[4]||"",o=h[6],i=!1,l=!1,s=" ","%"!=o){if(0===v.length)throw new Error("too few args to sprintf");if(p=v.shift(),b++,t.match(/[\' #]/))throw new Error("unsupported flags: "+t);if(r.length>0)throw new Error("non-zero precision not supported");switch(t.match(/-/)&&(i=!0),t.match(/0/)&&(s="0"),t.match(/\+/)&&(l=!0),o){case"s":if(void 0===p||null===p)throw new Error("argument "+b+": attempted to print undefined or null as a string");g+=u(s,n,i,p.toString());break;case"d":p=Math.floor(p);case"f":l=l&&p>0?"+":"",g+=l+u(s,n,i,p.toString());break;case"x":g+=u(s,n,i,p.toString(16));break;case"j":0===n&&(n=10),g+=f.inspect(p,!1,n);break;case"r":g+=a(p);break;default:throw new Error("unsupported conversion: "+o)}}else g+="%";return g+=e}function o(){var t=Array.prototype.slice.call(arguments);t.unshift(e.stdout),i.apply(null,t)}function i(e){var t=Array.prototype.slice.call(arguments,1);return e.write(r.apply(this,t))}function u(e,t,n,r){for(var o=r;o.length<t;)n?o+=e:o=e+o;return o}function a(e){var t;if(!(e instanceof Error))throw new Error(r("invalid type for %%r: %j",e));if(t="EXCEPTION: "+e.constructor.name+": "+e.stack,e.cause&&"function"==typeof e.cause){var n=e.cause();n&&(t+="\nCaused by: "+a(n))}return t}var c=n(19),f=n(20);t.sprintf=r,t.printf=o,t.fprintf=i}).call(t,n(18))},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"==typeof e}function o(e){return null===e}function i(e){return null==e}function u(e){return"number"==typeof e}function a(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function f(e){return void 0===e}function s(e){return"[object RegExp]"===v(e)}function l(e){return"object"==typeof e&&null!==e}function p(e){return"[object Date]"===v(e)}function h(e){return"[object Error]"===v(e)||e instanceof Error}function y(e){return"function"==typeof e}function d(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=o,t.isNullOrUndefined=i,t.isNumber=u,t.isString=a,t.isSymbol=c,t.isUndefined=f,t.isRegExp=s,t.isObject=l,t.isDate=p,t.isError=h,t.isFunction=y,t.isPrimitive=d,t.isBuffer=e.isBuffer}).call(t,n(14).Buffer)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if(!Array.isArray(e)||!e.every(function(e){return"string"==typeof e}))throw new TypeError('Value of argument "services" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(e));var n=[].concat(e).reverse().join(" <- ");return new t({services:e},"Circular dependency found: %s",n)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));return new t({identifier:e},'Factory method for identifier "%s" returns nothing',e)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if("string"!=typeof e)throw new TypeError('Value of argument "methodName" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));return new t({methodName:e},'Method "%s" does not exist',e)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));return new t({identifier:e},'Service definition for "%s" has already been used to instantiate a service, refusing to modify it',e)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));return new t({identifier:e},'Undefined parameter for identifier "%s"',e)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));return new t({identifier:e},'Undefined service definition and instance for identifier "%s"',e)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e){if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));return new t({identifier:e},'Undefined service definition for identifier "%s"',e)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(11),s=r(f),l=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,null,[{key:"createError",value:function(e){return new t({arg:e},'Unsupported arg of type "%s"',"undefined"==typeof e?"undefined":a(e))}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":c(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var i="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(e.length>0))return"Array";var f=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":c(f))?f.v:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),l=r(s),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,null,[{key:"createError",value:function(e,n){if("string"!=typeof e)throw new TypeError('Value of argument "identifier" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!(n instanceof Error))throw new TypeError('Value of argument "cause" violates contract.\n\nExpected:\nError\n\nGot:\n'+a(n));return new t({cause:n,info:{identifier:e}},'Error getting service "%s"',e)}}]),t}(l.default);t.default=p},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Service=function(){function e(e){return e instanceof Object||"function"==typeof e}return Object.defineProperty(e,Symbol.hasInstance,{value:function(t){return e(t)}}),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.scalar=function(){function e(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null==e}return Object.defineProperty(e,Symbol.hasInstance,{value:function(t){return e(t)}}),e}()}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9kaS1kZXYuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDZlNzhjMDhiZmFhMzkzMDc2MjcwIiwid2VicGFjazovLy8uL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlZmluaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21ldGhvZC1jYWxsLmpzIiwid2VicGFjazovLy8uL3NyYy90eXBlcy9pbmplY3RhYmxlLWFyZ3VtZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVmZXJlbmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXJhbWV0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzLWNvbnN0cnVjdG9yLWRlZmluaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZhY3RvcnktZGVmaW5pdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvY2Fubm90LWxvY2F0ZS1zZXJ2aWNlLWNsYXNzLWNvbnN0cnVjdG9yLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZGlzbC1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZlcnJvci9saWIvdmVycm9yLmpzIiwid2VicGFjazovLy8uL34vdmVycm9yL34vYXNzZXJ0LXBsdXMvYXNzZXJ0LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9iYXNlNjQtanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaWVlZTc1NC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvfi9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9hc3NlcnQvYXNzZXJ0LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvdXRpbC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi91dGlsL3N1cHBvcnQvaXNCdWZmZXJCcm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3N0cmVhbS1icm93c2VyaWZ5L2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyZWFtLWJyb3dzZXJpZnkvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcmVhZGFibGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vfi9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL34vaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9zdHJpbmdfZGVjb2Rlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2R1cGxleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZlcnJvci9+L2V4dHNwcmludGYvbGliL2V4dHNwcmludGYuanMiLCJ3ZWJwYWNrOi8vLy4vfi92ZXJyb3Ivfi9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy9jaXJjdWxhci1kZXBlbmRlbmN5LWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZmFjdG9yeS1tZXRob2QtcmV0dXJucy1ub3RoaW5nLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvbWV0aG9kLWRvZXMtbm90LWV4aXN0LWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvc2VydmljZS1kZWZpbml0aW9uLWFscmVhZHktdXNlZC1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1wYXJhbWV0ZXItZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy91bmRlZmluZWQtc2VydmljZS1kZWZpbml0aW9uLWFuZC1pbnN0YW5jZS1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1zZXJ2aWNlLWRlZmluaXRpb24tZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vycm9ycy91bnN1cHBvcnRlZC1hcmd1bWVudC10eXBlLWVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9lcnJvcnMvZ2V0LXNlcnZpY2UtZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R5cGVzL3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R5cGVzL3NjYWxhci5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJhIiwiaSIsInRoaXMiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jb250YWluZXIiLCJfY29udGFpbmVyMiIsIl9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiIsIl9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbjIiLCJfZmFjdG9yeURlZmluaXRpb24iLCJfZmFjdG9yeURlZmluaXRpb24yIiwiX3JlZmVyZW5jZSIsIl9yZWZlcmVuY2UyIiwiX3BhcmFtZXRlciIsIl9wYXJhbWV0ZXIyIiwiX21ldGhvZENhbGwiLCJfbWV0aG9kQ2FsbDIiLCJfZXJyb3JzIiwiX2Vycm9yczIiLCJDb250YWluZXIiLCJDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiIsIkZhY3RvcnlEZWZpbml0aW9uIiwiUmVmZXJlbmNlIiwiUGFyYW1ldGVyIiwiTWV0aG9kQ2FsbCIsImhhc093blByb3BlcnR5IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9pbnNwZWN0IiwiaW5wdXQiLCJkZXB0aCIsIm1heERlcHRoIiwibWF4S2V5cyIsInVuZGVmaW5lZCIsIl90eXBlb2YiLCJBcnJheSIsImlzQXJyYXkiLCJrZXlzIiwiT2JqZWN0IiwibGVuZ3RoIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaW5kZW50IiwicmVwZWF0IiwiZW50cmllcyIsInNsaWNlIiwibWFwIiwia2V5IiwidGVzdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJqb2luIiwiX3JldCIsInYiLCJmaXJzdCIsImV2ZXJ5IiwiaXRlbSIsInRyaW0iLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJwcm90b3R5cGUiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX2RlZmluaXRpb24iLCJfZGVmaW5pdGlvbjIiLCJfc2VydmljZSIsIl9pbmplY3RhYmxlQXJndW1lbnRzIiwiX3NjYWxhcjIiLCJTZXJ2aWNlIiwiSW5qZWN0YWJsZUFyZ3VtZW50cyIsInNjYWxhciIsIkxvYWRpbmdPYmplY3QiLCJhcnIiLCJoYXNJbnN0YW5jZSIsIkxvY2F0b3JDYWxsYmFjayIsIl9zZXJ2aWNlc0J5SWRlbnRpZmllciIsIl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXIiLCJfcGFyYW1ldGVyc0J5SWRlbnRpZmllciIsIl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXIiLCJfY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzIiwiX2luc3RhbmNlTG9jYXRvcnMiLCJfcmVmIiwiX2lkIiwiUHJvbWlzZSIsIl90aGlzIiwiX2xlbiIsImFyZ3VtZW50cyIsImlkZW50aWZpZXJzIiwiX2tleSIsInByb21pc2VzIiwiZm9yRWFjaCIsImlkZW50aWZpZXIiLCJwdXNoIiwiX2RvR2V0U2VydmljZSIsImNhdGNoIiwiZSIsIkVycm9yIiwiR2V0U2VydmljZUVycm9yIiwiY3JlYXRlRXJyb3IiLCJhbGwiLCJfcmVmNCIsIl9pZDQiLCJfcmVmNSIsIl9pZDUiLCJoYXNEZWZpbml0aW9uIiwiX3JlZjYiLCJfaWQ2IiwiX3JlZjciLCJfaWQ3IiwiX3JlZjgiLCJfaWQ4IiwiZGVmaW5pdGlvbiIsIlVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IiLCJfcmVmOSIsIl9pZDkiLCJTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IiLCJfcmVmMTAiLCJfaWQxMCIsIlVuZGVmaW5lZFBhcmFtZXRlckVycm9yIiwiX3JlZjExIiwiX2lkMTEiLCJfcmVmMTIiLCJfaWQxMiIsImxvY2F0b3IiLCJfcmVmMTMiLCJfaWQxMyIsIl9yZWYxNCIsIl9pZDE0IiwibG9hZGluZyIsIl9yZWYxNSIsIl9pZDE1IiwiX3RoaXMyIiwiX3Jlc29sdmVBcmdzIiwiYXJncyIsInRoZW4iLCJfcmVmMTYiLCJfaWQxNiIsImNsYXNzQ29uc3RydWN0b3IiLCJfbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IiLCJjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciIsIkZ1bmN0aW9uIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwicmVqZWN0IiwiRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IiLCJyZXNvbHZlIiwiZ2V0TWV0aG9kQ2FsbCIsIl9yZWYxOSIsIl9pZDE5IiwibWV0aG9kQ2FsbHMiLCJtZXRob2RDYWxsc1Byb21pc2VzIiwibWV0aG9kQ2FsbCIsImNhbGxNZXRob2QiLCJtZXRob2RUb0NhbGwiLCJfcmVmMTgiLCJfaWQxOCIsIm1ldGhvZE5hbWUiLCJNZXRob2REb2VzTm90RXhpc3RFcnJvciIsIl9yZWYyMCIsIl9pZDIwIiwiX3JlZjIxIiwiX2lkMjEiLCJDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yIiwiX3JlZjIyIiwiX2lkMjIiLCJfcmVmMjMiLCJfaWQyMyIsIl90aGlzMyIsIl9yZWYyNCIsIl9pZDI0IiwiYXJnIiwiX2RlZXBDb3B5TG9hZGluZyIsIlVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IiLCJnZXRQYXJhbWV0ZXIiLCJfcmVmMjUiLCJfaWQyNSIsInNlcnZpY2VzIiwiQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IiLCJyZXN1bHQiLCJfbG9jYXRlSW5zdGFuY2UiLCJfcmVmMjYiLCJfaWQyNiIsIlVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciIsInByb21pc2UiLCJfaW5zdGFudGlhdGUiLCJnZXREZWZpbml0aW9uIiwiX3JlZjI3IiwiX2lkMjciLCJuZXdMb2FkaW5nIiwiRGVmaW5pdGlvbiIsIl9tZXRob2RDYWxscyIsIl9hcmdzIiwic2V0IiwiZ2V0IiwiX3JlZjIiLCJfaWQyIiwiX3JlZjMiLCJfaWQzIiwiX25hbWUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX0RlZmluaXRpb24iLCJnZXRQcm90b3R5cGVPZiIsIl9jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciIsIl9mYWN0b3J5IiwiX2Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IiLCJfY2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcjIiLCJfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IiLCJfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IyIiwiX2Rpc2xFcnJvciIsIl9kaXNsRXJyb3IyIiwiX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yIiwiX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yMiIsIl9tZXRob2REb2VzTm90RXhpc3RFcnJvciIsIl9tZXRob2REb2VzTm90RXhpc3RFcnJvcjIiLCJfc2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yIiwiX3NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcjIiLCJfdW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IiLCJfdW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IyIiwiX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciIsIl91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IyIiwiX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IiLCJfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcjIiLCJfdW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciIsIl91bnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yMiIsIl9nZXRTZXJ2aWNlRXJyb3IiLCJfZ2V0U2VydmljZUVycm9yMiIsIkRpc2xFcnJvciIsIl9EaXNsRXJyb3IiLCJjbGFzc05hbWUiLCJfdmVycm9yIiwiX3ZlcnJvcjIiLCJfVkVycm9yIiwicGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyIsImFyZ3YiLCJvcHRpb25zIiwic3ByaW50Zl9hcmdzIiwic2hvcnRtZXNzYWdlIiwiayIsIm1vZF9hc3NlcnRwbHVzIiwib2JqZWN0IiwiYm9vbCIsInN0cmljdCIsImFycmF5IiwibW9kX2lzRXJyb3IiLCJjYXVzZSIsInN0cmluZyIsInNwcmludGYiLCJWRXJyb3IiLCJwYXJzZWQiLCJjdG9yIiwibWVzc2FnZSIsImpzZV9zaG9ydG1zZyIsIm9rIiwianNlX2NhdXNlIiwic2tpcENhdXNlTWVzc2FnZSIsImpzZV9pbmZvIiwiaW5mbyIsImNhcHR1cmVTdGFja1RyYWNlIiwiY29uc3RydWN0b3JPcHQiLCJTRXJyb3IiLCJNdWx0aUVycm9yIiwiZXJyb3JzIiwiYXNlX2Vycm9ycyIsIldFcnJvciIsIm1vZF91dGlsIiwibW9kX2V4dHNwcmludGYiLCJpc0Vycm9yIiwiaW5oZXJpdHMiLCJ0b1N0cmluZyIsInN0ciIsImVyciIsInJ2IiwiZmluZENhdXNlQnlOYW1lIiwiZnVsbFN0YWNrIiwic3RhY2siLCJCdWZmZXIiLCJwcm9jZXNzIiwiX2NhcGl0YWxpemUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsIl90b3NzIiwiZXhwZWN0ZWQiLCJvcGVyIiwiYWN0dWFsIiwiYXNzZXJ0IiwiQXNzZXJ0aW9uRXJyb3IiLCJ1dGlsIiwiZm9ybWF0Iiwib3BlcmF0b3IiLCJzdGFja1N0YXJ0RnVuY3Rpb24iLCJjYWxsZXIiLCJfZ2V0Q2xhc3MiLCJub29wIiwiX3NldEV4cG9ydHMiLCJuZGVidWciLCJvdXQiLCJ0eXBlcyIsImVudiIsIk5PREVfTkRFQlVHIiwibXNnIiwidHlwZSIsImNoZWNrIiwiU3RyZWFtIiwiVVVJRF9SRUdFWFAiLCJmdW5jIiwibnVtYmVyIiwiaXNOYU4iLCJmaW5pdGUiLCJpc0Zpbml0ZSIsImJ1ZmZlciIsImlzQnVmZmVyIiwic3RyZWFtIiwiZGF0ZSIsIkRhdGUiLCJyZWdleHAiLCJSZWdFeHAiLCJ1dWlkIiwiZ2xvYmFsIiwidHlwZWRBcnJheVN1cHBvcnQiLCJVaW50OEFycmF5IiwiZm9vIiwic3ViYXJyYXkiLCJieXRlTGVuZ3RoIiwia01heExlbmd0aCIsIlRZUEVEX0FSUkFZX1NVUFBPUlQiLCJjcmVhdGVCdWZmZXIiLCJ0aGF0IiwiUmFuZ2VFcnJvciIsImVuY29kaW5nT3JPZmZzZXQiLCJhbGxvY1Vuc2FmZSIsImZyb20iLCJBcnJheUJ1ZmZlciIsImZyb21BcnJheUJ1ZmZlciIsImZyb21TdHJpbmciLCJmcm9tT2JqZWN0IiwiYXNzZXJ0U2l6ZSIsInNpemUiLCJhbGxvYyIsImZpbGwiLCJlbmNvZGluZyIsImNoZWNrZWQiLCJpc0VuY29kaW5nIiwid3JpdGUiLCJmcm9tQXJyYXlMaWtlIiwiYnl0ZU9mZnNldCIsImxlbiIsImNvcHkiLCJpc25hbiIsImRhdGEiLCJTbG93QnVmZmVyIiwiaXNWaWV3IiwibG93ZXJlZENhc2UiLCJ1dGY4VG9CeXRlcyIsImJhc2U2NFRvQnl0ZXMiLCJ0b0xvd2VyQ2FzZSIsInNsb3dUb1N0cmluZyIsInN0YXJ0IiwiZW5kIiwiaGV4U2xpY2UiLCJ1dGY4U2xpY2UiLCJhc2NpaVNsaWNlIiwibGF0aW4xU2xpY2UiLCJiYXNlNjRTbGljZSIsInV0ZjE2bGVTbGljZSIsInN3YXAiLCJiIiwibiIsImJpZGlyZWN0aW9uYWxJbmRleE9mIiwidmFsIiwiZGlyIiwiYXJyYXlJbmRleE9mIiwiaW5kZXhPZiIsImxhc3RJbmRleE9mIiwicmVhZCIsImJ1ZiIsImluZGV4U2l6ZSIsInJlYWRVSW50MTZCRSIsImFyckxlbmd0aCIsInZhbExlbmd0aCIsIlN0cmluZyIsImZvdW5kSW5kZXgiLCJmb3VuZCIsImoiLCJoZXhXcml0ZSIsIm9mZnNldCIsIk51bWJlciIsInJlbWFpbmluZyIsInN0ckxlbiIsInBhcnNlSW50Iiwic3Vic3RyIiwidXRmOFdyaXRlIiwiYmxpdEJ1ZmZlciIsImFzY2lpV3JpdGUiLCJhc2NpaVRvQnl0ZXMiLCJsYXRpbjFXcml0ZSIsImJhc2U2NFdyaXRlIiwidWNzMldyaXRlIiwidXRmMTZsZVRvQnl0ZXMiLCJiYXNlNjQiLCJmcm9tQnl0ZUFycmF5IiwiTWF0aCIsIm1pbiIsInJlcyIsImZpcnN0Qnl0ZSIsImNvZGVQb2ludCIsImJ5dGVzUGVyU2VxdWVuY2UiLCJzZWNvbmRCeXRlIiwidGhpcmRCeXRlIiwiZm91cnRoQnl0ZSIsInRlbXBDb2RlUG9pbnQiLCJkZWNvZGVDb2RlUG9pbnRzQXJyYXkiLCJjb2RlUG9pbnRzIiwiTUFYX0FSR1VNRU5UU19MRU5HVEgiLCJmcm9tQ2hhckNvZGUiLCJyZXQiLCJ0b0hleCIsImJ5dGVzIiwiY2hlY2tPZmZzZXQiLCJleHQiLCJjaGVja0ludCIsIm1heCIsIm9iamVjdFdyaXRlVUludDE2IiwibGl0dGxlRW5kaWFuIiwib2JqZWN0V3JpdGVVSW50MzIiLCJjaGVja0lFRUU3NTQiLCJ3cml0ZUZsb2F0Iiwibm9Bc3NlcnQiLCJpZWVlNzU0Iiwid3JpdGVEb3VibGUiLCJiYXNlNjRjbGVhbiIsInN0cmluZ3RyaW0iLCJyZXBsYWNlIiwiSU5WQUxJRF9CQVNFNjRfUkUiLCJ1bml0cyIsIkluZmluaXR5IiwibGVhZFN1cnJvZ2F0ZSIsImNoYXJDb2RlQXQiLCJieXRlQXJyYXkiLCJoaSIsImxvIiwidG9CeXRlQXJyYXkiLCJzcmMiLCJkc3QiLCJJTlNQRUNUX01BWF9CWVRFUyIsInBvb2xTaXplIiwiX2F1Z21lbnQiLCJzcGVjaWVzIiwiYWxsb2NVbnNhZmVTbG93IiwiX2lzQnVmZmVyIiwiY29tcGFyZSIsIngiLCJ5IiwibGlzdCIsInBvcyIsInN3YXAxNiIsInN3YXAzMiIsInN3YXA2NCIsImVxdWFscyIsImluc3BlY3QiLCJtYXRjaCIsInRoaXNTdGFydCIsInRoaXNFbmQiLCJ0aGlzQ29weSIsInRhcmdldENvcHkiLCJpbmNsdWRlcyIsInRvSlNPTiIsIl9hcnIiLCJuZXdCdWYiLCJzbGljZUxlbiIsInJlYWRVSW50TEUiLCJtdWwiLCJyZWFkVUludEJFIiwicmVhZFVJbnQ4IiwicmVhZFVJbnQxNkxFIiwicmVhZFVJbnQzMkxFIiwicmVhZFVJbnQzMkJFIiwicmVhZEludExFIiwicG93IiwicmVhZEludEJFIiwicmVhZEludDgiLCJyZWFkSW50MTZMRSIsInJlYWRJbnQxNkJFIiwicmVhZEludDMyTEUiLCJyZWFkSW50MzJCRSIsInJlYWRGbG9hdExFIiwicmVhZEZsb2F0QkUiLCJyZWFkRG91YmxlTEUiLCJyZWFkRG91YmxlQkUiLCJ3cml0ZVVJbnRMRSIsIm1heEJ5dGVzIiwid3JpdGVVSW50QkUiLCJ3cml0ZVVJbnQ4IiwiZmxvb3IiLCJ3cml0ZVVJbnQxNkxFIiwid3JpdGVVSW50MTZCRSIsIndyaXRlVUludDMyTEUiLCJ3cml0ZVVJbnQzMkJFIiwid3JpdGVJbnRMRSIsImxpbWl0Iiwic3ViIiwid3JpdGVJbnRCRSIsIndyaXRlSW50OCIsIndyaXRlSW50MTZMRSIsIndyaXRlSW50MTZCRSIsIndyaXRlSW50MzJMRSIsIndyaXRlSW50MzJCRSIsIndyaXRlRmxvYXRMRSIsIndyaXRlRmxvYXRCRSIsIndyaXRlRG91YmxlTEUiLCJ3cml0ZURvdWJsZUJFIiwidGFyZ2V0U3RhcnQiLCJjb2RlIiwicGxhY2VIb2xkZXJzQ291bnQiLCJiNjQiLCJsIiwidG1wIiwicGxhY2VIb2xkZXJzIiwiQXJyIiwiTCIsInJldkxvb2t1cCIsInRyaXBsZXRUb0Jhc2U2NCIsIm51bSIsImxvb2t1cCIsImVuY29kZUNodW5rIiwidWludDgiLCJvdXRwdXQiLCJleHRyYUJ5dGVzIiwicGFydHMiLCJtYXhDaHVua0xlbmd0aCIsImxlbjIiLCJpc0xFIiwibUxlbiIsIm5CeXRlcyIsImVMZW4iLCJlTWF4IiwiZUJpYXMiLCJuQml0cyIsImQiLCJzIiwiTmFOIiwicnQiLCJhYnMiLCJsb2ciLCJMTjIiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0Iiwic2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJydW4iLCJJdGVtIiwibmV4dFRpY2siLCJ0aXRsZSIsImJyb3dzZXIiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsInVtYXNrIiwicFRvU3RyaW5nIiwiYXJyYnVmIiwiRGF0YVZpZXciLCJnZXROYW1lIiwiaXNGdW5jdGlvbiIsImZ1bmN0aW9uc0hhdmVOYW1lcyIsInJlZ2V4IiwidHJ1bmNhdGUiLCJzb21ldGhpbmciLCJyYXduYW1lIiwiZ2V0TWVzc2FnZSIsImZhaWwiLCJfZGVlcEVxdWFsIiwibWVtb3MiLCJpc0RhdGUiLCJnZXRUaW1lIiwiaXNSZWdFeHAiLCJzb3VyY2UiLCJtdWx0aWxpbmUiLCJsYXN0SW5kZXgiLCJpZ25vcmVDYXNlIiwiRmxvYXQzMkFycmF5IiwiRmxvYXQ2NEFycmF5IiwiYWN0dWFsSW5kZXgiLCJvYmpFcXVpdiIsImlzQXJndW1lbnRzIiwiYWN0dWFsVmlzaXRlZE9iamVjdHMiLCJpc1ByaW1pdGl2ZSIsImFJc0FyZ3MiLCJiSXNBcmdzIiwicFNsaWNlIiwia2EiLCJvYmplY3RLZXlzIiwia2IiLCJzb3J0Iiwibm90RGVlcFN0cmljdEVxdWFsIiwiZXhwZWN0ZWRFeGNlcHRpb24iLCJpc1Byb3RvdHlwZU9mIiwiX3RyeUJsb2NrIiwiYmxvY2siLCJlcnJvciIsIl90aHJvd3MiLCJzaG91bGRUaHJvdyIsInVzZXJQcm92aWRlZE1lc3NhZ2UiLCJpc1Vud2FudGVkRXhjZXB0aW9uIiwiaXNVbmV4cGVjdGVkRXhjZXB0aW9uIiwiaGFzT3duIiwiZ2VuZXJhdGVkTWVzc2FnZSIsImZuX25hbWUiLCJpZHgiLCJuZXh0X2xpbmUiLCJzdWJzdHJpbmciLCJlcXVhbCIsIm5vdEVxdWFsIiwiZGVlcEVxdWFsIiwiZGVlcFN0cmljdEVxdWFsIiwibm90RGVlcEVxdWFsIiwic3RyaWN0RXF1YWwiLCJub3RTdHJpY3RFcXVhbCIsInRocm93cyIsImRvZXNOb3RUaHJvdyIsImlmRXJyb3IiLCJvcHRzIiwiY3R4Iiwic2VlbiIsInN0eWxpemUiLCJzdHlsaXplTm9Db2xvciIsImNvbG9ycyIsImlzQm9vbGVhbiIsInNob3dIaWRkZW4iLCJfZXh0ZW5kIiwiaXNVbmRlZmluZWQiLCJjdXN0b21JbnNwZWN0Iiwic3R5bGl6ZVdpdGhDb2xvciIsImZvcm1hdFZhbHVlIiwic3R5bGVUeXBlIiwic3R5bGUiLCJzdHlsZXMiLCJhcnJheVRvSGFzaCIsImhhc2giLCJyZWN1cnNlVGltZXMiLCJpc1N0cmluZyIsInByaW1pdGl2ZSIsImZvcm1hdFByaW1pdGl2ZSIsInZpc2libGVLZXlzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvcm1hdEVycm9yIiwiYmFzZSIsImJyYWNlcyIsInRvVVRDU3RyaW5nIiwiZm9ybWF0QXJyYXkiLCJmb3JtYXRQcm9wZXJ0eSIsInBvcCIsInJlZHVjZVRvU2luZ2xlU3RyaW5nIiwic2ltcGxlIiwiaXNOdW1iZXIiLCJpc051bGwiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwic3BsaXQiLCJsaW5lIiwibnVtTGluZXNFc3QiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyIiwiYXIiLCJpc051bGxPclVuZGVmaW5lZCIsImlzU3ltYm9sIiwicmUiLCJpc09iamVjdCIsIm9iamVjdFRvU3RyaW5nIiwibyIsInBhZCIsInRpbWVzdGFtcCIsInRpbWUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiZ2V0RGF0ZSIsIm1vbnRocyIsImdldE1vbnRoIiwicHJvcCIsImZvcm1hdFJlZ0V4cCIsImYiLCJvYmplY3RzIiwiXyIsImRlcHJlY2F0ZSIsImZuIiwiZGVwcmVjYXRlZCIsIndhcm5lZCIsInRocm93RGVwcmVjYXRpb24iLCJ0cmFjZURlcHJlY2F0aW9uIiwiY29uc29sZSIsInRyYWNlIiwibm9EZXByZWNhdGlvbiIsImRlYnVnRW52aXJvbiIsImRlYnVncyIsImRlYnVnbG9nIiwiTk9ERV9ERUJVRyIsInBpZCIsImJvbGQiLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJpbnZlcnNlIiwid2hpdGUiLCJncmV5IiwiYmxhY2siLCJibHVlIiwiY3lhbiIsImdyZWVuIiwibWFnZW50YSIsInJlZCIsInllbGxvdyIsInNwZWNpYWwiLCJib29sZWFuIiwibnVsbCIsIm9yaWdpbiIsImFkZCIsInN1cGVyQ3RvciIsInN1cGVyXyIsIlRlbXBDdG9yIiwiRUUiLCJFdmVudEVtaXR0ZXIiLCJSZWFkYWJsZSIsIldyaXRhYmxlIiwiRHVwbGV4IiwiVHJhbnNmb3JtIiwiUGFzc1Rocm91Z2giLCJwaXBlIiwiZGVzdCIsIm9uZGF0YSIsImNodW5rIiwicGF1c2UiLCJvbmRyYWluIiwicmVhZGFibGUiLCJyZXN1bWUiLCJvbmVuZCIsImRpZE9uRW5kIiwib25jbG9zZSIsImRlc3Ryb3kiLCJvbmVycm9yIiwiZXIiLCJjbGVhbnVwIiwibGlzdGVuZXJDb3VudCIsIl9pc1N0ZGlvIiwiX2V2ZW50cyIsIl9tYXhMaXN0ZW5lcnMiLCJkZWZhdWx0TWF4TGlzdGVuZXJzIiwic2V0TWF4TGlzdGVuZXJzIiwiaGFuZGxlciIsImxpc3RlbmVycyIsImNvbnRleHQiLCJsaXN0ZW5lciIsIm5ld0xpc3RlbmVyIiwiZyIsImZpcmVkIiwicG9zaXRpb24iLCJzcGxpY2UiLCJldmxpc3RlbmVyIiwiZW1pdHRlciIsIlJFQURBQkxFX1NUUkVBTSIsIlJlYWRhYmxlU3RhdGUiLCJod20iLCJoaWdoV2F0ZXJNYXJrIiwiZGVmYXVsdEh3bSIsIm9iamVjdE1vZGUiLCJwaXBlcyIsInBpcGVzQ291bnQiLCJmbG93aW5nIiwiZW5kZWQiLCJlbmRFbWl0dGVkIiwicmVhZGluZyIsInN5bmMiLCJuZWVkUmVhZGFibGUiLCJlbWl0dGVkUmVhZGFibGUiLCJyZWFkYWJsZUxpc3RlbmluZyIsInJlYWRhYmxlT2JqZWN0TW9kZSIsImRlZmF1bHRFbmNvZGluZyIsInJhbk91dCIsImF3YWl0RHJhaW4iLCJyZWFkaW5nTW9yZSIsImRlY29kZXIiLCJTdHJpbmdEZWNvZGVyIiwiX3JlYWRhYmxlU3RhdGUiLCJyZWFkYWJsZUFkZENodW5rIiwic3RhdGUiLCJhZGRUb0Zyb250IiwiY2h1bmtJbnZhbGlkIiwib25Fb2ZDaHVuayIsInVuc2hpZnQiLCJlbWl0UmVhZGFibGUiLCJtYXliZVJlYWRNb3JlIiwibmVlZE1vcmVEYXRhIiwicm91bmRVcFRvTmV4dFBvd2VyT2YyIiwiTUFYX0hXTSIsImhvd011Y2hUb1JlYWQiLCJkZWJ1ZyIsImVtaXRSZWFkYWJsZV8iLCJmbG93IiwibWF5YmVSZWFkTW9yZV8iLCJwaXBlT25EcmFpbiIsInJlc3VtZVNjaGVkdWxlZCIsInJlc3VtZV8iLCJmcm9tTGlzdCIsInN0cmluZ01vZGUiLCJzaGlmdCIsImNweSIsImVuZFJlYWRhYmxlIiwieHMiLCJzZXRFbmNvZGluZyIsImVuYyIsIm5PcmlnIiwiZG9SZWFkIiwiX3JlYWQiLCJwaXBlT3B0cyIsIm9udW5waXBlIiwib25maW5pc2giLCJfd3JpdGFibGVTdGF0ZSIsIm5lZWREcmFpbiIsInVucGlwZSIsImRvRW5kIiwic3Rkb3V0Iiwic3RkZXJyIiwiZW5kRm4iLCJkZXN0cyIsImV2Iiwid3JhcCIsInBhdXNlZCIsIm1ldGhvZCIsImV2ZW50cyIsIl9mcm9tTGlzdCIsImFsbG93SGFsZk9wZW4iLCJXcml0ZVJlcSIsImNiIiwiY2FsbGJhY2siLCJXcml0YWJsZVN0YXRlIiwid3JpdGFibGVPYmplY3RNb2RlIiwiZW5kaW5nIiwiZmluaXNoZWQiLCJub0RlY29kZSIsImRlY29kZVN0cmluZ3MiLCJ3cml0aW5nIiwiY29ya2VkIiwiYnVmZmVyUHJvY2Vzc2luZyIsIm9ud3JpdGUiLCJ3cml0ZWNiIiwid3JpdGVsZW4iLCJwZW5kaW5nY2IiLCJwcmVmaW5pc2hlZCIsImVycm9yRW1pdHRlZCIsIndyaXRlQWZ0ZXJFbmQiLCJ2YWxpZENodW5rIiwidmFsaWQiLCJkZWNvZGVDaHVuayIsIndyaXRlT3JCdWZmZXIiLCJkb1dyaXRlIiwid3JpdGV2IiwiX3dyaXRldiIsIl93cml0ZSIsIm9ud3JpdGVFcnJvciIsIm9ud3JpdGVTdGF0ZVVwZGF0ZSIsIm5lZWRGaW5pc2giLCJjbGVhckJ1ZmZlciIsImFmdGVyV3JpdGUiLCJvbndyaXRlRHJhaW4iLCJmaW5pc2hNYXliZSIsImNicyIsImVudHJ5IiwicHJlZmluaXNoIiwibmVlZCIsImVuZFdyaXRhYmxlIiwiY29yayIsInVuY29yayIsImFzc2VydEVuY29kaW5nIiwiaXNCdWZmZXJFbmNvZGluZyIsInBhc3NUaHJvdWdoV3JpdGUiLCJ1dGYxNkRldGVjdEluY29tcGxldGVDaGFyIiwiY2hhclJlY2VpdmVkIiwiY2hhckxlbmd0aCIsImJhc2U2NERldGVjdEluY29tcGxldGVDaGFyIiwic3Vycm9nYXRlU2l6ZSIsImRldGVjdEluY29tcGxldGVDaGFyIiwiY2hhckJ1ZmZlciIsImNoYXJTdHIiLCJhdmFpbGFibGUiLCJjaGFyQ29kZSIsImNyIiwiVHJhbnNmb3JtU3RhdGUiLCJhZnRlclRyYW5zZm9ybSIsIm5lZWRUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1pbmciLCJ3cml0ZWNodW5rIiwidHMiLCJfdHJhbnNmb3JtU3RhdGUiLCJycyIsIl9mbHVzaCIsImRvbmUiLCJ3cyIsIl90cmFuc2Zvcm0iLCJ3cml0ZWVuY29kaW5nIiwianNTcHJpbnRmIiwiZm10IiwiZmxhZ3MiLCJ3aWR0aCIsInByZWNpc2lvbiIsImNvbnZlcnNpb24iLCJsZWZ0Iiwic2lnbiIsImFyZ24iLCJtb2RfYXNzZXJ0IiwiZXhlYyIsImRvUGFkIiwiZHVtcEV4Y2VwdGlvbiIsImpzUHJpbnRmIiwianNGcHJpbnRmIiwiY2hyIiwiZXgiLCJjZXgiLCJwcmludGYiLCJmcHJpbnRmIiwicGF0aCIsInJldmVyc2UiXSwibWFwcGluZ3Mi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bE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfY29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfY29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbnRhaW5lcik7XG5cdFxuXHR2YXIgX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24pO1xuXHRcblx0dmFyIF9mYWN0b3J5RGVmaW5pdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX2ZhY3RvcnlEZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZhY3RvcnlEZWZpbml0aW9uKTtcblx0XG5cdHZhciBfcmVmZXJlbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfcmVmZXJlbmNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlZmVyZW5jZSk7XG5cdFxuXHR2YXIgX3BhcmFtZXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX3BhcmFtZXRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXJhbWV0ZXIpO1xuXHRcblx0dmFyIF9tZXRob2RDYWxsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfbWV0aG9kQ2FsbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tZXRob2RDYWxsKTtcblx0XG5cdHZhciBfZXJyb3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfZXJyb3JzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vycm9ycyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIF9leHBvcnRzID0ge1xuXHQgIENvbnRhaW5lcjogX2NvbnRhaW5lcjIuZGVmYXVsdCxcblx0ICBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbjogX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uMi5kZWZhdWx0LFxuXHQgIEZhY3RvcnlEZWZpbml0aW9uOiBfZmFjdG9yeURlZmluaXRpb24yLmRlZmF1bHQsXG5cdCAgUmVmZXJlbmNlOiBfcmVmZXJlbmNlMi5kZWZhdWx0LFxuXHQgIFBhcmFtZXRlcjogX3BhcmFtZXRlcjIuZGVmYXVsdCxcblx0ICBNZXRob2RDYWxsOiBfbWV0aG9kQ2FsbDIuZGVmYXVsdFxuXHR9O1xuXHRcblx0Zm9yICh2YXIgaSBpbiBfZXJyb3JzMi5kZWZhdWx0KSB7XG5cdCAgaWYgKF9lcnJvcnMyLmRlZmF1bHQuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0ICAgIF9leHBvcnRzW2ldID0gX2Vycm9yczIuZGVmYXVsdFtpXTtcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gX2V4cG9ydHM7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2RlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9kZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluaXRpb24pO1xuXHRcblx0dmFyIF9jbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uKTtcblx0XG5cdHZhciBfZmFjdG9yeURlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9mYWN0b3J5RGVmaW5pdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mYWN0b3J5RGVmaW5pdGlvbik7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX3JlZmVyZW5jZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWZlcmVuY2UpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9wYXJhbWV0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyYW1ldGVyKTtcblx0XG5cdHZhciBfbWV0aG9kQ2FsbCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX21ldGhvZENhbGwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWV0aG9kQ2FsbCk7XG5cdFxuXHR2YXIgX2Vycm9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3NlcnZpY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTtcblx0XG5cdHZhciBfaW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3NjYWxhcjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIFNlcnZpY2UgPSBfc2VydmljZS5TZXJ2aWNlO1xuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9pbmplY3RhYmxlQXJndW1lbnRzLkluamVjdGFibGVBcmd1bWVudHM7XG5cdHZhciBzY2FsYXIgPSBfc2NhbGFyMi5zY2FsYXI7XG5cdFxuXHR2YXIgTG9hZGluZ09iamVjdCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBMb2FkaW5nT2JqZWN0KGlucHV0KSB7XG5cdCAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCAmJiBpbnB1dC5vYmogaW5zdGFuY2VvZiBPYmplY3QgJiYgQXJyYXkuaXNBcnJheShpbnB1dC5hcnIpICYmIGlucHV0LmFyci5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICA7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvYWRpbmdPYmplY3QsIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGlucHV0KSB7XG5cdCAgICAgIHJldHVybiBMb2FkaW5nT2JqZWN0KGlucHV0KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gTG9hZGluZ09iamVjdDtcblx0fSgpO1xuXHRcblx0dmFyIExvY2F0b3JDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBMb2NhdG9yQ2FsbGJhY2soaW5wdXQpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdmdW5jdGlvbic7XG5cdCAgfVxuXHRcblx0ICA7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2F0b3JDYWxsYmFjaywgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoaW5wdXQpIHtcblx0ICAgICAgcmV0dXJuIExvY2F0b3JDYWxsYmFjayhpbnB1dCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIExvY2F0b3JDYWxsYmFjaztcblx0fSgpO1xuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0XG5cdHZhciBDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdG9yXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gQ29udGFpbmVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRhaW5lcik7XG5cdFxuXHQgICAgdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXIgPSB7fTtcblx0ICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllciA9IHt9O1xuXHQgICAgdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllciA9IHt9O1xuXHQgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyID0ge307XG5cdCAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMgPSBbXTtcblx0ICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMgPSBbXTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgc2VydmljZSBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsuLi5zdHJpbmd9IGlkZW50aWZpZXJzXG5cdCAgICpcblx0ICAgKiBAcHJvbWlzZVxuXHQgICAqIEByZXNvbHZlIHtBcnJheTxTZXJ2aWNlPn1cblx0ICAgKiBAcmVqZWN0IHtHZXRTZXJ2aWNlRXJyb3J9IGluIGNhc2UgYW55IEVycm9yIGlzIHJhaXNlZCB3aGVuIGluc3RhbnRpYXRpbmcgc2VydmljZVxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKENvbnRhaW5lciwgW3tcblx0ICAgIGtleTogJ2dldCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoIShfaWQgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcblByb21pc2U8QXJyYXk8U2VydmljZT4+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBpZGVudGlmaWVycyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgIGlkZW50aWZpZXJzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIShBcnJheS5pc0FycmF5KGlkZW50aWZpZXJzKSAmJiBpZGVudGlmaWVycy5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZyc7XG5cdCAgICAgIH0pKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllcnNcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheTxzdHJpbmc+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVycykpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcblx0XG5cdCAgICAgIGlkZW50aWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuX2RvR2V0U2VydmljZShpZGVudGlmaWVyLCB7IG9iajoge30sIGFycjogW10gfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBFcnJvcikpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJlXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRXJyb3JcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGUpKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB0aHJvdyBfZXJyb3JzLkdldFNlcnZpY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyLCBlKTtcblx0ICAgICAgICB9KSk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYoUHJvbWlzZS5hbGwocHJvbWlzZXMpKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFzc29jaWF0ZXMgc2VydmljZSB3aXRoIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtTZXJ2aWNlfSBpbnN0YW5jZSBzZXJ2aWNlIGluc3RhbmNlXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0NvbnRhaW5lcn0gY3VycmVudCBDb250YWluZXIgaW5zdGFuY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoaWRlbnRpZmllciwgaW5zdGFuY2UpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjQoX2lkNCkge1xuXHQgICAgICAgIGlmICghKF9pZDQgaW5zdGFuY2VvZiBDb250YWluZXIpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuQ29udGFpbmVyXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQ0KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkNDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIVNlcnZpY2UoaW5zdGFuY2UpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpbnN0YW5jZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcblNlcnZpY2VcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGluc3RhbmNlKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gaW5zdGFuY2U7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjQodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm5zIHRydWUgaWYgY29udGFpbmVyIGhhcyBzZXJ2aWNlLCB0aGF0IGlzIGVpdGhlciBpZjpcblx0ICAgICAqICogaXQgaGFzIGEge0BsaW5rIERlZmluaXRpb259XG5cdCAgICAgKiAqIGl0IGhhcyBiZWVuIGluc3RhbnRpYXRlZFxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnaGFzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYXMoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmNShfaWQ1KSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDUgPT09ICdib29sZWFuJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5ib29sZWFuXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQ1KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkNTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjUodGhpcy5oYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpIHx8IHRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXJ2aWNlIGhhcyBhIGRlZmluaXRpb25cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYXNEZWZpbml0aW9uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjYoX2lkNikge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQ2ID09PSAnYm9vbGVhbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuYm9vbGVhblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkNikpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDY7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWY2KHVuZGVmaW5lZCAhPT0gdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2VydmljZSBoYXMgYW4gaW5zdGFuY2UsIGVpdGhlciBiZWNhdXNlOlxuXHQgICAgICogKiBpdCBoYXMgYmVlbiBpbnN0YW50aWF0ZWQgdmlhIGl0cyB7QGxpbmsgRGVmaW5pdGlvbn1cblx0ICAgICAqICogaXQgaGFzIGJlZW4gc2V0IGRpcmVjdGx5IHZpYSB7QGxpbmsgc2V0fSBtZXRob2Rcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdoYXNJbnN0YW5jZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFzSW5zdGFuY2UoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmNyhfaWQ3KSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDcgPT09ICdib29sZWFuJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5ib29sZWFuXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQ3KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkNztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjcodW5kZWZpbmVkICE9PSB0aGlzLl9zZXJ2aWNlc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7RGVmaW5pdGlvbn1cblx0ICAgICAqXG5cdCAgICAgKiBAdGhyb3dzIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yfSBpZiB0aGVyZSBpcyBubyBzZXJ2aWNlIGRlZmluaXRpb24gZm9yIGdpdmVuIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0RGVmaW5pdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVmaW5pdGlvbihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY4KF9pZDgpIHtcblx0ICAgICAgICBpZiAoIShfaWQ4IGluc3RhbmNlb2YgX2RlZmluaXRpb24yLmRlZmF1bHQpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRGVmaW5pdGlvblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkOCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDg7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGRlZmluaXRpb24gPSB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl07XG5cdFxuXHQgICAgICBpZiAodW5kZWZpbmVkID09PSBkZWZpbml0aW9uKSB7XG5cdCAgICAgICAgdGhyb3cgX2Vycm9ycy5VbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjgoZGVmaW5pdGlvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBc3NvY2lhdGVzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IHdpdGggaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIHNlcnZpY2UgaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uIHNlcnZpY2UgZGVmaW5pdGlvblxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG5cdCAgICAgKlxuXHQgICAgICogQHRocm93cyB7U2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yfSBpZiB0aGUgc2VydmljZSBkZWZpbml0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0RGVmaW5pdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVmaW5pdGlvbihpZGVudGlmaWVyLCBkZWZpbml0aW9uKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWY5KF9pZDkpIHtcblx0ICAgICAgICBpZiAoIShfaWQ5IGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkOSkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9kZWZpbml0aW9uMi5kZWZhdWx0KSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiZGVmaW5pdGlvblwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkRlZmluaXRpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGRlZmluaXRpb24pKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllcltpZGVudGlmaWVyXSkge1xuXHQgICAgICAgIHRocm93IF9lcnJvcnMuU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSBmYWxzZTtcblx0ICAgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gZGVmaW5pdGlvbjtcblx0XG5cdCAgICAgIHJldHVybiBfcmVmOSh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdldHMgcGFyYW1ldGVyIGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXIgcGFyYW1ldGVyIGlkZW50aWZpZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7c2NhbGFyfSBwYXJhbWV0ZXIgdmFsdWVcblx0ICAgICAqXG5cdCAgICAgKiBAdGhyb3dzIHtVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcn0gaWYgdGhlcmUgaXMgbm8gcGFyYW1ldGVyIGZvciBnaXZlbiBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldFBhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1ldGVyKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjEwKF9pZDEwKSB7XG5cdCAgICAgICAgaWYgKCFzY2FsYXIoX2lkMTApKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc2NhbGFyXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQxMCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDEwO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pIHtcblx0ICAgICAgICB0aHJvdyBfZXJyb3JzLlVuZGVmaW5lZFBhcmFtZXRlckVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjEwKHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQXNzb2NpYXRlcyBwYXJhbWV0ZXIgd2l0aCBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcblx0ICAgICAqIEBwYXJhbSB7c2NhbGFyfSB2YWx1ZVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG5cdCAgICAgKlxuXHQgICAgICogQHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldFBhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UGFyYW1ldGVyKGlkZW50aWZpZXIsIHZhbHVlKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYxMShfaWQxMSkge1xuXHQgICAgICAgIGlmICghKF9pZDExIGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTEpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxMTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXNjYWxhcih2YWx1ZSkpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcInZhbHVlXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc2NhbGFyXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdCh2YWx1ZSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gdmFsdWU7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjExKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyB0cnVlIGlmIGNvbnRhaW5lciBoYXMgcGFyYW1ldGVyLCBmYWxzZSBvdGhlcndpc2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhc1BhcmFtZXRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaGFzUGFyYW1ldGVyKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjEyKF9pZDEyKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDEyID09PSAnYm9vbGVhbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuYm9vbGVhblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTIpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxMjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjEyKHVuZGVmaW5lZCAhPT0gdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZWdpc3RlcnMgXG5cdCAgICAgKiBcblx0ICAgICAqIEBwYXJhbSB7TG9jYXRvckNhbGxiYWNrfSBsb2NhdG9yXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0NvbnRhaW5lcn0gY3VycmVudCBDb250YWluZXIgaW5zdGFuY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVnaXN0ZXJDbGFzc0NvbnN0cnVjdG9yTG9jYXRvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJDbGFzc0NvbnN0cnVjdG9yTG9jYXRvcihsb2NhdG9yKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYxMyhfaWQxMykge1xuXHQgICAgICAgIGlmICghKF9pZDEzIGluc3RhbmNlb2YgQ29udGFpbmVyKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkNvbnRhaW5lclxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTMpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQxMztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFMb2NhdG9yQ2FsbGJhY2sobG9jYXRvcikpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvY2F0b3JcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2NhdG9yQ2FsbGJhY2tcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGxvY2F0b3IpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzLnB1c2gobG9jYXRvcik7XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjEzKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtMb2NhdG9yQ2FsbGJhY2t9IGxvY2F0b3Jcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZWdpc3Rlckluc3RhbmNlTG9jYXRvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YW5jZUxvY2F0b3IobG9jYXRvcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMTQoX2lkMTQpIHtcblx0ICAgICAgICBpZiAoIShfaWQxNCBpbnN0YW5jZW9mIENvbnRhaW5lcikpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Db250YWluZXJcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE0KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMTQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghTG9jYXRvckNhbGxiYWNrKGxvY2F0b3IpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJsb2NhdG9yXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuTG9jYXRvckNhbGxiYWNrXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2NhdG9yKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMucHVzaChsb2NhdG9yKTtcblx0XG5cdCAgICAgIHJldHVybiBfcmVmMTQodGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXNvbHZlcyBzZXJ2aWNlIGRlZmluaXRpb24gYXJndW1lbnRzLCB0aGVuIHVzZXMgdGhlbSB0byBpbnN0YW50aWF0ZSB0aGUgc2VydmljZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcblx0ICAgICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcblx0ICAgICAqXG5cdCAgICAgKiBAcHJvbWlzZVxuXHQgICAgICogQHJlc29sdmUge1NlcnZpY2V9XG5cdCAgICAgKiBAcmVqZWN0IHtGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcn0gaW4gY2FzZSBhIGZhY3RvcnkgbWV0aG9kIHJldHVybnMgbm90aGluZ1xuXHQgICAgICogQHJlamVjdCB7TWV0aG9kRG9lc05vdEV4aXN0RXJyb3J9IGluIGNhc2UgYSBtZXRob2QgY2FsbCBjYWxscyBhIG1ldGhvZCB0aGF0IGRvZXMgbm90IGV4aXN0XG5cdCAgICAgKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfaW5zdGFudGlhdGUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9pbnN0YW50aWF0ZShpZGVudGlmaWVyLCBkZWZpbml0aW9uLCBsb2FkaW5nKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgZnVuY3Rpb24gX3JlZjE1KF9pZDE1KSB7XG5cdCAgICAgICAgaWYgKCEoX2lkMTUgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcblByb21pc2U8U2VydmljZT5cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZDE1KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMTU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIF9kZWZpbml0aW9uMi5kZWZhdWx0KSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiZGVmaW5pdGlvblwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkRlZmluaXRpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGRlZmluaXRpb24pKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFMb2FkaW5nT2JqZWN0KGxvYWRpbmcpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJsb2FkaW5nXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuTG9hZGluZ09iamVjdFxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QobG9hZGluZykpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZjE1KHRoaXMuX3Jlc29sdmVBcmdzKGRlZmluaXRpb24uYXJncywgbG9hZGluZykudGhlbihmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIGZ1bmN0aW9uIF9yZWYxNihfaWQxNikge1xuXHQgICAgICAgICAgaWYgKCEoX2lkMTYgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuUHJvbWlzZVxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTYpKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICByZXR1cm4gX2lkMTY7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJncykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiYXJnc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkFycmF5XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChhcmdzKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaW5zdGFuY2UgPSB2b2lkIDA7XG5cdFxuXHQgICAgICAgIGlmIChkZWZpbml0aW9uIGluc3RhbmNlb2YgX2NsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uMi5kZWZhdWx0KSB7XG5cdCAgICAgICAgICB2YXIgY2xhc3NDb25zdHJ1Y3RvciA9IF90aGlzMi5fbG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3IoZGVmaW5pdGlvbi5jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcik7XG5cdFxuXHQgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGNsYXNzQ29uc3RydWN0b3IsIFt1bmRlZmluZWRdLmNvbmNhdChhcmdzKSkpKCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChkZWZpbml0aW9uIGluc3RhbmNlb2YgX2ZhY3RvcnlEZWZpbml0aW9uMi5kZWZhdWx0KSB7XG5cdCAgICAgICAgICBpbnN0YW5jZSA9IGRlZmluaXRpb24uZmFjdG9yeS5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuXHRcblx0ICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGluc3RhbmNlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMTYoUHJvbWlzZS5yZWplY3QoX2Vycm9ycy5GYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAgIHZhciBtZXRob2RDYWxsc1Byb21pc2VzID0gW107XG5cdFxuXHQgICAgICAgICAgdmFyIGkgPSB2b2lkIDAsXG5cdCAgICAgICAgICAgICAgbWV0aG9kQ2FsbCA9IHZvaWQgMDtcblx0XG5cdCAgICAgICAgICB2YXIgY2FsbE1ldGhvZCA9IGZ1bmN0aW9uIGNhbGxNZXRob2QobWV0aG9kVG9DYWxsKSB7XG5cdCAgICAgICAgICAgIGlmICghKHR5cGVvZiBtZXRob2RUb0NhbGwgPT09ICdmdW5jdGlvbicpKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJtZXRob2RUb0NhbGxcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5GdW5jdGlvblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QobWV0aG9kVG9DYWxsKSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIG1ldGhvZENhbGxzUHJvbWlzZXMucHVzaChfdGhpczIuX3Jlc29sdmVBcmdzKG1ldGhvZENhbGwuYXJncywgbG9hZGluZykudGhlbihmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yZWYxOChfaWQxOCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKCEoX2lkMTggPT0gbnVsbCB8fCBfaWQxOCBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG5cdCAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG4/UHJvbWlzZSB8IG1peGVkXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQxOCkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfaWQxODtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcmdzKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJhcmdzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuQXJyYXlcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGFyZ3MpKTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIHJldHVybiBfcmVmMTgobWV0aG9kVG9DYWxsLmFwcGx5KGluc3RhbmNlLCBhcmdzKSk7XG5cdCAgICAgICAgICAgIH0pKTtcblx0ICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgZnVuY3Rpb24gZ2V0TWV0aG9kQ2FsbChpKSB7XG5cdCAgICAgICAgICAgIGZ1bmN0aW9uIF9yZWYxOShfaWQxOSkge1xuXHQgICAgICAgICAgICAgIGlmICghKF9pZDE5IGluc3RhbmNlb2YgX21ldGhvZENhbGwyLmRlZmF1bHQpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiBcImdldE1ldGhvZENhbGxcIiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuTWV0aG9kQ2FsbFxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMTkpKTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIHJldHVybiBfaWQxOTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYxOShkZWZpbml0aW9uLm1ldGhvZENhbGxzW2ldKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBmb3IgKGkgaW4gZGVmaW5pdGlvbi5tZXRob2RDYWxscykge1xuXHQgICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5tZXRob2RDYWxscy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHQgICAgICAgICAgICAgIG1ldGhvZENhbGwgPSBnZXRNZXRob2RDYWxsKGkpO1xuXHRcblx0ICAgICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IG1ldGhvZENhbGwubmFtZTtcblx0ICAgICAgICAgICAgICB2YXIgbWV0aG9kVG9DYWxsID0gaW5zdGFuY2VbbWV0aG9kTmFtZV07XG5cdFxuXHQgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1ldGhvZFRvQ2FsbCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChfZXJyb3JzLk1ldGhvZERvZXNOb3RFeGlzdEVycm9yLmNyZWF0ZUVycm9yKG1ldGhvZE5hbWUpKTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIGNhbGxNZXRob2QobWV0aG9kVG9DYWxsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHJldHVybiByZXNvbHZlKFByb21pc2UuYWxsKG1ldGhvZENhbGxzUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBmdW5jdGlvbiBfcmVmMjAoX2lkMjApIHtcblx0ICAgICAgICAgICAgICBpZiAoIVNlcnZpY2UoX2lkMjApKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuU2VydmljZVxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMjApKTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIHJldHVybiBfaWQyMDtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyMChpbnN0YW5jZSk7XG5cdCAgICAgICAgICB9KSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIFVzZWQgaW50ZXJuYWxseSB0byBsb2NhdGUgYSBzZXJ2aWNlIGNsYXNzIGNvbnN0cnVjdG9yLCBpZiBpdCBoYXMgYmVlbiBtYWRlIGF2YWlsYWJsZSB0byB0aGUgY29udGFpbmVyIGluc3RhbmNlLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBhIHNlcnZpY2UgY2xhc3MgY29uc3RydWN0b3Jcblx0ICAgICAqXG5cdCAgICAgKiBAdGhyb3dzIHtDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yfSBpZiB0aGUgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgZm91bmRcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19sb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX2xvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yKGlkZW50aWZpZXIpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjIxKF9pZDIxKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZDIxID09PSAnZnVuY3Rpb24nKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkZ1bmN0aW9uXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQyMSkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDIxO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpID0gdm9pZCAwLFxuXHQgICAgICAgICAgY2xhc3NDb25zdHJ1Y3RvciA9IHZvaWQgMDtcblx0XG5cdCAgICAgIGZvciAoaSBpbiB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMpIHtcblx0ICAgICAgICBpZiAodGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzLmhhc093blByb3BlcnR5KGkpKSB7XG5cdCAgICAgICAgICBjbGFzc0NvbnN0cnVjdG9yID0gdGhpcy5fY2xhc3NDb25zdHJ1Y3RvckxvY2F0b3JzW2ldKGlkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IGNsYXNzQ29uc3RydWN0b3IpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyMShjbGFzc0NvbnN0cnVjdG9yKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRocm93IF9lcnJvcnMuQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMgez9TZXJ2aWNlfVxuXHQgICAgICpcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnX2xvY2F0ZUluc3RhbmNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfbG9jYXRlSW5zdGFuY2UoaWRlbnRpZmllcikge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMjIoX2lkMjIpIHtcblx0ICAgICAgICBpZiAoIShfaWQyMiA9PSBudWxsIHx8IFNlcnZpY2UoX2lkMjIpKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9TZXJ2aWNlXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQyMikpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDIyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpID0gdm9pZCAwO1xuXHQgICAgICB2YXIgaW5zdGFuY2UgPSB2b2lkIDA7XG5cdFxuXHQgICAgICBmb3IgKGkgaW4gdGhpcy5faW5zdGFuY2VMb2NhdG9ycykge1xuXHQgICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZUxvY2F0b3JzLmhhc093blByb3BlcnR5KGkpKSB7XG5cdCAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuX2luc3RhbmNlTG9jYXRvcnNbaV0oaWRlbnRpZmllcik7XG5cdFxuXHQgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gaW5zdGFuY2UpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyMihpbnN0YW5jZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXNvbHZlcyBnaXZlbiBhcmd1bWVudHMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtJbmplY3RhYmxlQXJndW1lbnRzfSBhcmdzXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcblx0ICAgICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcblx0ICAgICAqXG5cdCAgICAgKiBAcHJvbWlzZSB7QXJyYXk8U2VydmljZXxzY2FsYXI+fSBhbiBhcnJheSBvZiBzZXJ2aWNlIGluc3RhbmNlcyBvciBwYXJhbWV0ZXIgdmFsdWVzXG5cdCAgICAgKiBAcmVqZWN0IHtVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yfVxuXHQgICAgICpcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnX3Jlc29sdmVBcmdzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzb2x2ZUFyZ3MoYXJncywgbG9hZGluZykge1xuXHQgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYyMyhfaWQyMykge1xuXHQgICAgICAgIGlmICghKF9pZDIzIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Qcm9taXNlPEFycmF5PFNlcnZpY2UgfCBzY2FsYXI+PlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMjMpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyMztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFJbmplY3RhYmxlQXJndW1lbnRzKGFyZ3MpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJhcmdzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuSW5qZWN0YWJsZUFyZ3VtZW50c1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoYXJncykpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIUxvYWRpbmdPYmplY3QobG9hZGluZykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvYWRpbmdcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2FkaW5nT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2FkaW5nKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYyMyhuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgZnVuY3Rpb24gX3JlZjI0KF9pZDI0KSB7XG5cdCAgICAgICAgICBpZiAoIShfaWQyNCA9PSBudWxsKSkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxudm9pZFxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMjQpKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICByZXR1cm4gX2lkMjQ7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoISh0eXBlb2YgcmVzb2x2ZSA9PT0gJ2Z1bmN0aW9uJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwicmVzb2x2ZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkZ1bmN0aW9uXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChyZXNvbHZlKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoISh0eXBlb2YgcmVqZWN0ID09PSAnZnVuY3Rpb24nKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJyZWplY3RcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5GdW5jdGlvblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QocmVqZWN0KSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaSA9IHZvaWQgMCxcblx0ICAgICAgICAgICAgYXJnID0gdm9pZCAwO1xuXHRcblx0ICAgICAgICBmb3IgKGkgaW4gYXJncykge1xuXHQgICAgICAgICAgaWYgKGFyZ3MuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0ICAgICAgICAgICAgYXJnID0gYXJnc1tpXTtcblx0XG5cdCAgICAgICAgICAgIGlmIChhcmcgaW5zdGFuY2VvZiBfcmVmZXJlbmNlMi5kZWZhdWx0KSB7XG5cdCAgICAgICAgICAgICAgdmFyIGlkID0gYXJnLmlkO1xuXHRcblx0ICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzMy5fZG9HZXRTZXJ2aWNlKGlkLCBDb250YWluZXIuX2RlZXBDb3B5TG9hZGluZyhsb2FkaW5nKSkpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIF9wYXJhbWV0ZXIyLmRlZmF1bHQpIHtcblx0ICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzMy5nZXRQYXJhbWV0ZXIoYXJnLmlkKSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyNChyZWplY3QoX2Vycm9ycy5VbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yLmNyZWF0ZUVycm9yKGFyZykpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWYyNChyZXNvbHZlKFByb21pc2UuYWxsKHByb21pc2VzKSkpO1xuXHQgICAgICB9KSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBVc2VkIGludGVybmFsbHkgdG8gcmV0cmlldmUgYSBzZXJ2aWNlIGJ5IGl0cyBpZGVudGlmaWVyLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBzZXJ2aWNlXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcblx0ICAgICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcblx0ICAgICAqXG5cdCAgICAgKiBAcHJvbWlzZVxuXHQgICAgICogQHJlc29sdmUge1NlcnZpY2V9IGEgc2VydmljZSBpbnN0YW5jZVxuXHQgICAgICogQHJlamVjdCB7Q2lyY3VsYXJEZXBlbmRlbmN5RXJyb3J9IGluIGNhc2Ugb2YgYSBjaXJjdWxhciBkZXBlbmRlbmN5XG5cdCAgICAgKiBAcmVqZWN0IHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3J9IGluIGNhc2UgbmVpdGhlciBhbiBpbnN0YW5jZSBub3IgYSBkZWZpbml0aW9uIGlzIGZvdW5kXG5cdCAgICAgKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfZG9HZXRTZXJ2aWNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfZG9HZXRTZXJ2aWNlKGlkZW50aWZpZXIsIGxvYWRpbmcpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZjI1KF9pZDI1KSB7XG5cdCAgICAgICAgaWYgKCEoX2lkMjUgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcblByb21pc2U8U2VydmljZSB8IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yIHwgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yPlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMjUpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfaWQyNTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIUxvYWRpbmdPYmplY3QobG9hZGluZykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvYWRpbmdcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2FkaW5nT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2FkaW5nKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh1bmRlZmluZWQgIT09IGxvYWRpbmcub2JqW2lkZW50aWZpZXJdKSB7XG5cdCAgICAgICAgdmFyIHNlcnZpY2VzID0gW10uY29uY2F0KGxvYWRpbmcuYXJyKS5jb25jYXQoW2lkZW50aWZpZXJdKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9yZWYyNShQcm9taXNlLnJlamVjdChfZXJyb3JzLkNpcmN1bGFyRGVwZW5kZW5jeUVycm9yLmNyZWF0ZUVycm9yKHNlcnZpY2VzKSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcikpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaGFzRGVmaW5pdGlvbihpZGVudGlmaWVyKSkge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2xvY2F0ZUluc3RhbmNlKGlkZW50aWZpZXIpO1xuXHRcblx0ICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IHJlc3VsdCkge1xuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogSW4gY2FzZSBsb2NhdGUgaW5zdGFuY2UgcmV0dXJucyBhIHByb21pc2UsIHJlc29sdmUgcHJvbWlzZVxuXHQgICAgICAgICAgICAgKi9cblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyNShQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuXHQgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yZWYyNihfaWQyNikge1xuXHQgICAgICAgICAgICAgICAgaWYgKCEoX2lkMjYgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuXHQgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuUHJvbWlzZTxTZXJ2aWNlIHwgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yPlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMjYpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX2lkMjY7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBpZiAoIShpbnN0YW5jZSA9PSBudWxsIHx8IFNlcnZpY2UoaW5zdGFuY2UpKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpbnN0YW5jZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbj9TZXJ2aWNlXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpbnN0YW5jZSkpO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gaW5zdGFuY2UpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMjYoUHJvbWlzZS5yZWplY3QoX2Vycm9ycy5VbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcikpKTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIHJldHVybiBfcmVmMjYoUHJvbWlzZS5yZXNvbHZlKGluc3RhbmNlKSk7XG5cdCAgICAgICAgICAgIH0pKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICByZXR1cm4gX3JlZjI1KFByb21pc2UucmVqZWN0KF9lcnJvcnMuVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBsb2FkaW5nLm9ialtpZGVudGlmaWVyXSA9IHRydWU7XG5cdCAgICAgICAgbG9hZGluZy5hcnIucHVzaChpZGVudGlmaWVyKTtcblx0XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5faW5zdGFudGlhdGUoaWRlbnRpZmllciwgdGhpcy5nZXREZWZpbml0aW9uKGlkZW50aWZpZXIpLCBsb2FkaW5nKTtcblx0XG5cdCAgICAgICAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNBbHJlYWR5VXNlZFRvSW5zdGFudGlhdGVCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSB0cnVlO1xuXHRcblx0ICAgICAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gcHJvbWlzZTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICByZXR1cm4gX3JlZjI1KFByb21pc2UucmVqZWN0KGUpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMjUoUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBNYWtlcyBhIGRlZXAgY29weSBvZiBsb2FkaW5nIG9iamVjdCBzbyBhcyBub3QgdG8gbW9kaWZ5IGl0IGJ5IHJlZmVyZW5jZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgbG9hZGluZyBvYmplY3QgaW5zdGFuY2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7TG9hZGluZ09iamVjdH0gbG9hZGluZyBhIGRlZXAgY29weSBvZiB0aGUgb3JpZ2luYWwgbG9hZGluZyBwYXJhbWV0ZXJcblx0ICAgICAqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH1dLCBbe1xuXHQgICAga2V5OiAnX2RlZXBDb3B5TG9hZGluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX2RlZXBDb3B5TG9hZGluZyhsb2FkaW5nKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYyNyhfaWQyNykge1xuXHQgICAgICAgIGlmICghTG9hZGluZ09iamVjdChfaWQyNykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2FkaW5nT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQyNykpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDI3O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIUxvYWRpbmdPYmplY3QobG9hZGluZykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImxvYWRpbmdcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5Mb2FkaW5nT2JqZWN0XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChsb2FkaW5nKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBuZXdMb2FkaW5nID0ge1xuXHQgICAgICAgIG9iajoge30sXG5cdCAgICAgICAgYXJyOiBbXS5jb25jYXQobG9hZGluZy5hcnIpXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBmb3IgKHZhciBpIGluIGxvYWRpbmcub2JqKSB7XG5cdCAgICAgICAgaWYgKGxvYWRpbmcub2JqLmhhc093blByb3BlcnR5KGkpKSB7XG5cdCAgICAgICAgICBuZXdMb2FkaW5nLm9ialtpXSA9IGxvYWRpbmcub2JqW2ldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYyNyhuZXdMb2FkaW5nKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBDb250YWluZXI7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENvbnRhaW5lcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfbWV0aG9kQ2FsbCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX21ldGhvZENhbGwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWV0aG9kQ2FsbCk7XG5cdFxuXHR2YXIgX2luamVjdGFibGVBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IF9pbmplY3RhYmxlQXJndW1lbnRzLkluamVjdGFibGVBcmd1bWVudHM7XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIERlZmluaXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdG9yXG5cdCAgICpcblx0ICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBEZWZpbml0aW9uKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZWZpbml0aW9uKTtcblx0XG5cdCAgICBpZiAoIShhcmdzID09IG51bGwgfHwgSW5qZWN0YWJsZUFyZ3VtZW50cyhhcmdzKSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJhcmdzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuP0luamVjdGFibGVBcmd1bWVudHNcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGFyZ3MpKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9tZXRob2RDYWxscyA9IFtdO1xuXHQgICAgdGhpcy5fYXJncyA9IGFyZ3M7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXRzIG1ldGhvZENhbGxzXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0FycmF5PE1ldGhvZENhbGw+fSBtZXRob2RDYWxsc1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKERlZmluaXRpb24sIFt7XG5cdCAgICBrZXk6ICdtZXRob2RDYWxscycsXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChtZXRob2RDYWxscykge1xuXHQgICAgICBpZiAoIShBcnJheS5pc0FycmF5KG1ldGhvZENhbGxzKSAmJiBtZXRob2RDYWxscy5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIHJldHVybiBpdGVtIGluc3RhbmNlb2YgX21ldGhvZENhbGwyLmRlZmF1bHQ7XG5cdCAgICAgIH0pKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibWV0aG9kQ2FsbHNcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5BcnJheTxNZXRob2RDYWxsPlxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QobWV0aG9kQ2FsbHMpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5fbWV0aG9kQ2FsbHMgPSBtZXRob2RDYWxscztcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdldHMgbWV0aG9kQ2FsbHNcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7QXJyYXk8TWV0aG9kQ2FsbD59XG5cdCAgICAgKi9cblx0ICAgICxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMihfaWQyKSB7XG5cdCAgICAgICAgaWYgKCEoQXJyYXkuaXNBcnJheShfaWQyKSAmJiBfaWQyLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gaXRlbSBpbnN0YW5jZW9mIF9tZXRob2RDYWxsMi5kZWZhdWx0O1xuXHQgICAgICAgIH0pKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkFycmF5PE1ldGhvZENhbGw+XFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQyKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYyKHRoaXMuX21ldGhvZENhbGxzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdldHMgYXJnc1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtJbmplY3RhYmxlQXJndW1lbnRzfVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2FyZ3MnLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYzKF9pZDMpIHtcblx0ICAgICAgICBpZiAoIUluamVjdGFibGVBcmd1bWVudHMoX2lkMykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uIHJldHVybiB2YWx1ZSB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5JbmplY3RhYmxlQXJndW1lbnRzXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChfaWQzKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkMztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYzKHRoaXMuX2FyZ3MpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIERlZmluaXRpb247XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IERlZmluaXRpb247XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2luamVjdGFibGVBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBJbmplY3RhYmxlQXJndW1lbnRzID0gX2luamVjdGFibGVBcmd1bWVudHMuSW5qZWN0YWJsZUFyZ3VtZW50cztcblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdHZhciBNZXRob2RDYWxsID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbWV0aG9kIG5hbWVcblx0ICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cblx0ICAgKlxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBNZXRob2RDYWxsKG5hbWUpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWV0aG9kQ2FsbCk7XG5cdFxuXHQgICAgaWYgKCEodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcIm5hbWVcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KG5hbWUpKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIShhcmdzID09IG51bGwgfHwgSW5qZWN0YWJsZUFyZ3VtZW50cyhhcmdzKSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJhcmdzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuP0luamVjdGFibGVBcmd1bWVudHNcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGFyZ3MpKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9uYW1lID0gbmFtZTtcblx0ICAgIHRoaXMuX2FyZ3MgPSBhcmdzO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogR2V0cyBuYW1lXG5cdCAgICpcblx0ICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKE1ldGhvZENhbGwsIFt7XG5cdCAgICBrZXk6ICduYW1lJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmKF9pZCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZih0aGlzLl9uYW1lKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdldHMgYXJnc1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtJbmplY3RhYmxlQXJndW1lbnRzfVxuXHQgICAgICpcblx0ICAgICAqIEBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdhcmdzJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmMihfaWQyKSB7XG5cdCAgICAgICAgaWYgKCFJbmplY3RhYmxlQXJndW1lbnRzKF9pZDIpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuSW5qZWN0YWJsZUFyZ3VtZW50c1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkMikpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBfcmVmMih0aGlzLl9hcmdzKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBNZXRob2RDYWxsO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBNZXRob2RDYWxsO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuSW5qZWN0YWJsZUFyZ3VtZW50cyA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfcmVmZXJlbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfcmVmZXJlbmNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlZmVyZW5jZSk7XG5cdFxuXHR2YXIgX3BhcmFtZXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX3BhcmFtZXRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXJhbWV0ZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBJbmplY3RhYmxlQXJndW1lbnRzID0gZXhwb3J0cy5JbmplY3RhYmxlQXJndW1lbnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIEluamVjdGFibGVBcmd1bWVudHMoaW5wdXQpIHtcblx0ICAgIHJldHVybiBBcnJheS5pc0FycmF5KGlucHV0KSAmJiBpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICByZXR1cm4gaXRlbSBpbnN0YW5jZW9mIF9yZWZlcmVuY2UyLmRlZmF1bHQgfHwgaXRlbSBpbnN0YW5jZW9mIF9wYXJhbWV0ZXIyLmRlZmF1bHQ7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIDtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW5qZWN0YWJsZUFyZ3VtZW50cywgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoaW5wdXQpIHtcblx0ICAgICAgcmV0dXJuIEluamVjdGFibGVBcmd1bWVudHMoaW5wdXQpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiBJbmplY3RhYmxlQXJndW1lbnRzO1xuXHR9KCk7XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBSZWZlcmVuY2UgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdG9yXG5cdCAgICogXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG5cdCAgICpcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gUmVmZXJlbmNlKGlkKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVmZXJlbmNlKTtcblx0XG5cdCAgICBpZiAoISh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVmFsdWUgb2YgYXJndW1lbnQgXFxcImlkXFxcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuXCIgKyBfaW5zcGVjdChpZCkpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2lkID0gaWQ7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBHZXRzIGlkXG5cdCAgICpcblx0ICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuXHQgICAqXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFJlZmVyZW5jZSwgW3tcblx0ICAgIGtleTogXCJpZFwiLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIGZ1bmN0aW9uIF9yZWYoX2lkKSB7XG5cdCAgICAgICAgaWYgKCEodHlwZW9mIF9pZCA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG5cIiArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5faWQpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFJlZmVyZW5jZTtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUmVmZXJlbmNlO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBQYXJhbWV0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdG9yXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcblx0ICAgKlxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBQYXJhbWV0ZXIoaWQpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYXJhbWV0ZXIpO1xuXHRcblx0ICAgIGlmICghKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJWYWx1ZSBvZiBhcmd1bWVudCBcXFwiaWRcXFwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG5cIiArIF9pbnNwZWN0KGlkKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5faWQgPSBpZDtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldHMgaWRcblx0ICAgKlxuXHQgICAqIEByZXR1cm5zIHtzdHJpbmd9XG5cdCAgICpcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUGFyYW1ldGVyLCBbe1xuXHQgICAga2V5OiBcImlkXCIsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgZnVuY3Rpb24gX3JlZihfaWQpIHtcblx0ICAgICAgICBpZiAoISh0eXBlb2YgX2lkID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcblwiICsgX2luc3BlY3QoX2lkKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZih0aGlzLl9pZCk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUGFyYW1ldGVyO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQYXJhbWV0ZXI7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGVmaW5pdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2RlZmluaXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5pdGlvbik7XG5cdFxuXHR2YXIgX2luamVjdGFibGVBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIEluamVjdGFibGVBcmd1bWVudHMgPSBfaW5qZWN0YWJsZUFyZ3VtZW50cy5JbmplY3RhYmxlQXJndW1lbnRzO1xuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0dmFyIENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uID0gZnVuY3Rpb24gKF9EZWZpbml0aW9uKSB7XG5cdCAgX2luaGVyaXRzKENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uLCBfRGVmaW5pdGlvbik7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENvbnN0cnVjdG9yXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXJcblx0ICAgKiBAcGFyYW0gez9JbmplY3RhYmxlQXJndW1lbnRzfSBbYXJncz1bXV1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbihjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcikge1xuXHQgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbik7XG5cdFxuXHQgICAgaWYgKCEodHlwZW9mIGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIShhcmdzID09IG51bGwgfHwgSW5qZWN0YWJsZUFyZ3VtZW50cyhhcmdzKSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJhcmdzXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuP0luamVjdGFibGVBcmd1bWVudHNcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGFyZ3MpKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbikpLmNhbGwodGhpcywgYXJncykpO1xuXHRcblx0ICAgIF90aGlzLl9jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciA9IGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyO1xuXHQgICAgcmV0dXJuIF90aGlzO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogR2V0cyBjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllclxuXHQgICAqXG5cdCAgICogQHJldHVybnMge3N0cmluZ31cblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhDbGFzc0NvbnN0cnVjdG9yRGVmaW5pdGlvbiwgW3tcblx0ICAgIGtleTogJ2NsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmKF9pZCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gcmV0dXJuIHZhbHVlIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoX2lkKSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2lkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gX3JlZih0aGlzLl9jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllcik7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb247XG5cdH0oX2RlZmluaXRpb24yLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb247XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2RlZmluaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9kZWZpbml0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluaXRpb24pO1xuXHRcblx0dmFyIF9pbmplY3RhYmxlQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBJbmplY3RhYmxlQXJndW1lbnRzID0gX2luamVjdGFibGVBcmd1bWVudHMuSW5qZWN0YWJsZUFyZ3VtZW50cztcblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdHZhciBGYWN0b3J5RGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChfRGVmaW5pdGlvbikge1xuXHQgIF9pbmhlcml0cyhGYWN0b3J5RGVmaW5pdGlvbiwgX0RlZmluaXRpb24pO1xuXHRcblx0ICAvKipcblx0ICAgKiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeVxuXHQgICAqIEBwYXJhbSB7P0luamVjdGFibGVBcmd1bWVudHN9IFthcmdzPVtdXVxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIEZhY3RvcnlEZWZpbml0aW9uKGZhY3RvcnkpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmFjdG9yeURlZmluaXRpb24pO1xuXHRcblx0ICAgIGlmICghKHR5cGVvZiBmYWN0b3J5ID09PSAnZnVuY3Rpb24nKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImZhY3RvcnlcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5GdW5jdGlvblxcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoZmFjdG9yeSkpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghKGFyZ3MgPT0gbnVsbCB8fCBJbmplY3RhYmxlQXJndW1lbnRzKGFyZ3MpKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImFyZ3NcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG4/SW5qZWN0YWJsZUFyZ3VtZW50c1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoYXJncykpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGYWN0b3J5RGVmaW5pdGlvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZhY3RvcnlEZWZpbml0aW9uKSkuY2FsbCh0aGlzLCBhcmdzKSk7XG5cdFxuXHQgICAgX3RoaXMuX2ZhY3RvcnkgPSBmYWN0b3J5O1xuXHQgICAgcmV0dXJuIF90aGlzO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogR2V0cyBmYWN0b3J5XG5cdCAgICpcblx0ICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRmFjdG9yeURlZmluaXRpb24sIFt7XG5cdCAgICBrZXk6ICdmYWN0b3J5Jyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICBmdW5jdGlvbiBfcmVmKF9pZCkge1xuXHQgICAgICAgIGlmICghKHR5cGVvZiBfaWQgPT09ICdmdW5jdGlvbicpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbiByZXR1cm4gdmFsdWUgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuRnVuY3Rpb25cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KF9pZCkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIF9yZWYodGhpcy5fZmFjdG9yeSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gRmFjdG9yeURlZmluaXRpb247XG5cdH0oX2RlZmluaXRpb24yLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRmFjdG9yeURlZmluaXRpb247XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2Nhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBfY2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yKTtcblx0XG5cdHZhciBfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0XG5cdHZhciBfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHR2YXIgX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7XG5cdFxuXHR2YXIgX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yKTtcblx0XG5cdHZhciBfbWV0aG9kRG9lc05vdEV4aXN0RXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0XG5cdHZhciBfbWV0aG9kRG9lc05vdEV4aXN0RXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWV0aG9kRG9lc05vdEV4aXN0RXJyb3IpO1xuXHRcblx0dmFyIF9zZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblx0XG5cdHZhciBfc2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcik7XG5cdFxuXHR2YXIgX3VuZGVmaW5lZFBhcmFtZXRlckVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cdFxuXHR2YXIgX3VuZGVmaW5lZFBhcmFtZXRlckVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VuZGVmaW5lZFBhcmFtZXRlckVycm9yKTtcblx0XG5cdHZhciBfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdFxuXHR2YXIgX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IpO1xuXHRcblx0dmFyIF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdFxuXHR2YXIgX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcik7XG5cdFxuXHR2YXIgX3Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdHZhciBfdW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yKTtcblx0XG5cdHZhciBfZ2V0U2VydmljZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdFxuXHR2YXIgX2dldFNlcnZpY2VFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRTZXJ2aWNlRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3I6IF9jYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yMi5kZWZhdWx0LFxuXHQgIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yOiBfY2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IyLmRlZmF1bHQsXG5cdCAgRGlzbEVycm9yOiBfZGlzbEVycm9yMi5kZWZhdWx0LFxuXHQgIEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yOiBfZmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IyLmRlZmF1bHQsXG5cdCAgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3I6IF9tZXRob2REb2VzTm90RXhpc3RFcnJvcjIuZGVmYXVsdCxcblx0ICBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3I6IF9zZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IyLmRlZmF1bHQsXG5cdCAgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3I6IF91bmRlZmluZWRQYXJhbWV0ZXJFcnJvcjIuZGVmYXVsdCxcblx0ICBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3I6IF91bmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IyLmRlZmF1bHQsXG5cdCAgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcjogX3VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IyLmRlZmF1bHQsXG5cdCAgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcjogX3Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IyLmRlZmF1bHQsXG5cdCAgR2V0U2VydmljZUVycm9yOiBfZ2V0U2VydmljZUVycm9yMi5kZWZhdWx0XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoY2xhc3NOYW1lKSB7XG5cdCAgICAgIGlmICghKHR5cGVvZiBjbGFzc05hbWUgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiY2xhc3NOYW1lXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChjbGFzc05hbWUpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yKHtcblx0ICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuXHQgICAgICB9LCAnQ2Fubm90IGxvY2F0ZSBzZXJ2aWNlIGNsYXNzIGNvbnN0cnVjdG9yIGZvciBjbGFzcyBcIiVzXCInLCBjbGFzc05hbWUpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF92ZXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfdmVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZlcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBEaXNsRXJyb3IgPSBmdW5jdGlvbiAoX1ZFcnJvcikge1xuXHQgIF9pbmhlcml0cyhEaXNsRXJyb3IsIF9WRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBEaXNsRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGlzbEVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERpc2xFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERpc2xFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIERpc2xFcnJvcjtcblx0fShfdmVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IERpc2xFcnJvcjtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiB2ZXJyb3IuanM6IHJpY2hlciBKYXZhU2NyaXB0IGVycm9yc1xuXHQgKi9cblx0XG5cdHZhciBtb2RfYXNzZXJ0cGx1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgbW9kX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBtb2RfZXh0c3ByaW50ZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbW9kX2lzRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKS5pc0Vycm9yO1xuXHR2YXIgc3ByaW50ZiA9IG1vZF9leHRzcHJpbnRmLnNwcmludGY7XG5cdFxuXHQvKlxuXHQgKiBQdWJsaWMgaW50ZXJmYWNlXG5cdCAqL1xuXHRcblx0LyogU28geW91IGNhbiAndmFyIFZFcnJvciA9IHJlcXVpcmUoJ3ZlcnJvcicpJyAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IFZFcnJvcjtcblx0LyogRm9yIGNvbXBhdGliaWxpdHkgKi9cblx0VkVycm9yLlZFcnJvciA9IFZFcnJvcjtcblx0LyogT3RoZXIgZXhwb3J0ZWQgY2xhc3NlcyAqL1xuXHRWRXJyb3IuU0Vycm9yID0gU0Vycm9yO1xuXHRWRXJyb3IuV0Vycm9yID0gV0Vycm9yO1xuXHRWRXJyb3IuTXVsdGlFcnJvciA9IE11bHRpRXJyb3I7XG5cdFxuXHQvKlxuXHQgKiBDb21tb24gZnVuY3Rpb24gdXNlZCB0byBwYXJzZSBjb25zdHJ1Y3RvciBhcmd1bWVudHMgZm9yIFZFcnJvciwgV0Vycm9yLCBhbmRcblx0ICogU0Vycm9yLiAgTmFtZWQgYXJndW1lbnRzIHRvIHRoaXMgZnVuY3Rpb246XG5cdCAqXG5cdCAqICAgICBzdHJpY3RcdFx0Zm9yY2Ugc3RyaWN0IGludGVycHJldGF0aW9uIG9mIHNwcmludGYgYXJndW1lbnRzLCBldmVuXG5cdCAqICAgICBcdFx0XHRpZiB0aGUgb3B0aW9ucyBpbiBcImFyZ3ZcIiBkb24ndCBzYXkgc29cblx0ICpcblx0ICogICAgIGFyZ3ZcdFx0ZXJyb3IncyBjb25zdHJ1Y3RvciBhcmd1bWVudHMsIHdoaWNoIGFyZSB0byBiZVxuXHQgKiAgICAgXHRcdFx0aW50ZXJwcmV0ZWQgYXMgZGVzY3JpYmVkIGluIFJFQURNRS5tZC4gIEZvciBxdWlja1xuXHQgKiAgICAgXHRcdFx0cmVmZXJlbmNlLCBcImFyZ3ZcIiBoYXMgb25lIG9mIHRoZSBmb2xsb3dpbmcgZm9ybXM6XG5cdCAqXG5cdCAqICAgICAgICAgIFsgc3ByaW50Zl9hcmdzLi4uIF0gICAgICAgICAgIChhcmd2WzBdIGlzIGEgc3RyaW5nKVxuXHQgKiAgICAgICAgICBbIGNhdXNlLCBzcHJpbnRmX2FyZ3MuLi4gXSAgICAoYXJndlswXSBpcyBhbiBFcnJvcilcblx0ICogICAgICAgICAgWyBvcHRpb25zLCBzcHJpbnRmX2FyZ3MuLi4gXSAgKGFyZ3ZbMF0gaXMgYW4gb2JqZWN0KVxuXHQgKlxuXHQgKiBUaGlzIGZ1bmN0aW9uIG5vcm1hbGl6ZXMgdGhlc2UgZm9ybXMsIHByb2R1Y2luZyBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nXG5cdCAqIHByb3BlcnRpZXM6XG5cdCAqXG5cdCAqICAgIG9wdGlvbnMgICAgICAgICAgIGVxdWl2YWxlbnQgdG8gXCJvcHRpb25zXCIgaW4gdGhpcmQgZm9ybS4gIFRoaXMgd2lsbCBuZXZlclxuXHQgKiAgICBcdFx0XHRiZSBhIGRpcmVjdCByZWZlcmVuY2UgdG8gd2hhdCB0aGUgY2FsbGVyIHBhc3NlZCBpblxuXHQgKiAgICBcdFx0XHQoaS5lLiwgaXQgbWF5IGJlIGEgc2hhbGxvdyBjb3B5KSwgc28gaXQgY2FuIGJlIGZyZWVseVxuXHQgKiAgICBcdFx0XHRtb2RpZmllZC5cblx0ICpcblx0ICogICAgc2hvcnRtZXNzYWdlICAgICAgcmVzdWx0IG9mIHNwcmludGYoc3ByaW50Zl9hcmdzKSwgdGFraW5nIG9wdGlvbnMuc3RyaWN0XG5cdCAqICAgIFx0XHRcdGludG8gYWNjb3VudCBhcyBkZXNjcmliZWQgaW4gUkVBRE1FLm1kLlxuXHQgKi9cblx0ZnVuY3Rpb24gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyhhcmdzKVxuXHR7XG5cdFx0dmFyIGFyZ3YsIG9wdGlvbnMsIHNwcmludGZfYXJncywgc2hvcnRtZXNzYWdlLCBrO1xuXHRcblx0XHRtb2RfYXNzZXJ0cGx1cy5vYmplY3QoYXJncywgJ2FyZ3MnKTtcblx0XHRtb2RfYXNzZXJ0cGx1cy5ib29sKGFyZ3Muc3RyaWN0LCAnYXJncy5zdHJpY3QnKTtcblx0XHRtb2RfYXNzZXJ0cGx1cy5hcnJheShhcmdzLmFyZ3YsICdhcmdzLmFyZ3YnKTtcblx0XHRhcmd2ID0gYXJncy5hcmd2O1xuXHRcblx0XHQvKlxuXHRcdCAqIEZpcnN0LCBmaWd1cmUgb3V0IHdoaWNoIGZvcm0gb2YgaW52b2NhdGlvbiB3ZSd2ZSBiZWVuIGdpdmVuLlxuXHRcdCAqL1xuXHRcdGlmIChhcmd2Lmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0b3B0aW9ucyA9IHt9O1xuXHRcdFx0c3ByaW50Zl9hcmdzID0gW107XG5cdFx0fSBlbHNlIGlmIChtb2RfaXNFcnJvcihhcmd2WzBdKSkge1xuXHRcdFx0b3B0aW9ucyA9IHsgJ2NhdXNlJzogYXJndlswXSB9O1xuXHRcdFx0c3ByaW50Zl9hcmdzID0gYXJndi5zbGljZSgxKTtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiAoYXJndlswXSkgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRvcHRpb25zID0ge307XG5cdFx0XHRmb3IgKGsgaW4gYXJndlswXSkge1xuXHRcdFx0XHRvcHRpb25zW2tdID0gYXJndlswXVtrXTtcblx0XHRcdH1cblx0XHRcdHNwcmludGZfYXJncyA9IGFyZ3Yuc2xpY2UoMSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1vZF9hc3NlcnRwbHVzLnN0cmluZyhhcmd2WzBdLFxuXHRcdFx0ICAgICdmaXJzdCBhcmd1bWVudCB0byBWRXJyb3IsIFNFcnJvciwgb3IgV0Vycm9yICcgK1xuXHRcdFx0ICAgICdjb25zdHJ1Y3RvciBtdXN0IGJlIGEgc3RyaW5nLCBvYmplY3QsIG9yIEVycm9yJyk7XG5cdFx0XHRvcHRpb25zID0ge307XG5cdFx0XHRzcHJpbnRmX2FyZ3MgPSBhcmd2O1xuXHRcdH1cblx0XG5cdFx0Lypcblx0XHQgKiBOb3cgY29uc3RydWN0IHRoZSBlcnJvcidzIG1lc3NhZ2UuXG5cdFx0ICpcblx0XHQgKiBleHRzcHJpbnRmICh3aGljaCB3ZSBpbnZva2UgaGVyZSB3aXRoIG91ciBjYWxsZXIncyBhcmd1bWVudHMgaW4gb3JkZXJcblx0XHQgKiB0byBjb25zdHJ1Y3QgdGhpcyBFcnJvcidzIG1lc3NhZ2UpIGlzIHN0cmljdCBpbiBpdHMgaW50ZXJwcmV0YXRpb24gb2Zcblx0XHQgKiB2YWx1ZXMgdG8gYmUgcHJvY2Vzc2VkIGJ5IHRoZSBcIiVzXCIgc3BlY2lmaWVyLiAgVGhlIHZhbHVlIHBhc3NlZCB0b1xuXHRcdCAqIGV4dHNwcmludGYgbXVzdCBhY3R1YWxseSBiZSBhIHN0cmluZyBvciBzb21ldGhpbmcgY29udmVydGlibGUgdG8gYVxuXHRcdCAqIFN0cmluZyB1c2luZyAudG9TdHJpbmcoKS4gIFBhc3Npbmcgb3RoZXIgdmFsdWVzIChub3RhYmx5IFwibnVsbFwiIGFuZFxuXHRcdCAqIFwidW5kZWZpbmVkXCIpIGlzIGNvbnNpZGVyZWQgYSBwcm9ncmFtbWVyIGVycm9yLiAgVGhlIGFzc3VtcHRpb24gaXNcblx0XHQgKiB0aGF0IGlmIHlvdSBhY3R1YWxseSB3YW50IHRvIHByaW50IHRoZSBzdHJpbmcgXCJudWxsXCIgb3IgXCJ1bmRlZmluZWRcIixcblx0XHQgKiB0aGVuIHRoYXQncyBlYXN5IHRvIGRvIHRoYXQgd2hlbiB5b3UncmUgY2FsbGluZyBleHRzcHJpbnRmOyBvbiB0aGVcblx0XHQgKiBvdGhlciBoYW5kLCBpZiB5b3UgZGlkIE5PVCB3YW50IHRoYXQgKGkuZS4sIHRoZXJlJ3MgYWN0dWFsbHkgYSBidWdcblx0XHQgKiB3aGVyZSB0aGUgcHJvZ3JhbSBhc3N1bWVzIHNvbWUgdmFyaWFibGUgaXMgbm9uLW51bGwgYW5kIHRyaWVzIHRvXG5cdFx0ICogcHJpbnQgaXQsIHdoaWNoIG1pZ2h0IGhhcHBlbiB3aGVuIGNvbnN0cnVjdGluZyBhIHBhY2tldCBvciBmaWxlIGluXG5cdFx0ICogc29tZSBzcGVjaWZpYyBmb3JtYXQpLCB0aGVuIGl0J3MgYmV0dGVyIHRvIHN0b3AgaW1tZWRpYXRlbHkgdGhhblxuXHRcdCAqIHByb2R1Y2UgYm9ndXMgb3V0cHV0LlxuXHRcdCAqXG5cdFx0ICogSG93ZXZlciwgc29tZXRpbWVzIHRoZSBidWcgaXMgb25seSBpbiB0aGUgY29kZSBjYWxsaW5nIFZFcnJvciwgYW5kIGFcblx0XHQgKiBwcm9ncmFtbWVyIG1pZ2h0IHByZWZlciB0byBoYXZlIHRoZSBlcnJvciBtZXNzYWdlIGNvbnRhaW4gXCJudWxsXCIgb3Jcblx0XHQgKiBcInVuZGVmaW5lZFwiIHJhdGhlciB0aGFuIGhhdmUgdGhlIGJ1ZyBpbiB0aGUgZXJyb3IgcGF0aCBjcmFzaCB0aGVcblx0XHQgKiBwcm9ncmFtIChtYWtpbmcgdGhlIGZpcnN0IGJ1ZyBoYXJkZXIgdG8gaWRlbnRpZnkpLiAgRm9yIHRoYXQgcmVhc29uLFxuXHRcdCAqIGJ5IGRlZmF1bHQgVkVycm9yIGNvbnZlcnRzIFwibnVsbFwiIG9yIFwidW5kZWZpbmVkXCIgYXJndW1lbnRzIHRvIHRoZWlyXG5cdFx0ICogc3RyaW5nIHJlcHJlc2VudGF0aW9ucyBhbmQgcGFzc2VzIHRob3NlIHRvIGV4dHNwcmludGYuICBQcm9ncmFtbWVyc1xuXHRcdCAqIGRlc2lyaW5nIHRoZSBzdHJpY3QgYmVoYXZpb3IgY2FuIHVzZSB0aGUgU0Vycm9yIGNsYXNzIG9yIHBhc3MgdGhlXG5cdFx0ICogXCJzdHJpY3RcIiBvcHRpb24gdG8gdGhlIFZFcnJvciBjb25zdHJ1Y3Rvci5cblx0XHQgKi9cblx0XHRtb2RfYXNzZXJ0cGx1cy5vYmplY3Qob3B0aW9ucyk7XG5cdFx0aWYgKCFvcHRpb25zLnN0cmljdCAmJiAhYXJncy5zdHJpY3QpIHtcblx0XHRcdHNwcmludGZfYXJncyA9IHNwcmludGZfYXJncy5tYXAoZnVuY3Rpb24gKGEpIHtcblx0XHRcdFx0cmV0dXJuIChhID09PSBudWxsID8gJ251bGwnIDpcblx0XHRcdFx0ICAgIGEgPT09IHVuZGVmaW5lZCA/ICd1bmRlZmluZWQnIDogYSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFxuXHRcdGlmIChzcHJpbnRmX2FyZ3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRzaG9ydG1lc3NhZ2UgPSAnJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2hvcnRtZXNzYWdlID0gc3ByaW50Zi5hcHBseShudWxsLCBzcHJpbnRmX2FyZ3MpO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuICh7XG5cdFx0ICAgICdvcHRpb25zJzogb3B0aW9ucyxcblx0XHQgICAgJ3Nob3J0bWVzc2FnZSc6IHNob3J0bWVzc2FnZVxuXHRcdH0pO1xuXHR9XG5cdFxuXHQvKlxuXHQgKiBTZWUgUkVBRE1FLm1kIGZvciByZWZlcmVuY2UgZG9jdW1lbnRhdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIFZFcnJvcigpXG5cdHtcblx0XHR2YXIgYXJncywgb2JqLCBwYXJzZWQsIGNhdXNlLCBjdG9yLCBtZXNzYWdlLCBrO1xuXHRcblx0XHRhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0XG5cdFx0Lypcblx0XHQgKiBUaGlzIGlzIGEgcmVncmV0dGFibGUgcGF0dGVybiwgYnV0IEphdmFTY3JpcHQncyBidWlsdC1pbiBFcnJvciBjbGFzc1xuXHRcdCAqIGlzIGRlZmluZWQgdG8gd29yayB0aGlzIHdheSwgc28gd2UgYWxsb3cgdGhlIGNvbnN0cnVjdG9yIHRvIGJlIGNhbGxlZFxuXHRcdCAqIHdpdGhvdXQgXCJuZXdcIi5cblx0XHQgKi9cblx0XHRpZiAoISh0aGlzIGluc3RhbmNlb2YgVkVycm9yKSkge1xuXHRcdFx0b2JqID0gT2JqZWN0LmNyZWF0ZShWRXJyb3IucHJvdG90eXBlKTtcblx0XHRcdFZFcnJvci5hcHBseShvYmosIGFyZ3VtZW50cyk7XG5cdFx0XHRyZXR1cm4gKG9iaik7XG5cdFx0fVxuXHRcblx0XHQvKlxuXHRcdCAqIEZvciBjb252ZW5pZW5jZSBhbmQgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIHdlIHN1cHBvcnQgc2V2ZXJhbFxuXHRcdCAqIGRpZmZlcmVudCBjYWxsaW5nIGZvcm1zLiAgTm9ybWFsaXplIHRoZW0gaGVyZS5cblx0XHQgKi9cblx0XHRwYXJzZWQgPSBwYXJzZUNvbnN0cnVjdG9yQXJndW1lbnRzKHtcblx0XHQgICAgJ2FyZ3YnOiBhcmdzLFxuXHRcdCAgICAnc3RyaWN0JzogZmFsc2Vcblx0XHR9KTtcblx0XG5cdFx0Lypcblx0XHQgKiBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgbmFtZSwgYXBwbHkgaXQgbm93LlxuXHRcdCAqL1xuXHRcdGlmIChwYXJzZWQub3B0aW9ucy5uYW1lKSB7XG5cdFx0XHRtb2RfYXNzZXJ0cGx1cy5zdHJpbmcocGFyc2VkLm9wdGlvbnMubmFtZSxcblx0XHRcdCAgICAnZXJyb3JcXCdzIFwibmFtZVwiIG11c3QgYmUgYSBzdHJpbmcnKTtcblx0XHRcdHRoaXMubmFtZSA9IHBhcnNlZC5vcHRpb25zLm5hbWU7XG5cdFx0fVxuXHRcblx0XHQvKlxuXHRcdCAqIEZvciBkZWJ1Z2dpbmcsIHdlIGtlZXAgdHJhY2sgb2YgdGhlIG9yaWdpbmFsIHNob3J0IG1lc3NhZ2UgKGF0dGFjaGVkXG5cdFx0ICogdGhpcyBFcnJvciBwYXJ0aWN1bGFybHkpIHNlcGFyYXRlbHkgZnJvbSB0aGUgY29tcGxldGUgbWVzc2FnZSAod2hpY2hcblx0XHQgKiBpbmNsdWRlcyB0aGUgbWVzc2FnZXMgb2Ygb3VyIGNhdXNlIGNoYWluKS5cblx0XHQgKi9cblx0XHR0aGlzLmpzZV9zaG9ydG1zZyA9IHBhcnNlZC5zaG9ydG1lc3NhZ2U7XG5cdFx0bWVzc2FnZSA9IHBhcnNlZC5zaG9ydG1lc3NhZ2U7XG5cdFxuXHRcdC8qXG5cdFx0ICogSWYgd2UndmUgYmVlbiBnaXZlbiBhIGNhdXNlLCByZWNvcmQgYSByZWZlcmVuY2UgdG8gaXQgYW5kIHVwZGF0ZSBvdXJcblx0XHQgKiBtZXNzYWdlIGFwcHJvcHJpYXRlbHkuXG5cdFx0ICovXG5cdFx0Y2F1c2UgPSBwYXJzZWQub3B0aW9ucy5jYXVzZTtcblx0XHRpZiAoY2F1c2UpIHtcblx0XHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGNhdXNlKSwgJ2NhdXNlIGlzIG5vdCBhbiBFcnJvcicpO1xuXHRcdFx0dGhpcy5qc2VfY2F1c2UgPSBjYXVzZTtcblx0XG5cdFx0XHRpZiAoIXBhcnNlZC5vcHRpb25zLnNraXBDYXVzZU1lc3NhZ2UpIHtcblx0XHRcdFx0bWVzc2FnZSArPSAnOiAnICsgY2F1c2UubWVzc2FnZTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8qXG5cdFx0ICogSWYgd2UndmUgYmVlbiBnaXZlbiBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzLCBzaGFsbG93LWNvcHkgdGhhdFxuXHRcdCAqIGhlcmUuICBXZSBkb24ndCB3YW50IHRvIHVzZSBhIGRlZXAgY29weSBpbiBjYXNlIHRoZXJlIGFyZSBub24tcGxhaW5cblx0XHQgKiBvYmplY3RzIGhlcmUsIGJ1dCB3ZSBkb24ndCB3YW50IHRvIHVzZSB0aGUgb3JpZ2luYWwgb2JqZWN0IGluIGNhc2Vcblx0XHQgKiB0aGUgY2FsbGVyIG1vZGlmaWVzIGl0IGxhdGVyLlxuXHRcdCAqL1xuXHRcdHRoaXMuanNlX2luZm8gPSB7fTtcblx0XHRpZiAocGFyc2VkLm9wdGlvbnMuaW5mbykge1xuXHRcdFx0Zm9yIChrIGluIHBhcnNlZC5vcHRpb25zLmluZm8pIHtcblx0XHRcdFx0dGhpcy5qc2VfaW5mb1trXSA9IHBhcnNlZC5vcHRpb25zLmluZm9ba107XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHR0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cdFxuXHRcdGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuXHRcdFx0Y3RvciA9IHBhcnNlZC5vcHRpb25zLmNvbnN0cnVjdG9yT3B0IHx8IHRoaXMuY29uc3RydWN0b3I7XG5cdFx0XHRFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBjdG9yKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiAodGhpcyk7XG5cdH1cblx0XG5cdG1vZF91dGlsLmluaGVyaXRzKFZFcnJvciwgRXJyb3IpO1xuXHRWRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnVkVycm9yJztcblx0XG5cdFZFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB2ZV90b1N0cmluZygpXG5cdHtcblx0XHR2YXIgc3RyID0gKHRoaXMuaGFzT3duUHJvcGVydHkoJ25hbWUnKSAmJiB0aGlzLm5hbWUgfHxcblx0XHRcdHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lKTtcblx0XHRpZiAodGhpcy5tZXNzYWdlKVxuXHRcdFx0c3RyICs9ICc6ICcgKyB0aGlzLm1lc3NhZ2U7XG5cdFxuXHRcdHJldHVybiAoc3RyKTtcblx0fTtcblx0XG5cdC8qXG5cdCAqIFRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGZvciBjb21wYXRpYmlsaXR5LiAgTmV3IGNhbGxlcnMgc2hvdWxkIHVzZVxuXHQgKiBWRXJyb3IuY2F1c2UoKSBpbnN0ZWFkLiAgVGhhdCBtZXRob2QgYWxzbyB1c2VzIHRoZSBzYW5lciBgbnVsbGAgcmV0dXJuIHZhbHVlXG5cdCAqIHdoZW4gdGhlcmUgaXMgbm8gY2F1c2UuXG5cdCAqL1xuXHRWRXJyb3IucHJvdG90eXBlLmNhdXNlID0gZnVuY3Rpb24gdmVfY2F1c2UoKVxuXHR7XG5cdFx0dmFyIGNhdXNlID0gVkVycm9yLmNhdXNlKHRoaXMpO1xuXHRcdHJldHVybiAoY2F1c2UgPT09IG51bGwgPyB1bmRlZmluZWQgOiBjYXVzZSk7XG5cdH07XG5cdFxuXHQvKlxuXHQgKiBTdGF0aWMgbWV0aG9kc1xuXHQgKlxuXHQgKiBUaGVzZSBjbGFzcy1sZXZlbCBtZXRob2RzIGFyZSBwcm92aWRlZCBzbyB0aGF0IGNhbGxlcnMgY2FuIHVzZSB0aGVtIG9uXG5cdCAqIGluc3RhbmNlcyBvZiBFcnJvcnMgdGhhdCBhcmUgbm90IFZFcnJvcnMuICBOZXcgaW50ZXJmYWNlcyBzaG91bGQgYmUgcHJvdmlkZWRcblx0ICogb25seSB1c2luZyBzdGF0aWMgbWV0aG9kcyB0byBlbGltaW5hdGUgdGhlIGNsYXNzIG9mIHByb2dyYW1taW5nIG1pc3Rha2Ugd2hlcmVcblx0ICogcGVvcGxlIGZhaWwgdG8gY2hlY2sgd2hldGhlciB0aGUgRXJyb3Igb2JqZWN0IGhhcyB0aGUgY29ycmVzcG9uZGluZyBtZXRob2RzLlxuXHQgKi9cblx0XG5cdFZFcnJvci5jYXVzZSA9IGZ1bmN0aW9uIChlcnIpXG5cdHtcblx0XHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0XHRyZXR1cm4gKG1vZF9pc0Vycm9yKGVyci5qc2VfY2F1c2UpID8gZXJyLmpzZV9jYXVzZSA6IG51bGwpO1xuXHR9O1xuXHRcblx0VkVycm9yLmluZm8gPSBmdW5jdGlvbiAoZXJyKVxuXHR7XG5cdFx0dmFyIHJ2LCBjYXVzZSwgaztcblx0XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoZXJyKSwgJ2VyciBtdXN0IGJlIGFuIEVycm9yJyk7XG5cdFx0Y2F1c2UgPSBWRXJyb3IuY2F1c2UoZXJyKTtcblx0XHRpZiAoY2F1c2UgIT09IG51bGwpIHtcblx0XHRcdHJ2ID0gVkVycm9yLmluZm8oY2F1c2UpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRydiA9IHt9O1xuXHRcdH1cblx0XG5cdFx0aWYgKHR5cGVvZiAoZXJyLmpzZV9pbmZvKSA9PSAnb2JqZWN0JyAmJiBlcnIuanNlX2luZm8gIT09IG51bGwpIHtcblx0XHRcdGZvciAoayBpbiBlcnIuanNlX2luZm8pIHtcblx0XHRcdFx0cnZba10gPSBlcnIuanNlX2luZm9ba107XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKHJ2KTtcblx0fTtcblx0XG5cdFZFcnJvci5maW5kQ2F1c2VCeU5hbWUgPSBmdW5jdGlvbiAoZXJyLCBuYW1lKVxuXHR7XG5cdFx0dmFyIGNhdXNlO1xuXHRcblx0XHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0XHRtb2RfYXNzZXJ0cGx1cy5zdHJpbmcobmFtZSk7XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobmFtZS5sZW5ndGggPiAwLCAnbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcblx0XG5cdFx0Zm9yIChjYXVzZSA9IGVycjsgY2F1c2UgIT09IG51bGw7IGNhdXNlID0gVkVycm9yLmNhdXNlKGNhdXNlKSkge1xuXHRcdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoY2F1c2UpKTtcblx0XHRcdGlmIChjYXVzZS5uYW1lID09IG5hbWUpIHtcblx0XHRcdFx0cmV0dXJuIChjYXVzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKG51bGwpO1xuXHR9O1xuXHRcblx0VkVycm9yLmZ1bGxTdGFjayA9IGZ1bmN0aW9uIChlcnIpXG5cdHtcblx0XHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0XG5cdFx0dmFyIGNhdXNlID0gVkVycm9yLmNhdXNlKGVycik7XG5cdFxuXHRcdGlmIChjYXVzZSkge1xuXHRcdFx0cmV0dXJuIChlcnIuc3RhY2sgKyAnXFxuY2F1c2VkIGJ5OiAnICsgVkVycm9yLmZ1bGxTdGFjayhjYXVzZSkpO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIChlcnIuc3RhY2spO1xuXHR9O1xuXHRcblx0XG5cdC8qXG5cdCAqIFNFcnJvciBpcyBsaWtlIFZFcnJvciwgYnV0IHN0cmljdGVyIGFib3V0IHR5cGVzLiAgWW91IGNhbm5vdCBwYXNzIFwibnVsbFwiIG9yXG5cdCAqIFwidW5kZWZpbmVkXCIgYXMgc3RyaW5nIGFyZ3VtZW50cyB0byB0aGUgZm9ybWF0dGVyLlxuXHQgKi9cblx0ZnVuY3Rpb24gU0Vycm9yKClcblx0e1xuXHRcdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgb3B0aW9ucztcblx0XG5cdFx0YXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG5cdFx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFNFcnJvcikpIHtcblx0XHRcdG9iaiA9IE9iamVjdC5jcmVhdGUoU0Vycm9yLnByb3RvdHlwZSk7XG5cdFx0XHRTRXJyb3IuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuXHRcdFx0cmV0dXJuIChvYmopO1xuXHRcdH1cblx0XG5cdFx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdFx0ICAgICdhcmd2JzogYXJncyxcblx0XHQgICAgJ3N0cmljdCc6IHRydWVcblx0XHR9KTtcblx0XG5cdFx0b3B0aW9ucyA9IHBhcnNlZC5vcHRpb25zO1xuXHRcdFZFcnJvci5jYWxsKHRoaXMsIG9wdGlvbnMsICclcycsIHBhcnNlZC5zaG9ydG1lc3NhZ2UpO1xuXHRcblx0XHRyZXR1cm4gKHRoaXMpO1xuXHR9XG5cdFxuXHQvKlxuXHQgKiBXZSBkb24ndCBib3RoZXIgc2V0dGluZyBTRXJyb3IucHJvdG90eXBlLm5hbWUgYmVjYXVzZSBvbmNlIGNvbnN0cnVjdGVkLFxuXHQgKiBTRXJyb3JzIGFyZSBqdXN0IGxpa2UgVkVycm9ycy5cblx0ICovXG5cdG1vZF91dGlsLmluaGVyaXRzKFNFcnJvciwgVkVycm9yKTtcblx0XG5cdFxuXHQvKlxuXHQgKiBSZXByZXNlbnRzIGEgY29sbGVjdGlvbiBvZiBlcnJvcnMgZm9yIHRoZSBwdXJwb3NlIG9mIGNvbnN1bWVycyB0aGF0IGdlbmVyYWxseVxuXHQgKiBvbmx5IGRlYWwgd2l0aCBvbmUgZXJyb3IuICBDYWxsZXJzIGNhbiBleHRyYWN0IHRoZSBpbmRpdmlkdWFsIGVycm9yc1xuXHQgKiBjb250YWluZWQgaW4gdGhpcyBvYmplY3QsIGJ1dCBtYXkgYWxzbyBqdXN0IHRyZWF0IGl0IGFzIGEgbm9ybWFsIHNpbmdsZVxuXHQgKiBlcnJvciwgaW4gd2hpY2ggY2FzZSBhIHN1bW1hcnkgbWVzc2FnZSB3aWxsIGJlIHByaW50ZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBNdWx0aUVycm9yKGVycm9ycylcblx0e1xuXHRcdG1vZF9hc3NlcnRwbHVzLmFycmF5KGVycm9ycywgJ2xpc3Qgb2YgZXJyb3JzJyk7XG5cdFx0bW9kX2Fzc2VydHBsdXMub2soZXJyb3JzLmxlbmd0aCA+IDAsICdtdXN0IGJlIGF0IGxlYXN0IG9uZSBlcnJvcicpO1xuXHRcdHRoaXMuYXNlX2Vycm9ycyA9IGVycm9ycztcblx0XG5cdFx0VkVycm9yLmNhbGwodGhpcywge1xuXHRcdCAgICAnY2F1c2UnOiBlcnJvcnNbMF1cblx0XHR9LCAnZmlyc3Qgb2YgJWQgZXJyb3IlcycsIGVycm9ycy5sZW5ndGgsIGVycm9ycy5sZW5ndGggPT0gMSA/ICcnIDogJ3MnKTtcblx0fVxuXHRcblx0bW9kX3V0aWwuaW5oZXJpdHMoTXVsdGlFcnJvciwgVkVycm9yKTtcblx0TXVsdGlFcnJvci5wcm90b3R5cGUubmFtZSA9ICdNdWx0aUVycm9yJztcblx0XG5cdE11bHRpRXJyb3IucHJvdG90eXBlLmVycm9ycyA9IGZ1bmN0aW9uIG1lX2Vycm9ycygpXG5cdHtcblx0XHRyZXR1cm4gKHRoaXMuYXNlX2Vycm9ycy5zbGljZSgwKSk7XG5cdH07XG5cdFxuXHRcblx0Lypcblx0ICogU2VlIFJFQURNRS5tZCBmb3IgcmVmZXJlbmNlIGRldGFpbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBXRXJyb3IoKVxuXHR7XG5cdFx0dmFyIGFyZ3MsIG9iaiwgcGFyc2VkLCBvcHRpb25zO1xuXHRcblx0XHRhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0XHRpZiAoISh0aGlzIGluc3RhbmNlb2YgV0Vycm9yKSkge1xuXHRcdFx0b2JqID0gT2JqZWN0LmNyZWF0ZShXRXJyb3IucHJvdG90eXBlKTtcblx0XHRcdFdFcnJvci5hcHBseShvYmosIGFyZ3MpO1xuXHRcdFx0cmV0dXJuIChvYmopO1xuXHRcdH1cblx0XG5cdFx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdFx0ICAgICdhcmd2JzogYXJncyxcblx0XHQgICAgJ3N0cmljdCc6IGZhbHNlXG5cdFx0fSk7XG5cdFxuXHRcdG9wdGlvbnMgPSBwYXJzZWQub3B0aW9ucztcblx0XHRvcHRpb25zWydza2lwQ2F1c2VNZXNzYWdlJ10gPSB0cnVlO1xuXHRcdFZFcnJvci5jYWxsKHRoaXMsIG9wdGlvbnMsICclcycsIHBhcnNlZC5zaG9ydG1lc3NhZ2UpO1xuXHRcblx0XHRyZXR1cm4gKHRoaXMpO1xuXHR9XG5cdFxuXHRtb2RfdXRpbC5pbmhlcml0cyhXRXJyb3IsIFZFcnJvcik7XG5cdFdFcnJvci5wcm90b3R5cGUubmFtZSA9ICdXRXJyb3InO1xuXHRcblx0V0Vycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHdlX3RvU3RyaW5nKClcblx0e1xuXHRcdHZhciBzdHIgPSAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpICYmIHRoaXMubmFtZSB8fFxuXHRcdFx0dGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8IHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlLm5hbWUpO1xuXHRcdGlmICh0aGlzLm1lc3NhZ2UpXG5cdFx0XHRzdHIgKz0gJzogJyArIHRoaXMubWVzc2FnZTtcblx0XHRpZiAodGhpcy5qc2VfY2F1c2UgJiYgdGhpcy5qc2VfY2F1c2UubWVzc2FnZSlcblx0XHRcdHN0ciArPSAnOyBjYXVzZWQgYnkgJyArIHRoaXMuanNlX2NhdXNlLnRvU3RyaW5nKCk7XG5cdFxuXHRcdHJldHVybiAoc3RyKTtcblx0fTtcblx0XG5cdC8qXG5cdCAqIEZvciBwdXJlbHkgaGlzdG9yaWNhbCByZWFzb25zLCBXRXJyb3IncyBjYXVzZSgpIGZ1bmN0aW9uIGFsbG93cyB5b3UgdG8gc2V0XG5cdCAqIHRoZSBjYXVzZS5cblx0ICovXG5cdFdFcnJvci5wcm90b3R5cGUuY2F1c2UgPSBmdW5jdGlvbiB3ZV9jYXVzZShjKVxuXHR7XG5cdFx0aWYgKG1vZF9pc0Vycm9yKGMpKVxuXHRcdFx0dGhpcy5qc2VfY2F1c2UgPSBjO1xuXHRcblx0XHRyZXR1cm4gKHRoaXMuanNlX2NhdXNlKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIsIHByb2Nlc3MpIHsvLyBDb3B5cmlnaHQgKGMpIDIwMTIsIE1hcmsgQ2F2YWdlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQvLyBDb3B5cmlnaHQgMjAxNSBKb3llbnQsIEluYy5cblx0XG5cdHZhciBhc3NlcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0dmFyIFN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpLlN0cmVhbTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdFxuXHQvLy8tLS0gR2xvYmFsc1xuXHRcblx0LyogSlNTVFlMRUQgKi9cblx0dmFyIFVVSURfUkVHRVhQID0gL15bYS1mQS1GMC05XXs4fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXsxMn0kLztcblx0XG5cdFxuXHQvLy8tLS0gSW50ZXJuYWxcblx0XG5cdGZ1bmN0aW9uIF9jYXBpdGFsaXplKHN0cikge1xuXHQgICAgcmV0dXJuIChzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfdG9zcyhuYW1lLCBleHBlY3RlZCwgb3BlciwgYXJnLCBhY3R1YWwpIHtcblx0ICAgIHRocm93IG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3Ioe1xuXHQgICAgICAgIG1lc3NhZ2U6IHV0aWwuZm9ybWF0KCclcyAoJXMpIGlzIHJlcXVpcmVkJywgbmFtZSwgZXhwZWN0ZWQpLFxuXHQgICAgICAgIGFjdHVhbDogKGFjdHVhbCA9PT0gdW5kZWZpbmVkKSA/IHR5cGVvZiAoYXJnKSA6IGFjdHVhbChhcmcpLFxuXHQgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCxcblx0ICAgICAgICBvcGVyYXRvcjogb3BlciB8fCAnPT09Jyxcblx0ICAgICAgICBzdGFja1N0YXJ0RnVuY3Rpb246IF90b3NzLmNhbGxlclxuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9nZXRDbGFzcyhhcmcpIHtcblx0ICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykuc2xpY2UoOCwgLTEpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHtcblx0ICAgIC8vIFdoeSBldmVuIGJvdGhlciB3aXRoIGFzc2VydHM/XG5cdH1cblx0XG5cdFxuXHQvLy8tLS0gRXhwb3J0c1xuXHRcblx0dmFyIHR5cGVzID0ge1xuXHQgICAgYm9vbDoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdib29sZWFuJzsgfVxuXHQgICAgfSxcblx0ICAgIGZ1bmM6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnZnVuY3Rpb24nOyB9XG5cdCAgICB9LFxuXHQgICAgc3RyaW5nOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ3N0cmluZyc7IH1cblx0ICAgIH0sXG5cdCAgICBvYmplY3Q6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIG51bWJlcjoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdudW1iZXInICYmICFpc05hTihhcmcpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBmaW5pdGU6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oYXJnKSAmJiBpc0Zpbml0ZShhcmcpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBidWZmZXI6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKGFyZyk7IH0sXG5cdCAgICAgICAgb3BlcmF0b3I6ICdCdWZmZXIuaXNCdWZmZXInXG5cdCAgICB9LFxuXHQgICAgYXJyYXk6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpOyB9LFxuXHQgICAgICAgIG9wZXJhdG9yOiAnQXJyYXkuaXNBcnJheSdcblx0ICAgIH0sXG5cdCAgICBzdHJlYW06IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnIGluc3RhbmNlb2YgU3RyZWFtOyB9LFxuXHQgICAgICAgIG9wZXJhdG9yOiAnaW5zdGFuY2VvZicsXG5cdCAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3Ncblx0ICAgIH0sXG5cdCAgICBkYXRlOiB7XG5cdCAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIERhdGU7IH0sXG5cdCAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcblx0ICAgICAgICBhY3R1YWw6IF9nZXRDbGFzc1xuXHQgICAgfSxcblx0ICAgIHJlZ2V4cDoge1xuXHQgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBhcmcgaW5zdGFuY2VvZiBSZWdFeHA7IH0sXG5cdCAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcblx0ICAgICAgICBhY3R1YWw6IF9nZXRDbGFzc1xuXHQgICAgfSxcblx0ICAgIHV1aWQ6IHtcblx0ICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnc3RyaW5nJyAmJiBVVUlEX1JFR0VYUC50ZXN0KGFyZyk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBvcGVyYXRvcjogJ2lzVVVJRCdcblx0ICAgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9zZXRFeHBvcnRzKG5kZWJ1Zykge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0eXBlcyk7XG5cdCAgICB2YXIgb3V0O1xuXHRcblx0ICAgIC8qIHJlLWV4cG9ydCBzdGFuZGFyZCBhc3NlcnQgKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX05ERUJVRykge1xuXHQgICAgICAgIG91dCA9IG5vb3A7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIG91dCA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuXHQgICAgICAgICAgICBpZiAoIWFyZykge1xuXHQgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCAndHJ1ZScsIGFyZyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8qIHN0YW5kYXJkIGNoZWNrcyAqL1xuXHQgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG5cdCAgICAgICAgaWYgKG5kZWJ1Zykge1xuXHQgICAgICAgICAgICBvdXRba10gPSBub29wO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB0eXBlID0gdHlwZXNba107XG5cdCAgICAgICAgb3V0W2tdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG5cdCAgICAgICAgICAgIGlmICghdHlwZS5jaGVjayhhcmcpKSB7XG5cdCAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGssIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qIG9wdGlvbmFsIGNoZWNrcyAqL1xuXHQgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG5cdCAgICAgICAgdmFyIG5hbWUgPSAnb3B0aW9uYWwnICsgX2NhcGl0YWxpemUoayk7XG5cdCAgICAgICAgaWYgKG5kZWJ1Zykge1xuXHQgICAgICAgICAgICBvdXRbbmFtZV0gPSBub29wO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB0eXBlID0gdHlwZXNba107XG5cdCAgICAgICAgb3V0W25hbWVdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG5cdCAgICAgICAgICAgIGlmIChhcmcgPT09IHVuZGVmaW5lZCB8fCBhcmcgPT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnKSkge1xuXHQgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBrLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKiBhcnJheU9mIGNoZWNrcyAqL1xuXHQgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG5cdCAgICAgICAgdmFyIG5hbWUgPSAnYXJyYXlPZicgKyBfY2FwaXRhbGl6ZShrKTtcblx0ICAgICAgICBpZiAobmRlYnVnKSB7XG5cdCAgICAgICAgICAgIG91dFtuYW1lXSA9IG5vb3A7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcblx0ICAgICAgICB2YXIgZXhwZWN0ZWQgPSAnWycgKyBrICsgJ10nO1xuXHQgICAgICAgIG91dFtuYW1lXSA9IGZ1bmN0aW9uIChhcmcsIG1zZykge1xuXHQgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHQgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIGk7XG5cdCAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmcubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmICghdHlwZS5jaGVjayhhcmdbaV0pKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyogb3B0aW9uYWxBcnJheU9mIGNoZWNrcyAqL1xuXHQgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG5cdCAgICAgICAgdmFyIG5hbWUgPSAnb3B0aW9uYWxBcnJheU9mJyArIF9jYXBpdGFsaXplKGspO1xuXHQgICAgICAgIGlmIChuZGVidWcpIHtcblx0ICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuXHQgICAgICAgIHZhciBleHBlY3RlZCA9ICdbJyArIGsgKyAnXSc7XG5cdCAgICAgICAgb3V0W25hbWVdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG5cdCAgICAgICAgICAgIGlmIChhcmcgPT09IHVuZGVmaW5lZCB8fCBhcmcgPT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHQgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIGk7XG5cdCAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmcubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmICghdHlwZS5jaGVjayhhcmdbaV0pKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyogcmUtZXhwb3J0IGJ1aWx0LWluIGFzc2VydGlvbnMgKi9cblx0ICAgIE9iamVjdC5rZXlzKGFzc2VydCkuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuXHQgICAgICAgIGlmIChrID09PSAnQXNzZXJ0aW9uRXJyb3InKSB7XG5cdCAgICAgICAgICAgIG91dFtrXSA9IGFzc2VydFtrXTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobmRlYnVnKSB7XG5cdCAgICAgICAgICAgIG91dFtrXSA9IG5vb3A7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgb3V0W2tdID0gYXNzZXJ0W2tdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyogZXhwb3J0IG91cnNlbHZlcyAoZm9yIHVuaXQgdGVzdHMgX29ubHlfKSAqL1xuXHQgICAgb3V0Ll9zZXRFeHBvcnRzID0gX3NldEV4cG9ydHM7XG5cdFxuXHQgICAgcmV0dXJuIG91dDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfc2V0RXhwb3J0cyhwcm9jZXNzLmVudi5OT0RFX05ERUJVRyk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuQnVmZmVyLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlciwgZ2xvYmFsKSB7LyohXG5cdCAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuXHQgKlxuXHQgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cblx0ICogQGxpY2Vuc2UgIE1JVFxuXHQgKi9cblx0LyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0XG5cdCd1c2Ugc3RyaWN0J1xuXHRcblx0dmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpXG5cdHZhciBpZWVlNzU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNilcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KVxuXHRcblx0ZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcblx0ZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuXHRleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblx0XG5cdC8qKlxuXHQgKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuXHQgKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuXHQgKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG5cdCAqXG5cdCAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcblx0ICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuXHQgKlxuXHQgKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG5cdCAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuXHQgKlxuXHQgKiBOb3RlOlxuXHQgKlxuXHQgKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuXHQgKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG5cdCAqXG5cdCAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuXHQgKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cdFxuXHQgKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuXHQgKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cblx0ICovXG5cdEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuXHQgID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblx0XG5cdC8qXG5cdCAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cblx0ICovXG5cdGV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXHRcblx0ZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcblx0ICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuXHQgICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcblx0ICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuXHQgICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcblx0ICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICAgID8gMHg3ZmZmZmZmZlxuXHQgICAgOiAweDNmZmZmZmZmXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7XG5cdCAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcblx0ICB9XG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2Vcblx0ICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG5cdCAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuXHQgICAgaWYgKHRoYXQgPT09IG51bGwpIHtcblx0ICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuXHQgICAgfVxuXHQgICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcblx0ICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZlxuXHQgKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG5cdCAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG5cdCAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuXG5cdCAqXG5cdCAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG5cdCAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0ICB9XG5cdFxuXHQgIC8vIENvbW1vbiBjYXNlLlxuXHQgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuXHQgICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoXG5cdCAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuXHQgICAgICApXG5cdCAgICB9XG5cdCAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuXHQgIH1cblx0ICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0QnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cdFxuXHQvLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cblx0QnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuXHQgIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgcmV0dXJuIGFyclxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdCAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG5cdCAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuXHQgKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG5cdCAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuXHQgKiBCdWZmZXIuZnJvbShidWZmZXIpXG5cdCAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuXHQgKiovXG5cdEJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG5cdCAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcblx0ICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcblx0ICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG5cdCAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcblx0ICAgICAgdmFsdWU6IG51bGwsXG5cdCAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcblx0ICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcblx0ICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG5cdCAgYXNzZXJ0U2l6ZShzaXplKVxuXHQgIGlmIChzaXplIDw9IDApIHtcblx0ICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcblx0ICB9XG5cdCAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcblx0ICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcblx0ICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cblx0ICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG5cdCAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG5cdCAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuXHQgKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG5cdCAqKi9cblx0QnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuXHQgIGFzc2VydFNpemUoc2l6ZSlcblx0ICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG5cdCAgICAgIHRoYXRbaV0gPSAwXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuXHQgKiAqL1xuXHRCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxuXHR9XG5cdC8qKlxuXHQgKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cblx0ICovXG5cdEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG5cdCAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG5cdCAgICBlbmNvZGluZyA9ICd1dGY4J1xuXHQgIH1cblx0XG5cdCAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcblx0ICB9XG5cdFxuXHQgIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuXHQgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXHRcblx0ICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXHRcblx0ICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcblx0ICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuXHQgICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cblx0ICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxuXHQgICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuXHQgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuXHQgIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXHRcblx0ICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcblx0ICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG5cdCAgfVxuXHRcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuXHQgICAgdGhhdCA9IGFycmF5XG5cdCAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuXHQgICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuXHQgICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG5cdCAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblx0XG5cdCAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIHRoYXRcblx0ICAgIH1cblx0XG5cdCAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG5cdCAgICByZXR1cm4gdGhhdFxuXHQgIH1cblx0XG5cdCAgaWYgKG9iaikge1xuXHQgICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcblx0ICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuXHQgICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuXHQgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSlcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcblx0ICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cblx0ICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcblx0ICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuXHQgIH1cblx0ICByZXR1cm4gbGVuZ3RoIHwgMFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcblx0ICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcblx0ICAgIGxlbmd0aCA9IDBcblx0ICB9XG5cdCAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxuXHR9XG5cdFxuXHRCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuXHQgIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG5cdH1cblx0XG5cdEJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cdFxuXHQgIHZhciB4ID0gYS5sZW5ndGhcblx0ICB2YXIgeSA9IGIubGVuZ3RoXG5cdFxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuXHQgICAgICB4ID0gYVtpXVxuXHQgICAgICB5ID0gYltpXVxuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSByZXR1cm4gLTFcblx0ICBpZiAoeSA8IHgpIHJldHVybiAxXG5cdCAgcmV0dXJuIDBcblx0fVxuXHRcblx0QnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuXHQgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG5cdCAgICBjYXNlICdoZXgnOlxuXHQgICAgY2FzZSAndXRmOCc6XG5cdCAgICBjYXNlICd1dGYtOCc6XG5cdCAgICBjYXNlICdhc2NpaSc6XG5cdCAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICBjYXNlICd1Y3MyJzpcblx0ICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcblx0ICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG5cdCAgfVxuXHRcblx0ICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcblx0ICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcblx0ICB9XG5cdFxuXHQgIHZhciBpXG5cdCAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBsZW5ndGggPSAwXG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuXHQgICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxuXHQgIHZhciBwb3MgPSAwXG5cdCAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcblx0ICAgIHZhciBidWYgPSBsaXN0W2ldXG5cdCAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG5cdCAgICB9XG5cdCAgICBidWYuY29weShidWZmZXIsIHBvcylcblx0ICAgIHBvcyArPSBidWYubGVuZ3RoXG5cdCAgfVxuXHQgIHJldHVybiBidWZmZXJcblx0fVxuXHRcblx0ZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHQgICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG5cdCAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXHQgIH1cblx0XG5cdCAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXHRcblx0ICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBsZW5cblx0ICAgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG5cdCAgICAgIGNhc2UgJ3VjczInOlxuXHQgICAgICBjYXNlICd1Y3MtMic6XG5cdCAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgICBjYXNlICd1dGYtMTZsZSc6XG5cdCAgICAgICAgcmV0dXJuIGxlbiAqIDJcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gbGVuID4+PiAxXG5cdCAgICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0QnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cdFxuXHRmdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2Vcblx0XG5cdCAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG5cdCAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblx0XG5cdCAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG5cdCAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuXHQgIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG5cdCAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG5cdCAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCA9IDBcblx0ICB9XG5cdCAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcblx0ICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuXHQgIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gJydcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuXHQgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPD0gMCkge1xuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHRcblx0ICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuXHQgIGVuZCA+Pj49IDBcblx0ICBzdGFydCA+Pj49IDBcblx0XG5cdCAgaWYgKGVuZCA8PSBzdGFydCkge1xuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB3aGlsZSAodHJ1ZSkge1xuXHQgICAgc3dpdGNoIChlbmNvZGluZykge1xuXHQgICAgICBjYXNlICdoZXgnOlxuXHQgICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICdhc2NpaSc6XG5cdCAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2xhdGluMSc6XG5cdCAgICAgIGNhc2UgJ2JpbmFyeSc6XG5cdCAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG5cdC8vIEJ1ZmZlciBpbnN0YW5jZXMuXG5cdEJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXHRcblx0ZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuXHQgIHZhciBpID0gYltuXVxuXHQgIGJbbl0gPSBiW21dXG5cdCAgYlttXSA9IGlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIGlmIChsZW4gJSAyICE9PSAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG5cdCAgICBzd2FwKHRoaXMsIGksIGkgKyAxKVxuXHQgIH1cblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKGxlbiAlIDQgIT09IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcblx0ICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIGlmIChsZW4gJSA4ICE9PSAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG5cdCAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuXHQgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcblx0ICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuXHQgIH1cblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuXHQgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcblx0ICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG5cdCAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuXHQgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuXHQgIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcblx0ICB2YXIgc3RyID0gJydcblx0ICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuXHQgIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcblx0ICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG5cdCAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG5cdCAgfVxuXHQgIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG5cdCAgfVxuXHRcblx0ICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgc3RhcnQgPSAwXG5cdCAgfVxuXHQgIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcblx0ICB9XG5cdCAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB0aGlzU3RhcnQgPSAwXG5cdCAgfVxuXHQgIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuXHQgIH1cblx0XG5cdCAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4Jylcblx0ICB9XG5cdFxuXHQgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcblx0ICAgIHJldHVybiAwXG5cdCAgfVxuXHQgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuXHQgICAgcmV0dXJuIC0xXG5cdCAgfVxuXHQgIGlmIChzdGFydCA+PSBlbmQpIHtcblx0ICAgIHJldHVybiAxXG5cdCAgfVxuXHRcblx0ICBzdGFydCA+Pj49IDBcblx0ICBlbmQgPj4+PSAwXG5cdCAgdGhpc1N0YXJ0ID4+Pj0gMFxuXHQgIHRoaXNFbmQgPj4+PSAwXG5cdFxuXHQgIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cdFxuXHQgIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuXHQgIHZhciB5ID0gZW5kIC0gc3RhcnRcblx0ICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblx0XG5cdCAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG5cdCAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuXHQgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG5cdCAgICAgIHggPSB0aGlzQ29weVtpXVxuXHQgICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSByZXR1cm4gLTFcblx0ICBpZiAoeSA8IHgpIHJldHVybiAxXG5cdCAgcmV0dXJuIDBcblx0fVxuXHRcblx0Ly8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuXHQvLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuXHQvL1xuXHQvLyBBcmd1bWVudHM6XG5cdC8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG5cdC8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG5cdC8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuXHQvLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuXHQvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuXHRmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcblx0ICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcblx0ICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cdFxuXHQgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG5cdCAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG5cdCAgICBieXRlT2Zmc2V0ID0gMFxuXHQgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcblx0ICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG5cdCAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcblx0ICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuXHQgIH1cblx0ICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuXG5cdCAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG5cdCAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcblx0ICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuXHQgIH1cblx0XG5cdCAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcblx0ICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuXHQgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcblx0ICAgIGlmIChkaXIpIHJldHVybiAtMVxuXHQgICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcblx0ICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG5cdCAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuXHQgICAgZWxzZSByZXR1cm4gLTFcblx0ICB9XG5cdFxuXHQgIC8vIE5vcm1hbGl6ZSB2YWxcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG5cdCAgfVxuXHRcblx0ICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuXHQgICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuXHQgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIC0xXG5cdCAgICB9XG5cdCAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuXHQgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuXHQgICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG5cdCAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgaWYgKGRpcikge1xuXHQgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuXHQgIH1cblx0XG5cdCAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuXHQgIHZhciBpbmRleFNpemUgPSAxXG5cdCAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcblx0ICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXHRcblx0ICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG5cdCAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuXHQgICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcblx0ICAgICAgICByZXR1cm4gLTFcblx0ICAgICAgfVxuXHQgICAgICBpbmRleFNpemUgPSAyXG5cdCAgICAgIGFyckxlbmd0aCAvPSAyXG5cdCAgICAgIHZhbExlbmd0aCAvPSAyXG5cdCAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG5cdCAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG5cdCAgICAgIHJldHVybiBidWZbaV1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgaVxuXHQgIGlmIChkaXIpIHtcblx0ICAgIHZhciBmb3VuZEluZGV4ID0gLTFcblx0ICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG5cdCAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuXHQgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcblx0ICAgICAgICBmb3VuZEluZGV4ID0gLTFcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuXHQgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuXHQgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuXHQgICAgICAgICAgZm91bmQgPSBmYWxzZVxuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuXHQgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcblx0ICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuXHQgIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG5cdCAgaWYgKCFsZW5ndGgpIHtcblx0ICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuXHQgIH0gZWxzZSB7XG5cdCAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuXHQgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuXHQgICAgICBsZW5ndGggPSByZW1haW5pbmdcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG5cdCAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblx0XG5cdCAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcblx0ICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcblx0ICB9XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuXHQgICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcblx0ICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuXHQgICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG5cdCAgfVxuXHQgIHJldHVybiBpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuXHQgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG5cdCAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBlbmNvZGluZyA9ICd1dGY4J1xuXHQgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcblx0ICAgIG9mZnNldCA9IDBcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblx0ICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBlbmNvZGluZyA9IG9mZnNldFxuXHQgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcblx0ICAgIG9mZnNldCA9IDBcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuXHQgIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuXHQgICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcblx0ICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuXHQgICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG5cdCAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuXHQgICAgfVxuXHQgIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKFxuXHQgICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG5cdCAgICApXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcblx0ICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblx0XG5cdCAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICBjYXNlICd1dGYtOCc6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuXHQgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogJ0J1ZmZlcicsXG5cdCAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdCAgdmFyIHJlcyA9IFtdXG5cdFxuXHQgIHZhciBpID0gc3RhcnRcblx0ICB3aGlsZSAoaSA8IGVuZCkge1xuXHQgICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuXHQgICAgdmFyIGNvZGVQb2ludCA9IG51bGxcblx0ICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuXHQgICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcblx0ICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG5cdCAgICAgIDogMVxuXHRcblx0ICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcblx0ICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXHRcblx0ICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcblx0ICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG5cdCAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcblx0ICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cblx0ICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cblx0ICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG5cdCAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcblx0ICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuXHQgICAgICBjb2RlUG9pbnQgPSAweEZGRkRcblx0ICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG5cdCAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG5cdCAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG5cdCAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcblx0ICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcblx0ICAgIH1cblx0XG5cdCAgICByZXMucHVzaChjb2RlUG9pbnQpXG5cdCAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2Vcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxuXHR9XG5cdFxuXHQvLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcblx0Ly8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuXHQvLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG5cdHZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXHRcblx0ZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG5cdCAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG5cdCAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuXHQgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG5cdCAgfVxuXHRcblx0ICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgdmFyIGkgPSAwXG5cdCAgd2hpbGUgKGkgPCBsZW4pIHtcblx0ICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuXHQgICAgICBTdHJpbmcsXG5cdCAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcblx0ICAgIClcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cdFxuXHQgIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cdFxuXHQgIHZhciBvdXQgPSAnJ1xuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuXHQgIH1cblx0ICByZXR1cm4gb3V0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuXHQgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgc3RhcnQgPSB+fnN0YXJ0XG5cdCAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXHRcblx0ICBpZiAoc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCArPSBsZW5cblx0ICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuXHQgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcblx0ICAgIHN0YXJ0ID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgMCkge1xuXHQgICAgZW5kICs9IGxlblxuXHQgICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcblx0ICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuXHQgICAgZW5kID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cdFxuXHQgIHZhciBuZXdCdWZcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcblx0ICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG5cdCAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcblx0ICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3QnVmXG5cdH1cblx0XG5cdC8qXG5cdCAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcblx0ICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcblx0ICB9XG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHQgIH1cblx0XG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gdGhpc1tvZmZzZXRdXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuXHQgICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG5cdCAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuXHQgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuXHQgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG5cdCAgICB0aGlzW29mZnNldCArIDNdKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcblx0ICB9XG5cdCAgbXVsICo9IDB4ODBcblx0XG5cdCAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGhcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cblx0ICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcblx0ICB9XG5cdCAgbXVsICo9IDB4ODBcblx0XG5cdCAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuXHQgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcblx0ICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcblx0ICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG5cdCAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDNdKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG5cdCAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuXHQgIH1cblx0XG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG5cdCAgdmFyIG11bCA9IDFcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG5cdCAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cdFxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IDBcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSAwXG5cdCAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG5cdCAgICAgIHN1YiA9IDFcblx0ICAgIH1cblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXHRcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuXHQgIH1cblx0XG5cdCAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIHN1YiA9IDBcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuXHQgICAgICBzdWIgPSAxXG5cdCAgICB9XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG5cdCAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcblx0ICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuXHQgIH1cblx0ICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcblx0ICB9XG5cdCAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG5cdCAgcmV0dXJuIG9mZnNldCArIDhcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcblx0fVxuXHRcblx0Ly8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuXHRCdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG5cdCAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG5cdCAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuXHQgIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcblx0ICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcblx0ICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblx0XG5cdCAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG5cdCAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG5cdCAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cdFxuXHQgIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcblx0ICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG5cdCAgfVxuXHQgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcblx0ICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblx0XG5cdCAgLy8gQXJlIHdlIG9vYj9cblx0ICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG5cdCAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuXHQgIH1cblx0XG5cdCAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG5cdCAgdmFyIGlcblx0XG5cdCAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG5cdCAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcblx0ICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuXHQgICAgICB0YXJnZXQsXG5cdCAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcblx0ICAgICAgdGFyZ2V0U3RhcnRcblx0ICAgIClcblx0ICB9XG5cdFxuXHQgIHJldHVybiBsZW5cblx0fVxuXHRcblx0Ly8gVXNhZ2U6XG5cdC8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuXHQvLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcblx0Ly8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5cdEJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcblx0ICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuXHQgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgZW5jb2RpbmcgPSBzdGFydFxuXHQgICAgICBzdGFydCA9IDBcblx0ICAgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgZW5jb2RpbmcgPSBlbmRcblx0ICAgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICAgIH1cblx0ICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcblx0ICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcblx0ICAgICAgICB2YWwgPSBjb2RlXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICB2YWwgPSB2YWwgJiAyNTVcblx0ICB9XG5cdFxuXHQgIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuXHQgIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuXHQgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblx0XG5cdCAgaWYgKCF2YWwpIHZhbCA9IDBcblx0XG5cdCAgdmFyIGlcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcblx0ICAgICAgdGhpc1tpXSA9IHZhbFxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuXHQgICAgICA/IHZhbFxuXHQgICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcblx0ICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG5cdCAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHQvLyBIRUxQRVIgRlVOQ1RJT05TXG5cdC8vID09PT09PT09PT09PT09PT1cblx0XG5cdHZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXHRcblx0ZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuXHQgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuXHQgIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcblx0ICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG5cdCAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcblx0ICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3Rcblx0ICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcblx0ICAgIHN0ciA9IHN0ciArICc9J1xuXHQgIH1cblx0ICByZXR1cm4gc3RyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuXHQgIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b0hleCAobikge1xuXHQgIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuXHQgIHJldHVybiBuLnRvU3RyaW5nKDE2KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuXHQgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcblx0ICB2YXIgY29kZVBvaW50XG5cdCAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcblx0ICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblx0ICB2YXIgYnl0ZXMgPSBbXVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG5cdCAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXHRcblx0ICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcblx0ICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG5cdCAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAgIC8vIG5vIGxlYWQgeWV0XG5cdCAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuXHQgICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdmFsaWQgbGVhZFxuXHQgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblx0XG5cdCAgICAgICAgY29udGludWVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuXHQgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG5cdCAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXHQgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG5cdCAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcblx0ICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgfVxuXHRcblx0ICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cdFxuXHQgICAgLy8gZW5jb2RlIHV0Zjhcblx0ICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG5cdCAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcblx0ICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuXHQgICAgICApXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuXHQgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50Jylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBieXRlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuXHQgIHZhciBieXRlQXJyYXkgPSBbXVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG5cdCAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cblx0ICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcblx0ICB9XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuXHQgIHZhciBjLCBoaSwgbG9cblx0ICB2YXIgYnl0ZUFycmF5ID0gW11cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuXHQgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdFxuXHQgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG5cdCAgICBoaSA9IGMgPj4gOFxuXHQgICAgbG8gPSBjICUgMjU2XG5cdCAgICBieXRlQXJyYXkucHVzaChsbylcblx0ICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcblx0ICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0ICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcblx0ICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuXHQgIH1cblx0ICByZXR1cm4gaVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc25hbiAodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KS5CdWZmZXIsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0J1xuXHRcblx0ZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXHRcblx0dmFyIGxvb2t1cCA9IFtdXG5cdHZhciByZXZMb29rdXAgPSBbXVxuXHR2YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cdFxuXHR2YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuXHRmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuXHQgIGxvb2t1cFtpXSA9IGNvZGVbaV1cblx0ICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcblx0fVxuXHRcblx0cmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5cdHJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2M1xuXHRcblx0ZnVuY3Rpb24gcGxhY2VIb2xkZXJzQ291bnQgKGI2NCkge1xuXHQgIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdCAgaWYgKGxlbiAlIDQgPiAwKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuXHQgIH1cblx0XG5cdCAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0ICAvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG5cdCAgLy8gcmVwcmVzZW50IG9uZSBieXRlXG5cdCAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdCAgLy8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuXHQgIHJldHVybiBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuXHQgIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHQgIHJldHVybiBiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcblx0ICB2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuXHQgIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdCAgcGxhY2VIb2xkZXJzID0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxuXHRcblx0ICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXHRcblx0ICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG5cdCAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuXG5cdFxuXHQgIHZhciBMID0gMFxuXHRcblx0ICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG5cdCAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cblx0ICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG5cdCAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG5cdCAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0ICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG5cdCAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcblx0ICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuXHQgICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG5cdCAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG5cdCAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBhcnJcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcblx0ICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIHRtcFxuXHQgIHZhciBvdXRwdXQgPSBbXVxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG5cdCAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG5cdCAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcblx0ICB9XG5cdCAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuXHQgIHZhciB0bXBcblx0ICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG5cdCAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdCAgdmFyIG91dHB1dCA9ICcnXG5cdCAgdmFyIHBhcnRzID0gW11cblx0ICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblx0XG5cdCAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcblx0ICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpXG5cdCAgfVxuXHRcblx0ICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG5cdCAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcblx0ICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXVxuXHQgICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl1cblx0ICAgIG91dHB1dCArPSAnPT0nXG5cdCAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG5cdCAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF1cblx0ICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXVxuXHQgICAgb3V0cHV0ICs9ICc9J1xuXHQgIH1cblx0XG5cdCAgcGFydHMucHVzaChvdXRwdXQpXG5cdFxuXHQgIHJldHVybiBwYXJ0cy5qb2luKCcnKVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtXG5cdCAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcblx0ICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuXHQgIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuXHQgIHZhciBuQml0cyA9IC03XG5cdCAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuXHQgIHZhciBkID0gaXNMRSA/IC0xIDogMVxuXHQgIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cdFxuXHQgIGkgKz0gZFxuXHRcblx0ICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuXHQgIHMgPj49ICgtbkJpdHMpXG5cdCAgbkJpdHMgKz0gZUxlblxuXHQgIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cdFxuXHQgIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgZSA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBtTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblx0XG5cdCAgaWYgKGUgPT09IDApIHtcblx0ICAgIGUgPSAxIC0gZUJpYXNcblx0ICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcblx0ICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICBlID0gZSAtIGVCaWFzXG5cdCAgfVxuXHQgIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG5cdH1cblx0XG5cdGV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcblx0ICB2YXIgZSwgbSwgY1xuXHQgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG5cdCAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcblx0ICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcblx0ICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG5cdCAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuXHQgIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuXHQgIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cdFxuXHQgIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cdFxuXHQgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG5cdCAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcblx0ICAgIGUgPSBlTWF4XG5cdCAgfSBlbHNlIHtcblx0ICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuXHQgICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuXHQgICAgICBlLS1cblx0ICAgICAgYyAqPSAyXG5cdCAgICB9XG5cdCAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcblx0ICAgICAgdmFsdWUgKz0gcnQgLyBjXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcblx0ICAgIH1cblx0ICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuXHQgICAgICBlKytcblx0ICAgICAgYyAvPSAyXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG5cdCAgICAgIG0gPSAwXG5cdCAgICAgIGUgPSBlTWF4XG5cdCAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG5cdCAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuXHQgICAgICBlID0gZSArIGVCaWFzXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcblx0ICAgICAgZSA9IDBcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cdFxuXHQgIGUgPSAoZSA8PCBtTGVuKSB8IG1cblx0ICBlTGVuICs9IG1MZW5cblx0ICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cdFxuXHQgIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9ICgpKVxuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdFxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gY29tcGFyZSBhbmQgaXNCdWZmZXIgdGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9ibG9iLzY4MGU5ZTVlNDg4ZjIyYWFjMjc1OTlhNTdkYzg0NGE2MzE1OTI4ZGQvaW5kZXguanNcblx0Ly8gb3JpZ2luYWwgbm90aWNlOlxuXHRcblx0LyohXG5cdCAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuXHQgKlxuXHQgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cblx0ICogQGxpY2Vuc2UgIE1JVFxuXHQgKi9cblx0ZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7XG5cdCAgaWYgKGEgPT09IGIpIHtcblx0ICAgIHJldHVybiAwO1xuXHQgIH1cblx0XG5cdCAgdmFyIHggPSBhLmxlbmd0aDtcblx0ICB2YXIgeSA9IGIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuXHQgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcblx0ICAgICAgeCA9IGFbaV07XG5cdCAgICAgIHkgPSBiW2ldO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh4IDwgeSkge1xuXHQgICAgcmV0dXJuIC0xO1xuXHQgIH1cblx0ICBpZiAoeSA8IHgpIHtcblx0ICAgIHJldHVybiAxO1xuXHQgIH1cblx0ICByZXR1cm4gMDtcblx0fVxuXHRmdW5jdGlvbiBpc0J1ZmZlcihiKSB7XG5cdCAgaWYgKGdsb2JhbC5CdWZmZXIgJiYgdHlwZW9mIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyKGIpO1xuXHQgIH1cblx0ICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKTtcblx0fVxuXHRcblx0Ly8gYmFzZWQgb24gbm9kZSBhc3NlcnQsIG9yaWdpbmFsIG5vdGljZTpcblx0XG5cdC8vIGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1VuaXRfVGVzdGluZy8xLjBcblx0Ly9cblx0Ly8gVEhJUyBJUyBOT1QgVEVTVEVEIE5PUiBMSUtFTFkgVE8gV09SSyBPVVRTSURFIFY4IVxuXHQvL1xuXHQvLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpXG5cdC8vIENvcHlyaWdodCAoYykgMjAwOSBUaG9tYXMgUm9iaW5zb24gPDI4MG5vcnRoLmNvbT5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuXHQvLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG9cblx0Ly8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGVcblx0Ly8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG5cdC8vIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5cdC8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5cdC8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuXHQvLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcblx0Ly8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5cdC8vIEFVVEhPUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOXG5cdC8vIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cblx0Ly8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0dmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblx0dmFyIGZ1bmN0aW9uc0hhdmVOYW1lcyA9IChmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGZvbygpIHt9Lm5hbWUgPT09ICdmb28nO1xuXHR9KCkpO1xuXHRmdW5jdGlvbiBwVG9TdHJpbmcgKG9iaikge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTtcblx0fVxuXHRmdW5jdGlvbiBpc1ZpZXcoYXJyYnVmKSB7XG5cdCAgaWYgKGlzQnVmZmVyKGFycmJ1ZikpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBnbG9iYWwuQXJyYXlCdWZmZXIgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoYXJyYnVmKTtcblx0ICB9XG5cdCAgaWYgKCFhcnJidWYpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgaWYgKGFycmJ1ZiBpbnN0YW5jZW9mIERhdGFWaWV3KSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKGFycmJ1Zi5idWZmZXIgJiYgYXJyYnVmLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIDEuIFRoZSBhc3NlcnQgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9ucyB0aGF0IHRocm93XG5cdC8vIEFzc2VydGlvbkVycm9yJ3Mgd2hlbiBwYXJ0aWN1bGFyIGNvbmRpdGlvbnMgYXJlIG5vdCBtZXQuIFRoZVxuXHQvLyBhc3NlcnQgbW9kdWxlIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIGludGVyZmFjZS5cblx0XG5cdHZhciBhc3NlcnQgPSBtb2R1bGUuZXhwb3J0cyA9IG9rO1xuXHRcblx0Ly8gMi4gVGhlIEFzc2VydGlvbkVycm9yIGlzIGRlZmluZWQgaW4gYXNzZXJ0LlxuXHQvLyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHsgbWVzc2FnZTogbWVzc2FnZSxcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogYWN0dWFsLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkIH0pXG5cdFxuXHR2YXIgcmVnZXggPSAvXFxzKmZ1bmN0aW9uXFxzKyhbXlxcKFxcc10qKVxccyovO1xuXHQvLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL2Z1bmN0aW9uLnByb3RvdHlwZS5uYW1lL2Jsb2IvYWRlZWVlYzhiZmNjNjA2OGIxODdkN2Q5ZmIzZDViYjFkM2EzMDg5OS9pbXBsZW1lbnRhdGlvbi5qc1xuXHRmdW5jdGlvbiBnZXROYW1lKGZ1bmMpIHtcblx0ICBpZiAoIXV0aWwuaXNGdW5jdGlvbihmdW5jKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzKSB7XG5cdCAgICByZXR1cm4gZnVuYy5uYW1lO1xuXHQgIH1cblx0ICB2YXIgc3RyID0gZnVuYy50b1N0cmluZygpO1xuXHQgIHZhciBtYXRjaCA9IHN0ci5tYXRjaChyZWdleCk7XG5cdCAgcmV0dXJuIG1hdGNoICYmIG1hdGNoWzFdO1xuXHR9XG5cdGFzc2VydC5Bc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKG9wdGlvbnMpIHtcblx0ICB0aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InO1xuXHQgIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7XG5cdCAgdGhpcy5leHBlY3RlZCA9IG9wdGlvbnMuZXhwZWN0ZWQ7XG5cdCAgdGhpcy5vcGVyYXRvciA9IG9wdGlvbnMub3BlcmF0b3I7XG5cdCAgaWYgKG9wdGlvbnMubWVzc2FnZSkge1xuXHQgICAgdGhpcy5tZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuXHQgICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gZmFsc2U7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMubWVzc2FnZSA9IGdldE1lc3NhZ2UodGhpcyk7XG5cdCAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSB0cnVlO1xuXHQgIH1cblx0ICB2YXIgc3RhY2tTdGFydEZ1bmN0aW9uID0gb3B0aW9ucy5zdGFja1N0YXJ0RnVuY3Rpb24gfHwgZmFpbDtcblx0ICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcblx0ICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHN0YWNrU3RhcnRGdW5jdGlvbik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIG5vbiB2OCBicm93c2VycyBzbyB3ZSBjYW4gaGF2ZSBhIHN0YWNrdHJhY2Vcblx0ICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTtcblx0ICAgIGlmIChlcnIuc3RhY2spIHtcblx0ICAgICAgdmFyIG91dCA9IGVyci5zdGFjaztcblx0XG5cdCAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lc1xuXHQgICAgICB2YXIgZm5fbmFtZSA9IGdldE5hbWUoc3RhY2tTdGFydEZ1bmN0aW9uKTtcblx0ICAgICAgdmFyIGlkeCA9IG91dC5pbmRleE9mKCdcXG4nICsgZm5fbmFtZSk7XG5cdCAgICAgIGlmIChpZHggPj0gMCkge1xuXHQgICAgICAgIC8vIG9uY2Ugd2UgaGF2ZSBsb2NhdGVkIHRoZSBmdW5jdGlvbiBmcmFtZVxuXHQgICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpXG5cdCAgICAgICAgdmFyIG5leHRfbGluZSA9IG91dC5pbmRleE9mKCdcXG4nLCBpZHggKyAxKTtcblx0ICAgICAgICBvdXQgPSBvdXQuc3Vic3RyaW5nKG5leHRfbGluZSArIDEpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnN0YWNrID0gb3V0O1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8vIGFzc2VydC5Bc3NlcnRpb25FcnJvciBpbnN0YW5jZW9mIEVycm9yXG5cdHV0aWwuaW5oZXJpdHMoYXNzZXJ0LkFzc2VydGlvbkVycm9yLCBFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiB0cnVuY2F0ZShzLCBuKSB7XG5cdCAgaWYgKHR5cGVvZiBzID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHMubGVuZ3RoIDwgbiA/IHMgOiBzLnNsaWNlKDAsIG4pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gcztcblx0ICB9XG5cdH1cblx0ZnVuY3Rpb24gaW5zcGVjdChzb21ldGhpbmcpIHtcblx0ICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzIHx8ICF1dGlsLmlzRnVuY3Rpb24oc29tZXRoaW5nKSkge1xuXHQgICAgcmV0dXJuIHV0aWwuaW5zcGVjdChzb21ldGhpbmcpO1xuXHQgIH1cblx0ICB2YXIgcmF3bmFtZSA9IGdldE5hbWUoc29tZXRoaW5nKTtcblx0ICB2YXIgbmFtZSA9IHJhd25hbWUgPyAnOiAnICsgcmF3bmFtZSA6ICcnO1xuXHQgIHJldHVybiAnW0Z1bmN0aW9uJyArICBuYW1lICsgJ10nO1xuXHR9XG5cdGZ1bmN0aW9uIGdldE1lc3NhZ2Uoc2VsZikge1xuXHQgIHJldHVybiB0cnVuY2F0ZShpbnNwZWN0KHNlbGYuYWN0dWFsKSwgMTI4KSArICcgJyArXG5cdCAgICAgICAgIHNlbGYub3BlcmF0b3IgKyAnICcgK1xuXHQgICAgICAgICB0cnVuY2F0ZShpbnNwZWN0KHNlbGYuZXhwZWN0ZWQpLCAxMjgpO1xuXHR9XG5cdFxuXHQvLyBBdCBwcmVzZW50IG9ubHkgdGhlIHRocmVlIGtleXMgbWVudGlvbmVkIGFib3ZlIGFyZSB1c2VkIGFuZFxuXHQvLyB1bmRlcnN0b29kIGJ5IHRoZSBzcGVjLiBJbXBsZW1lbnRhdGlvbnMgb3Igc3ViIG1vZHVsZXMgY2FuIHBhc3Ncblx0Ly8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZVxuXHQvLyBpZ25vcmVkLlxuXHRcblx0Ly8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3Jcblx0Ly8gd2hlbiBhIGNvcnJlc3BvbmRpbmcgY29uZGl0aW9uIGlzIG5vdCBtZXQsIHdpdGggYSBtZXNzYWdlIHRoYXRcblx0Ly8gbWF5IGJlIHVuZGVmaW5lZCBpZiBub3QgcHJvdmlkZWQuICBBbGwgYXNzZXJ0aW9uIG1ldGhvZHMgcHJvdmlkZVxuXHQvLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvclxuXHQvLyBkaXNwbGF5IHB1cnBvc2VzLlxuXHRcblx0ZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7XG5cdCAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7XG5cdCAgICBtZXNzYWdlOiBtZXNzYWdlLFxuXHQgICAgYWN0dWFsOiBhY3R1YWwsXG5cdCAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG5cdCAgICBvcGVyYXRvcjogb3BlcmF0b3IsXG5cdCAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvblxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvLyBFWFRFTlNJT04hIGFsbG93cyBmb3Igd2VsbCBiZWhhdmVkIGVycm9ycyBkZWZpbmVkIGVsc2V3aGVyZS5cblx0YXNzZXJ0LmZhaWwgPSBmYWlsO1xuXHRcblx0Ly8gNC4gUHVyZSBhc3NlcnRpb24gdGVzdHMgd2hldGhlciBhIHZhbHVlIGlzIHRydXRoeSwgYXMgZGV0ZXJtaW5lZFxuXHQvLyBieSAhIWd1YXJkLlxuXHQvLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTtcblx0Ly8gVGhpcyBzdGF0ZW1lbnQgaXMgZXF1aXZhbGVudCB0byBhc3NlcnQuZXF1YWwodHJ1ZSwgISFndWFyZCxcblx0Ly8gbWVzc2FnZV9vcHQpOy4gVG8gdGVzdCBzdHJpY3RseSBmb3IgdGhlIHZhbHVlIHRydWUsIHVzZVxuXHQvLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuXG5cdFxuXHRmdW5jdGlvbiBvayh2YWx1ZSwgbWVzc2FnZSkge1xuXHQgIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7XG5cdH1cblx0YXNzZXJ0Lm9rID0gb2s7XG5cdFxuXHQvLyA1LiBUaGUgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHNoYWxsb3csIGNvZXJjaXZlIGVxdWFsaXR5IHdpdGhcblx0Ly8gPT0uXG5cdC8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpO1xuXHR9O1xuXHRcblx0Ly8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbFxuXHQvLyB3aXRoICE9IGFzc2VydC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKGFjdHVhbCA9PSBleHBlY3RlZCkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT0nLCBhc3NlcnQubm90RXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLlxuXHQvLyBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBmYWxzZSkpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ2RlZXBFcXVhbCcsIGFzc2VydC5kZWVwRXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdGFzc2VydC5kZWVwU3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBkZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcFN0cmljdEVxdWFsJywgYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKSB7XG5cdCAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG5cdCAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAmJiBpc0J1ZmZlcihleHBlY3RlZCkpIHtcblx0ICAgIHJldHVybiBjb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQpID09PSAwO1xuXHRcblx0ICAvLyA3LjIuIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIERhdGUgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG5cdCAgLy8gZXF1aXZhbGVudCBpZiBpdCBpcyBhbHNvIGEgRGF0ZSBvYmplY3QgdGhhdCByZWZlcnMgdG8gdGhlIHNhbWUgdGltZS5cblx0ICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7XG5cdCAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpO1xuXHRcblx0ICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuXHQgIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIFJlZ0V4cCBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzb3VyY2UgYW5kXG5cdCAgLy8gcHJvcGVydGllcyAoYGdsb2JhbGAsIGBtdWx0aWxpbmVgLCBgbGFzdEluZGV4YCwgYGlnbm9yZUNhc2VgKS5cblx0ICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkge1xuXHQgICAgcmV0dXJuIGFjdHVhbC5zb3VyY2UgPT09IGV4cGVjdGVkLnNvdXJjZSAmJlxuXHQgICAgICAgICAgIGFjdHVhbC5nbG9iYWwgPT09IGV4cGVjdGVkLmdsb2JhbCAmJlxuXHQgICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJlxuXHQgICAgICAgICAgIGFjdHVhbC5sYXN0SW5kZXggPT09IGV4cGVjdGVkLmxhc3RJbmRleCAmJlxuXHQgICAgICAgICAgIGFjdHVhbC5pZ25vcmVDYXNlID09PSBleHBlY3RlZC5pZ25vcmVDYXNlO1xuXHRcblx0ICAvLyA3LjQuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsXG5cdCAgLy8gZXF1aXZhbGVuY2UgaXMgZGV0ZXJtaW5lZCBieSA9PS5cblx0ICB9IGVsc2UgaWYgKChhY3R1YWwgPT09IG51bGwgfHwgdHlwZW9mIGFjdHVhbCAhPT0gJ29iamVjdCcpICYmXG5cdCAgICAgICAgICAgICAoZXhwZWN0ZWQgPT09IG51bGwgfHwgdHlwZW9mIGV4cGVjdGVkICE9PSAnb2JqZWN0JykpIHtcblx0ICAgIHJldHVybiBzdHJpY3QgPyBhY3R1YWwgPT09IGV4cGVjdGVkIDogYWN0dWFsID09IGV4cGVjdGVkO1xuXHRcblx0ICAvLyBJZiBib3RoIHZhbHVlcyBhcmUgaW5zdGFuY2VzIG9mIHR5cGVkIGFycmF5cywgd3JhcCB0aGVpciB1bmRlcmx5aW5nXG5cdCAgLy8gQXJyYXlCdWZmZXJzIGluIGEgQnVmZmVyIGVhY2ggdG8gaW5jcmVhc2UgcGVyZm9ybWFuY2Vcblx0ICAvLyBUaGlzIG9wdGltaXphdGlvbiByZXF1aXJlcyB0aGUgYXJyYXlzIHRvIGhhdmUgdGhlIHNhbWUgdHlwZSBhcyBjaGVja2VkIGJ5XG5cdCAgLy8gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyAoYWthIHBUb1N0cmluZykuIE5ldmVyIHBlcmZvcm0gYmluYXJ5XG5cdCAgLy8gY29tcGFyaXNvbnMgZm9yIEZsb2F0KkFycmF5cywgdGhvdWdoLCBzaW5jZSBlLmcuICswID09PSAtMCBidXQgdGhlaXJcblx0ICAvLyBiaXQgcGF0dGVybnMgYXJlIG5vdCBpZGVudGljYWwuXG5cdCAgfSBlbHNlIGlmIChpc1ZpZXcoYWN0dWFsKSAmJiBpc1ZpZXcoZXhwZWN0ZWQpICYmXG5cdCAgICAgICAgICAgICBwVG9TdHJpbmcoYWN0dWFsKSA9PT0gcFRvU3RyaW5nKGV4cGVjdGVkKSAmJlxuXHQgICAgICAgICAgICAgIShhY3R1YWwgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHxcblx0ICAgICAgICAgICAgICAgYWN0dWFsIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSkge1xuXHQgICAgcmV0dXJuIGNvbXBhcmUobmV3IFVpbnQ4QXJyYXkoYWN0dWFsLmJ1ZmZlciksXG5cdCAgICAgICAgICAgICAgICAgICBuZXcgVWludDhBcnJheShleHBlY3RlZC5idWZmZXIpKSA9PT0gMDtcblx0XG5cdCAgLy8gNy41IEZvciBhbGwgb3RoZXIgT2JqZWN0IHBhaXJzLCBpbmNsdWRpbmcgQXJyYXkgb2JqZWN0cywgZXF1aXZhbGVuY2UgaXNcblx0ICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcblx0ICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzXG5cdCAgLy8gKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeVxuXHQgIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG5cdCAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuXG5cdCAgfSBlbHNlIGlmIChpc0J1ZmZlcihhY3R1YWwpICE9PSBpc0J1ZmZlcihleHBlY3RlZCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgbWVtb3MgPSBtZW1vcyB8fCB7YWN0dWFsOiBbXSwgZXhwZWN0ZWQ6IFtdfTtcblx0XG5cdCAgICB2YXIgYWN0dWFsSW5kZXggPSBtZW1vcy5hY3R1YWwuaW5kZXhPZihhY3R1YWwpO1xuXHQgICAgaWYgKGFjdHVhbEluZGV4ICE9PSAtMSkge1xuXHQgICAgICBpZiAoYWN0dWFsSW5kZXggPT09IG1lbW9zLmV4cGVjdGVkLmluZGV4T2YoZXhwZWN0ZWQpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBtZW1vcy5hY3R1YWwucHVzaChhY3R1YWwpO1xuXHQgICAgbWVtb3MuZXhwZWN0ZWQucHVzaChleHBlY3RlZCk7XG5cdFxuXHQgICAgcmV0dXJuIG9iakVxdWl2KGFjdHVhbCwgZXhwZWN0ZWQsIHN0cmljdCwgbWVtb3MpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNBcmd1bWVudHMob2JqZWN0KSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmpFcXVpdihhLCBiLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSB7XG5cdCAgaWYgKGEgPT09IG51bGwgfHwgYSA9PT0gdW5kZWZpbmVkIHx8IGIgPT09IG51bGwgfHwgYiA9PT0gdW5kZWZpbmVkKVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIC8vIGlmIG9uZSBpcyBhIHByaW1pdGl2ZSwgdGhlIG90aGVyIG11c3QgYmUgc2FtZVxuXHQgIGlmICh1dGlsLmlzUHJpbWl0aXZlKGEpIHx8IHV0aWwuaXNQcmltaXRpdmUoYikpXG5cdCAgICByZXR1cm4gYSA9PT0gYjtcblx0ICBpZiAoc3RyaWN0ICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSAhPT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIHZhciBhSXNBcmdzID0gaXNBcmd1bWVudHMoYSk7XG5cdCAgdmFyIGJJc0FyZ3MgPSBpc0FyZ3VtZW50cyhiKTtcblx0ICBpZiAoKGFJc0FyZ3MgJiYgIWJJc0FyZ3MpIHx8ICghYUlzQXJncyAmJiBiSXNBcmdzKSlcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICBpZiAoYUlzQXJncykge1xuXHQgICAgYSA9IHBTbGljZS5jYWxsKGEpO1xuXHQgICAgYiA9IHBTbGljZS5jYWxsKGIpO1xuXHQgICAgcmV0dXJuIF9kZWVwRXF1YWwoYSwgYiwgc3RyaWN0KTtcblx0ICB9XG5cdCAgdmFyIGthID0gb2JqZWN0S2V5cyhhKTtcblx0ICB2YXIga2IgPSBvYmplY3RLZXlzKGIpO1xuXHQgIHZhciBrZXksIGk7XG5cdCAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlc1xuXHQgIC8vIGhhc093blByb3BlcnR5KVxuXHQgIGlmIChrYS5sZW5ndGggIT09IGtiLmxlbmd0aClcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICAvL3RoZSBzYW1lIHNldCBvZiBrZXlzIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLFxuXHQgIGthLnNvcnQoKTtcblx0ICBrYi5zb3J0KCk7XG5cdCAgLy9+fn5jaGVhcCBrZXkgdGVzdFxuXHQgIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBpZiAoa2FbaV0gIT09IGtiW2ldKVxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcblx0ICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3Rcblx0ICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAga2V5ID0ga2FbaV07XG5cdCAgICBpZiAoIV9kZWVwRXF1YWwoYVtrZXldLCBiW2tleV0sIHN0cmljdCwgYWN0dWFsVmlzaXRlZE9iamVjdHMpKVxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHQvLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS5cblx0Ly8gYXNzZXJ0Lm5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBmYWxzZSkpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdGFzc2VydC5ub3REZWVwU3RyaWN0RXF1YWwgPSBub3REZWVwU3RyaWN0RXF1YWw7XG5cdGZ1bmN0aW9uIG5vdERlZXBTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBTdHJpY3RFcXVhbCcsIG5vdERlZXBTdHJpY3RFcXVhbCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRcblx0Ly8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cblx0Ly8gYXNzZXJ0LnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT09JywgYXNzZXJ0LnN0cmljdEVxdWFsKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXNcblx0Ly8gZGV0ZXJtaW5lZCBieSAhPT0uICBhc3NlcnQubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG5cdCAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPT0nLCBhc3NlcnQubm90U3RyaWN0RXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcblx0ICBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXhwZWN0ZWQpID09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7XG5cdCAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpO1xuXHQgIH1cblx0XG5cdCAgdHJ5IHtcblx0ICAgIGlmIChhY3R1YWwgaW5zdGFuY2VvZiBleHBlY3RlZCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICAvLyBJZ25vcmUuICBUaGUgaW5zdGFuY2VvZiBjaGVjayBkb2Vzbid0IHdvcmsgZm9yIGFycm93IGZ1bmN0aW9ucy5cblx0ICB9XG5cdFxuXHQgIGlmIChFcnJvci5pc1Byb3RvdHlwZU9mKGV4cGVjdGVkKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGV4cGVjdGVkLmNhbGwoe30sIGFjdHVhbCkgPT09IHRydWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF90cnlCbG9jayhibG9jaykge1xuXHQgIHZhciBlcnJvcjtcblx0ICB0cnkge1xuXHQgICAgYmxvY2soKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBlcnJvciA9IGU7XG5cdCAgfVxuXHQgIHJldHVybiBlcnJvcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Rocm93cyhzaG91bGRUaHJvdywgYmxvY2ssIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgdmFyIGFjdHVhbDtcblx0XG5cdCAgaWYgKHR5cGVvZiBibG9jayAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJibG9ja1wiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBleHBlY3RlZCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIG1lc3NhZ2UgPSBleHBlY3RlZDtcblx0ICAgIGV4cGVjdGVkID0gbnVsbDtcblx0ICB9XG5cdFxuXHQgIGFjdHVhbCA9IF90cnlCbG9jayhibG9jayk7XG5cdFxuXHQgIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgK1xuXHQgICAgICAgICAgICAobWVzc2FnZSA/ICcgJyArIG1lc3NhZ2UgOiAnLicpO1xuXHRcblx0ICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG5cdCAgfVxuXHRcblx0ICB2YXIgdXNlclByb3ZpZGVkTWVzc2FnZSA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJztcblx0ICB2YXIgaXNVbndhbnRlZEV4Y2VwdGlvbiA9ICFzaG91bGRUaHJvdyAmJiB1dGlsLmlzRXJyb3IoYWN0dWFsKTtcblx0ICB2YXIgaXNVbmV4cGVjdGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIGFjdHVhbCAmJiAhZXhwZWN0ZWQ7XG5cdFxuXHQgIGlmICgoaXNVbndhbnRlZEV4Y2VwdGlvbiAmJlxuXHQgICAgICB1c2VyUHJvdmlkZWRNZXNzYWdlICYmXG5cdCAgICAgIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fFxuXHQgICAgICBpc1VuZXhwZWN0ZWRFeGNlcHRpb24pIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ0dvdCB1bndhbnRlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoKHNob3VsZFRocm93ICYmIGFjdHVhbCAmJiBleHBlY3RlZCAmJlxuXHQgICAgICAhZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkpIHx8ICghc2hvdWxkVGhyb3cgJiYgYWN0dWFsKSkge1xuXHQgICAgdGhyb3cgYWN0dWFsO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gMTEuIEV4cGVjdGVkIHRvIHRocm93IGFuIGVycm9yOlxuXHQvLyBhc3NlcnQudGhyb3dzKGJsb2NrLCBFcnJvcl9vcHQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC50aHJvd3MgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcblx0ICBfdGhyb3dzKHRydWUsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG5cdH07XG5cdFxuXHQvLyBFWFRFTlNJT04hIFRoaXMgaXMgYW5ub3lpbmcgdG8gd3JpdGUgb3V0c2lkZSB0aGlzIG1vZHVsZS5cblx0YXNzZXJ0LmRvZXNOb3RUaHJvdyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuXHQgIF90aHJvd3MoZmFsc2UsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG5cdH07XG5cdFxuXHRhc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB0aHJvdyBlcnI7IH07XG5cdFxuXHR2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcblx0ICB2YXIga2V5cyA9IFtdO1xuXHQgIGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0ICAgIGlmIChoYXNPd24uY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuXHQgIH1cblx0ICByZXR1cm4ga2V5cztcblx0fTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdHZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZGolXS9nO1xuXHRleHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcblx0ICBpZiAoIWlzU3RyaW5nKGYpKSB7XG5cdCAgICB2YXIgb2JqZWN0cyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IDE7XG5cdCAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuXHQgIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcblx0ICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuXHQgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4geDtcblx0ICAgIHN3aXRjaCAoeCkge1xuXHQgICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcblx0ICAgICAgY2FzZSAnJWQnOiByZXR1cm4gTnVtYmVyKGFyZ3NbaSsrXSk7XG5cdCAgICAgIGNhc2UgJyVqJzpcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSk7XG5cdCAgICAgICAgfSBjYXRjaCAoXykge1xuXHQgICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcblx0ICAgICAgICB9XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgcmV0dXJuIHg7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcblx0ICAgIGlmIChpc051bGwoeCkgfHwgIWlzT2JqZWN0KHgpKSB7XG5cdCAgICAgIHN0ciArPSAnICcgKyB4O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3RyICs9ICcgJyArIGluc3BlY3QoeCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzdHI7XG5cdH07XG5cdFxuXHRcblx0Ly8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cblx0Ly8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cblx0Ly8gSWYgLS1uby1kZXByZWNhdGlvbiBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cblx0ZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG5cdCAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cblx0ICBpZiAoaXNVbmRlZmluZWQoZ2xvYmFsLnByb2Nlc3MpKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGlmIChwcm9jZXNzLm5vRGVwcmVjYXRpb24gPT09IHRydWUpIHtcblx0ICAgIHJldHVybiBmbjtcblx0ICB9XG5cdFxuXHQgIHZhciB3YXJuZWQgPSBmYWxzZTtcblx0ICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuXHQgICAgaWYgKCF3YXJuZWQpIHtcblx0ICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MudHJhY2VEZXByZWNhdGlvbikge1xuXHQgICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XG5cdCAgICAgIH1cblx0ICAgICAgd2FybmVkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG5cdH07XG5cdFxuXHRcblx0dmFyIGRlYnVncyA9IHt9O1xuXHR2YXIgZGVidWdFbnZpcm9uO1xuXHRleHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG5cdCAgICBkZWJ1Z0Vudmlyb24gPSBwcm9jZXNzLmVudi5OT0RFX0RFQlVHIHx8ICcnO1xuXHQgIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuXHQgIGlmICghZGVidWdzW3NldF0pIHtcblx0ICAgIGlmIChuZXcgUmVnRXhwKCdcXFxcYicgKyBzZXQgKyAnXFxcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkge1xuXHQgICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG5cdCAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBkZWJ1Z3Nbc2V0XTtcblx0fTtcblx0XG5cdFxuXHQvKipcblx0ICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dFxuXHQgKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cblx0ICovXG5cdC8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi9cblx0ZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcblx0ICAvLyBkZWZhdWx0IG9wdGlvbnNcblx0ICB2YXIgY3R4ID0ge1xuXHQgICAgc2VlbjogW10sXG5cdCAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuXHQgIH07XG5cdCAgLy8gbGVnYWN5Li4uXG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG5cdCAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuXHQgICAgLy8gbGVnYWN5Li4uXG5cdCAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG5cdCAgfSBlbHNlIGlmIChvcHRzKSB7XG5cdCAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG5cdCAgICBleHBvcnRzLl9leHRlbmQoY3R4LCBvcHRzKTtcblx0ICB9XG5cdCAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuXHQgIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlO1xuXHQgIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG5cdCAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xuXHR9XG5cdGV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cdFxuXHRcblx0Ly8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5cdGluc3BlY3QuY29sb3JzID0ge1xuXHQgICdib2xkJyA6IFsxLCAyMl0sXG5cdCAgJ2l0YWxpYycgOiBbMywgMjNdLFxuXHQgICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcblx0ICAnaW52ZXJzZScgOiBbNywgMjddLFxuXHQgICd3aGl0ZScgOiBbMzcsIDM5XSxcblx0ICAnZ3JleScgOiBbOTAsIDM5XSxcblx0ICAnYmxhY2snIDogWzMwLCAzOV0sXG5cdCAgJ2JsdWUnIDogWzM0LCAzOV0sXG5cdCAgJ2N5YW4nIDogWzM2LCAzOV0sXG5cdCAgJ2dyZWVuJyA6IFszMiwgMzldLFxuXHQgICdtYWdlbnRhJyA6IFszNSwgMzldLFxuXHQgICdyZWQnIDogWzMxLCAzOV0sXG5cdCAgJ3llbGxvdycgOiBbMzMsIDM5XVxuXHR9O1xuXHRcblx0Ly8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlXG5cdGluc3BlY3Quc3R5bGVzID0ge1xuXHQgICdzcGVjaWFsJzogJ2N5YW4nLFxuXHQgICdudW1iZXInOiAneWVsbG93Jyxcblx0ICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuXHQgICd1bmRlZmluZWQnOiAnZ3JleScsXG5cdCAgJ251bGwnOiAnYm9sZCcsXG5cdCAgJ3N0cmluZyc6ICdncmVlbicsXG5cdCAgJ2RhdGUnOiAnbWFnZW50YScsXG5cdCAgLy8gXCJuYW1lXCI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmdcblx0ICAncmVnZXhwJzogJ3JlZCdcblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG5cdCAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtcblx0XG5cdCAgaWYgKHN0eWxlKSB7XG5cdCAgICByZXR1cm4gJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArXG5cdCAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHN0cjtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuXHQgIHJldHVybiBzdHI7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuXHQgIHZhciBoYXNoID0ge307XG5cdFxuXHQgIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcblx0ICAgIGhhc2hbdmFsXSA9IHRydWU7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBoYXNoO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG5cdCAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuXHQgIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuXHQgIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuXHQgICAgICB2YWx1ZSAmJlxuXHQgICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG5cdCAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuXHQgICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcblx0ICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG5cdCAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHtcblx0ICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcblx0ICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuXHQgICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXQ7XG5cdCAgfVxuXHRcblx0ICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuXHQgIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG5cdCAgaWYgKHByaW1pdGl2ZSkge1xuXHQgICAgcmV0dXJuIHByaW1pdGl2ZTtcblx0ICB9XG5cdFxuXHQgIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblx0XG5cdCAgaWYgKGN0eC5zaG93SGlkZGVuKSB7XG5cdCAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuXHQgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG5cdCAgaWYgKGlzRXJyb3IodmFsdWUpXG5cdCAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuXHQgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcblx0ICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXHRcblx0ICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICBhcnJheSA9IHRydWU7XG5cdCAgICBicmFjZXMgPSBbJ1snLCAnXSddO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG5cdCAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuXHQgICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuXHQgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG5cdCAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3Jcblx0ICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcblx0ICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cdFxuXHQgIHZhciBvdXRwdXQ7XG5cdCAgaWYgKGFycmF5KSB7XG5cdCAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucG9wKCk7XG5cdFxuXHQgIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuXHQgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcblx0ICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG5cdCAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG5cdCAgfVxuXHQgIGlmIChpc051bWJlcih2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuXHQgIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG5cdCAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuXHQgIGlmIChpc051bGwodmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7XG5cdCAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcblx0ICB2YXIgb3V0cHV0ID0gW107XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcblx0ICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuXHQgICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuXHQgICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvdXRwdXQucHVzaCgnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0ICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuXHQgICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuXHQgICAgICAgICAga2V5LCB0cnVlKSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIG91dHB1dDtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcblx0ICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuXHQgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTtcblx0ICBpZiAoZGVzYy5nZXQpIHtcblx0ICAgIGlmIChkZXNjLnNldCkge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmIChkZXNjLnNldCkge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7XG5cdCAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuXHQgIH1cblx0ICBpZiAoIXN0cikge1xuXHQgICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG5cdCAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuXHQgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcblx0ICAgICAgICBpZiAoYXJyYXkpIHtcblx0ICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuXHQgICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcblx0ICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcblx0ICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG5cdCAgICAgIHJldHVybiBzdHI7XG5cdCAgICB9XG5cdCAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuXHQgICAgaWYgKG5hbWUubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKSB7XG5cdCAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuXHQgICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuXHQgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcblx0ICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cInxcIiQpL2csIFwiJ1wiKTtcblx0ICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7XG5cdCAgdmFyIG51bUxpbmVzRXN0ID0gMDtcblx0ICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcblx0ICAgIG51bUxpbmVzRXN0Kys7XG5cdCAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG5cdCAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG5cdCAgfSwgMCk7XG5cdFxuXHQgIGlmIChsZW5ndGggPiA2MCkge1xuXHQgICAgcmV0dXJuIGJyYWNlc1swXSArXG5cdCAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG5cdCAgICAgICAgICAgJyAnICtcblx0ICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuXHQgICAgICAgICAgICcgJyArXG5cdCAgICAgICAgICAgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcblx0fVxuXHRcblx0XG5cdC8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuXHQvLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblx0ZnVuY3Rpb24gaXNBcnJheShhcikge1xuXHQgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTtcblx0fVxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cdFxuXHRmdW5jdGlvbiBpc051bGwoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0ZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXHRcblx0ZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xuXHR9XG5cdGV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblx0XG5cdGZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcblx0fVxuXHRleHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cdFxuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG5cdH1cblx0ZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcblx0ICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH1cblx0ZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cdFxuXHRmdW5jdGlvbiBpc0RhdGUoZCkge1xuXHQgIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdGV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXHRcblx0ZnVuY3Rpb24gaXNFcnJvcihlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG5cdCAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xuXHR9XG5cdGV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cdFxuXHRmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcblx0fVxuXHRleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cdFxuXHRleHBvcnRzLmlzQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIHBhZChuKSB7XG5cdCAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG5cdH1cblx0XG5cdFxuXHR2YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsXG5cdCAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cdFxuXHQvLyAyNiBGZWIgMTY6MTk6MzRcblx0ZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuXHQgIHZhciBkID0gbmV3IERhdGUoKTtcblx0ICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSxcblx0ICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuXHQgICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcblx0ICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpO1xuXHR9XG5cdFxuXHRcblx0Ly8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuXHRleHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuXHQgIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cykpO1xuXHR9O1xuXHRcblx0XG5cdC8qKlxuXHQgKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG5cdCAqXG5cdCAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcblx0ICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG5cdCAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlXG5cdCAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuXHQgKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuXHQgKiAgICAgcHJvdG90eXBlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS5cblx0ICovXG5cdGV4cG9ydHMuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdGV4cG9ydHMuX2V4dGVuZCA9IGZ1bmN0aW9uKG9yaWdpbiwgYWRkKSB7XG5cdCAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuXHQgIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXHRcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG5cdCAgfVxuXHQgIHJldHVybiBvcmlnaW47XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcblx0ICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG5cdCAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcblx0ICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcblx0ICAgICAgY29uc3RydWN0b3I6IHtcblx0ICAgICAgICB2YWx1ZTogY3Rvcixcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cblx0ICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcblx0ICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcblx0ICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3RyZWFtO1xuXHRcblx0dmFyIEVFID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCkuRXZlbnRFbWl0dGVyO1xuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGluaGVyaXRzKFN0cmVhbSwgRUUpO1xuXHRTdHJlYW0uUmVhZGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0U3RyZWFtLldyaXRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdFN0cmVhbS5EdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0U3RyZWFtLlRyYW5zZm9ybSA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHRTdHJlYW0uUGFzc1Rocm91Z2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0XG5cdC8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuNC54XG5cdFN0cmVhbS5TdHJlYW0gPSBTdHJlYW07XG5cdFxuXHRcblx0XG5cdC8vIG9sZC1zdHlsZSBzdHJlYW1zLiAgTm90ZSB0aGF0IHRoZSBwaXBlIG1ldGhvZCAodGhlIG9ubHkgcmVsZXZhbnRcblx0Ly8gcGFydCBvZiB0aGlzIGNsYXNzKSBpcyBvdmVycmlkZGVuIGluIHRoZSBSZWFkYWJsZSBjbGFzcy5cblx0XG5cdGZ1bmN0aW9uIFN0cmVhbSgpIHtcblx0ICBFRS5jYWxsKHRoaXMpO1xuXHR9XG5cdFxuXHRTdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7XG5cdCAgdmFyIHNvdXJjZSA9IHRoaXM7XG5cdFxuXHQgIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuXHQgICAgaWYgKGRlc3Qud3JpdGFibGUpIHtcblx0ICAgICAgaWYgKGZhbHNlID09PSBkZXN0LndyaXRlKGNodW5rKSAmJiBzb3VyY2UucGF1c2UpIHtcblx0ICAgICAgICBzb3VyY2UucGF1c2UoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgc291cmNlLm9uKCdkYXRhJywgb25kYXRhKTtcblx0XG5cdCAgZnVuY3Rpb24gb25kcmFpbigpIHtcblx0ICAgIGlmIChzb3VyY2UucmVhZGFibGUgJiYgc291cmNlLnJlc3VtZSkge1xuXHQgICAgICBzb3VyY2UucmVzdW1lKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXHRcblx0ICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuXG5cdCAgLy8gc291cmNlIGdldHMgdGhlICdlbmQnIG9yICdjbG9zZScgZXZlbnRzLiAgT25seSBkZXN0LmVuZCgpIG9uY2UuXG5cdCAgaWYgKCFkZXN0Ll9pc1N0ZGlvICYmICghb3B0aW9ucyB8fCBvcHRpb25zLmVuZCAhPT0gZmFsc2UpKSB7XG5cdCAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTtcblx0ICAgIHNvdXJjZS5vbignY2xvc2UnLCBvbmNsb3NlKTtcblx0ICB9XG5cdFxuXHQgIHZhciBkaWRPbkVuZCA9IGZhbHNlO1xuXHQgIGZ1bmN0aW9uIG9uZW5kKCkge1xuXHQgICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG5cdCAgICBkaWRPbkVuZCA9IHRydWU7XG5cdFxuXHQgICAgZGVzdC5lbmQoKTtcblx0ICB9XG5cdFxuXHRcblx0ICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuXHQgICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG5cdCAgICBkaWRPbkVuZCA9IHRydWU7XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBkZXN0LmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIGRlc3QuZGVzdHJveSgpO1xuXHQgIH1cblx0XG5cdCAgLy8gZG9uJ3QgbGVhdmUgZGFuZ2xpbmcgcGlwZXMgd2hlbiB0aGVyZSBhcmUgZXJyb3JzLlxuXHQgIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcblx0ICAgIGNsZWFudXAoKTtcblx0ICAgIGlmIChFRS5saXN0ZW5lckNvdW50KHRoaXMsICdlcnJvcicpID09PSAwKSB7XG5cdCAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7XG5cdCAgZGVzdC5vbignZXJyb3InLCBvbmVycm9yKTtcblx0XG5cdCAgLy8gcmVtb3ZlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZC5cblx0ICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuXHQgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG5cdFxuXHQgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG5cdCAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG5cdFxuXHQgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblx0XG5cdCAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApO1xuXHQgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuXHRcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG5cdCAgfVxuXHRcblx0ICBzb3VyY2Uub24oJ2VuZCcsIGNsZWFudXApO1xuXHQgIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTtcblx0XG5cdCAgZGVzdC5vbignY2xvc2UnLCBjbGVhbnVwKTtcblx0XG5cdCAgZGVzdC5lbWl0KCdwaXBlJywgc291cmNlKTtcblx0XG5cdCAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQylcblx0ICByZXR1cm4gZGVzdDtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHRmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG5cdCAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuXHQgIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG5cdH1cblx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cdFxuXHQvLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcblx0RXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXHRcblx0Ly8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG5cdC8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5cdEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cdFxuXHQvLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncblx0Ly8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuXHQgIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG5cdCAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuXHQgIHRoaXMuX21heExpc3RlbmVycyA9IG47XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMpXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0XG5cdCAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuXHQgIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG5cdCAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuXHQgICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuXHQgICAgICBlciA9IGFyZ3VtZW50c1sxXTtcblx0ICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0ICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG5cdCAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG5cdCAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcblx0ICAgICAgICB0aHJvdyBlcnI7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcblx0ICAgIHJldHVybiBmYWxzZTtcblx0XG5cdCAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcblx0ICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuXHQgICAgICAvLyBmYXN0IGNhc2VzXG5cdCAgICAgIGNhc2UgMTpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgMjpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAzOlxuXHQgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIC8vIHNsb3dlclxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuXHQgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdCAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG5cdCAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuXHQgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIHZhciBtO1xuXHRcblx0ICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMpXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0XG5cdCAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcblx0ICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG5cdCAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcblx0ICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuXHQgICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cblx0ICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cblx0ICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuXHQgIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG5cdCAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG5cdCAgZWxzZVxuXHQgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cdFxuXHQgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG5cdCAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcblx0ICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuXHQgICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG5cdCAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuXHQgICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcblx0ICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcblx0ICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcblx0ICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuXHQgICAgICAgIGNvbnNvbGUudHJhY2UoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFxuXHQgIHZhciBmaXJlZCA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiBnKCkge1xuXHQgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblx0XG5cdCAgICBpZiAoIWZpcmVkKSB7XG5cdCAgICAgIGZpcmVkID0gdHJ1ZTtcblx0ICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcblx0ICB0aGlzLm9uKHR5cGUsIGcpO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdC8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXHRcblx0ICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHQgIHBvc2l0aW9uID0gLTE7XG5cdFxuXHQgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuXHQgICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcblx0ICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdCAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuXHQgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXHRcblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG5cdCAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG5cdCAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuXHQgICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG5cdCAgICAgICAgcG9zaXRpb24gPSBpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHBvc2l0aW9uIDwgMClcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIGxpc3QubGVuZ3RoID0gMDtcblx0ICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuXHQgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzKVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG5cdCAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuXHQgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG5cdCAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuXHQgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG5cdCAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG5cdCAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgIC8vIExJRk8gb3JkZXJcblx0ICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuXHQgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuXHQgIH1cblx0ICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIHZhciByZXQ7XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgIHJldCA9IFtdO1xuXHQgIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcblx0ICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuXHQgIGVsc2Vcblx0ICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgaWYgKHRoaXMuX2V2ZW50cykge1xuXHQgICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG5cdCAgICAgIHJldHVybiAxO1xuXHQgICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcblx0ICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuXHQgIH1cblx0ICByZXR1cm4gMDtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuXHQgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IHZvaWQgMDtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0aWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuXHQgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3Jcblx0ICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG5cdCAgICAgIGNvbnN0cnVjdG9yOiB7XG5cdCAgICAgICAgdmFsdWU6IGN0b3IsXG5cdCAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH07XG5cdH0gZWxzZSB7XG5cdCAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcblx0ICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuXHQgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3Jcblx0ICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG5cdCAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG5cdCAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG5cdCAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3Jcblx0ICB9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdGV4cG9ydHMuU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdGV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzO1xuXHRleHBvcnRzLldyaXRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdGV4cG9ydHMuRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdGV4cG9ydHMuVHJhbnNmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdGV4cG9ydHMuUGFzc1Rocm91Z2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0aWYgKCFwcm9jZXNzLmJyb3dzZXIgJiYgcHJvY2Vzcy5lbnYuUkVBREFCTEVfU1RSRUFNID09PSAnZGlzYWJsZScpIHtcblx0ICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxOCkpKVxuXG4vKioqLyB9LFxuLyogMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhZGFibGU7XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuQnVmZmVyO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdFJlYWRhYmxlLlJlYWRhYmxlU3RhdGUgPSBSZWFkYWJsZVN0YXRlO1xuXHRcblx0dmFyIEVFID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCkuRXZlbnRFbWl0dGVyO1xuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0aWYgKCFFRS5saXN0ZW5lckNvdW50KSBFRS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuXHQgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7XG5cdH07XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0dmFyIFN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdHZhciBTdHJpbmdEZWNvZGVyO1xuXHRcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRpZiAoZGVidWcgJiYgZGVidWcuZGVidWdsb2cpIHtcblx0ICBkZWJ1ZyA9IGRlYnVnLmRlYnVnbG9nKCdzdHJlYW0nKTtcblx0fSBlbHNlIHtcblx0ICBkZWJ1ZyA9IGZ1bmN0aW9uICgpIHt9O1xuXHR9XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0XG5cdHV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7XG5cdFxuXHRmdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuXHQgIHZhciBEdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdCAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG5cdCAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyBcImRvbid0IGNhbGwgX3JlYWQgcHJlZW1wdGl2ZWx5IGV2ZXJcIlxuXHQgIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG5cdCAgdmFyIGRlZmF1bHRId20gPSBvcHRpb25zLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcblx0ICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtO1xuXHRcblx0ICAvLyBjYXN0IHRvIGludHMuXG5cdCAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfn50aGlzLmhpZ2hXYXRlck1hcms7XG5cdFxuXHQgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgdGhpcy5sZW5ndGggPSAwO1xuXHQgIHRoaXMucGlwZXMgPSBudWxsO1xuXHQgIHRoaXMucGlwZXNDb3VudCA9IDA7XG5cdCAgdGhpcy5mbG93aW5nID0gbnVsbDtcblx0ICB0aGlzLmVuZGVkID0gZmFsc2U7XG5cdCAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG5cdCAgdGhpcy5yZWFkaW5nID0gZmFsc2U7XG5cdFxuXHQgIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuXHQgIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG5cdCAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgXCJsYXRlclwiIHNob3VsZCBnZW5lcmFsbHkgYWxzb1xuXHQgIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuXHQgIHRoaXMuc3luYyA9IHRydWU7XG5cdFxuXHQgIC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5XG5cdCAgLy8gdGhhdCB3ZSdyZSBhd2FpdGluZyBhICdyZWFkYWJsZScgZXZlbnQgZW1pc3Npb24uXG5cdCAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTtcblx0ICB0aGlzLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuXHQgIHRoaXMucmVhZGFibGVMaXN0ZW5pbmcgPSBmYWxzZTtcblx0XG5cdFxuXHQgIC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvXG5cdCAgLy8gbWFrZSBhbGwgdGhlIGJ1ZmZlciBtZXJnaW5nIGFuZCBsZW5ndGggY2hlY2tzIGdvIGF3YXlcblx0ICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblx0XG5cdCAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleClcblx0ICAgIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXHRcblx0ICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG5cdCAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuXHQgIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cblx0ICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4Jztcblx0XG5cdCAgLy8gd2hlbiBwaXBpbmcsIHdlIG9ubHkgY2FyZSBhYm91dCAncmVhZGFibGUnIGV2ZW50cyB0aGF0IGhhcHBlblxuXHQgIC8vIGFmdGVyIHJlYWQoKWluZyBhbGwgdGhlIGJ5dGVzIGFuZCBub3QgZ2V0dGluZyBhbnkgcHVzaGJhY2suXG5cdCAgdGhpcy5yYW5PdXQgPSBmYWxzZTtcblx0XG5cdCAgLy8gdGhlIG51bWJlciBvZiB3cml0ZXJzIHRoYXQgYXJlIGF3YWl0aW5nIGEgZHJhaW4gZXZlbnQgaW4gLnBpcGUoKXNcblx0ICB0aGlzLmF3YWl0RHJhaW4gPSAwO1xuXHRcblx0ICAvLyBpZiB0cnVlLCBhIG1heWJlUmVhZE1vcmUgaGFzIGJlZW4gc2NoZWR1bGVkXG5cdCAgdGhpcy5yZWFkaW5nTW9yZSA9IGZhbHNlO1xuXHRcblx0ICB0aGlzLmRlY29kZXIgPSBudWxsO1xuXHQgIHRoaXMuZW5jb2RpbmcgPSBudWxsO1xuXHQgIGlmIChvcHRpb25zLmVuY29kaW5nKSB7XG5cdCAgICBpZiAoIVN0cmluZ0RlY29kZXIpXG5cdCAgICAgIFN0cmluZ0RlY29kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KS5TdHJpbmdEZWNvZGVyO1xuXHQgICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7XG5cdCAgICB0aGlzLmVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHtcblx0ICB2YXIgRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpXG5cdCAgICByZXR1cm4gbmV3IFJlYWRhYmxlKG9wdGlvbnMpO1xuXHRcblx0ICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cdFxuXHQgIC8vIGxlZ2FjeVxuXHQgIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuXHRcblx0ICBTdHJlYW0uY2FsbCh0aGlzKTtcblx0fVxuXHRcblx0Ly8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuXG5cdC8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LFxuXHQvLyBzaW1pbGFyIHRvIGhvdyBXcml0YWJsZS53cml0ZSgpIHJldHVybnMgdHJ1ZSBpZiB5b3Ugc2hvdWxkXG5cdC8vIHdyaXRlKCkgc29tZSBtb3JlLlxuXHRSZWFkYWJsZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZykge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdFxuXHQgIGlmICh1dGlsLmlzU3RyaW5nKGNodW5rKSAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuXHQgICAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cdCAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7XG5cdCAgICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpO1xuXHQgICAgICBlbmNvZGluZyA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgZmFsc2UpO1xuXHR9O1xuXHRcblx0Ly8gVW5zaGlmdCBzaG91bGQgKmFsd2F5cyogYmUgc29tZXRoaW5nIGRpcmVjdGx5IG91dCBvZiByZWFkKClcblx0UmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbihjaHVuaykge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cdCAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCAnJywgdHJ1ZSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCkge1xuXHQgIHZhciBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspO1xuXHQgIGlmIChlcikge1xuXHQgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXHQgIH0gZWxzZSBpZiAodXRpbC5pc051bGxPclVuZGVmaW5lZChjaHVuaykpIHtcblx0ICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcblx0ICAgIGlmICghc3RhdGUuZW5kZWQpXG5cdCAgICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7XG5cdCAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHtcblx0ICAgIGlmIChzdGF0ZS5lbmRlZCAmJiAhYWRkVG9Gcm9udCkge1xuXHQgICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKTtcblx0ICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7XG5cdCAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZEVtaXR0ZWQgJiYgYWRkVG9Gcm9udCkge1xuXHQgICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTtcblx0ICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhYWRkVG9Gcm9udCAmJiAhZW5jb2RpbmcpXG5cdCAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcblx0XG5cdCAgICAgIGlmICghYWRkVG9Gcm9udClcblx0ICAgICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG5cdFxuXHQgICAgICAvLyBpZiB3ZSB3YW50IHRoZSBkYXRhIG5vdywganVzdCBlbWl0IGl0LlxuXHQgICAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLnN5bmMpIHtcblx0ICAgICAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTtcblx0ICAgICAgICBzdHJlYW0ucmVhZCgwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyB1cGRhdGUgdGhlIGJ1ZmZlciBpbmZvLlxuXHQgICAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblx0ICAgICAgICBpZiAoYWRkVG9Gcm9udClcblx0ICAgICAgICAgIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtcblx0ICAgICAgICBlbHNlXG5cdCAgICAgICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG5cdFxuXHQgICAgICAgIGlmIChzdGF0ZS5uZWVkUmVhZGFibGUpXG5cdCAgICAgICAgICBlbWl0UmVhZGFibGUoc3RyZWFtKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7XG5cdCAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmVlZE1vcmVEYXRhKHN0YXRlKTtcblx0fVxuXHRcblx0XG5cdFxuXHQvLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLlxuXHQvLyBBbHNvLCBpZiB3ZSBoYXZlIG5vIGRhdGEgeWV0LCB3ZSBjYW4gc3RhbmQgc29tZVxuXHQvLyBtb3JlIGJ5dGVzLiAgVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCxcblx0Ly8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGFcblx0Ly8gcmVhZGFibGUgZXZlbnQsIGFuZCB0aGUgdXNlciBjYWxsZWQgcmVhZChsYXJnZU51bWJlcikgc3VjaCB0aGF0XG5cdC8vIG5lZWRSZWFkYWJsZSB3YXMgc2V0LCB0aGVuIHdlIG91Z2h0IHRvIHB1c2ggbW9yZSwgc28gdGhhdCBhbm90aGVyXG5cdC8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuXG5cdGZ1bmN0aW9uIG5lZWRNb3JlRGF0YShzdGF0ZSkge1xuXHQgIHJldHVybiAhc3RhdGUuZW5kZWQgJiZcblx0ICAgICAgICAgKHN0YXRlLm5lZWRSZWFkYWJsZSB8fFxuXHQgICAgICAgICAgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyayB8fFxuXHQgICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwKTtcblx0fVxuXHRcblx0Ly8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5cdFJlYWRhYmxlLnByb3RvdHlwZS5zZXRFbmNvZGluZyA9IGZ1bmN0aW9uKGVuYykge1xuXHQgIGlmICghU3RyaW5nRGVjb2Rlcilcblx0ICAgIFN0cmluZ0RlY29kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KS5TdHJpbmdEZWNvZGVyO1xuXHQgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7XG5cdCAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmNvZGluZyA9IGVuYztcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdC8vIERvbid0IHJhaXNlIHRoZSBod20gPiAxMjhNQlxuXHR2YXIgTUFYX0hXTSA9IDB4ODAwMDAwO1xuXHRmdW5jdGlvbiByb3VuZFVwVG9OZXh0UG93ZXJPZjIobikge1xuXHQgIGlmIChuID49IE1BWF9IV00pIHtcblx0ICAgIG4gPSBNQVhfSFdNO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBHZXQgdGhlIG5leHQgaGlnaGVzdCBwb3dlciBvZiAyXG5cdCAgICBuLS07XG5cdCAgICBmb3IgKHZhciBwID0gMTsgcCA8IDMyOyBwIDw8PSAxKSBuIHw9IG4gPj4gcDtcblx0ICAgIG4rKztcblx0ICB9XG5cdCAgcmV0dXJuIG47XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhvd011Y2hUb1JlYWQobiwgc3RhdGUpIHtcblx0ICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKVxuXHQgICAgcmV0dXJuIDA7XG5cdFxuXHQgIGlmIChzdGF0ZS5vYmplY3RNb2RlKVxuXHQgICAgcmV0dXJuIG4gPT09IDAgPyAwIDogMTtcblx0XG5cdCAgaWYgKGlzTmFOKG4pIHx8IHV0aWwuaXNOdWxsKG4pKSB7XG5cdCAgICAvLyBvbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWVcblx0ICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmJ1ZmZlci5sZW5ndGgpXG5cdCAgICAgIHJldHVybiBzdGF0ZS5idWZmZXJbMF0ubGVuZ3RoO1xuXHQgICAgZWxzZVxuXHQgICAgICByZXR1cm4gc3RhdGUubGVuZ3RoO1xuXHQgIH1cblx0XG5cdCAgaWYgKG4gPD0gMClcblx0ICAgIHJldHVybiAwO1xuXHRcblx0ICAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgdGFyZ2V0IGJ1ZmZlciBsZXZlbCxcblx0ICAvLyB0aGVuIHJhaXNlIHRoZSB3YXRlciBtYXJrLiAgQnVtcCB1cCB0byB0aGUgbmV4dCBoaWdoZXN0XG5cdCAgLy8gcG93ZXIgb2YgMiwgdG8gcHJldmVudCBpbmNyZWFzaW5nIGl0IGV4Y2Vzc2l2ZWx5IGluIHRpbnlcblx0ICAvLyBhbW91bnRzLlxuXHQgIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaylcblx0ICAgIHN0YXRlLmhpZ2hXYXRlck1hcmsgPSByb3VuZFVwVG9OZXh0UG93ZXJPZjIobik7XG5cdFxuXHQgIC8vIGRvbid0IGhhdmUgdGhhdCBtdWNoLiAgcmV0dXJuIG51bGwsIHVubGVzcyB3ZSd2ZSBlbmRlZC5cblx0ICBpZiAobiA+IHN0YXRlLmxlbmd0aCkge1xuXHQgICAgaWYgKCFzdGF0ZS5lbmRlZCkge1xuXHQgICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gMDtcblx0ICAgIH0gZWxzZVxuXHQgICAgICByZXR1cm4gc3RhdGUubGVuZ3RoO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG47XG5cdH1cblx0XG5cdC8vIHlvdSBjYW4gb3ZlcnJpZGUgZWl0aGVyIHRoaXMgbWV0aG9kLCBvciB0aGUgYXN5bmMgX3JlYWQobikgYmVsb3cuXG5cdFJlYWRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24obikge1xuXHQgIGRlYnVnKCdyZWFkJywgbik7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0ICB2YXIgbk9yaWcgPSBuO1xuXHRcblx0ICBpZiAoIXV0aWwuaXNOdW1iZXIobikgfHwgbiA+IDApXG5cdCAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblx0XG5cdCAgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZVxuXHQgIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXJcblx0ICAvLyB0aGUgJ3JlYWRhYmxlJyBldmVudCBhbmQgbW92ZSBvbi5cblx0ICBpZiAobiA9PT0gMCAmJlxuXHQgICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgJiZcblx0ICAgICAgKHN0YXRlLmxlbmd0aCA+PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmVuZGVkKSkge1xuXHQgICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuXHQgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZClcblx0ICAgICAgZW5kUmVhZGFibGUodGhpcyk7XG5cdCAgICBlbHNlXG5cdCAgICAgIGVtaXRSZWFkYWJsZSh0aGlzKTtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpO1xuXHRcblx0ICAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuXG5cdCAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHtcblx0ICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApXG5cdCAgICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHRcblx0ICAvLyBBbGwgdGhlIGFjdHVhbCBjaHVuayBnZW5lcmF0aW9uIGxvZ2ljIG5lZWRzIHRvIGJlXG5cdCAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluXG5cdCAgLy8gc3ludGhldGljIHN0cmVhbSBjYXNlcywgc3VjaCBhcyBwYXNzdGhyb3VnaCBzdHJlYW1zLCBfcmVhZFxuXHQgIC8vIG1heSBiZSBhIGNvbXBsZXRlbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uIHdoaWNoIG1heSBjaGFuZ2Vcblx0ICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlblxuXHQgIC8vIGJlZm9yZSB0aGVyZSB3YXMgKm5vdCogZW5vdWdoLlxuXHQgIC8vXG5cdCAgLy8gU28sIHRoZSBzdGVwcyBhcmU6XG5cdCAgLy8gMS4gRmlndXJlIG91dCB3aGF0IHRoZSBzdGF0ZSBvZiB0aGluZ3Mgd2lsbCBiZSBhZnRlciB3ZSBkb1xuXHQgIC8vIGEgcmVhZCBmcm9tIHRoZSBidWZmZXIuXG5cdCAgLy9cblx0ICAvLyAyLiBJZiB0aGF0IHJlc3VsdGluZyBzdGF0ZSB3aWxsIHRyaWdnZXIgYSBfcmVhZCwgdGhlbiBjYWxsIF9yZWFkLlxuXHQgIC8vIE5vdGUgdGhhdCB0aGlzIG1heSBiZSBhc3luY2hyb25vdXMsIG9yIHN5bmNocm9ub3VzLiAgWWVzLCBpdCBpc1xuXHQgIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhblxuXHQgIC8vIHRoYXQgdGhlIFJlYWRhYmxlIGNsYXNzIHNob3VsZCBiZWhhdmUgaW1wcm9wZXJseSwgYXMgc3RyZWFtcyBhcmVcblx0ICAvLyBkZXNpZ25lZCB0byBiZSBzeW5jL2FzeW5jIGFnbm9zdGljLlxuXHQgIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbFxuXHQgIC8vIGhhcyByZXR1cm5lZCB5ZXQpLCBzbyB0aGF0IHdlIGtub3cgd2hldGhlciBvciBub3QgaXQncyBzYWZlIHRvIGVtaXRcblx0ICAvLyAncmVhZGFibGUnIGV0Yy5cblx0ICAvL1xuXHQgIC8vIDMuIEFjdHVhbGx5IHB1bGwgdGhlIHJlcXVlc3RlZCBjaHVua3Mgb3V0IG9mIHRoZSBidWZmZXIgYW5kIHJldHVybi5cblx0XG5cdCAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuXHQgIHZhciBkb1JlYWQgPSBzdGF0ZS5uZWVkUmVhZGFibGU7XG5cdCAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpO1xuXHRcblx0ICAvLyBpZiB3ZSBjdXJyZW50bHkgaGF2ZSBsZXNzIHRoYW4gdGhlIGhpZ2hXYXRlck1hcmssIHRoZW4gYWxzbyByZWFkIHNvbWVcblx0ICBpZiAoc3RhdGUubGVuZ3RoID09PSAwIHx8IHN0YXRlLmxlbmd0aCAtIG4gPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG5cdCAgICBkb1JlYWQgPSB0cnVlO1xuXHQgICAgZGVidWcoJ2xlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrJywgZG9SZWFkKTtcblx0ICB9XG5cdFxuXHQgIC8vIGhvd2V2ZXIsIGlmIHdlJ3ZlIGVuZGVkLCB0aGVuIHRoZXJlJ3Mgbm8gcG9pbnQsIGFuZCBpZiB3ZSdyZSBhbHJlYWR5XG5cdCAgLy8gcmVhZGluZywgdGhlbiBpdCdzIHVubmVjZXNzYXJ5LlxuXHQgIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG5cdCAgICBkb1JlYWQgPSBmYWxzZTtcblx0ICAgIGRlYnVnKCdyZWFkaW5nIG9yIGVuZGVkJywgZG9SZWFkKTtcblx0ICB9XG5cdFxuXHQgIGlmIChkb1JlYWQpIHtcblx0ICAgIGRlYnVnKCdkbyByZWFkJyk7XG5cdCAgICBzdGF0ZS5yZWFkaW5nID0gdHJ1ZTtcblx0ICAgIHN0YXRlLnN5bmMgPSB0cnVlO1xuXHQgICAgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC5cblx0ICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApXG5cdCAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cdCAgICAvLyBjYWxsIGludGVybmFsIHJlYWQgbWV0aG9kXG5cdCAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuXHQgICAgc3RhdGUuc3luYyA9IGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgLy8gSWYgX3JlYWQgcHVzaGVkIGRhdGEgc3luY2hyb25vdXNseSwgdGhlbiBgcmVhZGluZ2Agd2lsbCBiZSBmYWxzZSxcblx0ICAvLyBhbmQgd2UgbmVlZCB0byByZS1ldmFsdWF0ZSBob3cgbXVjaCBkYXRhIHdlIGNhbiByZXR1cm4gdG8gdGhlIHVzZXIuXG5cdCAgaWYgKGRvUmVhZCAmJiAhc3RhdGUucmVhZGluZylcblx0ICAgIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7XG5cdFxuXHQgIHZhciByZXQ7XG5cdCAgaWYgKG4gPiAwKVxuXHQgICAgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO1xuXHQgIGVsc2Vcblx0ICAgIHJldCA9IG51bGw7XG5cdFxuXHQgIGlmICh1dGlsLmlzTnVsbChyZXQpKSB7XG5cdCAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXHQgICAgbiA9IDA7XG5cdCAgfVxuXHRcblx0ICBzdGF0ZS5sZW5ndGggLT0gbjtcblx0XG5cdCAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG5cdCAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuXHQgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLmVuZGVkKVxuXHQgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblx0XG5cdCAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLlxuXHQgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApXG5cdCAgICBlbmRSZWFkYWJsZSh0aGlzKTtcblx0XG5cdCAgaWYgKCF1dGlsLmlzTnVsbChyZXQpKVxuXHQgICAgdGhpcy5lbWl0KCdkYXRhJywgcmV0KTtcblx0XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspIHtcblx0ICB2YXIgZXIgPSBudWxsO1xuXHQgIGlmICghdXRpbC5pc0J1ZmZlcihjaHVuaykgJiZcblx0ICAgICAgIXV0aWwuaXNTdHJpbmcoY2h1bmspICYmXG5cdCAgICAgICF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGNodW5rKSAmJlxuXHQgICAgICAhc3RhdGUub2JqZWN0TW9kZSkge1xuXHQgICAgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7XG5cdCAgfVxuXHQgIHJldHVybiBlcjtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSkge1xuXHQgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuXHQgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcblx0ICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcblx0ICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuXHQgICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcblx0XG5cdCAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuXG5cdCAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG5cdH1cblx0XG5cdC8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlclxuXHQvLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXJcblx0Ly8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLlxuXHRmdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7XG5cdCAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXHQgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuXHQgIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7XG5cdCAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7XG5cdCAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlO1xuXHQgICAgaWYgKHN0YXRlLnN5bmMpXG5cdCAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuXHQgICAgICB9KTtcblx0ICAgIGVsc2Vcblx0ICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHtcblx0ICBkZWJ1ZygnZW1pdCByZWFkYWJsZScpO1xuXHQgIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpO1xuXHQgIGZsb3coc3RyZWFtKTtcblx0fVxuXHRcblx0XG5cdC8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsXG5cdC8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWRcblx0Ly8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWZcblx0Ly8gaXQncyBpbiBwcm9ncmVzcy5cblx0Ly8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSxcblx0Ly8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS5cblx0ZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7XG5cdCAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkge1xuXHQgICAgc3RhdGUucmVhZGluZ01vcmUgPSB0cnVlO1xuXHQgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcblx0ICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoO1xuXHQgIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUuZW5kZWQgJiZcblx0ICAgICAgICAgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykge1xuXHQgICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG5cdCAgICBzdHJlYW0ucmVhZCgwKTtcblx0ICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aClcblx0ICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cblx0ICAgICAgYnJlYWs7XG5cdCAgICBlbHNlXG5cdCAgICAgIGxlbiA9IHN0YXRlLmxlbmd0aDtcblx0ICB9XG5cdCAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTtcblx0fVxuXHRcblx0Ly8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuXHQvLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLlxuXHQvLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgXCJsZW5ndGhcIiBpcyBzb21ld2hhdFxuXHQvLyBhcmJpdHJhcnksIGFuZCBwZXJoYXBzIG5vdCB2ZXJ5IG1lYW5pbmdmdWwuXG5cdFJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcblx0ICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7XG5cdH07XG5cdFxuXHRSZWFkYWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIHBpcGVPcHRzKSB7XG5cdCAgdmFyIHNyYyA9IHRoaXM7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0XG5cdCAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7XG5cdCAgICBjYXNlIDA6XG5cdCAgICAgIHN0YXRlLnBpcGVzID0gZGVzdDtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlIDE6XG5cdCAgICAgIHN0YXRlLnBpcGVzID0gW3N0YXRlLnBpcGVzLCBkZXN0XTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpO1xuXHQgICAgICBicmVhaztcblx0ICB9XG5cdCAgc3RhdGUucGlwZXNDb3VudCArPSAxO1xuXHQgIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7XG5cdFxuXHQgIHZhciBkb0VuZCA9ICghcGlwZU9wdHMgfHwgcGlwZU9wdHMuZW5kICE9PSBmYWxzZSkgJiZcblx0ICAgICAgICAgICAgICBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJlxuXHQgICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyO1xuXHRcblx0ICB2YXIgZW5kRm4gPSBkb0VuZCA/IG9uZW5kIDogY2xlYW51cDtcblx0ICBpZiAoc3RhdGUuZW5kRW1pdHRlZClcblx0ICAgIHByb2Nlc3MubmV4dFRpY2soZW5kRm4pO1xuXHQgIGVsc2Vcblx0ICAgIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG5cdFxuXHQgIGRlc3Qub24oJ3VucGlwZScsIG9udW5waXBlKTtcblx0ICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSkge1xuXHQgICAgZGVidWcoJ29udW5waXBlJyk7XG5cdCAgICBpZiAocmVhZGFibGUgPT09IHNyYykge1xuXHQgICAgICBjbGVhbnVwKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBvbmVuZCgpIHtcblx0ICAgIGRlYnVnKCdvbmVuZCcpO1xuXHQgICAgZGVzdC5lbmQoKTtcblx0ICB9XG5cdFxuXHQgIC8vIHdoZW4gdGhlIGRlc3QgZHJhaW5zLCBpdCByZWR1Y2VzIHRoZSBhd2FpdERyYWluIGNvdW50ZXJcblx0ICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKClcblx0ICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpc1xuXHQgIC8vIHRvbyBzbG93LlxuXHQgIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTtcblx0ICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXHRcblx0ICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuXHQgICAgZGVidWcoJ2NsZWFudXAnKTtcblx0ICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG5cdCAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ3VucGlwZScsIG9udW5waXBlKTtcblx0ICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuXHQgICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTtcblx0ICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7XG5cdFxuXHQgICAgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpc1xuXHQgICAgLy8gc3BlY2lmaWMgd3JpdGVyLCB0aGVuIGl0IHdvdWxkIGNhdXNlIGl0IHRvIG5ldmVyIHN0YXJ0XG5cdCAgICAvLyBmbG93aW5nIGFnYWluLlxuXHQgICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LlxuXHQgICAgLy8gSWYgd2UgZG9uJ3Qga25vdywgdGhlbiBhc3N1bWUgdGhhdCB3ZSBhcmUgd2FpdGluZyBmb3Igb25lLlxuXHQgICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiZcblx0ICAgICAgICAoIWRlc3QuX3dyaXRhYmxlU3RhdGUgfHwgZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKVxuXHQgICAgICBvbmRyYWluKCk7XG5cdCAgfVxuXHRcblx0ICBzcmMub24oJ2RhdGEnLCBvbmRhdGEpO1xuXHQgIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuXHQgICAgZGVidWcoJ29uZGF0YScpO1xuXHQgICAgdmFyIHJldCA9IGRlc3Qud3JpdGUoY2h1bmspO1xuXHQgICAgaWYgKGZhbHNlID09PSByZXQpIHtcblx0ICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsXG5cdCAgICAgICAgICAgIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKTtcblx0ICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKztcblx0ICAgICAgc3JjLnBhdXNlKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBpZiB0aGUgZGVzdCBoYXMgYW4gZXJyb3IsIHRoZW4gc3RvcCBwaXBpbmcgaW50byBpdC5cblx0ICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG5cdCAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuXHQgICAgZGVidWcoJ29uZXJyb3InLCBlcik7XG5cdCAgICB1bnBpcGUoKTtcblx0ICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cdCAgICBpZiAoRUUubGlzdGVuZXJDb3VudChkZXN0LCAnZXJyb3InKSA9PT0gMClcblx0ICAgICAgZGVzdC5lbWl0KCdlcnJvcicsIGVyKTtcblx0ICB9XG5cdCAgLy8gVGhpcyBpcyBhIGJydXRhbGx5IHVnbHkgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlclxuXHQgIC8vIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnkgdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuXG5cdCAgaWYgKCFkZXN0Ll9ldmVudHMgfHwgIWRlc3QuX2V2ZW50cy5lcnJvcilcblx0ICAgIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7XG5cdCAgZWxzZSBpZiAoaXNBcnJheShkZXN0Ll9ldmVudHMuZXJyb3IpKVxuXHQgICAgZGVzdC5fZXZlbnRzLmVycm9yLnVuc2hpZnQob25lcnJvcik7XG5cdCAgZWxzZVxuXHQgICAgZGVzdC5fZXZlbnRzLmVycm9yID0gW29uZXJyb3IsIGRlc3QuX2V2ZW50cy5lcnJvcl07XG5cdFxuXHRcblx0XG5cdCAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS5cblx0ICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuXHQgICAgdW5waXBlKCk7XG5cdCAgfVxuXHQgIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTtcblx0ICBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcblx0ICAgIGRlYnVnKCdvbmZpbmlzaCcpO1xuXHQgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcblx0ICAgIHVucGlwZSgpO1xuXHQgIH1cblx0ICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblx0XG5cdCAgZnVuY3Rpb24gdW5waXBlKCkge1xuXHQgICAgZGVidWcoJ3VucGlwZScpO1xuXHQgICAgc3JjLnVucGlwZShkZXN0KTtcblx0ICB9XG5cdFxuXHQgIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvXG5cdCAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTtcblx0XG5cdCAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LlxuXHQgIGlmICghc3RhdGUuZmxvd2luZykge1xuXHQgICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7XG5cdCAgICBzcmMucmVzdW1lKCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGVzdDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuXHQgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTtcblx0ICAgIGRlYnVnKCdwaXBlT25EcmFpbicsIHN0YXRlLmF3YWl0RHJhaW4pO1xuXHQgICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4pXG5cdCAgICAgIHN0YXRlLmF3YWl0RHJhaW4tLTtcblx0ICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFLmxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7XG5cdCAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuXHQgICAgICBmbG93KHNyYyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0XG5cdFJlYWRhYmxlLnByb3RvdHlwZS51bnBpcGUgPSBmdW5jdGlvbihkZXN0KSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0XG5cdCAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLlxuXHQgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgIC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS5cblx0ICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuXHQgICAgLy8gcGFzc2VkIGluIG9uZSwgYnV0IGl0J3Mgbm90IHRoZSByaWdodCBvbmUuXG5cdCAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcylcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgICAgaWYgKCFkZXN0KVxuXHQgICAgICBkZXN0ID0gc3RhdGUucGlwZXM7XG5cdFxuXHQgICAgLy8gZ290IGEgbWF0Y2guXG5cdCAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG5cdCAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcblx0ICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcblx0ICAgIGlmIChkZXN0KVxuXHQgICAgICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICAvLyBzbG93IGNhc2UuIG11bHRpcGxlIHBpcGUgZGVzdGluYXRpb25zLlxuXHRcblx0ICBpZiAoIWRlc3QpIHtcblx0ICAgIC8vIHJlbW92ZSBhbGwuXG5cdCAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlcztcblx0ICAgIHZhciBsZW4gPSBzdGF0ZS5waXBlc0NvdW50O1xuXHQgICAgc3RhdGUucGlwZXMgPSBudWxsO1xuXHQgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG5cdCAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKylcblx0ICAgICAgZGVzdHNbaV0uZW1pdCgndW5waXBlJywgdGhpcyk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdFxuXHQgIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuXG5cdCAgdmFyIGkgPSBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KTtcblx0ICBpZiAoaSA9PT0gLTEpXG5cdCAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgc3RhdGUucGlwZXMuc3BsaWNlKGksIDEpO1xuXHQgIHN0YXRlLnBpcGVzQ291bnQgLT0gMTtcblx0ICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSlcblx0ICAgIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07XG5cdFxuXHQgIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0Ly8gc2V0IHVwIGRhdGEgZXZlbnRzIGlmIHRoZXkgYXJlIGFza2VkIGZvclxuXHQvLyBFbnN1cmUgcmVhZGFibGUgbGlzdGVuZXJzIGV2ZW50dWFsbHkgZ2V0IHNvbWV0aGluZ1xuXHRSZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldiwgZm4pIHtcblx0ICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG5cdFxuXHQgIC8vIElmIGxpc3RlbmluZyB0byBkYXRhLCBhbmQgaXQgaGFzIG5vdCBleHBsaWNpdGx5IGJlZW4gcGF1c2VkLFxuXHQgIC8vIHRoZW4gY2FsbCByZXN1bWUgdG8gc3RhcnQgdGhlIGZsb3cgb2YgZGF0YSBvbiB0aGUgbmV4dCB0aWNrLlxuXHQgIGlmIChldiA9PT0gJ2RhdGEnICYmIGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHtcblx0ICAgIHRoaXMucmVzdW1lKCk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZXYgPT09ICdyZWFkYWJsZScgJiYgdGhpcy5yZWFkYWJsZSkge1xuXHQgICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0ICAgIGlmICghc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHtcblx0ICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSB0cnVlO1xuXHQgICAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblx0ICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblx0ICAgICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG5cdCAgICAgICAgICBzZWxmLnJlYWQoMCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGVuZ3RoKSB7XG5cdCAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMsIHN0YXRlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlcztcblx0fTtcblx0UmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uO1xuXHRcblx0Ly8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSVxuXHQvLyBJZiB0aGUgdXNlciB1c2VzIHRoZW0sIHRoZW4gc3dpdGNoIGludG8gb2xkIG1vZGUuXG5cdFJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXHQgIGlmICghc3RhdGUuZmxvd2luZykge1xuXHQgICAgZGVidWcoJ3Jlc3VtZScpO1xuXHQgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG5cdCAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcblx0ICAgICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTtcblx0ICAgICAgdGhpcy5yZWFkKDApO1xuXHQgICAgfVxuXHQgICAgcmVzdW1lKHRoaXMsIHN0YXRlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkge1xuXHQgIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7XG5cdCAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlO1xuXHQgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcblx0ICAgICAgcmVzdW1lXyhzdHJlYW0sIHN0YXRlKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzdW1lXyhzdHJlYW0sIHN0YXRlKSB7XG5cdCAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG5cdCAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpO1xuXHQgIGZsb3coc3RyZWFtKTtcblx0ICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZylcblx0ICAgIHN0cmVhbS5yZWFkKDApO1xuXHR9XG5cdFxuXHRSZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnY2FsbCBwYXVzZSBmbG93aW5nPSVqJywgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTtcblx0ICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuXHQgICAgZGVidWcoJ3BhdXNlJyk7XG5cdCAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcblx0ICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBmbG93KHN0cmVhbSkge1xuXHQgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcblx0ICBkZWJ1ZygnZmxvdycsIHN0YXRlLmZsb3dpbmcpO1xuXHQgIGlmIChzdGF0ZS5mbG93aW5nKSB7XG5cdCAgICBkbyB7XG5cdCAgICAgIHZhciBjaHVuayA9IHN0cmVhbS5yZWFkKCk7XG5cdCAgICB9IHdoaWxlIChudWxsICE9PSBjaHVuayAmJiBzdGF0ZS5mbG93aW5nKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuXG5cdC8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cblx0Ly8gSXQgaXMgYW4gdWdseSB1bmZvcnR1bmF0ZSBtZXNzIG9mIGhpc3RvcnkuXG5cdFJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24oc3RyZWFtKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0ICB2YXIgcGF1c2VkID0gZmFsc2U7XG5cdFxuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7XG5cdCAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHtcblx0ICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcblx0ICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aClcblx0ICAgICAgICBzZWxmLnB1c2goY2h1bmspO1xuXHQgICAgfVxuXHRcblx0ICAgIHNlbGYucHVzaChudWxsKTtcblx0ICB9KTtcblx0XG5cdCAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24oY2h1bmspIHtcblx0ICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTtcblx0ICAgIGlmIChzdGF0ZS5kZWNvZGVyKVxuXHQgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuXHQgICAgaWYgKCFjaHVuayB8fCAhc3RhdGUub2JqZWN0TW9kZSAmJiAhY2h1bmsubGVuZ3RoKVxuXHQgICAgICByZXR1cm47XG5cdFxuXHQgICAgdmFyIHJldCA9IHNlbGYucHVzaChjaHVuayk7XG5cdCAgICBpZiAoIXJldCkge1xuXHQgICAgICBwYXVzZWQgPSB0cnVlO1xuXHQgICAgICBzdHJlYW0ucGF1c2UoKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuXHQgIC8vIGltcG9ydGFudCB3aGVuIHdyYXBwaW5nIGZpbHRlcnMgYW5kIGR1cGxleGVzLlxuXHQgIGZvciAodmFyIGkgaW4gc3RyZWFtKSB7XG5cdCAgICBpZiAodXRpbC5pc0Z1bmN0aW9uKHN0cmVhbVtpXSkgJiYgdXRpbC5pc1VuZGVmaW5lZCh0aGlzW2ldKSkge1xuXHQgICAgICB0aGlzW2ldID0gZnVuY3Rpb24obWV0aG9kKSB7IHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gc3RyZWFtW21ldGhvZF0uYXBwbHkoc3RyZWFtLCBhcmd1bWVudHMpO1xuXHQgICAgICB9fShpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy5cblx0ICB2YXIgZXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddO1xuXHQgIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbihldikge1xuXHQgICAgc3RyZWFtLm9uKGV2LCBzZWxmLmVtaXQuYmluZChzZWxmLCBldikpO1xuXHQgIH0pO1xuXHRcblx0ICAvLyB3aGVuIHdlIHRyeSB0byBjb25zdW1lIHNvbWUgbW9yZSBieXRlcywgc2ltcGx5IHVucGF1c2UgdGhlXG5cdCAgLy8gdW5kZXJseWluZyBzdHJlYW0uXG5cdCAgc2VsZi5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcblx0ICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7XG5cdCAgICBpZiAocGF1c2VkKSB7XG5cdCAgICAgIHBhdXNlZCA9IGZhbHNlO1xuXHQgICAgICBzdHJlYW0ucmVzdW1lKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIHNlbGY7XG5cdH07XG5cdFxuXHRcblx0XG5cdC8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS5cblx0UmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7XG5cdFxuXHQvLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuXG5cdC8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuXG5cdGZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG5cdCAgdmFyIGxpc3QgPSBzdGF0ZS5idWZmZXI7XG5cdCAgdmFyIGxlbmd0aCA9IHN0YXRlLmxlbmd0aDtcblx0ICB2YXIgc3RyaW5nTW9kZSA9ICEhc3RhdGUuZGVjb2Rlcjtcblx0ICB2YXIgb2JqZWN0TW9kZSA9ICEhc3RhdGUub2JqZWN0TW9kZTtcblx0ICB2YXIgcmV0O1xuXHRcblx0ICAvLyBub3RoaW5nIGluIHRoZSBsaXN0LCBkZWZpbml0ZWx5IGVtcHR5LlxuXHQgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMClcblx0ICAgIHJldHVybiBudWxsO1xuXHRcblx0ICBpZiAobGVuZ3RoID09PSAwKVxuXHQgICAgcmV0ID0gbnVsbDtcblx0ICBlbHNlIGlmIChvYmplY3RNb2RlKVxuXHQgICAgcmV0ID0gbGlzdC5zaGlmdCgpO1xuXHQgIGVsc2UgaWYgKCFuIHx8IG4gPj0gbGVuZ3RoKSB7XG5cdCAgICAvLyByZWFkIGl0IGFsbCwgdHJ1bmNhdGUgdGhlIGFycmF5LlxuXHQgICAgaWYgKHN0cmluZ01vZGUpXG5cdCAgICAgIHJldCA9IGxpc3Quam9pbignJyk7XG5cdCAgICBlbHNlXG5cdCAgICAgIHJldCA9IEJ1ZmZlci5jb25jYXQobGlzdCwgbGVuZ3RoKTtcblx0ICAgIGxpc3QubGVuZ3RoID0gMDtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gcmVhZCBqdXN0IHNvbWUgb2YgaXQuXG5cdCAgICBpZiAobiA8IGxpc3RbMF0ubGVuZ3RoKSB7XG5cdCAgICAgIC8vIGp1c3QgdGFrZSBhIHBhcnQgb2YgdGhlIGZpcnN0IGxpc3QgaXRlbS5cblx0ICAgICAgLy8gc2xpY2UgaXMgdGhlIHNhbWUgZm9yIGJ1ZmZlcnMgYW5kIHN0cmluZ3MuXG5cdCAgICAgIHZhciBidWYgPSBsaXN0WzBdO1xuXHQgICAgICByZXQgPSBidWYuc2xpY2UoMCwgbik7XG5cdCAgICAgIGxpc3RbMF0gPSBidWYuc2xpY2Uobik7XG5cdCAgICB9IGVsc2UgaWYgKG4gPT09IGxpc3RbMF0ubGVuZ3RoKSB7XG5cdCAgICAgIC8vIGZpcnN0IGxpc3QgaXMgYSBwZXJmZWN0IG1hdGNoXG5cdCAgICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIGNvbXBsZXggY2FzZS5cblx0ICAgICAgLy8gd2UgaGF2ZSBlbm91Z2ggdG8gY292ZXIgaXQsIGJ1dCBpdCBzcGFucyBwYXN0IHRoZSBmaXJzdCBidWZmZXIuXG5cdCAgICAgIGlmIChzdHJpbmdNb2RlKVxuXHQgICAgICAgIHJldCA9ICcnO1xuXHQgICAgICBlbHNlXG5cdCAgICAgICAgcmV0ID0gbmV3IEJ1ZmZlcihuKTtcblx0XG5cdCAgICAgIHZhciBjID0gMDtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGwgJiYgYyA8IG47IGkrKykge1xuXHQgICAgICAgIHZhciBidWYgPSBsaXN0WzBdO1xuXHQgICAgICAgIHZhciBjcHkgPSBNYXRoLm1pbihuIC0gYywgYnVmLmxlbmd0aCk7XG5cdFxuXHQgICAgICAgIGlmIChzdHJpbmdNb2RlKVxuXHQgICAgICAgICAgcmV0ICs9IGJ1Zi5zbGljZSgwLCBjcHkpO1xuXHQgICAgICAgIGVsc2Vcblx0ICAgICAgICAgIGJ1Zi5jb3B5KHJldCwgYywgMCwgY3B5KTtcblx0XG5cdCAgICAgICAgaWYgKGNweSA8IGJ1Zi5sZW5ndGgpXG5cdCAgICAgICAgICBsaXN0WzBdID0gYnVmLnNsaWNlKGNweSk7XG5cdCAgICAgICAgZWxzZVxuXHQgICAgICAgICAgbGlzdC5zaGlmdCgpO1xuXHRcblx0ICAgICAgICBjICs9IGNweTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5kUmVhZGFibGUoc3RyZWFtKSB7XG5cdCAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXHRcblx0ICAvLyBJZiB3ZSBnZXQgaGVyZSBiZWZvcmUgY29uc3VtaW5nIGFsbCB0aGUgYnl0ZXMsIHRoZW4gdGhhdCBpcyBhXG5cdCAgLy8gYnVnIGluIG5vZGUuICBTaG91bGQgbmV2ZXIgaGFwcGVuLlxuXHQgIGlmIChzdGF0ZS5sZW5ndGggPiAwKVxuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdlbmRSZWFkYWJsZSBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbScpO1xuXHRcblx0ICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHtcblx0ICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcblx0ICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LlxuXHQgICAgICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgc3RhdGUuZW5kRW1pdHRlZCA9IHRydWU7XG5cdCAgICAgICAgc3RyZWFtLnJlYWRhYmxlID0gZmFsc2U7XG5cdCAgICAgICAgc3RyZWFtLmVtaXQoJ2VuZCcpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGYoeHNbaV0sIGkpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZiAoeHMsIHgpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaWYgKHhzW2ldID09PSB4KSByZXR1cm4gaTtcblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxOCkpKVxuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oQnVmZmVyKSB7Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdC8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuXHQvLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblx0XG5cdGZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkpIHtcblx0ICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7XG5cdCAgfVxuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xuXHR9XG5cdGV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cdFxuXHRmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJztcblx0fVxuXHRleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXHRcblx0ZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcblx0fVxuXHRleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cdFxuXHRmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG5cdH1cblx0ZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXHRcblx0ZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xuXHR9XG5cdGV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDtcblx0XG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IHZvaWQgMDtcblx0fVxuXHRleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xuXHR9XG5cdGV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXHRcblx0ZnVuY3Rpb24gaXNEYXRlKGQpIHtcblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcblx0fVxuXHRleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblx0XG5cdGZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuXHQgIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcblx0fVxuXHRleHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXHRcblx0ZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXHRcblx0ZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG5cdH1cblx0ZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXHRcblx0ZXhwb3J0cy5pc0J1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcjtcblx0XG5cdGZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuQnVmZmVyKSlcblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcblx0ICAgICAgY29uc3RydWN0b3I6IHtcblx0ICAgICAgICB2YWx1ZTogY3Rvcixcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cblx0ICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcblx0ICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcblx0ICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogKGlnbm9yZWQpICovXG5cbi8qKiovIH0sXG4vKiAzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0Ly8gYSBkdXBsZXggc3RyZWFtIGlzIGp1c3QgYSBzdHJlYW0gdGhhdCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS5cblx0Ly8gU2luY2UgSlMgZG9lc24ndCBoYXZlIG11bHRpcGxlIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UsIHRoaXMgY2xhc3Ncblx0Ly8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbVxuXHQvLyBXcml0YWJsZS5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRHVwbGV4O1xuXHRcblx0Lyo8cmVwbGFjZW1lbnQ+Ki9cblx0dmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIGtleXMgPSBbXTtcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcblx0ICByZXR1cm4ga2V5cztcblx0fVxuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR1dGlsLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdC8qPC9yZXBsYWNlbWVudD4qL1xuXHRcblx0dmFyIFJlYWRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciBXcml0YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0dXRpbC5pbmhlcml0cyhEdXBsZXgsIFJlYWRhYmxlKTtcblx0XG5cdGZvckVhY2gob2JqZWN0S2V5cyhXcml0YWJsZS5wcm90b3R5cGUpLCBmdW5jdGlvbihtZXRob2QpIHtcblx0ICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSlcblx0ICAgIER1cGxleC5wcm90b3R5cGVbbWV0aG9kXSA9IFdyaXRhYmxlLnByb3RvdHlwZVttZXRob2RdO1xuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIER1cGxleChvcHRpb25zKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpXG5cdCAgICByZXR1cm4gbmV3IER1cGxleChvcHRpb25zKTtcblx0XG5cdCAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0ICBXcml0YWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXHRcblx0ICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSlcblx0ICAgIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcblx0XG5cdCAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpXG5cdCAgICB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cdFxuXHQgIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7XG5cdCAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSlcblx0ICAgIHRoaXMuYWxsb3dIYWxmT3BlbiA9IGZhbHNlO1xuXHRcblx0ICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTtcblx0fVxuXHRcblx0Ly8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlclxuXHRmdW5jdGlvbiBvbmVuZCgpIHtcblx0ICAvLyBpZiB3ZSBhbGxvdyBoYWxmLW9wZW4gc3RhdGUsIG9yIGlmIHRoZSB3cml0YWJsZSBzaWRlIGVuZGVkLFxuXHQgIC8vIHRoZW4gd2UncmUgb2suXG5cdCAgaWYgKHRoaXMuYWxsb3dIYWxmT3BlbiB8fCB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKVxuXHQgICAgcmV0dXJuO1xuXHRcblx0ICAvLyBubyBtb3JlIGRhdGEgY2FuIGJlIHdyaXR0ZW4uXG5cdCAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG5cdCAgcHJvY2Vzcy5uZXh0VGljayh0aGlzLmVuZC5iaW5kKHRoaXMpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9yRWFjaCAoeHMsIGYpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZih4c1tpXSwgaSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxOCkpKVxuXG4vKioqLyB9LFxuLyogMzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdC8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuXHQvLyBJbXBsZW1lbnQgYW4gYXN5bmMgLl93cml0ZShjaHVuaywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbFxuXHQvLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gV3JpdGFibGU7XG5cdFxuXHQvKjxyZXBsYWNlbWVudD4qL1xuXHR2YXIgQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuQnVmZmVyO1xuXHQvKjwvcmVwbGFjZW1lbnQ+Ki9cblx0XG5cdFdyaXRhYmxlLldyaXRhYmxlU3RhdGUgPSBXcml0YWJsZVN0YXRlO1xuXHRcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHR2YXIgU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR1dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pO1xuXHRcblx0ZnVuY3Rpb24gV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIHRoaXMuY2h1bmsgPSBjaHVuaztcblx0ICB0aGlzLmVuY29kaW5nID0gZW5jb2Rpbmc7XG5cdCAgdGhpcy5jYWxsYmFjayA9IGNiO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuXHQgIHZhciBEdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdCAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgIC8vIHRoZSBwb2ludCBhdCB3aGljaCB3cml0ZSgpIHN0YXJ0cyByZXR1cm5pbmcgZmFsc2Vcblx0ICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIHRoYXQgd2UgYWx3YXlzIHJldHVybiBmYWxzZSBpZlxuXHQgIC8vIHRoZSBlbnRpcmUgYnVmZmVyIGlzIG5vdCBmbHVzaGVkIGltbWVkaWF0ZWx5IG9uIHdyaXRlKClcblx0ICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuXHQgIHZhciBkZWZhdWx0SHdtID0gb3B0aW9ucy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cdCAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gKGh3bSB8fCBod20gPT09IDApID8gaHdtIDogZGVmYXVsdEh3bTtcblx0XG5cdCAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG5cdCAgLy8gY29udGFpbnMgYnVmZmVycyBvciBvYmplY3RzLlxuXHQgIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXHRcblx0ICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KVxuXHQgICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7XG5cdFxuXHQgIC8vIGNhc3QgdG8gaW50cy5cblx0ICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+fnRoaXMuaGlnaFdhdGVyTWFyaztcblx0XG5cdCAgdGhpcy5uZWVkRHJhaW4gPSBmYWxzZTtcblx0ICAvLyBhdCB0aGUgc3RhcnQgb2YgY2FsbGluZyBlbmQoKVxuXHQgIHRoaXMuZW5kaW5nID0gZmFsc2U7XG5cdCAgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZFxuXHQgIHRoaXMuZW5kZWQgPSBmYWxzZTtcblx0ICAvLyB3aGVuICdmaW5pc2gnIGlzIGVtaXR0ZWRcblx0ICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG5cdFxuXHQgIC8vIHNob3VsZCB3ZSBkZWNvZGUgc3RyaW5ncyBpbnRvIGJ1ZmZlcnMgYmVmb3JlIHBhc3NpbmcgdG8gX3dyaXRlP1xuXHQgIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZ1xuXHQgIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuXG5cdCAgdmFyIG5vRGVjb2RlID0gb3B0aW9ucy5kZWNvZGVTdHJpbmdzID09PSBmYWxzZTtcblx0ICB0aGlzLmRlY29kZVN0cmluZ3MgPSAhbm9EZWNvZGU7XG5cdFxuXHQgIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcblx0ICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG5cdCAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuXHQgIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXHRcblx0ICAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudFxuXHQgIC8vIG9mIGhvdyBtdWNoIHdlJ3JlIHdhaXRpbmcgdG8gZ2V0IHB1c2hlZCB0byBzb21lIHVuZGVybHlpbmdcblx0ICAvLyBzb2NrZXQgb3IgZmlsZS5cblx0ICB0aGlzLmxlbmd0aCA9IDA7XG5cdFxuXHQgIC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuXG5cdCAgdGhpcy53cml0aW5nID0gZmFsc2U7XG5cdFxuXHQgIC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGxcblx0ICB0aGlzLmNvcmtlZCA9IDA7XG5cdFxuXHQgIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuXHQgIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG5cdCAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgXCJsYXRlclwiIHNob3VsZCBnZW5lcmFsbHkgYWxzb1xuXHQgIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuXHQgIHRoaXMuc3luYyA9IHRydWU7XG5cdFxuXHQgIC8vIGEgZmxhZyB0byBrbm93IGlmIHdlJ3JlIHByb2Nlc3NpbmcgcHJldmlvdXNseSBidWZmZXJlZCBpdGVtcywgd2hpY2hcblx0ICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndFxuXHQgIC8vIGVuZCB1cCBpbiBhbiBvdmVybGFwcGVkIG9ud3JpdGUgc2l0dWF0aW9uLlxuXHQgIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xuXHRcblx0ICAvLyB0aGUgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCB0byBfd3JpdGUoY2h1bmssY2IpXG5cdCAgdGhpcy5vbndyaXRlID0gZnVuY3Rpb24oZXIpIHtcblx0ICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7XG5cdCAgfTtcblx0XG5cdCAgLy8gdGhlIGNhbGxiYWNrIHRoYXQgdGhlIHVzZXIgc3VwcGxpZXMgdG8gd3JpdGUoY2h1bmssZW5jb2RpbmcsY2IpXG5cdCAgdGhpcy53cml0ZWNiID0gbnVsbDtcblx0XG5cdCAgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLlxuXHQgIHRoaXMud3JpdGVsZW4gPSAwO1xuXHRcblx0ICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHRcblx0ICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrc1xuXHQgIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZFxuXHQgIHRoaXMucGVuZGluZ2NiID0gMDtcblx0XG5cdCAgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNic1xuXHQgIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zXG5cdCAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlO1xuXHRcblx0ICAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpblxuXHQgIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHtcblx0ICB2YXIgRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQgIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdGhvdWdoIHRoZXkncmUgbm90XG5cdCAgLy8gaW5zdGFuY2VvZiBXcml0YWJsZSwgdGhleSdyZSBpbnN0YW5jZW9mIFJlYWRhYmxlLlxuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBXcml0YWJsZSkgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSlcblx0ICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7XG5cdFxuXHQgIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTtcblx0XG5cdCAgLy8gbGVnYWN5LlxuXHQgIHRoaXMud3JpdGFibGUgPSB0cnVlO1xuXHRcblx0ICBTdHJlYW0uY2FsbCh0aGlzKTtcblx0fVxuXHRcblx0Ly8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLlxuXHRXcml0YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKCkge1xuXHQgIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLiBOb3QgcmVhZGFibGUuJykpO1xuXHR9O1xuXHRcblx0XG5cdGZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcblx0ICB2YXIgZXIgPSBuZXcgRXJyb3IoJ3dyaXRlIGFmdGVyIGVuZCcpO1xuXHQgIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiXG5cdCAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXHQgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICBjYihlcik7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8vIElmIHdlIGdldCBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBidWZmZXIsIHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkLFxuXHQvLyBhbmQgd2UncmUgbm90IGluIG9iamVjdE1vZGUsIHRoZW4gdGhhdCdzIGFuIGVycm9yLlxuXHQvLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGVcblx0Ly8gd2F0ZXJtYXJrcyBkZXRlcm1pbmUgaG93IG1hbnkgb2JqZWN0cyB0byBrZWVwIGluIHRoZSBidWZmZXIsIHJhdGhlciB0aGFuXG5cdC8vIGhvdyBtYW55IGJ5dGVzIG9yIGNoYXJhY3RlcnMuXG5cdGZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7XG5cdCAgdmFyIHZhbGlkID0gdHJ1ZTtcblx0ICBpZiAoIXV0aWwuaXNCdWZmZXIoY2h1bmspICYmXG5cdCAgICAgICF1dGlsLmlzU3RyaW5nKGNodW5rKSAmJlxuXHQgICAgICAhdXRpbC5pc051bGxPclVuZGVmaW5lZChjaHVuaykgJiZcblx0ICAgICAgIXN0YXRlLm9iamVjdE1vZGUpIHtcblx0ICAgIHZhciBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcblx0ICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblx0ICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNiKGVyKTtcblx0ICAgIH0pO1xuXHQgICAgdmFsaWQgPSBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbGlkO1xuXHR9XG5cdFxuXHRXcml0YWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblx0ICB2YXIgcmV0ID0gZmFsc2U7XG5cdFxuXHQgIGlmICh1dGlsLmlzRnVuY3Rpb24oZW5jb2RpbmcpKSB7XG5cdCAgICBjYiA9IGVuY29kaW5nO1xuXHQgICAgZW5jb2RpbmcgPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKHV0aWwuaXNCdWZmZXIoY2h1bmspKVxuXHQgICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcblx0ICBlbHNlIGlmICghZW5jb2RpbmcpXG5cdCAgICBlbmNvZGluZyA9IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcblx0XG5cdCAgaWYgKCF1dGlsLmlzRnVuY3Rpb24oY2IpKVxuXHQgICAgY2IgPSBmdW5jdGlvbigpIHt9O1xuXHRcblx0ICBpZiAoc3RhdGUuZW5kZWQpXG5cdCAgICB3cml0ZUFmdGVyRW5kKHRoaXMsIHN0YXRlLCBjYik7XG5cdCAgZWxzZSBpZiAodmFsaWRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGNiKSkge1xuXHQgICAgc3RhdGUucGVuZGluZ2NiKys7XG5cdCAgICByZXQgPSB3cml0ZU9yQnVmZmVyKHRoaXMsIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHRXcml0YWJsZS5wcm90b3R5cGUuY29yayA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cdFxuXHQgIHN0YXRlLmNvcmtlZCsrO1xuXHR9O1xuXHRcblx0V3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cdFxuXHQgIGlmIChzdGF0ZS5jb3JrZWQpIHtcblx0ICAgIHN0YXRlLmNvcmtlZC0tO1xuXHRcblx0ICAgIGlmICghc3RhdGUud3JpdGluZyAmJlxuXHQgICAgICAgICFzdGF0ZS5jb3JrZWQgJiZcblx0ICAgICAgICAhc3RhdGUuZmluaXNoZWQgJiZcblx0ICAgICAgICAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJlxuXHQgICAgICAgIHN0YXRlLmJ1ZmZlci5sZW5ndGgpXG5cdCAgICAgIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKSB7XG5cdCAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmXG5cdCAgICAgIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmXG5cdCAgICAgIHV0aWwuaXNTdHJpbmcoY2h1bmspKSB7XG5cdCAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTtcblx0ICB9XG5cdCAgcmV0dXJuIGNodW5rO1xuXHR9XG5cdFxuXHQvLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXNcblx0Ly8gaW4gdGhlIHF1ZXVlLCBhbmQgd2FpdCBvdXIgdHVybi4gIE90aGVyd2lzZSwgY2FsbCBfd3JpdGVcblx0Ly8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cblx0ZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgY2h1bmsgPSBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKTtcblx0ICBpZiAodXRpbC5pc0J1ZmZlcihjaHVuaykpXG5cdCAgICBlbmNvZGluZyA9ICdidWZmZXInO1xuXHQgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblx0XG5cdCAgc3RhdGUubGVuZ3RoICs9IGxlbjtcblx0XG5cdCAgdmFyIHJldCA9IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcms7XG5cdCAgLy8gd2UgbXVzdCBlbnN1cmUgdGhhdCBwcmV2aW91cyBuZWVkRHJhaW4gd2lsbCBub3QgYmUgcmVzZXQgdG8gZmFsc2UuXG5cdCAgaWYgKCFyZXQpXG5cdCAgICBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlO1xuXHRcblx0ICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpXG5cdCAgICBzdGF0ZS5idWZmZXIucHVzaChuZXcgV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikpO1xuXHQgIGVsc2Vcblx0ICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG5cdFxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgd3JpdGV2LCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcblx0ICBzdGF0ZS53cml0ZWNiID0gY2I7XG5cdCAgc3RhdGUud3JpdGluZyA9IHRydWU7XG5cdCAgc3RhdGUuc3luYyA9IHRydWU7XG5cdCAgaWYgKHdyaXRldilcblx0ICAgIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtcblx0ICBlbHNlXG5cdCAgICBzdHJlYW0uX3dyaXRlKGNodW5rLCBlbmNvZGluZywgc3RhdGUub253cml0ZSk7XG5cdCAgc3RhdGUuc3luYyA9IGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG5cdCAgaWYgKHN5bmMpXG5cdCAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcblx0ICAgICAgY2IoZXIpO1xuXHQgICAgfSk7XG5cdCAgZWxzZSB7XG5cdCAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcblx0ICAgIGNiKGVyKTtcblx0ICB9XG5cdFxuXHQgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuXHQgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKSB7XG5cdCAgc3RhdGUud3JpdGluZyA9IGZhbHNlO1xuXHQgIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuXHQgIHN0YXRlLmxlbmd0aCAtPSBzdGF0ZS53cml0ZWxlbjtcblx0ICBzdGF0ZS53cml0ZWxlbiA9IDA7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9ud3JpdGUoc3RyZWFtLCBlcikge1xuXHQgIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcblx0ICB2YXIgc3luYyA9IHN0YXRlLnN5bmM7XG5cdCAgdmFyIGNiID0gc3RhdGUud3JpdGVjYjtcblx0XG5cdCAgb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKTtcblx0XG5cdCAgaWYgKGVyKVxuXHQgICAgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7XG5cdCAgZWxzZSB7XG5cdCAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuXHQgICAgdmFyIGZpbmlzaGVkID0gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKTtcblx0XG5cdCAgICBpZiAoIWZpbmlzaGVkICYmXG5cdCAgICAgICAgIXN0YXRlLmNvcmtlZCAmJlxuXHQgICAgICAgICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmXG5cdCAgICAgICAgc3RhdGUuYnVmZmVyLmxlbmd0aCkge1xuXHQgICAgICBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3luYykge1xuXHQgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuXHQgIGlmICghZmluaXNoZWQpXG5cdCAgICBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG5cdCAgc3RhdGUucGVuZGluZ2NiLS07XG5cdCAgY2IoKTtcblx0ICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcblx0fVxuXHRcblx0Ly8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcblx0Ly8gZW1pdCAnZHJhaW4nIGJlZm9yZSB0aGUgd3JpdGUoKSBjb25zdW1lciBnZXRzIHRoZSAnZmFsc2UnIHJldHVyblxuXHQvLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLlxuXHRmdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkge1xuXHQgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUubmVlZERyYWluKSB7XG5cdCAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcblx0ICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpO1xuXHQgIH1cblx0fVxuXHRcblx0XG5cdC8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5cdGZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHtcblx0ICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIHN0YXRlLmJ1ZmZlci5sZW5ndGggPiAxKSB7XG5cdCAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpXG5cdCAgICB2YXIgY2JzID0gW107XG5cdCAgICBmb3IgKHZhciBjID0gMDsgYyA8IHN0YXRlLmJ1ZmZlci5sZW5ndGg7IGMrKylcblx0ICAgICAgY2JzLnB1c2goc3RhdGUuYnVmZmVyW2NdLmNhbGxiYWNrKTtcblx0XG5cdCAgICAvLyBjb3VudCB0aGUgb25lIHdlIGFyZSBhZGRpbmcsIGFzIHdlbGwuXG5cdCAgICAvLyBUT0RPKGlzYWFjcykgY2xlYW4gdGhpcyB1cFxuXHQgICAgc3RhdGUucGVuZGluZ2NiKys7XG5cdCAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHRydWUsIHN0YXRlLmxlbmd0aCwgc3RhdGUuYnVmZmVyLCAnJywgZnVuY3Rpb24oZXJyKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2JzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG5cdCAgICAgICAgY2JzW2ldKGVycik7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIENsZWFyIGJ1ZmZlclxuXHQgICAgc3RhdGUuYnVmZmVyID0gW107XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmVcblx0ICAgIGZvciAodmFyIGMgPSAwOyBjIDwgc3RhdGUuYnVmZmVyLmxlbmd0aDsgYysrKSB7XG5cdCAgICAgIHZhciBlbnRyeSA9IHN0YXRlLmJ1ZmZlcltjXTtcblx0ICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7XG5cdCAgICAgIHZhciBlbmNvZGluZyA9IGVudHJ5LmVuY29kaW5nO1xuXHQgICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjaztcblx0ICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXHRcblx0ICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcblx0XG5cdCAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuXG5cdCAgICAgIC8vIGl0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byB3YWl0IHVudGlsIGl0IGRvZXMuXG5cdCAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHlcblx0ICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uXG5cdCAgICAgIGlmIChzdGF0ZS53cml0aW5nKSB7XG5cdCAgICAgICAgYysrO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGMgPCBzdGF0ZS5idWZmZXIubGVuZ3RoKVxuXHQgICAgICBzdGF0ZS5idWZmZXIgPSBzdGF0ZS5idWZmZXIuc2xpY2UoYyk7XG5cdCAgICBlbHNlXG5cdCAgICAgIHN0YXRlLmJ1ZmZlci5sZW5ndGggPSAwO1xuXHQgIH1cblx0XG5cdCAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xuXHR9XG5cdFxuXHRXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIGNiKG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpO1xuXHRcblx0fTtcblx0XG5cdFdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDtcblx0XG5cdFdyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblx0XG5cdCAgaWYgKHV0aWwuaXNGdW5jdGlvbihjaHVuaykpIHtcblx0ICAgIGNiID0gY2h1bms7XG5cdCAgICBjaHVuayA9IG51bGw7XG5cdCAgICBlbmNvZGluZyA9IG51bGw7XG5cdCAgfSBlbHNlIGlmICh1dGlsLmlzRnVuY3Rpb24oZW5jb2RpbmcpKSB7XG5cdCAgICBjYiA9IGVuY29kaW5nO1xuXHQgICAgZW5jb2RpbmcgPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKCF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGNodW5rKSlcblx0ICAgIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblx0XG5cdCAgLy8gLmVuZCgpIGZ1bGx5IHVuY29ya3Ncblx0ICBpZiAoc3RhdGUuY29ya2VkKSB7XG5cdCAgICBzdGF0ZS5jb3JrZWQgPSAxO1xuXHQgICAgdGhpcy51bmNvcmsoKTtcblx0ICB9XG5cdFxuXHQgIC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy5cblx0ICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpXG5cdCAgICBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpO1xuXHR9O1xuXHRcblx0XG5cdGZ1bmN0aW9uIG5lZWRGaW5pc2goc3RyZWFtLCBzdGF0ZSkge1xuXHQgIHJldHVybiAoc3RhdGUuZW5kaW5nICYmXG5cdCAgICAgICAgICBzdGF0ZS5sZW5ndGggPT09IDAgJiZcblx0ICAgICAgICAgICFzdGF0ZS5maW5pc2hlZCAmJlxuXHQgICAgICAgICAgIXN0YXRlLndyaXRpbmcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkge1xuXHQgIGlmICghc3RhdGUucHJlZmluaXNoZWQpIHtcblx0ICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTtcblx0ICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHtcblx0ICB2YXIgbmVlZCA9IG5lZWRGaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cdCAgaWYgKG5lZWQpIHtcblx0ICAgIGlmIChzdGF0ZS5wZW5kaW5nY2IgPT09IDApIHtcblx0ICAgICAgcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuXHQgICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG5cdCAgICAgIHN0cmVhbS5lbWl0KCdmaW5pc2gnKTtcblx0ICAgIH0gZWxzZVxuXHQgICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cdCAgfVxuXHQgIHJldHVybiBuZWVkO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikge1xuXHQgIHN0YXRlLmVuZGluZyA9IHRydWU7XG5cdCAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG5cdCAgaWYgKGNiKSB7XG5cdCAgICBpZiAoc3RhdGUuZmluaXNoZWQpXG5cdCAgICAgIHByb2Nlc3MubmV4dFRpY2soY2IpO1xuXHQgICAgZWxzZVxuXHQgICAgICBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpO1xuXHQgIH1cblx0ICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0sXG4vKiAzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdHZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KS5CdWZmZXI7XG5cdFxuXHR2YXIgaXNCdWZmZXJFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nXG5cdCAgfHwgZnVuY3Rpb24oZW5jb2RpbmcpIHtcblx0ICAgICAgIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuXHQgICAgICAgICBjYXNlICdoZXgnOiBjYXNlICd1dGY4JzogY2FzZSAndXRmLTgnOiBjYXNlICdhc2NpaSc6IGNhc2UgJ2JpbmFyeSc6IGNhc2UgJ2Jhc2U2NCc6IGNhc2UgJ3VjczInOiBjYXNlICd1Y3MtMic6IGNhc2UgJ3V0ZjE2bGUnOiBjYXNlICd1dGYtMTZsZSc6IGNhc2UgJ3Jhdyc6IHJldHVybiB0cnVlO1xuXHQgICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XG5cdCAgICAgICB9XG5cdCAgICAgfVxuXHRcblx0XG5cdGZ1bmN0aW9uIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKSB7XG5cdCAgaWYgKGVuY29kaW5nICYmICFpc0J1ZmZlckVuY29kaW5nKGVuY29kaW5nKSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZlxuXHQvLyBidWZmZXJzIGludG8gYSBzZXJpZXMgb2YgSlMgc3RyaW5ncyB3aXRob3V0IGJyZWFraW5nIGFwYXJ0IG11bHRpLWJ5dGVcblx0Ly8gY2hhcmFjdGVycy4gQ0VTVS04IGlzIGhhbmRsZWQgYXMgcGFydCBvZiB0aGUgVVRGLTggZW5jb2RpbmcuXG5cdC8vXG5cdC8vIEBUT0RPIEhhbmRsaW5nIGFsbCBlbmNvZGluZ3MgaW5zaWRlIGEgc2luZ2xlIG9iamVjdCBtYWtlcyBpdCB2ZXJ5IGRpZmZpY3VsdFxuXHQvLyB0byByZWFzb24gYWJvdXQgdGhpcyBjb2RlLCBzbyBpdCBzaG91bGQgYmUgc3BsaXQgdXAgaW4gdGhlIGZ1dHVyZS5cblx0Ly8gQFRPRE8gVGhlcmUgc2hvdWxkIGJlIGEgdXRmOC1zdHJpY3QgZW5jb2RpbmcgdGhhdCByZWplY3RzIGludmFsaWQgVVRGLTggY29kZVxuXHQvLyBwb2ludHMgYXMgdXNlZCBieSBDRVNVLTguXG5cdHZhciBTdHJpbmdEZWNvZGVyID0gZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gZnVuY3Rpb24oZW5jb2RpbmcpIHtcblx0ICB0aGlzLmVuY29kaW5nID0gKGVuY29kaW5nIHx8ICd1dGY4JykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9dLywgJycpO1xuXHQgIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKTtcblx0ICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcblx0ICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICAvLyBDRVNVLTggcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDMtYnl0ZXNcblx0ICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICd1Y3MyJzpcblx0ICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgICAvLyBVVEYtMTYgcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDItYnl0ZXNcblx0ICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMjtcblx0ICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLlxuXHQgICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzO1xuXHQgICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXI7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgdGhpcy53cml0ZSA9IHBhc3NUaHJvdWdoV3JpdGU7XG5cdCAgICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIEVub3VnaCBzcGFjZSB0byBzdG9yZSBhbGwgYnl0ZXMgb2YgYSBzaW5nbGUgY2hhcmFjdGVyLiBVVEYtOCBuZWVkcyA0XG5cdCAgLy8gYnl0ZXMsIGJ1dCBDRVNVLTggbWF5IHJlcXVpcmUgdXAgdG8gNiAoMyBieXRlcyBwZXIgc3Vycm9nYXRlKS5cblx0ICB0aGlzLmNoYXJCdWZmZXIgPSBuZXcgQnVmZmVyKDYpO1xuXHQgIC8vIE51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci5cblx0ICB0aGlzLmNoYXJSZWNlaXZlZCA9IDA7XG5cdCAgLy8gTnVtYmVyIG9mIGJ5dGVzIGV4cGVjdGVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLlxuXHQgIHRoaXMuY2hhckxlbmd0aCA9IDA7XG5cdH07XG5cdFxuXHRcblx0Ly8gd3JpdGUgZGVjb2RlcyB0aGUgZ2l2ZW4gYnVmZmVyIGFuZCByZXR1cm5zIGl0IGFzIEpTIHN0cmluZyB0aGF0IGlzXG5cdC8vIGd1YXJhbnRlZWQgdG8gbm90IGNvbnRhaW4gYW55IHBhcnRpYWwgbXVsdGktYnl0ZSBjaGFyYWN0ZXJzLiBBbnkgcGFydGlhbFxuXHQvLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZVxuXHQvLyByZXR1cm5lZCB3aGVuIGNhbGxpbmcgd3JpdGUgYWdhaW4gd2l0aCB0aGUgcmVtYWluaW5nIGJ5dGVzLlxuXHQvL1xuXHQvLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZ1xuXHQvLyBjdXJyZW50bHkgd29ya3MsIGJ1dCBjb252ZXJ0aW5nIGEgU3RyaW5nIHRvIGEgQnVmZmVyICh2aWEgYG5ldyBCdWZmZXJgLCBvclxuXHQvLyBCdWZmZXIjd3JpdGUpIHdpbGwgcmVwbGFjZSBpbmNvbXBsZXRlIHN1cnJvZ2F0ZXMgd2l0aCB0aGUgdW5pY29kZVxuXHQvLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLlxuXHRTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHQgIHZhciBjaGFyU3RyID0gJyc7XG5cdCAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXJcblx0ICB3aGlsZSAodGhpcy5jaGFyTGVuZ3RoKSB7XG5cdCAgICAvLyBkZXRlcm1pbmUgaG93IG1hbnkgcmVtYWluaW5nIGJ5dGVzIHRoaXMgYnVmZmVyIGhhcyB0byBvZmZlciBmb3IgdGhpcyBjaGFyXG5cdCAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID9cblx0ICAgICAgICB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCA6XG5cdCAgICAgICAgYnVmZmVyLmxlbmd0aDtcblx0XG5cdCAgICAvLyBhZGQgdGhlIG5ldyBieXRlcyB0byB0aGUgY2hhciBidWZmZXJcblx0ICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgdGhpcy5jaGFyUmVjZWl2ZWQsIDAsIGF2YWlsYWJsZSk7XG5cdCAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBhdmFpbGFibGU7XG5cdFxuXHQgICAgaWYgKHRoaXMuY2hhclJlY2VpdmVkIDwgdGhpcy5jaGFyTGVuZ3RoKSB7XG5cdCAgICAgIC8vIHN0aWxsIG5vdCBlbm91Z2ggY2hhcnMgaW4gdGhpcyBidWZmZXI/IHdhaXQgZm9yIG1vcmUgLi4uXG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0XG5cdCAgICAvLyByZW1vdmUgYnl0ZXMgYmVsb25naW5nIHRvIHRoZSBjdXJyZW50IGNoYXJhY3RlciBmcm9tIHRoZSBidWZmZXJcblx0ICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShhdmFpbGFibGUsIGJ1ZmZlci5sZW5ndGgpO1xuXHRcblx0ICAgIC8vIGdldCB0aGUgY2hhcmFjdGVyIHRoYXQgd2FzIHNwbGl0XG5cdCAgICBjaGFyU3RyID0gdGhpcy5jaGFyQnVmZmVyLnNsaWNlKDAsIHRoaXMuY2hhckxlbmd0aCkudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7XG5cdFxuXHQgICAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlclxuXHQgICAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGNoYXJTdHIubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikge1xuXHQgICAgICB0aGlzLmNoYXJMZW5ndGggKz0gdGhpcy5zdXJyb2dhdGVTaXplO1xuXHQgICAgICBjaGFyU3RyID0gJyc7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgdGhpcy5jaGFyUmVjZWl2ZWQgPSB0aGlzLmNoYXJMZW5ndGggPSAwO1xuXHRcblx0ICAgIC8vIGlmIHRoZXJlIGFyZSBubyBtb3JlIGJ5dGVzIGluIHRoaXMgYnVmZmVyLCBqdXN0IGVtaXQgb3VyIGNoYXJcblx0ICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgIHJldHVybiBjaGFyU3RyO1xuXHQgICAgfVxuXHQgICAgYnJlYWs7XG5cdCAgfVxuXHRcblx0ICAvLyBkZXRlcm1pbmUgYW5kIHNldCBjaGFyTGVuZ3RoIC8gY2hhclJlY2VpdmVkXG5cdCAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpO1xuXHRcblx0ICB2YXIgZW5kID0gYnVmZmVyLmxlbmd0aDtcblx0ICBpZiAodGhpcy5jaGFyTGVuZ3RoKSB7XG5cdCAgICAvLyBidWZmZXIgdGhlIGluY29tcGxldGUgY2hhcmFjdGVyIGJ5dGVzIHdlIGdvdFxuXHQgICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCBidWZmZXIubGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQsIGVuZCk7XG5cdCAgICBlbmQgLT0gdGhpcy5jaGFyUmVjZWl2ZWQ7XG5cdCAgfVxuXHRcblx0ICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpO1xuXHRcblx0ICB2YXIgZW5kID0gY2hhclN0ci5sZW5ndGggLSAxO1xuXHQgIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChlbmQpO1xuXHQgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXJcblx0ICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikge1xuXHQgICAgdmFyIHNpemUgPSB0aGlzLnN1cnJvZ2F0ZVNpemU7XG5cdCAgICB0aGlzLmNoYXJMZW5ndGggKz0gc2l6ZTtcblx0ICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IHNpemU7XG5cdCAgICB0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHNpemUsIDAsIHNpemUpO1xuXHQgICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCAwLCBzaXplKTtcblx0ICAgIHJldHVybiBjaGFyU3RyLnN1YnN0cmluZygwLCBlbmQpO1xuXHQgIH1cblx0XG5cdCAgLy8gb3IganVzdCBlbWl0IHRoZSBjaGFyU3RyXG5cdCAgcmV0dXJuIGNoYXJTdHI7XG5cdH07XG5cdFxuXHQvLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0XG5cdC8vIHRoZSBlbmQgb2YgdGhlIGdpdmVuIGJ1ZmZlci4gSWYgc28sIGl0IHNldHMgdGhpcy5jaGFyTGVuZ3RoIHRvIHRoZSBieXRlXG5cdC8vIGxlbmd0aCB0aGF0IGNoYXJhY3RlciwgYW5kIHNldHMgdGhpcy5jaGFyUmVjZWl2ZWQgdG8gdGhlIG51bWJlciBvZiBieXRlc1xuXHQvLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLlxuXHRTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHQgIC8vIGRldGVybWluZSBob3cgbWFueSBieXRlcyB3ZSBoYXZlIHRvIGNoZWNrIGF0IHRoZSBlbmQgb2YgdGhpcyBidWZmZXJcblx0ICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7XG5cdFxuXHQgIC8vIEZpZ3VyZSBvdXQgaWYgb25lIG9mIHRoZSBsYXN0IGkgYnl0ZXMgb2Ygb3VyIGJ1ZmZlciBhbm5vdW5jZXMgYW5cblx0ICAvLyBpbmNvbXBsZXRlIGNoYXIuXG5cdCAgZm9yICg7IGkgPiAwOyBpLS0pIHtcblx0ICAgIHZhciBjID0gYnVmZmVyW2J1ZmZlci5sZW5ndGggLSBpXTtcblx0XG5cdCAgICAvLyBTZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VVEYtOCNEZXNjcmlwdGlvblxuXHRcblx0ICAgIC8vIDExMFhYWFhYXG5cdCAgICBpZiAoaSA9PSAxICYmIGMgPj4gNSA9PSAweDA2KSB7XG5cdCAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDI7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIDExMTBYWFhYXG5cdCAgICBpZiAoaSA8PSAyICYmIGMgPj4gNCA9PSAweDBFKSB7XG5cdCAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDM7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIDExMTEwWFhYXG5cdCAgICBpZiAoaSA8PSAzICYmIGMgPj4gMyA9PSAweDFFKSB7XG5cdCAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDQ7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgIH1cblx0ICB0aGlzLmNoYXJSZWNlaXZlZCA9IGk7XG5cdH07XG5cdFxuXHRTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHtcblx0ICB2YXIgcmVzID0gJyc7XG5cdCAgaWYgKGJ1ZmZlciAmJiBidWZmZXIubGVuZ3RoKVxuXHQgICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpO1xuXHRcblx0ICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQpIHtcblx0ICAgIHZhciBjciA9IHRoaXMuY2hhclJlY2VpdmVkO1xuXHQgICAgdmFyIGJ1ZiA9IHRoaXMuY2hhckJ1ZmZlcjtcblx0ICAgIHZhciBlbmMgPSB0aGlzLmVuY29kaW5nO1xuXHQgICAgcmVzICs9IGJ1Zi5zbGljZSgwLCBjcikudG9TdHJpbmcoZW5jKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXM7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikge1xuXHQgIHJldHVybiBidWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7XG5cdCAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMjtcblx0ICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDIgOiAwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHtcblx0ICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAzO1xuXHQgIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMyA6IDA7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHRcblx0Ly8gYSB0cmFuc2Zvcm0gc3RyZWFtIGlzIGEgcmVhZGFibGUvd3JpdGFibGUgc3RyZWFtIHdoZXJlIHlvdSBkb1xuXHQvLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhIFwiZmlsdGVyXCIsXG5cdC8vIGJ1dCB0aGF0J3Mgbm90IGEgZ3JlYXQgbmFtZSBmb3IgaXQsIHNpbmNlIHRoYXQgaW1wbGllcyBhIHRoaW5nIHdoZXJlXG5cdC8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGRcblx0Ly8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKVxuXHQvL1xuXHQvLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhXG5cdC8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLFxuXHQvLyBhIHpsaWIgc3RyZWFtIG1pZ2h0IHRha2UgbXVsdGlwbGUgcGxhaW4tdGV4dCB3cml0ZXMoKSwgYW5kIHRoZW5cblx0Ly8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLlxuXHQvL1xuXHQvLyBIZXJlJ3MgaG93IHRoaXMgd29ya3M6XG5cdC8vXG5cdC8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZVxuXHQvLyBzdHJlYW0gY2xhc3Nlcy4gIFdoZW4geW91IHdyaXRlKGNodW5rKSwgdGhhdCBjYWxscyBfd3JpdGUoY2h1bmssY2IpXG5cdC8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXNcblx0Ly8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbFxuXHQvLyB0aGVyZSdzIGVub3VnaCBwZW5kaW5nIHJlYWRhYmxlIGRhdGEgYnVmZmVyZWQgdXAuXG5cdC8vXG5cdC8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuXG5cdC8vIF9yZWFkKG4pIGlzIGNhbGxlZCwgaXQgdHJhbnNmb3JtcyB0aGUgcXVldWVkIHVwIGRhdGEsIGNhbGxpbmcgdGhlXG5cdC8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZVxuXHQvLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdFxuXHQvLyBvdXRwdXR0ZWQgYml0IGNhbGxzIHRoZSByZWFkY2IsIGFuZCBzdWJzZXF1ZW50IGNodW5rcyBqdXN0IGdvIGludG9cblx0Ly8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LlxuXHQvL1xuXHQvLyBUaGlzIHdheSwgYmFjay1wcmVzc3VyZSBpcyBhY3R1YWxseSBkZXRlcm1pbmVkIGJ5IHRoZSByZWFkaW5nIHNpZGUsXG5cdC8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsXG5cdC8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmdcblx0Ly8gaGVyZS4gIEZvciBleGFtcGxlLCBpbWFnaW5lIGEgc3RyZWFtIHdoZXJlIGV2ZXJ5IGJ5dGUgb2YgaW5wdXQgaXNcblx0Ly8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueVxuXHQvLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluXG5cdC8vIDFrYiBvZiBkYXRhIGJlaW5nIG91dHB1dC4gIEluIHRoaXMgY2FzZSwgeW91IGNvdWxkIHdyaXRlIGEgdmVyeSBzbWFsbFxuXHQvLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluXG5cdC8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbFxuXHQvLyB0aGUgc3lzdGVtIHRvIHN0b3AgZG9pbmcgdGhlIHRyYW5zZm9ybS4gIEEgc2luZ2xlIDRNQiB3cml0ZSBjb3VsZFxuXHQvLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LlxuXHQvL1xuXHQvLyBIb3dldmVyLCBldmVuIGluIHN1Y2ggYSBwYXRob2xvZ2ljYWwgY2FzZSwgb25seSBhIHNpbmdsZSB3cml0dGVuIGNodW5rXG5cdC8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWxcblx0Ly8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFRyYW5zZm9ybTtcblx0XG5cdHZhciBEdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHR1dGlsLmluaGVyaXRzKFRyYW5zZm9ybSwgRHVwbGV4KTtcblx0XG5cdFxuXHRmdW5jdGlvbiBUcmFuc2Zvcm1TdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcblx0ICB0aGlzLmFmdGVyVHJhbnNmb3JtID0gZnVuY3Rpb24oZXIsIGRhdGEpIHtcblx0ICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTtcblx0ICB9O1xuXHRcblx0ICB0aGlzLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcblx0ICB0aGlzLnRyYW5zZm9ybWluZyA9IGZhbHNlO1xuXHQgIHRoaXMud3JpdGVjYiA9IG51bGw7XG5cdCAgdGhpcy53cml0ZWNodW5rID0gbnVsbDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkge1xuXHQgIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG5cdCAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7XG5cdFxuXHQgIHZhciBjYiA9IHRzLndyaXRlY2I7XG5cdFxuXHQgIGlmICghY2IpXG5cdCAgICByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdubyB3cml0ZWNiIGluIFRyYW5zZm9ybSBjbGFzcycpKTtcblx0XG5cdCAgdHMud3JpdGVjaHVuayA9IG51bGw7XG5cdCAgdHMud3JpdGVjYiA9IG51bGw7XG5cdFxuXHQgIGlmICghdXRpbC5pc051bGxPclVuZGVmaW5lZChkYXRhKSlcblx0ICAgIHN0cmVhbS5wdXNoKGRhdGEpO1xuXHRcblx0ICBpZiAoY2IpXG5cdCAgICBjYihlcik7XG5cdFxuXHQgIHZhciBycyA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcblx0ICBycy5yZWFkaW5nID0gZmFsc2U7XG5cdCAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7XG5cdCAgICBzdHJlYW0uX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG5cdCAgfVxuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gVHJhbnNmb3JtKG9wdGlvbnMpIHtcblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSlcblx0ICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKG9wdGlvbnMpO1xuXHRcblx0ICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0XG5cdCAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSBuZXcgVHJhbnNmb3JtU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cdFxuXHQgIC8vIHdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy5cblx0ICB2YXIgc3RyZWFtID0gdGhpcztcblx0XG5cdCAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuXG5cdCAgdGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXHRcblx0ICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3Ncblx0ICAvLyB0aGF0IFJlYWRhYmxlIHdhbnRzIGJlZm9yZSB0aGUgZmlyc3QgX3JlYWQgY2FsbCwgc28gdW5zZXQgdGhlXG5cdCAgLy8gc3luYyBndWFyZCBmbGFnLlxuXHQgIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlO1xuXHRcblx0ICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgaWYgKHV0aWwuaXNGdW5jdGlvbih0aGlzLl9mbHVzaCkpXG5cdCAgICAgIHRoaXMuX2ZsdXNoKGZ1bmN0aW9uKGVyKSB7XG5cdCAgICAgICAgZG9uZShzdHJlYW0sIGVyKTtcblx0ICAgICAgfSk7XG5cdCAgICBlbHNlXG5cdCAgICAgIGRvbmUoc3RyZWFtKTtcblx0ICB9KTtcblx0fVxuXHRcblx0VHJhbnNmb3JtLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nKSB7XG5cdCAgdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuXHQgIHJldHVybiBEdXBsZXgucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBjaHVuaywgZW5jb2RpbmcpO1xuXHR9O1xuXHRcblx0Ly8gVGhpcyBpcyB0aGUgcGFydCB3aGVyZSB5b3UgZG8gc3R1ZmYhXG5cdC8vIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gaW4gaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cblx0Ly8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay5cblx0Ly9cblx0Ly8gQ2FsbCBgcHVzaChuZXdDaHVuaylgIHRvIHBhc3MgYWxvbmcgdHJhbnNmb3JtZWQgb3V0cHV0XG5cdC8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuXG5cdC8vXG5cdC8vIENhbGwgYGNiKGVycilgIHdoZW4geW91IGFyZSBkb25lIHdpdGggdGhpcyBjaHVuay4gIElmIHlvdSBwYXNzXG5cdC8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3Vcblx0Ly8gbmV2ZXIgY2FsbCBjYigpLCB0aGVuIHlvdSdsbCBuZXZlciBnZXQgYW5vdGhlciBjaHVuay5cblx0VHJhbnNmb3JtLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHQgIHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJyk7XG5cdH07XG5cdFxuXHRUcmFuc2Zvcm0ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0ICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcblx0ICB0cy53cml0ZWNiID0gY2I7XG5cdCAgdHMud3JpdGVjaHVuayA9IGNodW5rO1xuXHQgIHRzLndyaXRlZW5jb2RpbmcgPSBlbmNvZGluZztcblx0ICBpZiAoIXRzLnRyYW5zZm9ybWluZykge1xuXHQgICAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblx0ICAgIGlmICh0cy5uZWVkVHJhbnNmb3JtIHx8XG5cdCAgICAgICAgcnMubmVlZFJlYWRhYmxlIHx8XG5cdCAgICAgICAgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaylcblx0ICAgICAgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBEb2Vzbid0IG1hdHRlciB3aGF0IHRoZSBhcmdzIGFyZSBoZXJlLlxuXHQvLyBfdHJhbnNmb3JtIGRvZXMgYWxsIHRoZSB3b3JrLlxuXHQvLyBUaGF0IHdlIGdvdCBoZXJlIG1lYW5zIHRoYXQgdGhlIHJlYWRhYmxlIHNpZGUgd2FudHMgbW9yZSBkYXRhLlxuXHRUcmFuc2Zvcm0ucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24obikge1xuXHQgIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuXHRcblx0ICBpZiAoIXV0aWwuaXNOdWxsKHRzLndyaXRlY2h1bmspICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykge1xuXHQgICAgdHMudHJhbnNmb3JtaW5nID0gdHJ1ZTtcblx0ICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIG1hcmsgdGhhdCB3ZSBuZWVkIGEgdHJhbnNmb3JtLCBzbyB0aGF0IGFueSBkYXRhIHRoYXQgY29tZXMgaW5cblx0ICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LlxuXHQgICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7XG5cdCAgfVxuXHR9O1xuXHRcblx0XG5cdGZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlcikge1xuXHQgIGlmIChlcilcblx0ICAgIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cdFxuXHQgIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnNcblx0ICAvLyB0aGF0IG5vdGhpbmcgbW9yZSB3aWxsIGV2ZXIgYmUgcHJvdmlkZWRcblx0ICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG5cdCAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTtcblx0XG5cdCAgaWYgKHdzLmxlbmd0aClcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7XG5cdFxuXHQgIGlmICh0cy50cmFuc2Zvcm1pbmcpXG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTtcblx0XG5cdCAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0Ly8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uXG5cdC8vIGJhc2ljYWxseSBqdXN0IHRoZSBtb3N0IG1pbmltYWwgc29ydCBvZiBUcmFuc2Zvcm0gc3RyZWFtLlxuXHQvLyBFdmVyeSB3cml0dGVuIGNodW5rIGdldHMgb3V0cHV0IGFzLWlzLlxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBQYXNzVGhyb3VnaDtcblx0XG5cdHZhciBUcmFuc2Zvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdC8qPHJlcGxhY2VtZW50PiovXG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0Lyo8L3JlcGxhY2VtZW50PiovXG5cdFxuXHR1dGlsLmluaGVyaXRzKFBhc3NUaHJvdWdoLCBUcmFuc2Zvcm0pO1xuXHRcblx0ZnVuY3Rpb24gUGFzc1Rocm91Z2gob3B0aW9ucykge1xuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpXG5cdCAgICByZXR1cm4gbmV3IFBhc3NUaHJvdWdoKG9wdGlvbnMpO1xuXHRcblx0ICBUcmFuc2Zvcm0uY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0fVxuXHRcblx0UGFzc1Rocm91Z2gucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG5cdCAgY2IobnVsbCwgY2h1bmspO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKVxuXG5cbi8qKiovIH0sXG4vKiAzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKVxuXG5cbi8qKiovIH0sXG4vKiAzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KVxuXG5cbi8qKiovIH0sXG4vKiA0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KVxuXG5cbi8qKiovIH0sXG4vKiA0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsvKlxuXHQgKiBleHRzcHJpbnRmLmpzOiBleHRlbmRlZCBQT1NJWC1zdHlsZSBzcHJpbnRmXG5cdCAqL1xuXHRcblx0dmFyIG1vZF9hc3NlcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0dmFyIG1vZF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHQvKlxuXHQgKiBQdWJsaWMgaW50ZXJmYWNlXG5cdCAqL1xuXHRleHBvcnRzLnNwcmludGYgPSBqc1NwcmludGY7XG5cdGV4cG9ydHMucHJpbnRmID0ganNQcmludGY7XG5cdGV4cG9ydHMuZnByaW50ZiA9IGpzRnByaW50Zjtcblx0XG5cdC8qXG5cdCAqIFN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiBzW25dcHJpbnRmKDNjKS4gIFdlIG1ha2UgYSBiZXN0IGVmZm9ydCB0byB0aHJvdyBhblxuXHQgKiBleGNlcHRpb24gd2hlbiBnaXZlbiBhIGZvcm1hdCBzdHJpbmcgd2UgZG9uJ3QgdW5kZXJzdGFuZCwgcmF0aGVyIHRoYW5cblx0ICogaWdub3JpbmcgaXQsIHNvIHRoYXQgd2Ugd29uJ3QgYnJlYWsgZXhpc3RpbmcgcHJvZ3JhbXMgaWYvd2hlbiB3ZSBnbyBpbXBsZW1lbnRcblx0ICogdGhlIHJlc3Qgb2YgdGhpcy5cblx0ICpcblx0ICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjdXJyZW50bHkgc3VwcG9ydHMgc3BlY2lmeWluZ1xuXHQgKlx0LSBmaWVsZCBhbGlnbm1lbnQgKCctJyBmbGFnKSxcblx0ICogXHQtIHplcm8tcGFkICgnMCcgZmxhZylcblx0ICpcdC0gYWx3YXlzIHNob3cgbnVtZXJpYyBzaWduICgnKycgZmxhZyksXG5cdCAqXHQtIGZpZWxkIHdpZHRoXG5cdCAqXHQtIGNvbnZlcnNpb25zIGZvciBzdHJpbmdzLCBkZWNpbWFsIGludGVnZXJzLCBhbmQgZmxvYXRzIChudW1iZXJzKS5cblx0ICpcdC0gYXJndW1lbnQgc2l6ZSBzcGVjaWZpZXJzLiAgVGhlc2UgYXJlIGFsbCBhY2NlcHRlZCBidXQgaWdub3JlZCwgc2luY2Vcblx0ICpcdCAgSmF2YXNjcmlwdCBoYXMgbm8gbm90aW9uIG9mIHRoZSBwaHlzaWNhbCBzaXplIG9mIGFuIGFyZ3VtZW50LlxuXHQgKlxuXHQgKiBFdmVyeXRoaW5nIGVsc2UgaXMgY3VycmVudGx5IHVuc3VwcG9ydGVkLCBtb3N0IG5vdGFibHkgcHJlY2lzaW9uLCB1bnNpZ25lZFxuXHQgKiBudW1iZXJzLCBub24tZGVjaW1hbCBudW1iZXJzLCBhbmQgY2hhcmFjdGVycy5cblx0ICovXG5cdGZ1bmN0aW9uIGpzU3ByaW50ZihmbXQpXG5cdHtcblx0XHR2YXIgcmVnZXggPSBbXG5cdFx0ICAgICcoW14lXSopJyxcdFx0XHRcdC8qIG5vcm1hbCB0ZXh0ICovXG5cdFx0ICAgICclJyxcdFx0XHRcdC8qIHN0YXJ0IG9mIGZvcm1hdCAqL1xuXHRcdCAgICAnKFtcXCdcXFxcLSsgIzBdKj8pJyxcdFx0XHQvKiBmbGFncyAob3B0aW9uYWwpICovXG5cdFx0ICAgICcoWzEtOV1cXFxcZCopPycsXHRcdFx0Lyogd2lkdGggKG9wdGlvbmFsKSAqL1xuXHRcdCAgICAnKFxcXFwuKFsxLTldXFxcXGQqKSk/JyxcdFx0LyogcHJlY2lzaW9uIChvcHRpb25hbCkgKi9cblx0XHQgICAgJ1tsaGp6dExdKj8nLFx0XHRcdC8qIGxlbmd0aCBtb2RzIChpZ25vcmVkKSAqL1xuXHRcdCAgICAnKFtkaW91eFhmRmVFZ0dhQWNDc1NwJWpyXSknXHQvKiBjb252ZXJzaW9uICovXG5cdFx0XS5qb2luKCcnKTtcblx0XG5cdFx0dmFyIHJlID0gbmV3IFJlZ0V4cChyZWdleCk7XG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRcdHZhciBmbGFncywgd2lkdGgsIHByZWNpc2lvbiwgY29udmVyc2lvbjtcblx0XHR2YXIgbGVmdCwgcGFkLCBzaWduLCBhcmcsIG1hdGNoO1xuXHRcdHZhciByZXQgPSAnJztcblx0XHR2YXIgYXJnbiA9IDE7XG5cdFxuXHRcdG1vZF9hc3NlcnQuZXF1YWwoJ3N0cmluZycsIHR5cGVvZiAoZm10KSk7XG5cdFxuXHRcdHdoaWxlICgobWF0Y2ggPSByZS5leGVjKGZtdCkpICE9PSBudWxsKSB7XG5cdFx0XHRyZXQgKz0gbWF0Y2hbMV07XG5cdFx0XHRmbXQgPSBmbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG5cdFxuXHRcdFx0ZmxhZ3MgPSBtYXRjaFsyXSB8fCAnJztcblx0XHRcdHdpZHRoID0gbWF0Y2hbM10gfHwgMDtcblx0XHRcdHByZWNpc2lvbiA9IG1hdGNoWzRdIHx8ICcnO1xuXHRcdFx0Y29udmVyc2lvbiA9IG1hdGNoWzZdO1xuXHRcdFx0bGVmdCA9IGZhbHNlO1xuXHRcdFx0c2lnbiA9IGZhbHNlO1xuXHRcdFx0cGFkID0gJyAnO1xuXHRcblx0XHRcdGlmIChjb252ZXJzaW9uID09ICclJykge1xuXHRcdFx0XHRyZXQgKz0gJyUnO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoYXJncy5sZW5ndGggPT09IDApXG5cdFx0XHRcdHRocm93IChuZXcgRXJyb3IoJ3RvbyBmZXcgYXJncyB0byBzcHJpbnRmJykpO1xuXHRcblx0XHRcdGFyZyA9IGFyZ3Muc2hpZnQoKTtcblx0XHRcdGFyZ24rKztcblx0XG5cdFx0XHRpZiAoZmxhZ3MubWF0Y2goL1tcXCcgI10vKSlcblx0XHRcdFx0dGhyb3cgKG5ldyBFcnJvcihcblx0XHRcdFx0ICAgICd1bnN1cHBvcnRlZCBmbGFnczogJyArIGZsYWdzKSk7XG5cdFxuXHRcdFx0aWYgKHByZWNpc2lvbi5sZW5ndGggPiAwKVxuXHRcdFx0XHR0aHJvdyAobmV3IEVycm9yKFxuXHRcdFx0XHQgICAgJ25vbi16ZXJvIHByZWNpc2lvbiBub3Qgc3VwcG9ydGVkJykpO1xuXHRcblx0XHRcdGlmIChmbGFncy5tYXRjaCgvLS8pKVxuXHRcdFx0XHRsZWZ0ID0gdHJ1ZTtcblx0XG5cdFx0XHRpZiAoZmxhZ3MubWF0Y2goLzAvKSlcblx0XHRcdFx0cGFkID0gJzAnO1xuXHRcblx0XHRcdGlmIChmbGFncy5tYXRjaCgvXFwrLykpXG5cdFx0XHRcdHNpZ24gPSB0cnVlO1xuXHRcblx0XHRcdHN3aXRjaCAoY29udmVyc2lvbikge1xuXHRcdFx0Y2FzZSAncyc6XG5cdFx0XHRcdGlmIChhcmcgPT09IHVuZGVmaW5lZCB8fCBhcmcgPT09IG51bGwpXG5cdFx0XHRcdFx0dGhyb3cgKG5ldyBFcnJvcignYXJndW1lbnQgJyArIGFyZ24gK1xuXHRcdFx0XHRcdCAgICAnOiBhdHRlbXB0ZWQgdG8gcHJpbnQgdW5kZWZpbmVkIG9yIG51bGwgJyArXG5cdFx0XHRcdFx0ICAgICdhcyBhIHN0cmluZycpKTtcblx0XHRcdFx0cmV0ICs9IGRvUGFkKHBhZCwgd2lkdGgsIGxlZnQsIGFyZy50b1N0cmluZygpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFxuXHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRcdGFyZyA9IE1hdGguZmxvb3IoYXJnKTtcblx0XHRcdFx0Lypqc2w6ZmFsbHRocnUqL1xuXHRcdFx0Y2FzZSAnZic6XG5cdFx0XHRcdHNpZ24gPSBzaWduICYmIGFyZyA+IDAgPyAnKycgOiAnJztcblx0XHRcdFx0cmV0ICs9IHNpZ24gKyBkb1BhZChwYWQsIHdpZHRoLCBsZWZ0LFxuXHRcdFx0XHQgICAgYXJnLnRvU3RyaW5nKCkpO1xuXHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRjYXNlICd4Jzpcblx0XHRcdFx0cmV0ICs9IGRvUGFkKHBhZCwgd2lkdGgsIGxlZnQsIGFyZy50b1N0cmluZygxNikpO1xuXHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRjYXNlICdqJzogLyogbm9uLXN0YW5kYXJkICovXG5cdFx0XHRcdGlmICh3aWR0aCA9PT0gMClcblx0XHRcdFx0XHR3aWR0aCA9IDEwO1xuXHRcdFx0XHRyZXQgKz0gbW9kX3V0aWwuaW5zcGVjdChhcmcsIGZhbHNlLCB3aWR0aCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcblx0XHRcdGNhc2UgJ3InOiAvKiBub24tc3RhbmRhcmQgKi9cblx0XHRcdFx0cmV0ICs9IGR1bXBFeGNlcHRpb24oYXJnKTtcblx0XHRcdFx0YnJlYWs7XG5cdFxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgKG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgY29udmVyc2lvbjogJyArXG5cdFx0XHRcdCAgICBjb252ZXJzaW9uKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXQgKz0gZm10O1xuXHRcdHJldHVybiAocmV0KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24ganNQcmludGYoKSB7XG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRcdGFyZ3MudW5zaGlmdChwcm9jZXNzLnN0ZG91dCk7XG5cdFx0anNGcHJpbnRmLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBqc0ZwcmludGYoc3RyZWFtKSB7XG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRcdHJldHVybiAoc3RyZWFtLndyaXRlKGpzU3ByaW50Zi5hcHBseSh0aGlzLCBhcmdzKSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkb1BhZChjaHIsIHdpZHRoLCBsZWZ0LCBzdHIpXG5cdHtcblx0XHR2YXIgcmV0ID0gc3RyO1xuXHRcblx0XHR3aGlsZSAocmV0Lmxlbmd0aCA8IHdpZHRoKSB7XG5cdFx0XHRpZiAobGVmdClcblx0XHRcdFx0cmV0ICs9IGNocjtcblx0XHRcdGVsc2Vcblx0XHRcdFx0cmV0ID0gY2hyICsgcmV0O1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIChyZXQpO1xuXHR9XG5cdFxuXHQvKlxuXHQgKiBUaGlzIGZ1bmN0aW9uIGR1bXBzIGxvbmcgc3RhY2sgdHJhY2VzIGZvciBleGNlcHRpb25zIGhhdmluZyBhIGNhdXNlKCkgbWV0aG9kLlxuXHQgKiBTZWUgbm9kZS12ZXJyb3IgZm9yIGFuIGV4YW1wbGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBkdW1wRXhjZXB0aW9uKGV4KVxuXHR7XG5cdFx0dmFyIHJldDtcblx0XG5cdFx0aWYgKCEoZXggaW5zdGFuY2VvZiBFcnJvcikpXG5cdFx0XHR0aHJvdyAobmV3IEVycm9yKGpzU3ByaW50ZignaW52YWxpZCB0eXBlIGZvciAlJXI6ICVqJywgZXgpKSk7XG5cdFxuXHRcdC8qIE5vdGUgdGhhdCBWOCBwcmVwZW5kcyBcImV4LnN0YWNrXCIgd2l0aCBleC50b1N0cmluZygpLiAqL1xuXHRcdHJldCA9ICdFWENFUFRJT046ICcgKyBleC5jb25zdHJ1Y3Rvci5uYW1lICsgJzogJyArIGV4LnN0YWNrO1xuXHRcblx0XHRpZiAoZXguY2F1c2UgJiYgdHlwZW9mIChleC5jYXVzZSkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHZhciBjZXggPSBleC5jYXVzZSgpO1xuXHRcdFx0aWYgKGNleCkge1xuXHRcdFx0XHRyZXQgKz0gJ1xcbkNhdXNlZCBieTogJyArIGR1bXBFeGNlcHRpb24oY2V4KTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiAocmV0KTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTgpKSlcblxuLyoqKi8gfSxcbi8qIDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oQnVmZmVyKSB7Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdC8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuXHQvLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblx0XG5cdGZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkpIHtcblx0ICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7XG5cdCAgfVxuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xuXHR9XG5cdGV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cdFxuXHRmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJztcblx0fVxuXHRleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXHRcblx0ZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PSBudWxsO1xuXHR9XG5cdGV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcblx0fVxuXHRleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cdFxuXHRmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG5cdH1cblx0ZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXHRcblx0ZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xuXHR9XG5cdGV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDtcblx0XG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IHZvaWQgMDtcblx0fVxuXHRleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xuXHR9XG5cdGV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG5cdH1cblx0ZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXHRcblx0ZnVuY3Rpb24gaXNEYXRlKGQpIHtcblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcblx0fVxuXHRleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblx0XG5cdGZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuXHQgIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcblx0fVxuXHRleHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXHRcblx0ZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXHRcblx0ZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcblx0ICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG5cdH1cblx0ZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXHRcblx0ZXhwb3J0cy5pc0J1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcjtcblx0XG5cdGZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNCkuQnVmZmVyKSlcblxuLyoqKi8gfSxcbi8qIDQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzbEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yID0gZnVuY3Rpb24gKF9EaXNsRXJyb3IpIHtcblx0ICBfaW5oZXJpdHMoQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDaXJjdWxhckRlcGVuZGVuY3lFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENpcmN1bGFyRGVwZW5kZW5jeUVycm9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IsIG51bGwsIFt7XG5cdCAgICBrZXk6ICdjcmVhdGVFcnJvcicsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBzZXJ2aWNlc1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtDaXJjdWxhckRlcGVuZGVuY3lFcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKHNlcnZpY2VzKSB7XG5cdCAgICAgIGlmICghKEFycmF5LmlzQXJyYXkoc2VydmljZXMpICYmIHNlcnZpY2VzLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJztcblx0ICAgICAgfSkpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJzZXJ2aWNlc1wiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkFycmF5PHN0cmluZz5cXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KHNlcnZpY2VzKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBwYXRoID0gW10uY29uY2F0KHNlcnZpY2VzKS5yZXZlcnNlKCkuam9pbignIDwtICcpO1xuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcih7XG5cdCAgICAgICAgc2VydmljZXM6IHNlcnZpY2VzXG5cdCAgICAgIH0sICdDaXJjdWxhciBkZXBlbmRlbmN5IGZvdW5kOiAlcycsIHBhdGgpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciA9IGZ1bmN0aW9uIChfRGlzbEVycm9yKSB7XG5cdCAgX2luaGVyaXRzKEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yLCBudWxsLCBbe1xuXHQgICAga2V5OiAnY3JlYXRlRXJyb3InLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge0ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoaWRlbnRpZmllcikge1xuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3Ioe1xuXHQgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcblx0ICAgICAgfSwgJ0ZhY3RvcnkgbWV0aG9kIGZvciBpZGVudGlmaWVyIFwiJXNcIiByZXR1cm5zIG5vdGhpbmcnLCBpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhNZXRob2REb2VzTm90RXhpc3RFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIE1ldGhvZERvZXNOb3RFeGlzdEVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1ldGhvZERvZXNOb3RFeGlzdEVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1ldGhvZERvZXNOb3RFeGlzdEVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhNZXRob2REb2VzTm90RXhpc3RFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtNZXRob2REb2VzTm90RXhpc3RFcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1ldGhvZE5hbWUpIHtcblx0ICAgICAgaWYgKCEodHlwZW9mIG1ldGhvZE5hbWUgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwibWV0aG9kTmFtZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QobWV0aG9kTmFtZSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IE1ldGhvZERvZXNOb3RFeGlzdEVycm9yKHtcblx0ICAgICAgICBtZXRob2ROYW1lOiBtZXRob2ROYW1lXG5cdCAgICAgIH0sICdNZXRob2QgXCIlc1wiIGRvZXMgbm90IGV4aXN0JywgbWV0aG9kTmFtZSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gTWV0aG9kRG9lc05vdEV4aXN0RXJyb3I7XG5cdH0oX2Rpc2xFcnJvcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBNZXRob2REb2VzTm90RXhpc3RFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzbEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvciA9IGZ1bmN0aW9uIChfRGlzbEVycm9yKSB7XG5cdCAgX2luaGVyaXRzKFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLCBudWxsLCBbe1xuXHQgICAga2V5OiAnY3JlYXRlRXJyb3InLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge1NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKGlkZW50aWZpZXIpIHtcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcih7XG5cdCAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuXHQgICAgICB9LCAnU2VydmljZSBkZWZpbml0aW9uIGZvciBcIiVzXCIgaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIGluc3RhbnRpYXRlIGEgc2VydmljZSwgcmVmdXNpbmcgdG8gbW9kaWZ5IGl0JywgaWRlbnRpZmllcik7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGlzbEVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXNsRXJyb3IpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0LyoqXG5cdCAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuXHQgKlxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHR2YXIgVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhVbmRlZmluZWRQYXJhbWV0ZXJFcnJvciwgX0Rpc2xFcnJvcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVuZGVmaW5lZFBhcmFtZXRlckVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3IpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhVbmRlZmluZWRQYXJhbWV0ZXJFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcn1cblx0ICAgICAqL1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKGlkZW50aWZpZXIpIHtcblx0ICAgICAgaWYgKCEodHlwZW9mIGlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGFyZ3VtZW50IFwiaWRlbnRpZmllclwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbnN0cmluZ1xcblxcbkdvdDpcXG4nICsgX2luc3BlY3QoaWRlbnRpZmllcikpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yKHtcblx0ICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG5cdCAgICAgIH0sICdVbmRlZmluZWQgcGFyYW1ldGVyIGZvciBpZGVudGlmaWVyIFwiJXNcIicsIGlkZW50aWZpZXIpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVW5kZWZpbmVkUGFyYW1ldGVyRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihpZGVudGlmaWVyKSB7XG5cdCAgICAgIGlmICghKHR5cGVvZiBpZGVudGlmaWVyID09PSAnc3RyaW5nJykpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBvZiBhcmd1bWVudCBcImlkZW50aWZpZXJcIiB2aW9sYXRlcyBjb250cmFjdC5cXG5cXG5FeHBlY3RlZDpcXG5zdHJpbmdcXG5cXG5Hb3Q6XFxuJyArIF9pbnNwZWN0KGlkZW50aWZpZXIpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG5ldyBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3Ioe1xuXHQgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcblx0ICAgICAgfSwgJ1VuZGVmaW5lZCBzZXJ2aWNlIGRlZmluaXRpb24gYW5kIGluc3RhbmNlIGZvciBpZGVudGlmaWVyIFwiJXNcIicsIGlkZW50aWZpZXIpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzbEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm5zIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yfVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRXJyb3IoaWRlbnRpZmllcikge1xuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBuZXcgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcih7XG5cdCAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuXHQgICAgICB9LCAnVW5kZWZpbmVkIHNlcnZpY2UgZGVmaW5pdGlvbiBmb3IgaWRlbnRpZmllciBcIiVzXCInLCBpZGVudGlmaWVyKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcjtcblx0XG5cdGZ1bmN0aW9uIF9pbnNwZWN0KGlucHV0LCBkZXB0aCkge1xuXHQgIHZhciBtYXhEZXB0aCA9IDQ7XG5cdCAgdmFyIG1heEtleXMgPSAxNTtcblxuXHQgIGlmIChkZXB0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBkZXB0aCA9IDA7XG5cdCAgfVxuXG5cdCAgZGVwdGggKz0gMTtcblxuXHQgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICdudWxsJztcblx0ICB9IGVsc2UgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAndm9pZCc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGlucHV0ID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGlucHV0KTtcblx0ICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuXHQgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1suLi5dJ1xuXHQgICAgICAgICAgfTtcblxuXHQgICAgICAgIHZhciBmaXJzdCA9IF9pbnNwZWN0KGlucHV0WzBdLCBkZXB0aCk7XG5cblx0ICAgICAgICBpZiAoaW5wdXQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCkgPT09IGZpcnN0O1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiBmaXJzdC50cmltKCkgKyAnW10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWycgKyBpbnB1dC5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpO1xuXHQgICAgICAgICAgICB9KS5qb2luKCcsICcpICsgKGlucHV0Lmxlbmd0aCA+PSBtYXhLZXlzID8gJywgLi4uJyA6ICcnKSArICddJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0oKTtcblxuXHQgICAgICBpZiAoKHR5cGVvZiBfcmV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0KSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ0FycmF5Jztcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7XG5cblx0ICAgIGlmICgha2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gJ09iamVjdCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiAney4uLn0nO1xuXHQgICAgdmFyIGluZGVudCA9ICcgICcucmVwZWF0KGRlcHRoIC0gMSk7XG5cdCAgICB2YXIgZW50cmllcyA9IGtleXMuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICgvXihbQS1aXyRdW0EtWjAtOV8kXSopJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSkpICsgJzogJyArIF9pbnNwZWN0KGlucHV0W2tleV0sIGRlcHRoKSArICc7Jztcblx0ICAgIH0pLmpvaW4oJ1xcbiAgJyArIGluZGVudCk7XG5cblx0ICAgIGlmIChrZXlzLmxlbmd0aCA+PSBtYXhLZXlzKSB7XG5cdCAgICAgIGVudHJpZXMgKz0gJ1xcbiAgJyArIGluZGVudCArICcuLi4nO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICByZXR1cm4gaW5wdXQuY29uc3RydWN0b3IubmFtZSArICcge1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAne1xcbiAgJyArIGluZGVudCArIGVudHJpZXMgKyAnXFxuJyArIGluZGVudCArICd9Jztcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2Rpc2xFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzbEVycm9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cblx0ICpcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dmFyIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yLCBfRGlzbEVycm9yKTtcblx0XG5cdCAgZnVuY3Rpb24gVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge2FueX0gYXJnXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybnMge1Vuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihhcmcpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yKHtcblx0ICAgICAgICBhcmc6IGFyZ1xuXHQgICAgICB9LCAnVW5zdXBwb3J0ZWQgYXJnIG9mIHR5cGUgXCIlc1wiJywgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYXJnKSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcjtcblx0fShfZGlzbEVycm9yMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBfaW5zcGVjdChpbnB1dCwgZGVwdGgpIHtcblx0ICB2YXIgbWF4RGVwdGggPSA0O1xuXHQgIHZhciBtYXhLZXlzID0gMTU7XG5cblx0ICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZGVwdGggPSAwO1xuXHQgIH1cblxuXHQgIGRlcHRoICs9IDE7XG5cblx0ICBpZiAoaW5wdXQgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiAnbnVsbCc7XG5cdCAgfSBlbHNlIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ3ZvaWQnO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpbnB1dCk7XG5cdCAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHQgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbLi4uXSdcblx0ICAgICAgICAgIH07XG5cblx0ICAgICAgICB2YXIgZmlyc3QgPSBfaW5zcGVjdChpbnB1dFswXSwgZGVwdGgpO1xuXG5cdCAgICAgICAgaWYgKGlucHV0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX2luc3BlY3QoaXRlbSwgZGVwdGgpID09PSBmaXJzdDtcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogZmlyc3QudHJpbSgpICsgJ1tdJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdjogJ1snICsgaW5wdXQuc2xpY2UoMCwgbWF4S2V5cykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKTtcblx0ICAgICAgICAgICAgfSkuam9pbignLCAnKSArIChpbnB1dC5sZW5ndGggPj0gbWF4S2V5cyA/ICcsIC4uLicgOiAnJykgKyAnXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9KCk7XG5cblx0ICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICdBcnJheSc7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXQpO1xuXG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gJ3suLi59Jztcblx0ICAgIHZhciBpbmRlbnQgPSAnICAnLnJlcGVhdChkZXB0aCAtIDEpO1xuXHQgICAgdmFyIGVudHJpZXMgPSBrZXlzLnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoL14oW0EtWl8kXVtBLVowLTlfJF0qKSQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpKSArICc6ICcgKyBfaW5zcGVjdChpbnB1dFtrZXldLCBkZXB0aCkgKyAnOyc7XG5cdCAgICB9KS5qb2luKCdcXG4gICcgKyBpbmRlbnQpO1xuXG5cdCAgICBpZiAoa2V5cy5sZW5ndGggPj0gbWF4S2V5cykge1xuXHQgICAgICBlbnRyaWVzICs9ICdcXG4gICcgKyBpbmRlbnQgKyAnLi4uJztcblx0ICAgIH1cblxuXHQgICAgaWYgKGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcblx0ICAgICAgcmV0dXJuIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgKyAnIHtcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3tcXG4gICcgKyBpbmRlbnQgKyBlbnRyaWVzICsgJ1xcbicgKyBpbmRlbnQgKyAnfSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiA1MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kaXNsRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfZGlzbEVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc2xFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHQvKipcblx0ICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBHZXRTZXJ2aWNlRXJyb3IgPSBmdW5jdGlvbiAoX0Rpc2xFcnJvcikge1xuXHQgIF9pbmhlcml0cyhHZXRTZXJ2aWNlRXJyb3IsIF9EaXNsRXJyb3IpO1xuXHRcblx0ICBmdW5jdGlvbiBHZXRTZXJ2aWNlRXJyb3IoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2V0U2VydmljZUVycm9yKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEdldFNlcnZpY2VFcnJvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEdldFNlcnZpY2VFcnJvcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEdldFNlcnZpY2VFcnJvciwgbnVsbCwgW3tcblx0ICAgIGtleTogJ2NyZWF0ZUVycm9yJyxcblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuXHQgICAgICogQHBhcmFtIHtFcnJvcn0gY2F1c2Vcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJucyB7TWV0aG9kRG9lc05vdEV4aXN0RXJyb3J9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFcnJvcihpZGVudGlmaWVyLCBjYXVzZSkge1xuXHQgICAgICBpZiAoISh0eXBlb2YgaWRlbnRpZmllciA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJpZGVudGlmaWVyXCIgdmlvbGF0ZXMgY29udHJhY3QuXFxuXFxuRXhwZWN0ZWQ6XFxuc3RyaW5nXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChpZGVudGlmaWVyKSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghKGNhdXNlIGluc3RhbmNlb2YgRXJyb3IpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgb2YgYXJndW1lbnQgXCJjYXVzZVwiIHZpb2xhdGVzIGNvbnRyYWN0LlxcblxcbkV4cGVjdGVkOlxcbkVycm9yXFxuXFxuR290OlxcbicgKyBfaW5zcGVjdChjYXVzZSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gbmV3IEdldFNlcnZpY2VFcnJvcih7XG5cdCAgICAgICAgY2F1c2U6IGNhdXNlLFxuXHQgICAgICAgIGluZm86IHtcblx0ICAgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcblx0ICAgICAgICB9XG5cdCAgICAgIH0sICdFcnJvciBnZXR0aW5nIHNlcnZpY2UgXCIlc1wiJywgaWRlbnRpZmllcik7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gR2V0U2VydmljZUVycm9yO1xuXHR9KF9kaXNsRXJyb3IyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gR2V0U2VydmljZUVycm9yO1xuXHRcblx0ZnVuY3Rpb24gX2luc3BlY3QoaW5wdXQsIGRlcHRoKSB7XG5cdCAgdmFyIG1heERlcHRoID0gNDtcblx0ICB2YXIgbWF4S2V5cyA9IDE1O1xuXG5cdCAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGRlcHRoID0gMDtcblx0ICB9XG5cblx0ICBkZXB0aCArPSAxO1xuXG5cdCAgaWYgKGlucHV0ID09PSBudWxsKSB7XG5cdCAgICByZXR1cm4gJ251bGwnO1xuXHQgIH0gZWxzZSBpZiAoaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICd2b2lkJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpO1xuXHQgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4ge1xuXHQgICAgICAgICAgICB2OiAnWy4uLl0nXG5cdCAgICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIGZpcnN0ID0gX2luc3BlY3QoaW5wdXRbMF0sIGRlcHRoKTtcblxuXHQgICAgICAgIGlmIChpbnB1dC5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIF9pbnNwZWN0KGl0ZW0sIGRlcHRoKSA9PT0gZmlyc3Q7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6IGZpcnN0LnRyaW0oKSArICdbXSdcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIHY6ICdbJyArIGlucHV0LnNsaWNlKDAsIG1heEtleXMpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfaW5zcGVjdChpdGVtLCBkZXB0aCk7XG5cdCAgICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAoaW5wdXQubGVuZ3RoID49IG1heEtleXMgPyAnLCAuLi4nIDogJycpICsgJ10nXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSgpO1xuXG5cdCAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnQXJyYXknO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcblxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuXHQgICAgICBpZiAoaW5wdXQuY29uc3RydWN0b3IgJiYgaW5wdXQuY29uc3RydWN0b3IubmFtZSAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuXHQgICAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiAnT2JqZWN0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoZGVwdGggPiBtYXhEZXB0aCkgcmV0dXJuICd7Li4ufSc7XG5cdCAgICB2YXIgaW5kZW50ID0gJyAgJy5yZXBlYXQoZGVwdGggLSAxKTtcblx0ICAgIHZhciBlbnRyaWVzID0ga2V5cy5zbGljZSgwLCBtYXhLZXlzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4gKC9eKFtBLVpfJF1bQS1aMC05XyRdKikkL2kudGVzdChrZXkpID8ga2V5IDogSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAnOiAnICsgX2luc3BlY3QoaW5wdXRba2V5XSwgZGVwdGgpICsgJzsnO1xuXHQgICAgfSkuam9pbignXFxuICAnICsgaW5kZW50KTtcblxuXHQgICAgaWYgKGtleXMubGVuZ3RoID49IG1heEtleXMpIHtcblx0ICAgICAgZW50cmllcyArPSAnXFxuICAnICsgaW5kZW50ICsgJy4uLic7XG5cdCAgICB9XG5cblx0ICAgIGlmIChpbnB1dC5jb25zdHJ1Y3RvciAmJiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICYmIGlucHV0LmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG5cdCAgICAgIHJldHVybiBpbnB1dC5jb25zdHJ1Y3Rvci5uYW1lICsgJyB7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd7XFxuICAnICsgaW5kZW50ICsgZW50cmllcyArICdcXG4nICsgaW5kZW50ICsgJ30nO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgU2VydmljZSA9IGV4cG9ydHMuU2VydmljZSA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTZXJ2aWNlKGlucHV0KSB7XG5cdCAgICByZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBPYmplY3QgfHwgdHlwZW9mIGlucHV0ID09PSAnZnVuY3Rpb24nO1xuXHQgIH1cblx0XG5cdCAgO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXJ2aWNlLCBTeW1ib2wuaGFzSW5zdGFuY2UsIHtcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShpbnB1dCkge1xuXHQgICAgICByZXR1cm4gU2VydmljZShpbnB1dCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIFNlcnZpY2U7XG5cdH0oKTtcblxuLyoqKi8gfSxcbi8qIDUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIHNjYWxhciA9IGV4cG9ydHMuc2NhbGFyID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIHNjYWxhcihpbnB1dCkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgaW5wdXQgPT09ICdib29sZWFuJyB8fCBpbnB1dCA9PSBudWxsO1xuXHQgIH1cblx0XG5cdCAgO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzY2FsYXIsIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGlucHV0KSB7XG5cdCAgICAgIHJldHVybiBzY2FsYXIoaW5wdXQpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiBzY2FsYXI7XG5cdH0oKTtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBkaS1kZXYuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA2ZTc4YzA4YmZhYTM5MzA3NjI3MCIsImltcG9ydCBDb250YWluZXIgZnJvbSAnLi9zcmMvY29udGFpbmVyJ1xuaW1wb3J0IENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uIGZyb20gJy4vc3JjL2NsYXNzLWNvbnN0cnVjdG9yLWRlZmluaXRpb24nXG5pbXBvcnQgRmFjdG9yeURlZmluaXRpb24gZnJvbSAnLi9zcmMvZmFjdG9yeS1kZWZpbml0aW9uJ1xuaW1wb3J0IFJlZmVyZW5jZSBmcm9tICcuL3NyYy9yZWZlcmVuY2UnXG5pbXBvcnQgUGFyYW1ldGVyIGZyb20gJy4vc3JjL3BhcmFtZXRlcidcbmltcG9ydCBNZXRob2RDYWxsIGZyb20gJy4vc3JjL21ldGhvZC1jYWxsJ1xuaW1wb3J0IGVycm9ycyBmcm9tICcuL3NyYy9lcnJvcnMnXG5cbmNvbnN0IGV4cG9ydHMgPSB7XG4gIENvbnRhaW5lcixcbiAgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24sXG4gIEZhY3RvcnlEZWZpbml0aW9uLFxuICBSZWZlcmVuY2UsXG4gIFBhcmFtZXRlcixcbiAgTWV0aG9kQ2FsbFxufVxuXG5mb3IgKGxldCBpIGluIGVycm9ycykge1xuICBpZiAoZXJyb3JzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgZXhwb3J0c1tpXSA9IGVycm9yc1tpXVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaW5kZXguanMiLCJpbXBvcnQgRGVmaW5pdGlvbiBmcm9tICcuL2RlZmluaXRpb24nXG5pbXBvcnQgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24gZnJvbSAnLi9jbGFzcy1jb25zdHJ1Y3Rvci1kZWZpbml0aW9uJ1xuaW1wb3J0IEZhY3RvcnlEZWZpbml0aW9uIGZyb20gJy4vZmFjdG9yeS1kZWZpbml0aW9uJ1xuaW1wb3J0IFJlZmVyZW5jZSBmcm9tICcuL3JlZmVyZW5jZSdcbmltcG9ydCBQYXJhbWV0ZXIgZnJvbSAnLi9wYXJhbWV0ZXInXG5pbXBvcnQgTWV0aG9kQ2FsbCBmcm9tICcuL21ldGhvZC1jYWxsJ1xuXG5pbXBvcnQge1xuICBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcixcbiAgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvcixcbiAgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yLFxuICBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLFxuICBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IsXG4gIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yLFxuICBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvcixcbiAgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IsXG4gIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IsXG4gIEdldFNlcnZpY2VFcnJvclxufSBmcm9tICcuL2Vycm9ycydcblxuaW1wb3J0IHR5cGUge1NlcnZpY2V9IGZyb20gJy4vdHlwZXMvc2VydmljZSdcbmltcG9ydCB0eXBlIHtJbmplY3RhYmxlQXJndW1lbnRzfSBmcm9tICcuL3R5cGVzL2luamVjdGFibGUtYXJndW1lbnRzJ1xuaW1wb3J0IHR5cGUge3NjYWxhcn0gZnJvbSAnLi90eXBlcy9zY2FsYXInXG5cbnR5cGUgTG9hZGluZ09iamVjdCA9IHtcbiAgb2JqOiBPYmplY3Q8c3RyaW5nLCBib29sZWFuPixcbiAgYXJyOiBBcnJheTxzdHJpbmc+XG59XG50eXBlIExvY2F0b3JDYWxsYmFjayA9IChpZGVudGlmaWVyOiBzdHJpbmcpID0+ICg/RnVuY3Rpb24pXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDb250YWluZXIge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXIgPSB7fVxuICAgIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0J5SWRlbnRpZmllciA9IHt9XG4gICAgdGhpcy5fcGFyYW1ldGVyc0J5SWRlbnRpZmllciA9IHt9XG4gICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyID0ge31cbiAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMgPSBbXVxuICAgIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMgPSBbXVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgc2VydmljZSBhc3NvY2lhdGVkIHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0gey4uLnN0cmluZ30gaWRlbnRpZmllcnNcbiAgICpcbiAgICogQHByb21pc2VcbiAgICogQHJlc29sdmUge0FycmF5PFNlcnZpY2U+fVxuICAgKiBAcmVqZWN0IHtHZXRTZXJ2aWNlRXJyb3J9IGluIGNhc2UgYW55IEVycm9yIGlzIHJhaXNlZCB3aGVuIGluc3RhbnRpYXRpbmcgc2VydmljZVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQoLi4uaWRlbnRpZmllcnM6IEFycmF5PHN0cmluZz4pOiBQcm9taXNlPEFycmF5PFNlcnZpY2U+PiB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXVxuXG4gICAgaWRlbnRpZmllcnMuZm9yRWFjaCgoaWRlbnRpZmllcjogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICB0aGlzXG4gICAgICAgICAgLl9kb0dldFNlcnZpY2UoaWRlbnRpZmllciwgeyBvYmo6IHt9LCBhcnI6IFtdIH0pXG4gICAgICAgICAgLmNhdGNoKChlOiBFcnJvcik6IHZvaWQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgR2V0U2VydmljZUVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIsIGUpXG4gICAgICAgICAgfSlcbiAgICAgIClcbiAgICB9KVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKVxuICB9XG5cbiAgLyoqXG4gICAqIEFzc29jaWF0ZXMgc2VydmljZSB3aXRoIGlkZW50aWZpZXJcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTZXJ2aWNlfSBpbnN0YW5jZSBzZXJ2aWNlIGluc3RhbmNlXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldChpZGVudGlmaWVyOiBzdHJpbmcsIGluc3RhbmNlOiBTZXJ2aWNlKTogQ29udGFpbmVyIHtcbiAgICB0aGlzLl9zZXJ2aWNlc0J5SWRlbnRpZmllcltpZGVudGlmaWVyXSA9IGluc3RhbmNlXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBjb250YWluZXIgaGFzIHNlcnZpY2UsIHRoYXQgaXMgZWl0aGVyIGlmOlxuICAgKiAqIGl0IGhhcyBhIHtAbGluayBEZWZpbml0aW9ufVxuICAgKiAqIGl0IGhhcyBiZWVuIGluc3RhbnRpYXRlZFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGhhcyhpZGVudGlmaWVyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5oYXNEZWZpbml0aW9uKGlkZW50aWZpZXIpIHx8IHRoaXMuaGFzSW5zdGFuY2UoaWRlbnRpZmllcilcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNlcnZpY2UgaGFzIGEgZGVmaW5pdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaGFzRGVmaW5pdGlvbihpZGVudGlmaWVyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkICE9PSB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNlcnZpY2UgaGFzIGFuIGluc3RhbmNlLCBlaXRoZXIgYmVjYXVzZTpcbiAgICogKiBpdCBoYXMgYmVlbiBpbnN0YW50aWF0ZWQgdmlhIGl0cyB7QGxpbmsgRGVmaW5pdGlvbn1cbiAgICogKiBpdCBoYXMgYmVlbiBzZXQgZGlyZWN0bHkgdmlhIHtAbGluayBzZXR9IG1ldGhvZFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaGFzSW5zdGFuY2UoaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAhPT0gdGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtEZWZpbml0aW9ufVxuICAgKlxuICAgKiBAdGhyb3dzIHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yfSBpZiB0aGVyZSBpcyBubyBzZXJ2aWNlIGRlZmluaXRpb24gZm9yIGdpdmVuIGlkZW50aWZpZXJcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0RGVmaW5pdGlvbihpZGVudGlmaWVyOiBzdHJpbmcpOiBEZWZpbml0aW9uIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gdGhpcy5fc2VydmljZURlZmluaXRpb25zQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG5cbiAgICBpZiAodW5kZWZpbmVkID09PSBkZWZpbml0aW9uKSB7XG4gICAgICB0aHJvdyBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpXG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmluaXRpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NvY2lhdGVzIHNlcnZpY2Uge0BsaW5rIERlZmluaXRpb259IHdpdGggaWRlbnRpZmllclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciBzZXJ2aWNlIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtEZWZpbml0aW9ufSBkZWZpbml0aW9uIHNlcnZpY2UgZGVmaW5pdGlvblxuICAgKlxuICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfSBjdXJyZW50IENvbnRhaW5lciBpbnN0YW5jZVxuICAgKlxuICAgKiBAdGhyb3dzIHtTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3J9IGlmIHRoZSBzZXJ2aWNlIGRlZmluaXRpb24gaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIGluc3RhbnRpYXRlIGEgc2VydmljZVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXREZWZpbml0aW9uKGlkZW50aWZpZXI6IHN0cmluZywgZGVmaW5pdGlvbjogRGVmaW5pdGlvbik6IENvbnRhaW5lciB7XG4gICAgaWYgKHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uc0FscmVhZHlVc2VkVG9JbnN0YW50aWF0ZUJ5SWRlbnRpZmllcltpZGVudGlmaWVyXSkge1xuICAgICAgdGhyb3cgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpXG4gICAgfVxuXG4gICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gZmFsc2VcbiAgICB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSBkZWZpbml0aW9uXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgcGFyYW1ldGVyIGFzc29jaWF0ZWQgd2l0aCBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIHBhcmFtZXRlciBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtzY2FsYXJ9IHBhcmFtZXRlciB2YWx1ZVxuICAgKlxuICAgKiBAdGhyb3dzIHtVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcn0gaWYgdGhlcmUgaXMgbm8gcGFyYW1ldGVyIGZvciBnaXZlbiBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFBhcmFtZXRlcihpZGVudGlmaWVyOiBzdHJpbmcpOiBzY2FsYXIge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pIHtcbiAgICAgIHRocm93IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yLmNyZWF0ZUVycm9yKGlkZW50aWZpZXIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl1cbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NvY2lhdGVzIHBhcmFtZXRlciB3aXRoIGlkZW50aWZpZXJcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtzY2FsYXJ9IHZhbHVlXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldFBhcmFtZXRlcihpZGVudGlmaWVyOiBzdHJpbmcsIHZhbHVlOiBzY2FsYXIpOiBDb250YWluZXIge1xuICAgIHRoaXMuX3BhcmFtZXRlcnNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0gPSB2YWx1ZVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgY29udGFpbmVyIGhhcyBwYXJhbWV0ZXIsIGZhbHNlIG90aGVyd2lzZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc1BhcmFtZXRlcihpZGVudGlmaWVyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkICE9PSB0aGlzLl9wYXJhbWV0ZXJzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIFxuICAgKiBcbiAgICogQHBhcmFtIHtMb2NhdG9yQ2FsbGJhY2t9IGxvY2F0b3JcbiAgICpcbiAgICogQHJldHVybnMge0NvbnRhaW5lcn0gY3VycmVudCBDb250YWluZXIgaW5zdGFuY2VcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVnaXN0ZXJDbGFzc0NvbnN0cnVjdG9yTG9jYXRvcihsb2NhdG9yOiBMb2NhdG9yQ2FsbGJhY2spOiBDb250YWluZXIge1xuICAgIHRoaXMuX2NsYXNzQ29uc3RydWN0b3JMb2NhdG9ycy5wdXNoKGxvY2F0b3IpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TG9jYXRvckNhbGxiYWNrfSBsb2NhdG9yXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb250YWluZXJ9IGN1cnJlbnQgQ29udGFpbmVyIGluc3RhbmNlXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlZ2lzdGVySW5zdGFuY2VMb2NhdG9yKGxvY2F0b3I6IExvY2F0b3JDYWxsYmFjayk6IENvbnRhaW5lciB7XG4gICAgdGhpcy5faW5zdGFuY2VMb2NhdG9ycy5wdXNoKGxvY2F0b3IpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmVzIHNlcnZpY2UgZGVmaW5pdGlvbiBhcmd1bWVudHMsIHRoZW4gdXNlcyB0aGVtIHRvIGluc3RhbnRpYXRlIHRoZSBzZXJ2aWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge0RlZmluaXRpb259IGRlZmluaXRpb25cbiAgICogQHBhcmFtIHtMb2FkaW5nT2JqZWN0fSBsb2FkaW5nIGFuIG9iamVjdCB0aGF0IGtlZXBzIHRyYWNrIG9mIHNlcnZpY2UgaW5zdGFudGlhdGlvbnMsXG4gICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcbiAgICpcbiAgICogQHByb21pc2VcbiAgICogQHJlc29sdmUge1NlcnZpY2V9XG4gICAqIEByZWplY3Qge0ZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yfSBpbiBjYXNlIGEgZmFjdG9yeSBtZXRob2QgcmV0dXJucyBub3RoaW5nXG4gICAqIEByZWplY3Qge01ldGhvZERvZXNOb3RFeGlzdEVycm9yfSBpbiBjYXNlIGEgbWV0aG9kIGNhbGwgY2FsbHMgYSBtZXRob2QgdGhhdCBkb2VzIG5vdCBleGlzdFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2luc3RhbnRpYXRlKGlkZW50aWZpZXI6IHN0cmluZywgZGVmaW5pdGlvbjogRGVmaW5pdGlvbiwgbG9hZGluZzogTG9hZGluZ09iamVjdCk6IFByb21pc2U8U2VydmljZT4ge1xuICAgIHJldHVybiB0aGlzXG4gICAgICAuX3Jlc29sdmVBcmdzKGRlZmluaXRpb24uYXJncywgbG9hZGluZylcbiAgICAgIC50aGVuKChhcmdzOiBBcnJheSk6IFByb21pc2UgPT4ge1xuICAgICAgICBsZXQgaW5zdGFuY2VcblxuICAgICAgICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIENsYXNzQ29uc3RydWN0b3JEZWZpbml0aW9uKSB7XG4gICAgICAgICAgY29uc3QgY2xhc3NDb25zdHJ1Y3RvciA9IHRoaXMuX2xvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yKGRlZmluaXRpb24uY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXIpXG5cbiAgICAgICAgICBpbnN0YW5jZSA9IG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoY2xhc3NDb25zdHJ1Y3RvciwgWyB1bmRlZmluZWQgXS5jb25jYXQoYXJncykpKVxuICAgICAgICB9IGVsc2UgaWYgKGRlZmluaXRpb24gaW5zdGFuY2VvZiBGYWN0b3J5RGVmaW5pdGlvbikge1xuICAgICAgICAgIGluc3RhbmNlID0gZGVmaW5pdGlvbi5mYWN0b3J5LmFwcGx5KHVuZGVmaW5lZCwgYXJncylcblxuICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGluc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IuY3JlYXRlRXJyb3IoaWRlbnRpZmllcikpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBjb25zdCBtZXRob2RDYWxsc1Byb21pc2VzID0gW11cblxuICAgICAgICAgIGxldCBpLCBtZXRob2RDYWxsXG5cbiAgICAgICAgICBjb25zdCBjYWxsTWV0aG9kID0gKG1ldGhvZFRvQ2FsbDogRnVuY3Rpb24pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIG1ldGhvZENhbGxzUHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgIC5fcmVzb2x2ZUFyZ3MobWV0aG9kQ2FsbC5hcmdzLCBsb2FkaW5nKVxuICAgICAgICAgICAgICAgIC50aGVuKChhcmdzOiBBcnJheSk6ID8oUHJvbWlzZXxtaXhlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZFRvQ2FsbC5hcHBseShpbnN0YW5jZSwgYXJncylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIGdldE1ldGhvZENhbGwoaSk6IE1ldGhvZENhbGwge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmluaXRpb24ubWV0aG9kQ2FsbHNbaV1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKGkgaW4gZGVmaW5pdGlvbi5tZXRob2RDYWxscykge1xuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24ubWV0aG9kQ2FsbHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgbWV0aG9kQ2FsbCA9IGdldE1ldGhvZENhbGwoaSlcblxuICAgICAgICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gbWV0aG9kQ2FsbC5uYW1lXG4gICAgICAgICAgICAgIGNvbnN0IG1ldGhvZFRvQ2FsbCA9IGluc3RhbmNlW21ldGhvZE5hbWVdXG5cbiAgICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbWV0aG9kVG9DYWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChNZXRob2REb2VzTm90RXhpc3RFcnJvci5jcmVhdGVFcnJvcihtZXRob2ROYW1lKSlcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhbGxNZXRob2QobWV0aG9kVG9DYWxsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXNvbHZlKFxuICAgICAgICAgICAgUHJvbWlzZVxuICAgICAgICAgICAgICAuYWxsKG1ldGhvZENhbGxzUHJvbWlzZXMpXG4gICAgICAgICAgICAgIC50aGVuKCgpOiBTZXJ2aWNlID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgaW50ZXJuYWxseSB0byBsb2NhdGUgYSBzZXJ2aWNlIGNsYXNzIGNvbnN0cnVjdG9yLCBpZiBpdCBoYXMgYmVlbiBtYWRlIGF2YWlsYWJsZSB0byB0aGUgY29udGFpbmVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAdGhyb3dzIHtDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yfSBpZiB0aGUgc2VydmljZSBjbGFzcyBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgZm91bmRcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9sb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvcihpZGVudGlmaWVyOiBzdHJpbmcpOiBGdW5jdGlvbiB7XG4gICAgbGV0IGksIGNsYXNzQ29uc3RydWN0b3JcblxuICAgIGZvciAoaSBpbiB0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMpIHtcbiAgICAgIGlmICh0aGlzLl9jbGFzc0NvbnN0cnVjdG9yTG9jYXRvcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgY2xhc3NDb25zdHJ1Y3RvciA9IHRoaXMuX2NsYXNzQ29uc3RydWN0b3JMb2NhdG9yc1tpXShpZGVudGlmaWVyKVxuXG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IGNsYXNzQ29uc3RydWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gY2xhc3NDb25zdHJ1Y3RvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKVxuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMgez9TZXJ2aWNlfVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2xvY2F0ZUluc3RhbmNlKGlkZW50aWZpZXI6IHN0cmluZyk6ID9TZXJ2aWNlIHtcbiAgICBsZXQgaVxuICAgIGxldCBpbnN0YW5jZVxuXG4gICAgZm9yIChpIGluIHRoaXMuX2luc3RhbmNlTG9jYXRvcnMpIHtcbiAgICAgIGlmICh0aGlzLl9pbnN0YW5jZUxvY2F0b3JzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGluc3RhbmNlID0gdGhpcy5faW5zdGFuY2VMb2NhdG9yc1tpXShpZGVudGlmaWVyKVxuXG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IGluc3RhbmNlKSB7XG4gICAgICAgICAgcmV0dXJuIGluc3RhbmNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZXMgZ2l2ZW4gYXJndW1lbnRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0luamVjdGFibGVBcmd1bWVudHN9IGFyZ3NcbiAgICogQHBhcmFtIHtMb2FkaW5nT2JqZWN0fSBsb2FkaW5nIGFuIG9iamVjdCB0aGF0IGtlZXBzIHRyYWNrIG9mIHNlcnZpY2UgaW5zdGFudGlhdGlvbnMsXG4gICAqIHVzZWQgdG8gcHJldmVudCBjaXJjdWxhciBkZXBlbmRlbmN5IHJlbGF0ZWQgaW5maW5pdGUgbG9vcHNcbiAgICpcbiAgICogQHByb21pc2Uge0FycmF5PFNlcnZpY2V8c2NhbGFyPn0gYW4gYXJyYXkgb2Ygc2VydmljZSBpbnN0YW5jZXMgb3IgcGFyYW1ldGVyIHZhbHVlc1xuICAgKiBAcmVqZWN0IHtVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yfVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Jlc29sdmVBcmdzKGFyZ3M6IEluamVjdGFibGVBcmd1bWVudHMsIGxvYWRpbmc6IExvYWRpbmdPYmplY3QpOiBQcm9taXNlPEFycmF5PFNlcnZpY2V8c2NhbGFyPj4ge1xuICAgIGNvbnN0IHByb21pc2VzID0gW11cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb24pOiB2b2lkID0+IHtcbiAgICAgIGxldCBpLCBhcmdcblxuICAgICAgZm9yIChpIGluIGFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZ3MuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICBhcmcgPSBhcmdzW2ldXG5cbiAgICAgICAgICBpZiAoYXJnIGluc3RhbmNlb2YgUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGFyZy5pZFxuXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzLl9kb0dldFNlcnZpY2UoaWQsIENvbnRhaW5lci5fZGVlcENvcHlMb2FkaW5nKGxvYWRpbmcpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgUGFyYW1ldGVyKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICB0aGlzLmdldFBhcmFtZXRlcihhcmcuaWQpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvci5jcmVhdGVFcnJvcihhcmcpKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzb2x2ZShQcm9taXNlLmFsbChwcm9taXNlcykpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGludGVybmFsbHkgdG8gcmV0cmlldmUgYSBzZXJ2aWNlIGJ5IGl0cyBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciB0aGUgaWRlbnRpZmllciBvZiB0aGUgc2VydmljZVxuICAgKiBAcGFyYW0ge0xvYWRpbmdPYmplY3R9IGxvYWRpbmcgYW4gb2JqZWN0IHRoYXQga2VlcHMgdHJhY2sgb2Ygc2VydmljZSBpbnN0YW50aWF0aW9ucyxcbiAgICogdXNlZCB0byBwcmV2ZW50IGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVsYXRlZCBpbmZpbml0ZSBsb29wc1xuICAgKlxuICAgKiBAcHJvbWlzZVxuICAgKiBAcmVzb2x2ZSB7U2VydmljZX0gYSBzZXJ2aWNlIGluc3RhbmNlXG4gICAqIEByZWplY3Qge0NpcmN1bGFyRGVwZW5kZW5jeUVycm9yfSBpbiBjYXNlIG9mIGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuICAgKiBAcmVqZWN0IHtVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3J9IGluIGNhc2UgbmVpdGhlciBhbiBpbnN0YW5jZSBub3IgYSBkZWZpbml0aW9uIGlzIGZvdW5kXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZG9HZXRTZXJ2aWNlKGlkZW50aWZpZXI6IHN0cmluZywgbG9hZGluZzogTG9hZGluZ09iamVjdCk6IFByb21pc2U8U2VydmljZXxDaXJjdWxhckRlcGVuZGVuY3lFcnJvcnxVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3I+IHtcbiAgICBpZiAodW5kZWZpbmVkICE9PSBsb2FkaW5nLm9ialtpZGVudGlmaWVyXSkge1xuICAgICAgY29uc3Qgc2VydmljZXMgPSBbXVxuICAgICAgICAuY29uY2F0KGxvYWRpbmcuYXJyKVxuICAgICAgICAuY29uY2F0KFsgaWRlbnRpZmllciBdKVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IuY3JlYXRlRXJyb3Ioc2VydmljZXMpKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5oYXNJbnN0YW5jZShpZGVudGlmaWVyKSkge1xuICAgICAgaWYgKCF0aGlzLmhhc0RlZmluaXRpb24oaWRlbnRpZmllcikpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fbG9jYXRlSW5zdGFuY2UoaWRlbnRpZmllcilcblxuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSByZXN1bHQpIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBJbiBjYXNlIGxvY2F0ZSBpbnN0YW5jZSByZXR1cm5zIGEgcHJvbWlzZSwgcmVzb2x2ZSBwcm9taXNlXG4gICAgICAgICAgICovXG4gICAgICAgICAgcmV0dXJuIFByb21pc2VcbiAgICAgICAgICAgIC5yZXNvbHZlKHJlc3VsdClcbiAgICAgICAgICAgIC50aGVuKChpbnN0YW5jZTogP1NlcnZpY2UpOiBQcm9taXNlPFNlcnZpY2V8VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yPiA9PiB7XG4gICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSlcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoaW5zdGFuY2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvci5jcmVhdGVFcnJvcihpZGVudGlmaWVyKSlcbiAgICAgIH1cblxuICAgICAgbG9hZGluZy5vYmpbaWRlbnRpZmllcl0gPSB0cnVlXG4gICAgICBsb2FkaW5nLmFyci5wdXNoKGlkZW50aWZpZXIpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9pbnN0YW50aWF0ZShpZGVudGlmaWVyLCB0aGlzLmdldERlZmluaXRpb24oaWRlbnRpZmllciksIGxvYWRpbmcpXG5cbiAgICAgICAgdGhpcy5fc2VydmljZURlZmluaXRpb25zQWxyZWFkeVVzZWRUb0luc3RhbnRpYXRlQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gdHJ1ZVxuXG4gICAgICAgIHRoaXMuX3NlcnZpY2VzQnlJZGVudGlmaWVyW2lkZW50aWZpZXJdID0gcHJvbWlzZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fc2VydmljZXNCeUlkZW50aWZpZXJbaWRlbnRpZmllcl0pXG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgYSBkZWVwIGNvcHkgb2YgbG9hZGluZyBvYmplY3Qgc28gYXMgbm90IHRvIG1vZGlmeSBpdCBieSByZWZlcmVuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7TG9hZGluZ09iamVjdH0gbG9hZGluZyBsb2FkaW5nIG9iamVjdCBpbnN0YW5jZVxuICAgKlxuICAgKiBAcmV0dXJucyB7TG9hZGluZ09iamVjdH0gbG9hZGluZyBhIGRlZXAgY29weSBvZiB0aGUgb3JpZ2luYWwgbG9hZGluZyBwYXJhbWV0ZXJcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfZGVlcENvcHlMb2FkaW5nKGxvYWRpbmc6IExvYWRpbmdPYmplY3QpOiBMb2FkaW5nT2JqZWN0IHtcbiAgICBjb25zdCBuZXdMb2FkaW5nID0ge1xuICAgICAgb2JqOiB7fSxcbiAgICAgIGFycjogW10uY29uY2F0KGxvYWRpbmcuYXJyKVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgaW4gbG9hZGluZy5vYmopIHtcbiAgICAgIGlmIChsb2FkaW5nLm9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICBuZXdMb2FkaW5nLm9ialtpXSA9IGxvYWRpbmcub2JqW2ldXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0xvYWRpbmdcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250YWluZXJcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29udGFpbmVyLmpzIiwiaW1wb3J0IE1ldGhvZENhbGwgZnJvbSAnLi9tZXRob2QtY2FsbCdcblxuaW1wb3J0IHR5cGUge0luamVjdGFibGVBcmd1bWVudHN9IGZyb20gJy4vdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMnXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgRGVmaW5pdGlvbiB7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7P0luamVjdGFibGVBcmd1bWVudHN9IFthcmdzPVtdXVxuICAgKi9cbiAgY29uc3RydWN0b3IoYXJnczogP0luamVjdGFibGVBcmd1bWVudHMgPSBbXSkge1xuICAgIHRoaXMuX21ldGhvZENhbGxzID0gW11cbiAgICB0aGlzLl9hcmdzID0gYXJnc1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgbWV0aG9kQ2FsbHNcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheTxNZXRob2RDYWxsPn0gbWV0aG9kQ2FsbHNcbiAgICovXG4gIHNldCBtZXRob2RDYWxscyhtZXRob2RDYWxsczogQXJyYXk8TWV0aG9kQ2FsbD4pOiB2b2lkIHtcbiAgICB0aGlzLl9tZXRob2RDYWxscyA9IG1ldGhvZENhbGxzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBtZXRob2RDYWxsc1xuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXk8TWV0aG9kQ2FsbD59XG4gICAqL1xuICBnZXQgbWV0aG9kQ2FsbHMoKTogQXJyYXk8TWV0aG9kQ2FsbD4ge1xuICAgIHJldHVybiB0aGlzLl9tZXRob2RDYWxsc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYXJnc1xuICAgKlxuICAgKiBAcmV0dXJucyB7SW5qZWN0YWJsZUFyZ3VtZW50c31cbiAgICovXG4gIGdldCBhcmdzKCk6IEluamVjdGFibGVBcmd1bWVudHMge1xuICAgIHJldHVybiB0aGlzLl9hcmdzXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVmaW5pdGlvblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9kZWZpbml0aW9uLmpzIiwiaW1wb3J0IHR5cGUge0luamVjdGFibGVBcmd1bWVudHN9IGZyb20gJy4vdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMnXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBNZXRob2RDYWxsIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbWV0aG9kIG5hbWVcbiAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgYXJnczogP0luamVjdGFibGVBcmd1bWVudHMgPSBbXSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lXG4gICAgdGhpcy5fYXJncyA9IGFyZ3NcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG5hbWVcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fbmFtZVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYXJnc1xuICAgKlxuICAgKiBAcmV0dXJucyB7SW5qZWN0YWJsZUFyZ3VtZW50c31cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0IGFyZ3MoKTogSW5qZWN0YWJsZUFyZ3VtZW50cyB7XG4gICAgcmV0dXJuIHRoaXMuX2FyZ3NcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNZXRob2RDYWxsXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL21ldGhvZC1jYWxsLmpzIiwiaW1wb3J0IFJlZmVyZW5jZSBmcm9tICcuLi9yZWZlcmVuY2UnXG5pbXBvcnQgUGFyYW1ldGVyIGZyb20gJy4uL3BhcmFtZXRlcidcblxuZXhwb3J0IHR5cGUgSW5qZWN0YWJsZUFyZ3VtZW50cyA9IEFycmF5PFJlZmVyZW5jZXxQYXJhbWV0ZXI+XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMuanMiLCIvKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgUmVmZXJlbmNlIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICogXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5faWQgPSBpZFxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgaWRcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2lkXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVmZXJlbmNlXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JlZmVyZW5jZS5qcyIsIi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBQYXJhbWV0ZXIge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29uc3RydWN0b3IoaWQ6IHN0cmluZykge1xuICAgIHRoaXMuX2lkID0gaWRcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGlkXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldCBpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pZFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhcmFtZXRlclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wYXJhbWV0ZXIuanMiLCJpbXBvcnQgRGVmaW5pdGlvbiBmcm9tICcuL2RlZmluaXRpb24nXG5cbmltcG9ydCB0eXBlIHtJbmplY3RhYmxlQXJndW1lbnRzfSBmcm9tICcuL3R5cGVzL2luamVjdGFibGUtYXJndW1lbnRzJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb24gZXh0ZW5kcyBEZWZpbml0aW9uIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7P0luamVjdGFibGVBcmd1bWVudHN9IFthcmdzPVtdXVxuICAgKi9cbiAgY29uc3RydWN0b3IoY2xhc3NDb25zdHJ1Y3RvcklkZW50aWZpZXI6IHN0cmluZywgYXJnczogP0luamVjdGFibGVBcmd1bWVudHMgPSBbXSkge1xuICAgIHN1cGVyKGFyZ3MpXG5cbiAgICB0aGlzLl9jbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllciA9IGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjbGFzc0NvbnN0cnVjdG9ySWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGNsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2NsYXNzQ29uc3RydWN0b3JJZGVudGlmaWVyXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xhc3NDb25zdHJ1Y3RvckRlZmluaXRpb25cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY2xhc3MtY29uc3RydWN0b3ItZGVmaW5pdGlvbi5qcyIsImltcG9ydCBEZWZpbml0aW9uIGZyb20gJy4vZGVmaW5pdGlvbidcblxuaW1wb3J0IHR5cGUge0luamVjdGFibGVBcmd1bWVudHN9IGZyb20gJy4vdHlwZXMvaW5qZWN0YWJsZS1hcmd1bWVudHMnXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBGYWN0b3J5RGVmaW5pdGlvbiBleHRlbmRzIERlZmluaXRpb24ge1xuICBcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3RvcnlcbiAgICogQHBhcmFtIHs/SW5qZWN0YWJsZUFyZ3VtZW50c30gW2FyZ3M9W11dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihmYWN0b3J5OiBGdW5jdGlvbiwgYXJnczogP0luamVjdGFibGVBcmd1bWVudHMgPSBbXSkge1xuICAgIHN1cGVyKGFyZ3MpXG5cbiAgICB0aGlzLl9mYWN0b3J5ID0gZmFjdG9yeVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgZmFjdG9yeVxuICAgKlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gICAqL1xuICBnZXQgZmFjdG9yeSgpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuX2ZhY3RvcnlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGYWN0b3J5RGVmaW5pdGlvblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mYWN0b3J5LWRlZmluaXRpb24uanMiLCJpbXBvcnQgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciBmcm9tICcuL2Vycm9ycy9jYW5ub3QtbG9jYXRlLXNlcnZpY2UtY2xhc3MtY29uc3RydWN0b3ItZXJyb3InXG5pbXBvcnQgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IgZnJvbSAnLi9lcnJvcnMvY2lyY3VsYXItZGVwZW5kZW5jeS1lcnJvcidcbmltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9lcnJvcnMvZGlzbC1lcnJvcidcbmltcG9ydCBGYWN0b3J5TWV0aG9kUmV0dXJuc05vdGhpbmdFcnJvciBmcm9tICcuL2Vycm9ycy9mYWN0b3J5LW1ldGhvZC1yZXR1cm5zLW5vdGhpbmctZXJyb3InXG5pbXBvcnQgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IgZnJvbSAnLi9lcnJvcnMvbWV0aG9kLWRvZXMtbm90LWV4aXN0LWVycm9yJ1xuaW1wb3J0IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvciBmcm9tICcuL2Vycm9ycy9zZXJ2aWNlLWRlZmluaXRpb24tYWxyZWFkeS11c2VkLWVycm9yJ1xuaW1wb3J0IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yIGZyb20gJy4vZXJyb3JzL3VuZGVmaW5lZC1wYXJhbWV0ZXItZXJyb3InXG5pbXBvcnQgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yIGZyb20gJy4vZXJyb3JzL3VuZGVmaW5lZC1zZXJ2aWNlLWRlZmluaXRpb24tYW5kLWluc3RhbmNlLWVycm9yJ1xuaW1wb3J0IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IgZnJvbSAnLi9lcnJvcnMvdW5kZWZpbmVkLXNlcnZpY2UtZGVmaW5pdGlvbi1lcnJvcidcbmltcG9ydCBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yIGZyb20gJy4vZXJyb3JzL3Vuc3VwcG9ydGVkLWFyZ3VtZW50LXR5cGUtZXJyb3InXG5pbXBvcnQgR2V0U2VydmljZUVycm9yIGZyb20gJy4vZXJyb3JzL2dldC1zZXJ2aWNlLWVycm9yJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvcixcbiAgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IsXG4gIERpc2xFcnJvcixcbiAgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IsXG4gIE1ldGhvZERvZXNOb3RFeGlzdEVycm9yLFxuICBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3IsXG4gIFVuZGVmaW5lZFBhcmFtZXRlckVycm9yLFxuICBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3IsXG4gIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IsXG4gIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IsXG4gIEdldFNlcnZpY2VFcnJvclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMuanMiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lXG4gICAqXG4gICAqIEByZXR1cm5zIHtDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGNsYXNzTmFtZTogc3RyaW5nKTogQ2Fubm90TG9jYXRlU2VydmljZUNsYXNzQ29uc3RydWN0b3JFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBDYW5ub3RMb2NhdGVTZXJ2aWNlQ2xhc3NDb25zdHJ1Y3RvckVycm9yKFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWVcbiAgICAgIH0sXG4gICAgICAnQ2Fubm90IGxvY2F0ZSBzZXJ2aWNlIGNsYXNzIGNvbnN0cnVjdG9yIGZvciBjbGFzcyBcIiVzXCInLFxuICAgICAgY2xhc3NOYW1lXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbm5vdExvY2F0ZVNlcnZpY2VDbGFzc0NvbnN0cnVjdG9yRXJyb3JcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvY2Fubm90LWxvY2F0ZS1zZXJ2aWNlLWNsYXNzLWNvbnN0cnVjdG9yLWVycm9yLmpzIiwiaW1wb3J0IFZFcnJvciBmcm9tICd2ZXJyb3InXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBEaXNsRXJyb3IgZXh0ZW5kcyBWRXJyb3Ige1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IERpc2xFcnJvclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy9kaXNsLWVycm9yLmpzIiwiLypcbiAqIHZlcnJvci5qczogcmljaGVyIEphdmFTY3JpcHQgZXJyb3JzXG4gKi9cblxudmFyIG1vZF9hc3NlcnRwbHVzID0gcmVxdWlyZSgnYXNzZXJ0LXBsdXMnKTtcbnZhciBtb2RfdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxudmFyIG1vZF9leHRzcHJpbnRmID0gcmVxdWlyZSgnZXh0c3ByaW50ZicpO1xudmFyIG1vZF9pc0Vycm9yID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJykuaXNFcnJvcjtcbnZhciBzcHJpbnRmID0gbW9kX2V4dHNwcmludGYuc3ByaW50ZjtcblxuLypcbiAqIFB1YmxpYyBpbnRlcmZhY2VcbiAqL1xuXG4vKiBTbyB5b3UgY2FuICd2YXIgVkVycm9yID0gcmVxdWlyZSgndmVycm9yJyknICovXG5tb2R1bGUuZXhwb3J0cyA9IFZFcnJvcjtcbi8qIEZvciBjb21wYXRpYmlsaXR5ICovXG5WRXJyb3IuVkVycm9yID0gVkVycm9yO1xuLyogT3RoZXIgZXhwb3J0ZWQgY2xhc3NlcyAqL1xuVkVycm9yLlNFcnJvciA9IFNFcnJvcjtcblZFcnJvci5XRXJyb3IgPSBXRXJyb3I7XG5WRXJyb3IuTXVsdGlFcnJvciA9IE11bHRpRXJyb3I7XG5cbi8qXG4gKiBDb21tb24gZnVuY3Rpb24gdXNlZCB0byBwYXJzZSBjb25zdHJ1Y3RvciBhcmd1bWVudHMgZm9yIFZFcnJvciwgV0Vycm9yLCBhbmRcbiAqIFNFcnJvci4gIE5hbWVkIGFyZ3VtZW50cyB0byB0aGlzIGZ1bmN0aW9uOlxuICpcbiAqICAgICBzdHJpY3RcdFx0Zm9yY2Ugc3RyaWN0IGludGVycHJldGF0aW9uIG9mIHNwcmludGYgYXJndW1lbnRzLCBldmVuXG4gKiAgICAgXHRcdFx0aWYgdGhlIG9wdGlvbnMgaW4gXCJhcmd2XCIgZG9uJ3Qgc2F5IHNvXG4gKlxuICogICAgIGFyZ3ZcdFx0ZXJyb3IncyBjb25zdHJ1Y3RvciBhcmd1bWVudHMsIHdoaWNoIGFyZSB0byBiZVxuICogICAgIFx0XHRcdGludGVycHJldGVkIGFzIGRlc2NyaWJlZCBpbiBSRUFETUUubWQuICBGb3IgcXVpY2tcbiAqICAgICBcdFx0XHRyZWZlcmVuY2UsIFwiYXJndlwiIGhhcyBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtczpcbiAqXG4gKiAgICAgICAgICBbIHNwcmludGZfYXJncy4uLiBdICAgICAgICAgICAoYXJndlswXSBpcyBhIHN0cmluZylcbiAqICAgICAgICAgIFsgY2F1c2UsIHNwcmludGZfYXJncy4uLiBdICAgIChhcmd2WzBdIGlzIGFuIEVycm9yKVxuICogICAgICAgICAgWyBvcHRpb25zLCBzcHJpbnRmX2FyZ3MuLi4gXSAgKGFyZ3ZbMF0gaXMgYW4gb2JqZWN0KVxuICpcbiAqIFRoaXMgZnVuY3Rpb24gbm9ybWFsaXplcyB0aGVzZSBmb3JtcywgcHJvZHVjaW5nIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmdcbiAqIHByb3BlcnRpZXM6XG4gKlxuICogICAgb3B0aW9ucyAgICAgICAgICAgZXF1aXZhbGVudCB0byBcIm9wdGlvbnNcIiBpbiB0aGlyZCBmb3JtLiAgVGhpcyB3aWxsIG5ldmVyXG4gKiAgICBcdFx0XHRiZSBhIGRpcmVjdCByZWZlcmVuY2UgdG8gd2hhdCB0aGUgY2FsbGVyIHBhc3NlZCBpblxuICogICAgXHRcdFx0KGkuZS4sIGl0IG1heSBiZSBhIHNoYWxsb3cgY29weSksIHNvIGl0IGNhbiBiZSBmcmVlbHlcbiAqICAgIFx0XHRcdG1vZGlmaWVkLlxuICpcbiAqICAgIHNob3J0bWVzc2FnZSAgICAgIHJlc3VsdCBvZiBzcHJpbnRmKHNwcmludGZfYXJncyksIHRha2luZyBvcHRpb25zLnN0cmljdFxuICogICAgXHRcdFx0aW50byBhY2NvdW50IGFzIGRlc2NyaWJlZCBpbiBSRUFETUUubWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoYXJncylcbntcblx0dmFyIGFyZ3YsIG9wdGlvbnMsIHNwcmludGZfYXJncywgc2hvcnRtZXNzYWdlLCBrO1xuXG5cdG1vZF9hc3NlcnRwbHVzLm9iamVjdChhcmdzLCAnYXJncycpO1xuXHRtb2RfYXNzZXJ0cGx1cy5ib29sKGFyZ3Muc3RyaWN0LCAnYXJncy5zdHJpY3QnKTtcblx0bW9kX2Fzc2VydHBsdXMuYXJyYXkoYXJncy5hcmd2LCAnYXJncy5hcmd2Jyk7XG5cdGFyZ3YgPSBhcmdzLmFyZ3Y7XG5cblx0Lypcblx0ICogRmlyc3QsIGZpZ3VyZSBvdXQgd2hpY2ggZm9ybSBvZiBpbnZvY2F0aW9uIHdlJ3ZlIGJlZW4gZ2l2ZW4uXG5cdCAqL1xuXHRpZiAoYXJndi5sZW5ndGggPT09IDApIHtcblx0XHRvcHRpb25zID0ge307XG5cdFx0c3ByaW50Zl9hcmdzID0gW107XG5cdH0gZWxzZSBpZiAobW9kX2lzRXJyb3IoYXJndlswXSkpIHtcblx0XHRvcHRpb25zID0geyAnY2F1c2UnOiBhcmd2WzBdIH07XG5cdFx0c3ByaW50Zl9hcmdzID0gYXJndi5zbGljZSgxKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgKGFyZ3ZbMF0pID09PSAnb2JqZWN0Jykge1xuXHRcdG9wdGlvbnMgPSB7fTtcblx0XHRmb3IgKGsgaW4gYXJndlswXSkge1xuXHRcdFx0b3B0aW9uc1trXSA9IGFyZ3ZbMF1ba107XG5cdFx0fVxuXHRcdHNwcmludGZfYXJncyA9IGFyZ3Yuc2xpY2UoMSk7XG5cdH0gZWxzZSB7XG5cdFx0bW9kX2Fzc2VydHBsdXMuc3RyaW5nKGFyZ3ZbMF0sXG5cdFx0ICAgICdmaXJzdCBhcmd1bWVudCB0byBWRXJyb3IsIFNFcnJvciwgb3IgV0Vycm9yICcgK1xuXHRcdCAgICAnY29uc3RydWN0b3IgbXVzdCBiZSBhIHN0cmluZywgb2JqZWN0LCBvciBFcnJvcicpO1xuXHRcdG9wdGlvbnMgPSB7fTtcblx0XHRzcHJpbnRmX2FyZ3MgPSBhcmd2O1xuXHR9XG5cblx0Lypcblx0ICogTm93IGNvbnN0cnVjdCB0aGUgZXJyb3IncyBtZXNzYWdlLlxuXHQgKlxuXHQgKiBleHRzcHJpbnRmICh3aGljaCB3ZSBpbnZva2UgaGVyZSB3aXRoIG91ciBjYWxsZXIncyBhcmd1bWVudHMgaW4gb3JkZXJcblx0ICogdG8gY29uc3RydWN0IHRoaXMgRXJyb3IncyBtZXNzYWdlKSBpcyBzdHJpY3QgaW4gaXRzIGludGVycHJldGF0aW9uIG9mXG5cdCAqIHZhbHVlcyB0byBiZSBwcm9jZXNzZWQgYnkgdGhlIFwiJXNcIiBzcGVjaWZpZXIuICBUaGUgdmFsdWUgcGFzc2VkIHRvXG5cdCAqIGV4dHNwcmludGYgbXVzdCBhY3R1YWxseSBiZSBhIHN0cmluZyBvciBzb21ldGhpbmcgY29udmVydGlibGUgdG8gYVxuXHQgKiBTdHJpbmcgdXNpbmcgLnRvU3RyaW5nKCkuICBQYXNzaW5nIG90aGVyIHZhbHVlcyAobm90YWJseSBcIm51bGxcIiBhbmRcblx0ICogXCJ1bmRlZmluZWRcIikgaXMgY29uc2lkZXJlZCBhIHByb2dyYW1tZXIgZXJyb3IuICBUaGUgYXNzdW1wdGlvbiBpc1xuXHQgKiB0aGF0IGlmIHlvdSBhY3R1YWxseSB3YW50IHRvIHByaW50IHRoZSBzdHJpbmcgXCJudWxsXCIgb3IgXCJ1bmRlZmluZWRcIixcblx0ICogdGhlbiB0aGF0J3MgZWFzeSB0byBkbyB0aGF0IHdoZW4geW91J3JlIGNhbGxpbmcgZXh0c3ByaW50Zjsgb24gdGhlXG5cdCAqIG90aGVyIGhhbmQsIGlmIHlvdSBkaWQgTk9UIHdhbnQgdGhhdCAoaS5lLiwgdGhlcmUncyBhY3R1YWxseSBhIGJ1Z1xuXHQgKiB3aGVyZSB0aGUgcHJvZ3JhbSBhc3N1bWVzIHNvbWUgdmFyaWFibGUgaXMgbm9uLW51bGwgYW5kIHRyaWVzIHRvXG5cdCAqIHByaW50IGl0LCB3aGljaCBtaWdodCBoYXBwZW4gd2hlbiBjb25zdHJ1Y3RpbmcgYSBwYWNrZXQgb3IgZmlsZSBpblxuXHQgKiBzb21lIHNwZWNpZmljIGZvcm1hdCksIHRoZW4gaXQncyBiZXR0ZXIgdG8gc3RvcCBpbW1lZGlhdGVseSB0aGFuXG5cdCAqIHByb2R1Y2UgYm9ndXMgb3V0cHV0LlxuXHQgKlxuXHQgKiBIb3dldmVyLCBzb21ldGltZXMgdGhlIGJ1ZyBpcyBvbmx5IGluIHRoZSBjb2RlIGNhbGxpbmcgVkVycm9yLCBhbmQgYVxuXHQgKiBwcm9ncmFtbWVyIG1pZ2h0IHByZWZlciB0byBoYXZlIHRoZSBlcnJvciBtZXNzYWdlIGNvbnRhaW4gXCJudWxsXCIgb3Jcblx0ICogXCJ1bmRlZmluZWRcIiByYXRoZXIgdGhhbiBoYXZlIHRoZSBidWcgaW4gdGhlIGVycm9yIHBhdGggY3Jhc2ggdGhlXG5cdCAqIHByb2dyYW0gKG1ha2luZyB0aGUgZmlyc3QgYnVnIGhhcmRlciB0byBpZGVudGlmeSkuICBGb3IgdGhhdCByZWFzb24sXG5cdCAqIGJ5IGRlZmF1bHQgVkVycm9yIGNvbnZlcnRzIFwibnVsbFwiIG9yIFwidW5kZWZpbmVkXCIgYXJndW1lbnRzIHRvIHRoZWlyXG5cdCAqIHN0cmluZyByZXByZXNlbnRhdGlvbnMgYW5kIHBhc3NlcyB0aG9zZSB0byBleHRzcHJpbnRmLiAgUHJvZ3JhbW1lcnNcblx0ICogZGVzaXJpbmcgdGhlIHN0cmljdCBiZWhhdmlvciBjYW4gdXNlIHRoZSBTRXJyb3IgY2xhc3Mgb3IgcGFzcyB0aGVcblx0ICogXCJzdHJpY3RcIiBvcHRpb24gdG8gdGhlIFZFcnJvciBjb25zdHJ1Y3Rvci5cblx0ICovXG5cdG1vZF9hc3NlcnRwbHVzLm9iamVjdChvcHRpb25zKTtcblx0aWYgKCFvcHRpb25zLnN0cmljdCAmJiAhYXJncy5zdHJpY3QpIHtcblx0XHRzcHJpbnRmX2FyZ3MgPSBzcHJpbnRmX2FyZ3MubWFwKGZ1bmN0aW9uIChhKSB7XG5cdFx0XHRyZXR1cm4gKGEgPT09IG51bGwgPyAnbnVsbCcgOlxuXHRcdFx0ICAgIGEgPT09IHVuZGVmaW5lZCA/ICd1bmRlZmluZWQnIDogYSk7XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoc3ByaW50Zl9hcmdzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHNob3J0bWVzc2FnZSA9ICcnO1xuXHR9IGVsc2Uge1xuXHRcdHNob3J0bWVzc2FnZSA9IHNwcmludGYuYXBwbHkobnVsbCwgc3ByaW50Zl9hcmdzKTtcblx0fVxuXG5cdHJldHVybiAoe1xuXHQgICAgJ29wdGlvbnMnOiBvcHRpb25zLFxuXHQgICAgJ3Nob3J0bWVzc2FnZSc6IHNob3J0bWVzc2FnZVxuXHR9KTtcbn1cblxuLypcbiAqIFNlZSBSRUFETUUubWQgZm9yIHJlZmVyZW5jZSBkb2N1bWVudGF0aW9uLlxuICovXG5mdW5jdGlvbiBWRXJyb3IoKVxue1xuXHR2YXIgYXJncywgb2JqLCBwYXJzZWQsIGNhdXNlLCBjdG9yLCBtZXNzYWdlLCBrO1xuXG5cdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXG5cdC8qXG5cdCAqIFRoaXMgaXMgYSByZWdyZXR0YWJsZSBwYXR0ZXJuLCBidXQgSmF2YVNjcmlwdCdzIGJ1aWx0LWluIEVycm9yIGNsYXNzXG5cdCAqIGlzIGRlZmluZWQgdG8gd29yayB0aGlzIHdheSwgc28gd2UgYWxsb3cgdGhlIGNvbnN0cnVjdG9yIHRvIGJlIGNhbGxlZFxuXHQgKiB3aXRob3V0IFwibmV3XCIuXG5cdCAqL1xuXHRpZiAoISh0aGlzIGluc3RhbmNlb2YgVkVycm9yKSkge1xuXHRcdG9iaiA9IE9iamVjdC5jcmVhdGUoVkVycm9yLnByb3RvdHlwZSk7XG5cdFx0VkVycm9yLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gKG9iaik7XG5cdH1cblxuXHQvKlxuXHQgKiBGb3IgY29udmVuaWVuY2UgYW5kIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB3ZSBzdXBwb3J0IHNldmVyYWxcblx0ICogZGlmZmVyZW50IGNhbGxpbmcgZm9ybXMuICBOb3JtYWxpemUgdGhlbSBoZXJlLlxuXHQgKi9cblx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdCAgICAnYXJndic6IGFyZ3MsXG5cdCAgICAnc3RyaWN0JzogZmFsc2Vcblx0fSk7XG5cblx0Lypcblx0ICogSWYgd2UndmUgYmVlbiBnaXZlbiBhIG5hbWUsIGFwcGx5IGl0IG5vdy5cblx0ICovXG5cdGlmIChwYXJzZWQub3B0aW9ucy5uYW1lKSB7XG5cdFx0bW9kX2Fzc2VydHBsdXMuc3RyaW5nKHBhcnNlZC5vcHRpb25zLm5hbWUsXG5cdFx0ICAgICdlcnJvclxcJ3MgXCJuYW1lXCIgbXVzdCBiZSBhIHN0cmluZycpO1xuXHRcdHRoaXMubmFtZSA9IHBhcnNlZC5vcHRpb25zLm5hbWU7XG5cdH1cblxuXHQvKlxuXHQgKiBGb3IgZGVidWdnaW5nLCB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBvcmlnaW5hbCBzaG9ydCBtZXNzYWdlIChhdHRhY2hlZFxuXHQgKiB0aGlzIEVycm9yIHBhcnRpY3VsYXJseSkgc2VwYXJhdGVseSBmcm9tIHRoZSBjb21wbGV0ZSBtZXNzYWdlICh3aGljaFxuXHQgKiBpbmNsdWRlcyB0aGUgbWVzc2FnZXMgb2Ygb3VyIGNhdXNlIGNoYWluKS5cblx0ICovXG5cdHRoaXMuanNlX3Nob3J0bXNnID0gcGFyc2VkLnNob3J0bWVzc2FnZTtcblx0bWVzc2FnZSA9IHBhcnNlZC5zaG9ydG1lc3NhZ2U7XG5cblx0Lypcblx0ICogSWYgd2UndmUgYmVlbiBnaXZlbiBhIGNhdXNlLCByZWNvcmQgYSByZWZlcmVuY2UgdG8gaXQgYW5kIHVwZGF0ZSBvdXJcblx0ICogbWVzc2FnZSBhcHByb3ByaWF0ZWx5LlxuXHQgKi9cblx0Y2F1c2UgPSBwYXJzZWQub3B0aW9ucy5jYXVzZTtcblx0aWYgKGNhdXNlKSB7XG5cdFx0bW9kX2Fzc2VydHBsdXMub2sobW9kX2lzRXJyb3IoY2F1c2UpLCAnY2F1c2UgaXMgbm90IGFuIEVycm9yJyk7XG5cdFx0dGhpcy5qc2VfY2F1c2UgPSBjYXVzZTtcblxuXHRcdGlmICghcGFyc2VkLm9wdGlvbnMuc2tpcENhdXNlTWVzc2FnZSkge1xuXHRcdFx0bWVzc2FnZSArPSAnOiAnICsgY2F1c2UubWVzc2FnZTtcblx0XHR9XG5cdH1cblxuXHQvKlxuXHQgKiBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMsIHNoYWxsb3ctY29weSB0aGF0XG5cdCAqIGhlcmUuICBXZSBkb24ndCB3YW50IHRvIHVzZSBhIGRlZXAgY29weSBpbiBjYXNlIHRoZXJlIGFyZSBub24tcGxhaW5cblx0ICogb2JqZWN0cyBoZXJlLCBidXQgd2UgZG9uJ3Qgd2FudCB0byB1c2UgdGhlIG9yaWdpbmFsIG9iamVjdCBpbiBjYXNlXG5cdCAqIHRoZSBjYWxsZXIgbW9kaWZpZXMgaXQgbGF0ZXIuXG5cdCAqL1xuXHR0aGlzLmpzZV9pbmZvID0ge307XG5cdGlmIChwYXJzZWQub3B0aW9ucy5pbmZvKSB7XG5cdFx0Zm9yIChrIGluIHBhcnNlZC5vcHRpb25zLmluZm8pIHtcblx0XHRcdHRoaXMuanNlX2luZm9ba10gPSBwYXJzZWQub3B0aW9ucy5pbmZvW2tdO1xuXHRcdH1cblx0fVxuXG5cdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cblx0aWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG5cdFx0Y3RvciA9IHBhcnNlZC5vcHRpb25zLmNvbnN0cnVjdG9yT3B0IHx8IHRoaXMuY29uc3RydWN0b3I7XG5cdFx0RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgY3Rvcik7XG5cdH1cblxuXHRyZXR1cm4gKHRoaXMpO1xufVxuXG5tb2RfdXRpbC5pbmhlcml0cyhWRXJyb3IsIEVycm9yKTtcblZFcnJvci5wcm90b3R5cGUubmFtZSA9ICdWRXJyb3InO1xuXG5WRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdmVfdG9TdHJpbmcoKVxue1xuXHR2YXIgc3RyID0gKHRoaXMuaGFzT3duUHJvcGVydHkoJ25hbWUnKSAmJiB0aGlzLm5hbWUgfHxcblx0XHR0aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUubmFtZSk7XG5cdGlmICh0aGlzLm1lc3NhZ2UpXG5cdFx0c3RyICs9ICc6ICcgKyB0aGlzLm1lc3NhZ2U7XG5cblx0cmV0dXJuIChzdHIpO1xufTtcblxuLypcbiAqIFRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGZvciBjb21wYXRpYmlsaXR5LiAgTmV3IGNhbGxlcnMgc2hvdWxkIHVzZVxuICogVkVycm9yLmNhdXNlKCkgaW5zdGVhZC4gIFRoYXQgbWV0aG9kIGFsc28gdXNlcyB0aGUgc2FuZXIgYG51bGxgIHJldHVybiB2YWx1ZVxuICogd2hlbiB0aGVyZSBpcyBubyBjYXVzZS5cbiAqL1xuVkVycm9yLnByb3RvdHlwZS5jYXVzZSA9IGZ1bmN0aW9uIHZlX2NhdXNlKClcbntcblx0dmFyIGNhdXNlID0gVkVycm9yLmNhdXNlKHRoaXMpO1xuXHRyZXR1cm4gKGNhdXNlID09PSBudWxsID8gdW5kZWZpbmVkIDogY2F1c2UpO1xufTtcblxuLypcbiAqIFN0YXRpYyBtZXRob2RzXG4gKlxuICogVGhlc2UgY2xhc3MtbGV2ZWwgbWV0aG9kcyBhcmUgcHJvdmlkZWQgc28gdGhhdCBjYWxsZXJzIGNhbiB1c2UgdGhlbSBvblxuICogaW5zdGFuY2VzIG9mIEVycm9ycyB0aGF0IGFyZSBub3QgVkVycm9ycy4gIE5ldyBpbnRlcmZhY2VzIHNob3VsZCBiZSBwcm92aWRlZFxuICogb25seSB1c2luZyBzdGF0aWMgbWV0aG9kcyB0byBlbGltaW5hdGUgdGhlIGNsYXNzIG9mIHByb2dyYW1taW5nIG1pc3Rha2Ugd2hlcmVcbiAqIHBlb3BsZSBmYWlsIHRvIGNoZWNrIHdoZXRoZXIgdGhlIEVycm9yIG9iamVjdCBoYXMgdGhlIGNvcnJlc3BvbmRpbmcgbWV0aG9kcy5cbiAqL1xuXG5WRXJyb3IuY2F1c2UgPSBmdW5jdGlvbiAoZXJyKVxue1xuXHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0cmV0dXJuIChtb2RfaXNFcnJvcihlcnIuanNlX2NhdXNlKSA/IGVyci5qc2VfY2F1c2UgOiBudWxsKTtcbn07XG5cblZFcnJvci5pbmZvID0gZnVuY3Rpb24gKGVycilcbntcblx0dmFyIHJ2LCBjYXVzZSwgaztcblxuXHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblx0Y2F1c2UgPSBWRXJyb3IuY2F1c2UoZXJyKTtcblx0aWYgKGNhdXNlICE9PSBudWxsKSB7XG5cdFx0cnYgPSBWRXJyb3IuaW5mbyhjYXVzZSk7XG5cdH0gZWxzZSB7XG5cdFx0cnYgPSB7fTtcblx0fVxuXG5cdGlmICh0eXBlb2YgKGVyci5qc2VfaW5mbykgPT0gJ29iamVjdCcgJiYgZXJyLmpzZV9pbmZvICE9PSBudWxsKSB7XG5cdFx0Zm9yIChrIGluIGVyci5qc2VfaW5mbykge1xuXHRcdFx0cnZba10gPSBlcnIuanNlX2luZm9ba107XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIChydik7XG59O1xuXG5WRXJyb3IuZmluZENhdXNlQnlOYW1lID0gZnVuY3Rpb24gKGVyciwgbmFtZSlcbntcblx0dmFyIGNhdXNlO1xuXG5cdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGVyciksICdlcnIgbXVzdCBiZSBhbiBFcnJvcicpO1xuXHRtb2RfYXNzZXJ0cGx1cy5zdHJpbmcobmFtZSk7XG5cdG1vZF9hc3NlcnRwbHVzLm9rKG5hbWUubGVuZ3RoID4gMCwgJ25hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG5cblx0Zm9yIChjYXVzZSA9IGVycjsgY2F1c2UgIT09IG51bGw7IGNhdXNlID0gVkVycm9yLmNhdXNlKGNhdXNlKSkge1xuXHRcdG1vZF9hc3NlcnRwbHVzLm9rKG1vZF9pc0Vycm9yKGNhdXNlKSk7XG5cdFx0aWYgKGNhdXNlLm5hbWUgPT0gbmFtZSkge1xuXHRcdFx0cmV0dXJuIChjYXVzZSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIChudWxsKTtcbn07XG5cblZFcnJvci5mdWxsU3RhY2sgPSBmdW5jdGlvbiAoZXJyKVxue1xuXHRtb2RfYXNzZXJ0cGx1cy5vayhtb2RfaXNFcnJvcihlcnIpLCAnZXJyIG11c3QgYmUgYW4gRXJyb3InKTtcblxuXHR2YXIgY2F1c2UgPSBWRXJyb3IuY2F1c2UoZXJyKTtcblxuXHRpZiAoY2F1c2UpIHtcblx0XHRyZXR1cm4gKGVyci5zdGFjayArICdcXG5jYXVzZWQgYnk6ICcgKyBWRXJyb3IuZnVsbFN0YWNrKGNhdXNlKSk7XG5cdH1cblxuXHRyZXR1cm4gKGVyci5zdGFjayk7XG59O1xuXG5cbi8qXG4gKiBTRXJyb3IgaXMgbGlrZSBWRXJyb3IsIGJ1dCBzdHJpY3RlciBhYm91dCB0eXBlcy4gIFlvdSBjYW5ub3QgcGFzcyBcIm51bGxcIiBvclxuICogXCJ1bmRlZmluZWRcIiBhcyBzdHJpbmcgYXJndW1lbnRzIHRvIHRoZSBmb3JtYXR0ZXIuXG4gKi9cbmZ1bmN0aW9uIFNFcnJvcigpXG57XG5cdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgb3B0aW9ucztcblxuXHRhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFNFcnJvcikpIHtcblx0XHRvYmogPSBPYmplY3QuY3JlYXRlKFNFcnJvci5wcm90b3R5cGUpO1xuXHRcdFNFcnJvci5hcHBseShvYmosIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIChvYmopO1xuXHR9XG5cblx0cGFyc2VkID0gcGFyc2VDb25zdHJ1Y3RvckFyZ3VtZW50cyh7XG5cdCAgICAnYXJndic6IGFyZ3MsXG5cdCAgICAnc3RyaWN0JzogdHJ1ZVxuXHR9KTtcblxuXHRvcHRpb25zID0gcGFyc2VkLm9wdGlvbnM7XG5cdFZFcnJvci5jYWxsKHRoaXMsIG9wdGlvbnMsICclcycsIHBhcnNlZC5zaG9ydG1lc3NhZ2UpO1xuXG5cdHJldHVybiAodGhpcyk7XG59XG5cbi8qXG4gKiBXZSBkb24ndCBib3RoZXIgc2V0dGluZyBTRXJyb3IucHJvdG90eXBlLm5hbWUgYmVjYXVzZSBvbmNlIGNvbnN0cnVjdGVkLFxuICogU0Vycm9ycyBhcmUganVzdCBsaWtlIFZFcnJvcnMuXG4gKi9cbm1vZF91dGlsLmluaGVyaXRzKFNFcnJvciwgVkVycm9yKTtcblxuXG4vKlxuICogUmVwcmVzZW50cyBhIGNvbGxlY3Rpb24gb2YgZXJyb3JzIGZvciB0aGUgcHVycG9zZSBvZiBjb25zdW1lcnMgdGhhdCBnZW5lcmFsbHlcbiAqIG9ubHkgZGVhbCB3aXRoIG9uZSBlcnJvci4gIENhbGxlcnMgY2FuIGV4dHJhY3QgdGhlIGluZGl2aWR1YWwgZXJyb3JzXG4gKiBjb250YWluZWQgaW4gdGhpcyBvYmplY3QsIGJ1dCBtYXkgYWxzbyBqdXN0IHRyZWF0IGl0IGFzIGEgbm9ybWFsIHNpbmdsZVxuICogZXJyb3IsIGluIHdoaWNoIGNhc2UgYSBzdW1tYXJ5IG1lc3NhZ2Ugd2lsbCBiZSBwcmludGVkLlxuICovXG5mdW5jdGlvbiBNdWx0aUVycm9yKGVycm9ycylcbntcblx0bW9kX2Fzc2VydHBsdXMuYXJyYXkoZXJyb3JzLCAnbGlzdCBvZiBlcnJvcnMnKTtcblx0bW9kX2Fzc2VydHBsdXMub2soZXJyb3JzLmxlbmd0aCA+IDAsICdtdXN0IGJlIGF0IGxlYXN0IG9uZSBlcnJvcicpO1xuXHR0aGlzLmFzZV9lcnJvcnMgPSBlcnJvcnM7XG5cblx0VkVycm9yLmNhbGwodGhpcywge1xuXHQgICAgJ2NhdXNlJzogZXJyb3JzWzBdXG5cdH0sICdmaXJzdCBvZiAlZCBlcnJvciVzJywgZXJyb3JzLmxlbmd0aCwgZXJyb3JzLmxlbmd0aCA9PSAxID8gJycgOiAncycpO1xufVxuXG5tb2RfdXRpbC5pbmhlcml0cyhNdWx0aUVycm9yLCBWRXJyb3IpO1xuTXVsdGlFcnJvci5wcm90b3R5cGUubmFtZSA9ICdNdWx0aUVycm9yJztcblxuTXVsdGlFcnJvci5wcm90b3R5cGUuZXJyb3JzID0gZnVuY3Rpb24gbWVfZXJyb3JzKClcbntcblx0cmV0dXJuICh0aGlzLmFzZV9lcnJvcnMuc2xpY2UoMCkpO1xufTtcblxuXG4vKlxuICogU2VlIFJFQURNRS5tZCBmb3IgcmVmZXJlbmNlIGRldGFpbHMuXG4gKi9cbmZ1bmN0aW9uIFdFcnJvcigpXG57XG5cdHZhciBhcmdzLCBvYmosIHBhcnNlZCwgb3B0aW9ucztcblxuXHRhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFdFcnJvcikpIHtcblx0XHRvYmogPSBPYmplY3QuY3JlYXRlKFdFcnJvci5wcm90b3R5cGUpO1xuXHRcdFdFcnJvci5hcHBseShvYmosIGFyZ3MpO1xuXHRcdHJldHVybiAob2JqKTtcblx0fVxuXG5cdHBhcnNlZCA9IHBhcnNlQ29uc3RydWN0b3JBcmd1bWVudHMoe1xuXHQgICAgJ2FyZ3YnOiBhcmdzLFxuXHQgICAgJ3N0cmljdCc6IGZhbHNlXG5cdH0pO1xuXG5cdG9wdGlvbnMgPSBwYXJzZWQub3B0aW9ucztcblx0b3B0aW9uc1snc2tpcENhdXNlTWVzc2FnZSddID0gdHJ1ZTtcblx0VkVycm9yLmNhbGwodGhpcywgb3B0aW9ucywgJyVzJywgcGFyc2VkLnNob3J0bWVzc2FnZSk7XG5cblx0cmV0dXJuICh0aGlzKTtcbn1cblxubW9kX3V0aWwuaW5oZXJpdHMoV0Vycm9yLCBWRXJyb3IpO1xuV0Vycm9yLnByb3RvdHlwZS5uYW1lID0gJ1dFcnJvcic7XG5cbldFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB3ZV90b1N0cmluZygpXG57XG5cdHZhciBzdHIgPSAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpICYmIHRoaXMubmFtZSB8fFxuXHRcdHRoaXMuY29uc3RydWN0b3IubmFtZSB8fCB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lKTtcblx0aWYgKHRoaXMubWVzc2FnZSlcblx0XHRzdHIgKz0gJzogJyArIHRoaXMubWVzc2FnZTtcblx0aWYgKHRoaXMuanNlX2NhdXNlICYmIHRoaXMuanNlX2NhdXNlLm1lc3NhZ2UpXG5cdFx0c3RyICs9ICc7IGNhdXNlZCBieSAnICsgdGhpcy5qc2VfY2F1c2UudG9TdHJpbmcoKTtcblxuXHRyZXR1cm4gKHN0cik7XG59O1xuXG4vKlxuICogRm9yIHB1cmVseSBoaXN0b3JpY2FsIHJlYXNvbnMsIFdFcnJvcidzIGNhdXNlKCkgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXRcbiAqIHRoZSBjYXVzZS5cbiAqL1xuV0Vycm9yLnByb3RvdHlwZS5jYXVzZSA9IGZ1bmN0aW9uIHdlX2NhdXNlKGMpXG57XG5cdGlmIChtb2RfaXNFcnJvcihjKSlcblx0XHR0aGlzLmpzZV9jYXVzZSA9IGM7XG5cblx0cmV0dXJuICh0aGlzLmpzZV9jYXVzZSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3ZlcnJvci9saWIvdmVycm9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTIsIE1hcmsgQ2F2YWdlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gQ29weXJpZ2h0IDIwMTUgSm95ZW50LCBJbmMuXG5cbnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKTtcbnZhciBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKS5TdHJlYW07XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuXG4vLy8tLS0gR2xvYmFsc1xuXG4vKiBKU1NUWUxFRCAqL1xudmFyIFVVSURfUkVHRVhQID0gL15bYS1mQS1GMC05XXs4fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXs0fS1bYS1mQS1GMC05XXsxMn0kLztcblxuXG4vLy8tLS0gSW50ZXJuYWxcblxuZnVuY3Rpb24gX2NhcGl0YWxpemUoc3RyKSB7XG4gICAgcmV0dXJuIChzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkpO1xufVxuXG5mdW5jdGlvbiBfdG9zcyhuYW1lLCBleHBlY3RlZCwgb3BlciwgYXJnLCBhY3R1YWwpIHtcbiAgICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogdXRpbC5mb3JtYXQoJyVzICglcykgaXMgcmVxdWlyZWQnLCBuYW1lLCBleHBlY3RlZCksXG4gICAgICAgIGFjdHVhbDogKGFjdHVhbCA9PT0gdW5kZWZpbmVkKSA/IHR5cGVvZiAoYXJnKSA6IGFjdHVhbChhcmcpLFxuICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG4gICAgICAgIG9wZXJhdG9yOiBvcGVyIHx8ICc9PT0nLFxuICAgICAgICBzdGFja1N0YXJ0RnVuY3Rpb246IF90b3NzLmNhbGxlclxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBfZ2V0Q2xhc3MoYXJnKSB7XG4gICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKS5zbGljZSg4LCAtMSkpO1xufVxuXG5mdW5jdGlvbiBub29wKCkge1xuICAgIC8vIFdoeSBldmVuIGJvdGhlciB3aXRoIGFzc2VydHM/XG59XG5cblxuLy8vLS0tIEV4cG9ydHNcblxudmFyIHR5cGVzID0ge1xuICAgIGJvb2w6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ2Jvb2xlYW4nOyB9XG4gICAgfSxcbiAgICBmdW5jOiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdmdW5jdGlvbic7IH1cbiAgICB9LFxuICAgIHN0cmluZzoge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnc3RyaW5nJzsgfVxuICAgIH0sXG4gICAgb2JqZWN0OiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIChhcmcpID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG51bWJlcjoge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGFyZyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGZpbml0ZToge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiAoYXJnKSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGFyZykgJiYgaXNGaW5pdGUoYXJnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYnVmZmVyOiB7XG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBCdWZmZXIuaXNCdWZmZXIoYXJnKTsgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdCdWZmZXIuaXNCdWZmZXInXG4gICAgfSxcbiAgICBhcnJheToge1xuICAgICAgICBjaGVjazogZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpOyB9LFxuICAgICAgICBvcGVyYXRvcjogJ0FycmF5LmlzQXJyYXknXG4gICAgfSxcbiAgICBzdHJlYW06IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIFN0cmVhbTsgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcbiAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3NcbiAgICB9LFxuICAgIGRhdGU6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIERhdGU7IH0sXG4gICAgICAgIG9wZXJhdG9yOiAnaW5zdGFuY2VvZicsXG4gICAgICAgIGFjdHVhbDogX2dldENsYXNzXG4gICAgfSxcbiAgICByZWdleHA6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIFJlZ0V4cDsgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdpbnN0YW5jZW9mJyxcbiAgICAgICAgYWN0dWFsOiBfZ2V0Q2xhc3NcbiAgICB9LFxuICAgIHV1aWQ6IHtcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdzdHJpbmcnICYmIFVVSURfUkVHRVhQLnRlc3QoYXJnKTtcbiAgICAgICAgfSxcbiAgICAgICAgb3BlcmF0b3I6ICdpc1VVSUQnXG4gICAgfVxufTtcblxuZnVuY3Rpb24gX3NldEV4cG9ydHMobmRlYnVnKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0eXBlcyk7XG4gICAgdmFyIG91dDtcblxuICAgIC8qIHJlLWV4cG9ydCBzdGFuZGFyZCBhc3NlcnQgKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9OREVCVUcpIHtcbiAgICAgICAgb3V0ID0gbm9vcDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvdXQgPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmICghYXJnKSB7XG4gICAgICAgICAgICAgICAgX3Rvc3MobXNnLCAndHJ1ZScsIGFyZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyogc3RhbmRhcmQgY2hlY2tzICovXG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIGlmIChuZGVidWcpIHtcbiAgICAgICAgICAgIG91dFtrXSA9IG5vb3A7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcbiAgICAgICAgb3V0W2tdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG4gICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnKSkge1xuICAgICAgICAgICAgICAgIF90b3NzKG1zZywgaywgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKiBvcHRpb25hbCBjaGVja3MgKi9cbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIG5hbWUgPSAnb3B0aW9uYWwnICsgX2NhcGl0YWxpemUoayk7XG4gICAgICAgIGlmIChuZGVidWcpIHtcbiAgICAgICAgICAgIG91dFtuYW1lXSA9IG5vb3A7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1trXTtcbiAgICAgICAgb3V0W25hbWVdID0gZnVuY3Rpb24gKGFyZywgbXNnKSB7XG4gICAgICAgICAgICBpZiAoYXJnID09PSB1bmRlZmluZWQgfHwgYXJnID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZykpIHtcbiAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGssIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyogYXJyYXlPZiBjaGVja3MgKi9cbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIG5hbWUgPSAnYXJyYXlPZicgKyBfY2FwaXRhbGl6ZShrKTtcbiAgICAgICAgaWYgKG5kZWJ1Zykge1xuICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuICAgICAgICB2YXIgZXhwZWN0ZWQgPSAnWycgKyBrICsgJ10nO1xuICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2hlY2soYXJnW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBfdG9zcyhtc2csIGV4cGVjdGVkLCB0eXBlLm9wZXJhdG9yLCBhcmcsIHR5cGUuYWN0dWFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKiBvcHRpb25hbEFycmF5T2YgY2hlY2tzICovXG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHZhciBuYW1lID0gJ29wdGlvbmFsQXJyYXlPZicgKyBfY2FwaXRhbGl6ZShrKTtcbiAgICAgICAgaWYgKG5kZWJ1Zykge1xuICAgICAgICAgICAgb3V0W25hbWVdID0gbm9vcDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2tdO1xuICAgICAgICB2YXIgZXhwZWN0ZWQgPSAnWycgKyBrICsgJ10nO1xuICAgICAgICBvdXRbbmFtZV0gPSBmdW5jdGlvbiAoYXJnLCBtc2cpIHtcbiAgICAgICAgICAgIGlmIChhcmcgPT09IHVuZGVmaW5lZCB8fCBhcmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgICAgICAgICAgICAgIF90b3NzKG1zZywgZXhwZWN0ZWQsIHR5cGUub3BlcmF0b3IsIGFyZywgdHlwZS5hY3R1YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlLmNoZWNrKGFyZ1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3Rvc3MobXNnLCBleHBlY3RlZCwgdHlwZS5vcGVyYXRvciwgYXJnLCB0eXBlLmFjdHVhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyogcmUtZXhwb3J0IGJ1aWx0LWluIGFzc2VydGlvbnMgKi9cbiAgICBPYmplY3Qua2V5cyhhc3NlcnQpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKGsgPT09ICdBc3NlcnRpb25FcnJvcicpIHtcbiAgICAgICAgICAgIG91dFtrXSA9IGFzc2VydFtrXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmRlYnVnKSB7XG4gICAgICAgICAgICBvdXRba10gPSBub29wO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG91dFtrXSA9IGFzc2VydFtrXTtcbiAgICB9KTtcblxuICAgIC8qIGV4cG9ydCBvdXJzZWx2ZXMgKGZvciB1bml0IHRlc3RzIF9vbmx5XykgKi9cbiAgICBvdXQuX3NldEV4cG9ydHMgPSBfc2V0RXhwb3J0cztcblxuICAgIHJldHVybiBvdXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NldEV4cG9ydHMocHJvY2Vzcy5lbnYuTk9ERV9OREVCVUcpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3ZlcnJvci9+L2Fzc2VydC1wbHVzL2Fzc2VydC5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG4gIH1cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgaWYgKHRoYXQgPT09IG51bGwpIHtcbiAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgICB9XG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbi8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcbiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblxuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IGFycmF5XG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblxuICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoYXRcbiAgICB9XG5cbiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIHRoYXRcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuICAgIH1cblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuLy8gQnVmZmVyIGluc3RhbmNlcy5cbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIHZhciB5ID0gZW5kIC0gc3RhcnRcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cbiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcbiAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY29kZSA8IDI1Nikge1xuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5leHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcbmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXlcblxudmFyIGxvb2t1cCA9IFtdXG52YXIgcmV2TG9va3VwID0gW11cbnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXlcblxudmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLydcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV1cbiAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpXG59XG5cbnJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxucmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cbmZ1bmN0aW9uIHBsYWNlSG9sZGVyc0NvdW50IChiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG4gIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcbiAgLy8gcmVwcmVzZW50IG9uZSBieXRlXG4gIC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG4gIHJldHVybiBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbiAgcmV0dXJuIGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVyc0NvdW50KGI2NClcbn1cblxuZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkge1xuICB2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICBwbGFjZUhvbGRlcnMgPSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG5cbiAgYXJyID0gbmV3IEFycihsZW4gKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gbGVuIC0gNCA6IGxlblxuXG4gIHZhciBMID0gMFxuXG4gIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyKVxuICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcbiAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICsgbG9va3VwW251bSAmIDB4M0ZdXG59XG5cbmZ1bmN0aW9uIGVuY29kZUNodW5rICh1aW50OCwgc3RhcnQsIGVuZCkge1xuICB2YXIgdG1wXG4gIHZhciBvdXRwdXQgPSBbXVxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgIHRtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIG91dHB1dCA9ICcnXG4gIHZhciBwYXJ0cyA9IFtdXG4gIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpXG4gIH1cblxuICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG4gIGlmIChleHRyYUJ5dGVzID09PSAxKSB7XG4gICAgdG1wID0gdWludDhbbGVuIC0gMV1cbiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9ICc9PSdcbiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG4gICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgKHVpbnQ4W2xlbiAtIDFdKVxuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDEwXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gJz0nXG4gIH1cblxuICBwYXJ0cy5wdXNoKG91dHB1dClcblxuICByZXR1cm4gcGFydHMuam9pbignJylcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vYmFzZTY0LWpzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIG5CaXRzID0gLTdcbiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcbiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblxuICBpICs9IGRcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBzID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBlTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcbiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcbiAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG4gICAgZSA9IGVNYXhcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS1cbiAgICAgIGMgKj0gMlxuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKytcbiAgICAgIGMgLz0gMlxuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDBcbiAgICAgIGUgPSBlTWF4XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaWVlZTc1NC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9+L2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBjb21wYXJlIGFuZCBpc0J1ZmZlciB0YWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2Jsb2IvNjgwZTllNWU0ODhmMjJhYWMyNzU5OWE1N2RjODQ0YTYzMTU5MjhkZC9pbmRleC5qc1xuLy8gb3JpZ2luYWwgbm90aWNlOlxuXG4vKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5mdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciB4ID0gYS5sZW5ndGg7XG4gIHZhciB5ID0gYi5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV07XG4gICAgICB5ID0gYltpXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBpZiAoeSA8IHgpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIGlzQnVmZmVyKGIpIHtcbiAgaWYgKGdsb2JhbC5CdWZmZXIgJiYgdHlwZW9mIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihiKTtcbiAgfVxuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKTtcbn1cblxuLy8gYmFzZWQgb24gbm9kZSBhc3NlcnQsIG9yaWdpbmFsIG5vdGljZTpcblxuLy8gaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvVW5pdF9UZXN0aW5nLzEuMFxuLy9cbi8vIFRISVMgSVMgTk9UIFRFU1RFRCBOT1IgTElLRUxZIFRPIFdPUksgT1VUU0lERSBWOCFcbi8vXG4vLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpXG4vLyBDb3B5cmlnaHQgKGMpIDIwMDkgVGhvbWFzIFJvYmluc29uIDwyODBub3J0aC5jb20+XG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvXG4vLyBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZVxuLy8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4vLyBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTlxuLy8gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbC8nKTtcbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBmdW5jdGlvbnNIYXZlTmFtZXMgPSAoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gZm9vKCkge30ubmFtZSA9PT0gJ2Zvbyc7XG59KCkpO1xuZnVuY3Rpb24gcFRvU3RyaW5nIChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopO1xufVxuZnVuY3Rpb24gaXNWaWV3KGFycmJ1Zikge1xuICBpZiAoaXNCdWZmZXIoYXJyYnVmKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoYXJyYnVmKTtcbiAgfVxuICBpZiAoIWFycmJ1Zikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoYXJyYnVmIGluc3RhbmNlb2YgRGF0YVZpZXcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoYXJyYnVmLmJ1ZmZlciAmJiBhcnJidWYuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4vLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvd1xuLy8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlXG4vLyBhc3NlcnQgbW9kdWxlIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIGludGVyZmFjZS5cblxudmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7XG5cbi8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC5cbi8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogYWN0dWFsLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KVxuXG52YXIgcmVnZXggPSAvXFxzKmZ1bmN0aW9uXFxzKyhbXlxcKFxcc10qKVxccyovO1xuLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2xqaGFyYi9mdW5jdGlvbi5wcm90b3R5cGUubmFtZS9ibG9iL2FkZWVlZWM4YmZjYzYwNjhiMTg3ZDdkOWZiM2Q1YmIxZDNhMzA4OTkvaW1wbGVtZW50YXRpb24uanNcbmZ1bmN0aW9uIGdldE5hbWUoZnVuYykge1xuICBpZiAoIXV0aWwuaXNGdW5jdGlvbihmdW5jKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzKSB7XG4gICAgcmV0dXJuIGZ1bmMubmFtZTtcbiAgfVxuICB2YXIgc3RyID0gZnVuYy50b1N0cmluZygpO1xuICB2YXIgbWF0Y2ggPSBzdHIubWF0Y2gocmVnZXgpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV07XG59XG5hc3NlcnQuQXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKSB7XG4gIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7XG4gIHRoaXMuZXhwZWN0ZWQgPSBvcHRpb25zLmV4cGVjdGVkO1xuICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjtcbiAgaWYgKG9wdGlvbnMubWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTtcbiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNZXNzYWdlKHRoaXMpO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7XG4gIH1cbiAgdmFyIHN0YWNrU3RhcnRGdW5jdGlvbiA9IG9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9uIHx8IGZhaWw7XG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHN0YWNrU3RhcnRGdW5jdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gbm9uIHY4IGJyb3dzZXJzIHNvIHdlIGNhbiBoYXZlIGEgc3RhY2t0cmFjZVxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTtcbiAgICBpZiAoZXJyLnN0YWNrKSB7XG4gICAgICB2YXIgb3V0ID0gZXJyLnN0YWNrO1xuXG4gICAgICAvLyB0cnkgdG8gc3RyaXAgdXNlbGVzcyBmcmFtZXNcbiAgICAgIHZhciBmbl9uYW1lID0gZ2V0TmFtZShzdGFja1N0YXJ0RnVuY3Rpb24pO1xuICAgICAgdmFyIGlkeCA9IG91dC5pbmRleE9mKCdcXG4nICsgZm5fbmFtZSk7XG4gICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgLy8gb25jZSB3ZSBoYXZlIGxvY2F0ZWQgdGhlIGZ1bmN0aW9uIGZyYW1lXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpXG4gICAgICAgIHZhciBuZXh0X2xpbmUgPSBvdXQuaW5kZXhPZignXFxuJywgaWR4ICsgMSk7XG4gICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcobmV4dF9saW5lICsgMSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhY2sgPSBvdXQ7XG4gICAgfVxuICB9XG59O1xuXG4vLyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxudXRpbC5pbmhlcml0cyhhc3NlcnQuQXNzZXJ0aW9uRXJyb3IsIEVycm9yKTtcblxuZnVuY3Rpb24gdHJ1bmNhdGUocywgbikge1xuICBpZiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHMubGVuZ3RoIDwgbiA/IHMgOiBzLnNsaWNlKDAsIG4pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzO1xuICB9XG59XG5mdW5jdGlvbiBpbnNwZWN0KHNvbWV0aGluZykge1xuICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzIHx8ICF1dGlsLmlzRnVuY3Rpb24oc29tZXRoaW5nKSkge1xuICAgIHJldHVybiB1dGlsLmluc3BlY3Qoc29tZXRoaW5nKTtcbiAgfVxuICB2YXIgcmF3bmFtZSA9IGdldE5hbWUoc29tZXRoaW5nKTtcbiAgdmFyIG5hbWUgPSByYXduYW1lID8gJzogJyArIHJhd25hbWUgOiAnJztcbiAgcmV0dXJuICdbRnVuY3Rpb24nICsgIG5hbWUgKyAnXSc7XG59XG5mdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHtcbiAgcmV0dXJuIHRydW5jYXRlKGluc3BlY3Qoc2VsZi5hY3R1YWwpLCAxMjgpICsgJyAnICtcbiAgICAgICAgIHNlbGYub3BlcmF0b3IgKyAnICcgK1xuICAgICAgICAgdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmV4cGVjdGVkKSwgMTI4KTtcbn1cblxuLy8gQXQgcHJlc2VudCBvbmx5IHRoZSB0aHJlZSBrZXlzIG1lbnRpb25lZCBhYm92ZSBhcmUgdXNlZCBhbmRcbi8vIHVuZGVyc3Rvb2QgYnkgdGhlIHNwZWMuIEltcGxlbWVudGF0aW9ucyBvciBzdWIgbW9kdWxlcyBjYW4gcGFzc1xuLy8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZVxuLy8gaWdub3JlZC5cblxuLy8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3Jcbi8vIHdoZW4gYSBjb3JyZXNwb25kaW5nIGNvbmRpdGlvbiBpcyBub3QgbWV0LCB3aXRoIGEgbWVzc2FnZSB0aGF0XG4vLyBtYXkgYmUgdW5kZWZpbmVkIGlmIG5vdCBwcm92aWRlZC4gIEFsbCBhc3NlcnRpb24gbWV0aG9kcyBwcm92aWRlXG4vLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvclxuLy8gZGlzcGxheSBwdXJwb3Nlcy5cblxuZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7XG4gIHRocm93IG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3Ioe1xuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgYWN0dWFsOiBhY3R1YWwsXG4gICAgZXhwZWN0ZWQ6IGV4cGVjdGVkLFxuICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcbiAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvblxuICB9KTtcbn1cblxuLy8gRVhURU5TSU9OISBhbGxvd3MgZm9yIHdlbGwgYmVoYXZlZCBlcnJvcnMgZGVmaW5lZCBlbHNld2hlcmUuXG5hc3NlcnQuZmFpbCA9IGZhaWw7XG5cbi8vIDQuIFB1cmUgYXNzZXJ0aW9uIHRlc3RzIHdoZXRoZXIgYSB2YWx1ZSBpcyB0cnV0aHksIGFzIGRldGVybWluZWRcbi8vIGJ5ICEhZ3VhcmQuXG4vLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTtcbi8vIFRoaXMgc3RhdGVtZW50IGlzIGVxdWl2YWxlbnQgdG8gYXNzZXJ0LmVxdWFsKHRydWUsICEhZ3VhcmQsXG4vLyBtZXNzYWdlX29wdCk7LiBUbyB0ZXN0IHN0cmljdGx5IGZvciB0aGUgdmFsdWUgdHJ1ZSwgdXNlXG4vLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuXG5cbmZ1bmN0aW9uIG9rKHZhbHVlLCBtZXNzYWdlKSB7XG4gIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7XG59XG5hc3NlcnQub2sgPSBvaztcblxuLy8gNS4gVGhlIGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzaGFsbG93LCBjb2VyY2l2ZSBlcXVhbGl0eSB3aXRoXG4vLyA9PS5cbi8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpO1xufTtcblxuLy8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbFxuLy8gd2l0aCAhPSBhc3NlcnQubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPScsIGFzc2VydC5ub3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLlxuLy8gYXNzZXJ0LmRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBkZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwU3RyaWN0RXF1YWwnLCBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKSB7XG4gIC8vIDcuMS4gQWxsIGlkZW50aWNhbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGFzIGRldGVybWluZWQgYnkgPT09LlxuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgJiYgaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGNvbXBhcmUoYWN0dWFsLCBleHBlY3RlZCkgPT09IDA7XG5cbiAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBEYXRlIG9iamVjdCB0aGF0IHJlZmVycyB0byB0aGUgc2FtZSB0aW1lLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblxuICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZFxuICAvLyBwcm9wZXJ0aWVzIChgZ2xvYmFsYCwgYG11bHRpbGluZWAsIGBsYXN0SW5kZXhgLCBgaWdub3JlQ2FzZWApLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiZcbiAgICAgICAgICAgYWN0dWFsLmdsb2JhbCA9PT0gZXhwZWN0ZWQuZ2xvYmFsICYmXG4gICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJlxuICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiZcbiAgICAgICAgICAgYWN0dWFsLmlnbm9yZUNhc2UgPT09IGV4cGVjdGVkLmlnbm9yZUNhc2U7XG5cbiAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuICB9IGVsc2UgaWYgKChhY3R1YWwgPT09IG51bGwgfHwgdHlwZW9mIGFjdHVhbCAhPT0gJ29iamVjdCcpICYmXG4gICAgICAgICAgICAgKGV4cGVjdGVkID09PSBudWxsIHx8IHR5cGVvZiBleHBlY3RlZCAhPT0gJ29iamVjdCcpKSB7XG4gICAgcmV0dXJuIHN0cmljdCA/IGFjdHVhbCA9PT0gZXhwZWN0ZWQgOiBhY3R1YWwgPT0gZXhwZWN0ZWQ7XG5cbiAgLy8gSWYgYm90aCB2YWx1ZXMgYXJlIGluc3RhbmNlcyBvZiB0eXBlZCBhcnJheXMsIHdyYXAgdGhlaXIgdW5kZXJseWluZ1xuICAvLyBBcnJheUJ1ZmZlcnMgaW4gYSBCdWZmZXIgZWFjaCB0byBpbmNyZWFzZSBwZXJmb3JtYW5jZVxuICAvLyBUaGlzIG9wdGltaXphdGlvbiByZXF1aXJlcyB0aGUgYXJyYXlzIHRvIGhhdmUgdGhlIHNhbWUgdHlwZSBhcyBjaGVja2VkIGJ5XG4gIC8vIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgKGFrYSBwVG9TdHJpbmcpLiBOZXZlciBwZXJmb3JtIGJpbmFyeVxuICAvLyBjb21wYXJpc29ucyBmb3IgRmxvYXQqQXJyYXlzLCB0aG91Z2gsIHNpbmNlIGUuZy4gKzAgPT09IC0wIGJ1dCB0aGVpclxuICAvLyBiaXQgcGF0dGVybnMgYXJlIG5vdCBpZGVudGljYWwuXG4gIH0gZWxzZSBpZiAoaXNWaWV3KGFjdHVhbCkgJiYgaXNWaWV3KGV4cGVjdGVkKSAmJlxuICAgICAgICAgICAgIHBUb1N0cmluZyhhY3R1YWwpID09PSBwVG9TdHJpbmcoZXhwZWN0ZWQpICYmXG4gICAgICAgICAgICAgIShhY3R1YWwgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHxcbiAgICAgICAgICAgICAgIGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkpIHtcbiAgICByZXR1cm4gY29tcGFyZShuZXcgVWludDhBcnJheShhY3R1YWwuYnVmZmVyKSxcbiAgICAgICAgICAgICAgICAgICBuZXcgVWludDhBcnJheShleHBlY3RlZC5idWZmZXIpKSA9PT0gMDtcblxuICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcbiAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG4gIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG4gIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgIT09IGlzQnVmZmVyKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBtZW1vcyA9IG1lbW9zIHx8IHthY3R1YWw6IFtdLCBleHBlY3RlZDogW119O1xuXG4gICAgdmFyIGFjdHVhbEluZGV4ID0gbWVtb3MuYWN0dWFsLmluZGV4T2YoYWN0dWFsKTtcbiAgICBpZiAoYWN0dWFsSW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoYWN0dWFsSW5kZXggPT09IG1lbW9zLmV4cGVjdGVkLmluZGV4T2YoZXhwZWN0ZWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lbW9zLmFjdHVhbC5wdXNoKGFjdHVhbCk7XG4gICAgbWVtb3MuZXhwZWN0ZWQucHVzaChleHBlY3RlZCk7XG5cbiAgICByZXR1cm4gb2JqRXF1aXYoYWN0dWFsLCBleHBlY3RlZCwgc3RyaWN0LCBtZW1vcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNBcmd1bWVudHMob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcbn1cblxuZnVuY3Rpb24gb2JqRXF1aXYoYSwgYiwgc3RyaWN0LCBhY3R1YWxWaXNpdGVkT2JqZWN0cykge1xuICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWVcbiAgaWYgKHV0aWwuaXNQcmltaXRpdmUoYSkgfHwgdXRpbC5pc1ByaW1pdGl2ZShiKSlcbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgaWYgKHN0cmljdCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkgIT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIHZhciBhSXNBcmdzID0gaXNBcmd1bWVudHMoYSk7XG4gIHZhciBiSXNBcmdzID0gaXNBcmd1bWVudHMoYik7XG4gIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKGFJc0FyZ3MpIHtcbiAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG4gICAgYiA9IHBTbGljZS5jYWxsKGIpO1xuICAgIHJldHVybiBfZGVlcEVxdWFsKGEsIGIsIHN0cmljdCk7XG4gIH1cbiAgdmFyIGthID0gb2JqZWN0S2V5cyhhKTtcbiAgdmFyIGtiID0gb2JqZWN0S2V5cyhiKTtcbiAgdmFyIGtleSwgaTtcbiAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlc1xuICAvLyBoYXNPd25Qcm9wZXJ0eSlcbiAgaWYgKGthLmxlbmd0aCAhPT0ga2IubGVuZ3RoKVxuICAgIHJldHVybiBmYWxzZTtcbiAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSxcbiAga2Euc29ydCgpO1xuICBrYi5zb3J0KCk7XG4gIC8vfn5+Y2hlYXAga2V5IHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoa2FbaV0gIT09IGtiW2ldKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcbiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAga2V5ID0ga2FbaV07XG4gICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gOC4gVGhlIG5vbi1lcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgZm9yIGFueSBkZWVwIGluZXF1YWxpdHkuXG4vLyBhc3NlcnQubm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIG5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIGZhbHNlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpO1xuICB9XG59O1xuXG5hc3NlcnQubm90RGVlcFN0cmljdEVxdWFsID0gbm90RGVlcFN0cmljdEVxdWFsO1xuZnVuY3Rpb24gbm90RGVlcFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwU3RyaWN0RXF1YWwnLCBub3REZWVwU3RyaWN0RXF1YWwpO1xuICB9XG59XG5cblxuLy8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbi8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PT0nLCBhc3NlcnQuc3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG4vLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXNcbi8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9PScsIGFzc2VydC5ub3RTdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChleHBlY3RlZCkgPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcbiAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAoYWN0dWFsIGluc3RhbmNlb2YgZXhwZWN0ZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElnbm9yZS4gIFRoZSBpbnN0YW5jZW9mIGNoZWNrIGRvZXNuJ3Qgd29yayBmb3IgYXJyb3cgZnVuY3Rpb25zLlxuICB9XG5cbiAgaWYgKEVycm9yLmlzUHJvdG90eXBlT2YoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGV4cGVjdGVkLmNhbGwoe30sIGFjdHVhbCkgPT09IHRydWU7XG59XG5cbmZ1bmN0aW9uIF90cnlCbG9jayhibG9jaykge1xuICB2YXIgZXJyb3I7XG4gIHRyeSB7XG4gICAgYmxvY2soKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGVycm9yID0gZTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59XG5cbmZ1bmN0aW9uIF90aHJvd3Moc2hvdWxkVGhyb3csIGJsb2NrLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICB2YXIgYWN0dWFsO1xuXG4gIGlmICh0eXBlb2YgYmxvY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJsb2NrXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGV4cGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgIG1lc3NhZ2UgPSBleHBlY3RlZDtcbiAgICBleHBlY3RlZCA9IG51bGw7XG4gIH1cblxuICBhY3R1YWwgPSBfdHJ5QmxvY2soYmxvY2spO1xuXG4gIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgK1xuICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTtcblxuICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuICB9XG5cbiAgdmFyIHVzZXJQcm92aWRlZE1lc3NhZ2UgPSB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZyc7XG4gIHZhciBpc1Vud2FudGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIHV0aWwuaXNFcnJvcihhY3R1YWwpO1xuICB2YXIgaXNVbmV4cGVjdGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIGFjdHVhbCAmJiAhZXhwZWN0ZWQ7XG5cbiAgaWYgKChpc1Vud2FudGVkRXhjZXB0aW9uICYmXG4gICAgICB1c2VyUHJvdmlkZWRNZXNzYWdlICYmXG4gICAgICBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHxcbiAgICAgIGlzVW5leHBlY3RlZEV4Y2VwdGlvbikge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ0dvdCB1bndhbnRlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICBpZiAoKHNob3VsZFRocm93ICYmIGFjdHVhbCAmJiBleHBlY3RlZCAmJlxuICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHtcbiAgICB0aHJvdyBhY3R1YWw7XG4gIH1cbn1cblxuLy8gMTEuIEV4cGVjdGVkIHRvIHRocm93IGFuIGVycm9yOlxuLy8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC50aHJvd3MgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cyh0cnVlLCBibG9jaywgZXJyb3IsIG1lc3NhZ2UpO1xufTtcblxuLy8gRVhURU5TSU9OISBUaGlzIGlzIGFubm95aW5nIHRvIHdyaXRlIG91dHNpZGUgdGhpcyBtb2R1bGUuXG5hc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG4gIF90aHJvd3MoZmFsc2UsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG59O1xuXG5hc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB0aHJvdyBlcnI7IH07XG5cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhc093bi5jYWxsKG9iaiwga2V5KSkga2V5cy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9hc3NlcnQvYXNzZXJ0LmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxubW9kdWxlLmV4cG9ydHMgPSBTdHJlYW07XG5cbnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG5cbmluaGVyaXRzKFN0cmVhbSwgRUUpO1xuU3RyZWFtLlJlYWRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLmpzJyk7XG5TdHJlYW0uV3JpdGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMnKTtcblN0cmVhbS5EdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzJyk7XG5TdHJlYW0uVHJhbnNmb3JtID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcycpO1xuU3RyZWFtLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzJyk7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuNC54XG5TdHJlYW0uU3RyZWFtID0gU3RyZWFtO1xuXG5cblxuLy8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudFxuLy8gcGFydCBvZiB0aGlzIGNsYXNzKSBpcyBvdmVycmlkZGVuIGluIHRoZSBSZWFkYWJsZSBjbGFzcy5cblxuZnVuY3Rpb24gU3RyZWFtKCkge1xuICBFRS5jYWxsKHRoaXMpO1xufVxuXG5TdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzO1xuXG4gIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuICAgIGlmIChkZXN0LndyaXRhYmxlKSB7XG4gICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkge1xuICAgICAgICBzb3VyY2UucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpO1xuXG4gIGZ1bmN0aW9uIG9uZHJhaW4oKSB7XG4gICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7XG4gICAgICBzb3VyY2UucmVzdW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuXG4gIC8vIHNvdXJjZSBnZXRzIHRoZSAnZW5kJyBvciAnY2xvc2UnIGV2ZW50cy4gIE9ubHkgZGVzdC5lbmQoKSBvbmNlLlxuICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHtcbiAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2Uub24oJ2Nsb3NlJywgb25jbG9zZSk7XG4gIH1cblxuICB2YXIgZGlkT25FbmQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG4gICAgZGlkT25FbmQgPSB0cnVlO1xuXG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7XG4gIH1cblxuICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBjbGVhbnVwKCk7XG4gICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHtcbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuXG4gICAgfVxuICB9XG5cbiAgc291cmNlLm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuXG4gIC8vIHJlbW92ZSBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgYWRkZWQuXG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApO1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG4gIH1cblxuICBzb3VyY2Uub24oJ2VuZCcsIGNsZWFudXApO1xuICBzb3VyY2Uub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgZGVzdC5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpO1xuXG4gIC8vIEFsbG93IGZvciB1bml4LWxpa2UgdXNhZ2U6IEEucGlwZShCKS5waXBlKEMpXG4gIHJldHVybiBkZXN0O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyZWFtLWJyb3dzZXJpZnkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vZXZlbnRzL2V2ZW50cy5qc1xuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3N0cmVhbS1icm93c2VyaWZ5L34vaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcycpO1xuZXhwb3J0cy5TdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcbmV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzO1xuZXhwb3J0cy5Xcml0YWJsZSA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fd3JpdGFibGUuanMnKTtcbmV4cG9ydHMuRHVwbGV4ID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9kdXBsZXguanMnKTtcbmV4cG9ydHMuVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMnKTtcbmV4cG9ydHMuUGFzc1Rocm91Z2ggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzJyk7XG5pZiAoIXByb2Nlc3MuYnJvd3NlciAmJiBwcm9jZXNzLmVudi5SRUFEQUJMRV9TVFJFQU0gPT09ICdkaXNhYmxlJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3N0cmVhbScpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5SZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTtcblxudmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuaWYgKCFFRS5saXN0ZW5lckNvdW50KSBFRS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgU3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIFN0cmluZ0RlY29kZXI7XG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ3V0aWwnKTtcbmlmIChkZWJ1ZyAmJiBkZWJ1Zy5kZWJ1Z2xvZykge1xuICBkZWJ1ZyA9IGRlYnVnLmRlYnVnbG9nKCdzdHJlYW0nKTtcbn0gZWxzZSB7XG4gIGRlYnVnID0gZnVuY3Rpb24gKCkge307XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG51dGlsLmluaGVyaXRzKFJlYWRhYmxlLCBTdHJlYW0pO1xuXG5mdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIGRlZmF1bHRId20gPSBvcHRpb25zLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gKGh3bSB8fCBod20gPT09IDApID8gaHdtIDogZGVmYXVsdEh3bTtcblxuICAvLyBjYXN0IHRvIGludHMuXG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrO1xuXG4gIHRoaXMuYnVmZmVyID0gW107XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5XG4gIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLlxuICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7XG5cblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KVxuICAgIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIHdoZW4gcGlwaW5nLCB3ZSBvbmx5IGNhcmUgYWJvdXQgJ3JlYWRhYmxlJyBldmVudHMgdGhhdCBoYXBwZW5cbiAgLy8gYWZ0ZXIgcmVhZCgpaW5nIGFsbCB0aGUgYnl0ZXMgYW5kIG5vdCBnZXR0aW5nIGFueSBwdXNoYmFjay5cbiAgdGhpcy5yYW5PdXQgPSBmYWxzZTtcblxuICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpc1xuICB0aGlzLmF3YWl0RHJhaW4gPSAwO1xuXG4gIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWRcbiAgdGhpcy5yZWFkaW5nTW9yZSA9IGZhbHNlO1xuXG4gIHRoaXMuZGVjb2RlciA9IG51bGw7XG4gIHRoaXMuZW5jb2RpbmcgPSBudWxsO1xuICBpZiAob3B0aW9ucy5lbmNvZGluZykge1xuICAgIGlmICghU3RyaW5nRGVjb2RlcilcbiAgICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKG9wdGlvbnMuZW5jb2RpbmcpO1xuICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHtcbiAgdmFyIER1cGxleCA9IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKVxuICAgIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeVxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuXG4vLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCxcbi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGRcbi8vIHdyaXRlKCkgc29tZSBtb3JlLlxuUmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBpZiAodXRpbC5pc1N0cmluZyhjaHVuaykgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcbiAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7XG4gICAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTtcbiAgICAgIGVuY29kaW5nID0gJyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgZmFsc2UpO1xufTtcblxuLy8gVW5zaGlmdCBzaG91bGQgKmFsd2F5cyogYmUgc29tZXRoaW5nIGRpcmVjdGx5IG91dCBvZiByZWFkKClcblJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oY2h1bmspIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCAnJywgdHJ1ZSk7XG59O1xuXG5mdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCkge1xuICB2YXIgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcbiAgaWYgKGVyKSB7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2UgaWYgKHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspKSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIGlmICghc3RhdGUuZW5kZWQpXG4gICAgICBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpO1xuICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuICAgIGlmIChzdGF0ZS5lbmRlZCAmJiAhYWRkVG9Gcm9udCkge1xuICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ3N0cmVhbS5wdXNoKCkgYWZ0ZXIgRU9GJyk7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZEVtaXR0ZWQgJiYgYWRkVG9Gcm9udCkge1xuICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ3N0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50Jyk7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIWFkZFRvRnJvbnQgJiYgIWVuY29kaW5nKVxuICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuXG4gICAgICBpZiAoIWFkZFRvRnJvbnQpXG4gICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcblxuICAgICAgLy8gaWYgd2Ugd2FudCB0aGUgZGF0YSBub3csIGp1c3QgZW1pdCBpdC5cbiAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgICAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTtcbiAgICAgICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1cGRhdGUgdGhlIGJ1ZmZlciBpbmZvLlxuICAgICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gICAgICAgIGlmIChhZGRUb0Zyb250KVxuICAgICAgICAgIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcblxuICAgICAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKVxuICAgICAgICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xuICAgICAgfVxuXG4gICAgICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkge1xuICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpO1xufVxuXG5cblxuLy8gaWYgaXQncyBwYXN0IHRoZSBoaWdoIHdhdGVyIG1hcmssIHdlIGNhbiBwdXNoIGluIHNvbWUgbW9yZS5cbi8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lXG4vLyBtb3JlIGJ5dGVzLiAgVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCxcbi8vIHN1Y2ggYXMgdGhlIHJlcGwuICBBbHNvLCBpZiB0aGUgcHVzaCgpIHRyaWdnZXJlZCBhXG4vLyByZWFkYWJsZSBldmVudCwgYW5kIHRoZSB1c2VyIGNhbGxlZCByZWFkKGxhcmdlTnVtYmVyKSBzdWNoIHRoYXRcbi8vIG5lZWRSZWFkYWJsZSB3YXMgc2V0LCB0aGVuIHdlIG91Z2h0IHRvIHB1c2ggbW9yZSwgc28gdGhhdCBhbm90aGVyXG4vLyAncmVhZGFibGUnIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkLlxuZnVuY3Rpb24gbmVlZE1vcmVEYXRhKHN0YXRlKSB7XG4gIHJldHVybiAhc3RhdGUuZW5kZWQgJiZcbiAgICAgICAgIChzdGF0ZS5uZWVkUmVhZGFibGUgfHxcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8XG4gICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwKTtcbn1cblxuLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5SZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbihlbmMpIHtcbiAgaWYgKCFTdHJpbmdEZWNvZGVyKVxuICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIERvbid0IHJhaXNlIHRoZSBod20gPiAxMjhNQlxudmFyIE1BWF9IV00gPSAweDgwMDAwMDtcbmZ1bmN0aW9uIHJvdW5kVXBUb05leHRQb3dlck9mMihuKSB7XG4gIGlmIChuID49IE1BWF9IV00pIHtcbiAgICBuID0gTUFYX0hXTTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgdGhlIG5leHQgaGlnaGVzdCBwb3dlciBvZiAyXG4gICAgbi0tO1xuICAgIGZvciAodmFyIHAgPSAxOyBwIDwgMzI7IHAgPDw9IDEpIG4gfD0gbiA+PiBwO1xuICAgIG4rKztcbiAgfVxuICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKVxuICAgIHJldHVybiAwO1xuXG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKVxuICAgIHJldHVybiBuID09PSAwID8gMCA6IDE7XG5cbiAgaWYgKGlzTmFOKG4pIHx8IHV0aWwuaXNOdWxsKG4pKSB7XG4gICAgLy8gb25seSBmbG93IG9uZSBidWZmZXIgYXQgYSB0aW1lXG4gICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUuYnVmZmVyLmxlbmd0aClcbiAgICAgIHJldHVybiBzdGF0ZS5idWZmZXJbMF0ubGVuZ3RoO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gIH1cblxuICBpZiAobiA8PSAwKVxuICAgIHJldHVybiAwO1xuXG4gIC8vIElmIHdlJ3JlIGFza2luZyBmb3IgbW9yZSB0aGFuIHRoZSB0YXJnZXQgYnVmZmVyIGxldmVsLFxuICAvLyB0aGVuIHJhaXNlIHRoZSB3YXRlciBtYXJrLiAgQnVtcCB1cCB0byB0aGUgbmV4dCBoaWdoZXN0XG4gIC8vIHBvd2VyIG9mIDIsIHRvIHByZXZlbnQgaW5jcmVhc2luZyBpdCBleGNlc3NpdmVseSBpbiB0aW55XG4gIC8vIGFtb3VudHMuXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaylcbiAgICBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gcm91bmRVcFRvTmV4dFBvd2VyT2YyKG4pO1xuXG4gIC8vIGRvbid0IGhhdmUgdGhhdCBtdWNoLiAgcmV0dXJuIG51bGwsIHVubGVzcyB3ZSd2ZSBlbmRlZC5cbiAgaWYgKG4gPiBzdGF0ZS5sZW5ndGgpIHtcbiAgICBpZiAoIXN0YXRlLmVuZGVkKSB7XG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlXG4gICAgICByZXR1cm4gc3RhdGUubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIG47XG59XG5cbi8vIHlvdSBjYW4gb3ZlcnJpZGUgZWl0aGVyIHRoaXMgbWV0aG9kLCBvciB0aGUgYXN5bmMgX3JlYWQobikgYmVsb3cuXG5SZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgZGVidWcoJ3JlYWQnLCBuKTtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIG5PcmlnID0gbjtcblxuICBpZiAoIXV0aWwuaXNOdW1iZXIobikgfHwgbiA+IDApXG4gICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG5cbiAgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyXG4gIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLlxuICBpZiAobiA9PT0gMCAmJlxuICAgICAgc3RhdGUubmVlZFJlYWRhYmxlICYmXG4gICAgICAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpXG4gICAgICBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICBlbHNlXG4gICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBuID0gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSk7XG5cbiAgLy8gaWYgd2UndmUgZW5kZWQsIGFuZCB3ZSdyZSBub3cgY2xlYXIsIHRoZW4gZmluaXNoIGl0IHVwLlxuICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkge1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApXG4gICAgICBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmVcbiAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluXG4gIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWRcbiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZVxuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlblxuICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC5cbiAgLy9cbiAgLy8gU28sIHRoZSBzdGVwcyBhcmU6XG4gIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG9cbiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci5cbiAgLy9cbiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC5cbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzXG4gIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhblxuICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlXG4gIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuXG4gIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbFxuICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0XG4gIC8vICdyZWFkYWJsZScgZXRjLlxuICAvL1xuICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uXG5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlO1xuICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7XG5cbiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcbiAgICBkb1JlYWQgPSB0cnVlO1xuICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7XG4gIH1cblxuICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeVxuICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9XG5cbiAgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7XG4gICAgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKVxuICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAvLyBjYWxsIGludGVybmFsIHJlYWQgbWV0aG9kXG4gICAgdGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTtcbiAgICBzdGF0ZS5zeW5jID0gZmFsc2U7XG4gIH1cblxuICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAvLyBhbmQgd2UgbmVlZCB0byByZS1ldmFsdWF0ZSBob3cgbXVjaCBkYXRhIHdlIGNhbiByZXR1cm4gdG8gdGhlIHVzZXIuXG4gIGlmIChkb1JlYWQgJiYgIXN0YXRlLnJlYWRpbmcpXG4gICAgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTtcblxuICB2YXIgcmV0O1xuICBpZiAobiA+IDApXG4gICAgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO1xuICBlbHNlXG4gICAgcmV0ID0gbnVsbDtcblxuICBpZiAodXRpbC5pc051bGwocmV0KSkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgbiA9IDA7XG4gIH1cblxuICBzdGF0ZS5sZW5ndGggLT0gbjtcblxuICAvLyBJZiB3ZSBoYXZlIG5vdGhpbmcgaW4gdGhlIGJ1ZmZlciwgdGhlbiB3ZSB3YW50IHRvIGtub3dcbiAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5lbmRlZClcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXG4gIC8vIElmIHdlIHRyaWVkIHRvIHJlYWQoKSBwYXN0IHRoZSBFT0YsIHRoZW4gZW1pdCBlbmQgb24gdGhlIG5leHQgdGljay5cbiAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMClcbiAgICBlbmRSZWFkYWJsZSh0aGlzKTtcblxuICBpZiAoIXV0aWwuaXNOdWxsKHJldCkpXG4gICAgdGhpcy5lbWl0KCdkYXRhJywgcmV0KTtcblxuICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuaykge1xuICB2YXIgZXIgPSBudWxsO1xuICBpZiAoIXV0aWwuaXNCdWZmZXIoY2h1bmspICYmXG4gICAgICAhdXRpbC5pc1N0cmluZyhjaHVuaykgJiZcbiAgICAgICF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGNodW5rKSAmJlxuICAgICAgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICByZXR1cm4gZXI7XG59XG5cblxuZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgfVxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cbiAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuXG4gIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xufVxuXG4vLyBEb24ndCBlbWl0IHJlYWRhYmxlIHJpZ2h0IGF3YXkgaW4gc3luYyBtb2RlLCBiZWNhdXNlIHRoaXMgY2FuIHRyaWdnZXJcbi8vIGFub3RoZXIgcmVhZCgpIGNhbGwgPT4gc3RhY2sgb3ZlcmZsb3cuICBUaGlzIHdheSwgaXQgbWlnaHQgdHJpZ2dlclxuLy8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLlxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkge1xuICAgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5mbG93aW5nKTtcbiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlO1xuICAgIGlmIChzdGF0ZS5zeW5jKVxuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICAgICAgfSk7XG4gICAgZWxzZVxuICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7XG4gIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpO1xuICBmbG93KHN0cmVhbSk7XG59XG5cblxuLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCxcbi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWRcbi8vIGluIHR1cm4gYW5vdGhlciBfcmVhZChuKSBjYWxsLCBpbiB3aGljaCBjYXNlIHJlYWRpbmcgPSB0cnVlIGlmXG4vLyBpdCdzIGluIHByb2dyZXNzLlxuLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSxcbi8vIHRoZW4gZ28gYWhlYWQgYW5kIHRyeSB0byByZWFkIHNvbWUgbW9yZSBwcmVlbXB0aXZlbHkuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkge1xuICAgIHN0YXRlLnJlYWRpbmdNb3JlID0gdHJ1ZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB3aGlsZSAoIXN0YXRlLnJlYWRpbmcgJiYgIXN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLmVuZGVkICYmXG4gICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG4gICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO1xuICAgIGVsc2VcbiAgICAgIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgfVxuICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlO1xufVxuXG4vLyBhYnN0cmFjdCBtZXRob2QuICB0byBiZSBvdmVycmlkZGVuIGluIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG4vLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLlxuLy8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsIFwibGVuZ3RoXCIgaXMgc29tZXdoYXRcbi8vIGFyYml0cmFyeSwgYW5kIHBlcmhhcHMgbm90IHZlcnkgbWVhbmluZ2Z1bC5cblJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBwaXBlT3B0cykge1xuICB2YXIgc3JjID0gdGhpcztcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHN0YXRlLnBpcGVzQ291bnQgKz0gMTtcbiAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTtcblxuICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmXG4gICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmXG4gICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyO1xuXG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiBjbGVhbnVwO1xuICBpZiAoc3RhdGUuZW5kRW1pdHRlZClcbiAgICBwcm9jZXNzLm5leHRUaWNrKGVuZEZuKTtcbiAgZWxzZVxuICAgIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG5cbiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpO1xuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSkge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgZGVidWcoJ29uZW5kJyk7XG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG4gIC8vIHdoZW4gdGhlIGRlc3QgZHJhaW5zLCBpdCByZWR1Y2VzIHRoZSBhd2FpdERyYWluIGNvdW50ZXJcbiAgLy8gb24gdGhlIHNvdXJjZS4gIFRoaXMgd291bGQgYmUgbW9yZSBlbGVnYW50IHdpdGggYSAub25jZSgpXG4gIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzXG4gIC8vIHRvbyBzbG93LlxuICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7XG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBkZWJ1ZygnY2xlYW51cCcpO1xuICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcblxuICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcbiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcbiAgICAvLyBmbG93aW5nIGFnYWluLlxuICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cbiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiZcbiAgICAgICAgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSlcbiAgICAgIG9uZHJhaW4oKTtcbiAgfVxuXG4gIHNyYy5vbignZGF0YScsIG9uZGF0YSk7XG4gIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuICAgIGRlYnVnKCdvbmRhdGEnKTtcbiAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7XG4gICAgaWYgKGZhbHNlID09PSByZXQpIHtcbiAgICAgIGRlYnVnKCdmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UnLFxuICAgICAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKztcbiAgICAgIHNyYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcbiAgICB1bnBpcGUoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGlmIChFRS5saXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKVxuICAgICAgZGVzdC5lbWl0KCdlcnJvcicsIGVyKTtcbiAgfVxuICAvLyBUaGlzIGlzIGEgYnJ1dGFsbHkgdWdseSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyXG4gIC8vIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnkgdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuXG4gIGlmICghZGVzdC5fZXZlbnRzIHx8ICFkZXN0Ll9ldmVudHMuZXJyb3IpXG4gICAgZGVzdC5vbignZXJyb3InLCBvbmVycm9yKTtcbiAgZWxzZSBpZiAoaXNBcnJheShkZXN0Ll9ldmVudHMuZXJyb3IpKVxuICAgIGRlc3QuX2V2ZW50cy5lcnJvci51bnNoaWZ0KG9uZXJyb3IpO1xuICBlbHNlXG4gICAgZGVzdC5fZXZlbnRzLmVycm9yID0gW29uZXJyb3IsIGRlc3QuX2V2ZW50cy5lcnJvcl07XG5cblxuXG4gIC8vIEJvdGggY2xvc2UgYW5kIGZpbmlzaCBzaG91bGQgdHJpZ2dlciB1bnBpcGUsIGJ1dCBvbmx5IG9uY2UuXG4gIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTtcbiAgZnVuY3Rpb24gb25maW5pc2goKSB7XG4gICAgZGVidWcoJ29uZmluaXNoJyk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcbiAgICB1bnBpcGUoKTtcbiAgfVxuICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblxuICBmdW5jdGlvbiB1bnBpcGUoKSB7XG4gICAgZGVidWcoJ3VucGlwZScpO1xuICAgIHNyYy51bnBpcGUoZGVzdCk7XG4gIH1cblxuICAvLyB0ZWxsIHRoZSBkZXN0IHRoYXQgaXQncyBiZWluZyBwaXBlZCB0b1xuICBkZXN0LmVtaXQoJ3BpcGUnLCBzcmMpO1xuXG4gIC8vIHN0YXJ0IHRoZSBmbG93IGlmIGl0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgYWxyZWFkeS5cbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7XG4gICAgc3JjLnJlc3VtZSgpO1xuICB9XG5cbiAgcmV0dXJuIGRlc3Q7XG59O1xuXG5mdW5jdGlvbiBwaXBlT25EcmFpbihzcmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTtcbiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbilcbiAgICAgIHN0YXRlLmF3YWl0RHJhaW4tLTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRS5saXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkge1xuICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG4gICAgICBmbG93KHNyYyk7XG4gICAgfVxuICB9O1xufVxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS51bnBpcGUgPSBmdW5jdGlvbihkZXN0KSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMClcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBqdXN0IG9uZSBkZXN0aW5hdGlvbi4gIG1vc3QgY29tbW9uIGNhc2UuXG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSB7XG4gICAgLy8gcGFzc2VkIGluIG9uZSwgYnV0IGl0J3Mgbm90IHRoZSByaWdodCBvbmUuXG4gICAgaWYgKGRlc3QgJiYgZGVzdCAhPT0gc3RhdGUucGlwZXMpXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmICghZGVzdClcbiAgICAgIGRlc3QgPSBzdGF0ZS5waXBlcztcblxuICAgIC8vIGdvdCBhIG1hdGNoLlxuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG4gICAgaWYgKGRlc3QpXG4gICAgICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gc2xvdyBjYXNlLiBtdWx0aXBsZSBwaXBlIGRlc3RpbmF0aW9ucy5cblxuICBpZiAoIWRlc3QpIHtcbiAgICAvLyByZW1vdmUgYWxsLlxuICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzO1xuICAgIHZhciBsZW4gPSBzdGF0ZS5waXBlc0NvdW50O1xuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgZGVzdHNbaV0uZW1pdCgndW5waXBlJywgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLlxuICB2YXIgaSA9IGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpO1xuICBpZiAoaSA9PT0gLTEpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgc3RhdGUucGlwZXMuc3BsaWNlKGksIDEpO1xuICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKVxuICAgIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07XG5cbiAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcbi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5SZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldiwgZm4pIHtcbiAgdmFyIHJlcyA9IFN0cmVhbS5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldiwgZm4pO1xuXG4gIC8vIElmIGxpc3RlbmluZyB0byBkYXRhLCBhbmQgaXQgaGFzIG5vdCBleHBsaWNpdGx5IGJlZW4gcGF1c2VkLFxuICAvLyB0aGVuIGNhbGwgcmVzdW1lIHRvIHN0YXJ0IHRoZSBmbG93IG9mIGRhdGEgb24gdGhlIG5leHQgdGljay5cbiAgaWYgKGV2ID09PSAnZGF0YScgJiYgZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIHRoaXMucmVzdW1lKCk7XG4gIH1cblxuICBpZiAoZXYgPT09ICdyZWFkYWJsZScgJiYgdGhpcy5yZWFkYWJsZSkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKCFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykge1xuICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG4gICAgICAgICAgc2VsZi5yZWFkKDApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGVuZ3RoKSB7XG4gICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5SZWFkYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBSZWFkYWJsZS5wcm90b3R5cGUub247XG5cbi8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUElcbi8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpO1xuICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgIGlmICghc3RhdGUucmVhZGluZykge1xuICAgICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTtcbiAgICAgIHRoaXMucmVhZCgwKTtcbiAgICB9XG4gICAgcmVzdW1lKHRoaXMsIHN0YXRlKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIHJlc3VtZShzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7XG4gICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgcmVzdW1lXyhzdHJlYW0sIHN0YXRlKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0cmVhbS5lbWl0KCdyZXN1bWUnKTtcbiAgZmxvdyhzdHJlYW0pO1xuICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZylcbiAgICBzdHJlYW0ucmVhZCgwKTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwYXVzZScpO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcpIHtcbiAgICBkbyB7XG4gICAgICB2YXIgY2h1bmsgPSBzdHJlYW0ucmVhZCgpO1xuICAgIH0gd2hpbGUgKG51bGwgIT09IGNodW5rICYmIHN0YXRlLmZsb3dpbmcpO1xuICB9XG59XG5cbi8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuXG4vLyBUaGlzIGlzICpub3QqIHBhcnQgb2YgdGhlIHJlYWRhYmxlIHN0cmVhbSBpbnRlcmZhY2UuXG4vLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS5cblJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBwYXVzZWQgPSBmYWxzZTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7XG4gICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7XG4gICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aClcbiAgICAgICAgc2VsZi5wdXNoKGNodW5rKTtcbiAgICB9XG5cbiAgICBzZWxmLnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyKVxuICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcbiAgICBpZiAoIWNodW5rIHx8ICFzdGF0ZS5vYmplY3RNb2RlICYmICFjaHVuay5sZW5ndGgpXG4gICAgICByZXR1cm47XG5cbiAgICB2YXIgcmV0ID0gc2VsZi5wdXNoKGNodW5rKTtcbiAgICBpZiAoIXJldCkge1xuICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5wYXVzZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cbiAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHtcbiAgICBpZiAodXRpbC5pc0Z1bmN0aW9uKHN0cmVhbVtpXSkgJiYgdXRpbC5pc1VuZGVmaW5lZCh0aGlzW2ldKSkge1xuICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uKG1ldGhvZCkgeyByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7XG4gICAgICB9fShpKTtcbiAgICB9XG4gIH1cblxuICAvLyBwcm94eSBjZXJ0YWluIGltcG9ydGFudCBldmVudHMuXG4gIHZhciBldmVudHMgPSBbJ2Vycm9yJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knLCAncGF1c2UnLCAncmVzdW1lJ107XG4gIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbihldikge1xuICAgIHN0cmVhbS5vbihldiwgc2VsZi5lbWl0LmJpbmQoc2VsZiwgZXYpKTtcbiAgfSk7XG5cbiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cbiAgc2VsZi5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBfcmVhZCcsIG4pO1xuICAgIGlmIChwYXVzZWQpIHtcbiAgICAgIHBhdXNlZCA9IGZhbHNlO1xuICAgICAgc3RyZWFtLnJlc3VtZSgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc2VsZjtcbn07XG5cblxuXG4vLyBleHBvc2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkuXG5SZWFkYWJsZS5fZnJvbUxpc3QgPSBmcm9tTGlzdDtcblxuLy8gUGx1Y2sgb2ZmIG4gYnl0ZXMgZnJvbSBhbiBhcnJheSBvZiBidWZmZXJzLlxuLy8gTGVuZ3RoIGlzIHRoZSBjb21iaW5lZCBsZW5ndGhzIG9mIGFsbCB0aGUgYnVmZmVycyBpbiB0aGUgbGlzdC5cbmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG4gIHZhciBsaXN0ID0gc3RhdGUuYnVmZmVyO1xuICB2YXIgbGVuZ3RoID0gc3RhdGUubGVuZ3RoO1xuICB2YXIgc3RyaW5nTW9kZSA9ICEhc3RhdGUuZGVjb2RlcjtcbiAgdmFyIG9iamVjdE1vZGUgPSAhIXN0YXRlLm9iamVjdE1vZGU7XG4gIHZhciByZXQ7XG5cbiAgLy8gbm90aGluZyBpbiB0aGUgbGlzdCwgZGVmaW5pdGVseSBlbXB0eS5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiBudWxsO1xuXG4gIGlmIChsZW5ndGggPT09IDApXG4gICAgcmV0ID0gbnVsbDtcbiAgZWxzZSBpZiAob2JqZWN0TW9kZSlcbiAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG4gIGVsc2UgaWYgKCFuIHx8IG4gPj0gbGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBhcnJheS5cbiAgICBpZiAoc3RyaW5nTW9kZSlcbiAgICAgIHJldCA9IGxpc3Quam9pbignJyk7XG4gICAgZWxzZVxuICAgICAgcmV0ID0gQnVmZmVyLmNvbmNhdChsaXN0LCBsZW5ndGgpO1xuICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyByZWFkIGp1c3Qgc29tZSBvZiBpdC5cbiAgICBpZiAobiA8IGxpc3RbMF0ubGVuZ3RoKSB7XG4gICAgICAvLyBqdXN0IHRha2UgYSBwYXJ0IG9mIHRoZSBmaXJzdCBsaXN0IGl0ZW0uXG4gICAgICAvLyBzbGljZSBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy5cbiAgICAgIHZhciBidWYgPSBsaXN0WzBdO1xuICAgICAgcmV0ID0gYnVmLnNsaWNlKDAsIG4pO1xuICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShuKTtcbiAgICB9IGVsc2UgaWYgKG4gPT09IGxpc3RbMF0ubGVuZ3RoKSB7XG4gICAgICAvLyBmaXJzdCBsaXN0IGlzIGEgcGVyZmVjdCBtYXRjaFxuICAgICAgcmV0ID0gbGlzdC5zaGlmdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb21wbGV4IGNhc2UuXG4gICAgICAvLyB3ZSBoYXZlIGVub3VnaCB0byBjb3ZlciBpdCwgYnV0IGl0IHNwYW5zIHBhc3QgdGhlIGZpcnN0IGJ1ZmZlci5cbiAgICAgIGlmIChzdHJpbmdNb2RlKVxuICAgICAgICByZXQgPSAnJztcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0ID0gbmV3IEJ1ZmZlcihuKTtcblxuICAgICAgdmFyIGMgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGwgJiYgYyA8IG47IGkrKykge1xuICAgICAgICB2YXIgYnVmID0gbGlzdFswXTtcbiAgICAgICAgdmFyIGNweSA9IE1hdGgubWluKG4gLSBjLCBidWYubGVuZ3RoKTtcblxuICAgICAgICBpZiAoc3RyaW5nTW9kZSlcbiAgICAgICAgICByZXQgKz0gYnVmLnNsaWNlKDAsIGNweSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBidWYuY29weShyZXQsIGMsIDAsIGNweSk7XG5cbiAgICAgICAgaWYgKGNweSA8IGJ1Zi5sZW5ndGgpXG4gICAgICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShjcHkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgbGlzdC5zaGlmdCgpO1xuXG4gICAgICAgIGMgKz0gY3B5O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG4gIGlmIChzdGF0ZS5sZW5ndGggPiAwKVxuICAgIHRocm93IG5ldyBFcnJvcignZW5kUmVhZGFibGUgY2FsbGVkIG9uIG5vbi1lbXB0eSBzdHJlYW0nKTtcblxuICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHtcbiAgICBzdGF0ZS5lbmRlZCA9IHRydWU7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgIC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LlxuICAgICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgc3RyZWFtLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgICAgIHN0cmVhbS5lbWl0KCdlbmQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JFYWNoICh4cywgZikge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGYoeHNbaV0sIGkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGV4T2YgKHhzLCB4KSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHhzW2ldID09PSB4KSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9yZWFkYWJsZS5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vfi9pc2FycmF5L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblxuZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuICB9XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9+L2NvcmUtdXRpbC1pcy9saWIvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9+L2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIGR1cGxleCBzdHJlYW0gaXMganVzdCBhIHN0cmVhbSB0aGF0IGlzIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLlxuLy8gU2luY2UgSlMgZG9lc24ndCBoYXZlIG11bHRpcGxlIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UsIHRoaXMgY2xhc3Ncbi8vIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFJlYWRhYmxlLCBhbmQgdGhlbiBwYXJhc2l0aWNhbGx5IGZyb21cbi8vIFdyaXRhYmxlLlxuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcbiAgcmV0dXJuIGtleXM7XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBSZWFkYWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV9yZWFkYWJsZScpO1xudmFyIFdyaXRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3dyaXRhYmxlJyk7XG5cbnV0aWwuaW5oZXJpdHMoRHVwbGV4LCBSZWFkYWJsZSk7XG5cbmZvckVhY2gob2JqZWN0S2V5cyhXcml0YWJsZS5wcm90b3R5cGUpLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgaWYgKCFEdXBsZXgucHJvdG90eXBlW21ldGhvZF0pXG4gICAgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG59KTtcblxuZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpXG4gICAgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7XG5cbiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSlcbiAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpXG4gICAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuXG4gIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpXG4gICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG5cbiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7XG59XG5cbi8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXJcbmZ1bmN0aW9uIG9uZW5kKCkge1xuICAvLyBpZiB3ZSBhbGxvdyBoYWxmLW9wZW4gc3RhdGUsIG9yIGlmIHRoZSB3cml0YWJsZSBzaWRlIGVuZGVkLFxuICAvLyB0aGVuIHdlJ3JlIG9rLlxuICBpZiAodGhpcy5hbGxvd0hhbGZPcGVuIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpXG4gICAgcmV0dXJuO1xuXG4gIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cbiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG4gIHByb2Nlc3MubmV4dFRpY2sodGhpcy5lbmQuYmluZCh0aGlzKSk7XG59XG5cbmZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZih4c1tpXSwgaSk7XG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGNiKSwgYW5kIGl0J2xsIGhhbmRsZSBhbGxcbi8vIHRoZSBkcmFpbiBldmVudCBlbWlzc2lvbiBhbmQgYnVmZmVyaW5nLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5Xcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTtcblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxudXRpbC5pbmhlcml0cyhXcml0YWJsZSwgU3RyZWFtKTtcblxuZnVuY3Rpb24gV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aGlzLmNodW5rID0gY2h1bms7XG4gIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgdGhpcy5jYWxsYmFjayA9IGNiO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCB3cml0ZSgpIHN0YXJ0cyByZXR1cm5pbmcgZmFsc2VcbiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyB0aGF0IHdlIGFsd2F5cyByZXR1cm4gZmFsc2UgaWZcbiAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKVxuICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuICB2YXIgZGVmYXVsdEh3bSA9IG9wdGlvbnMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtO1xuXG4gIC8vIG9iamVjdCBzdHJlYW0gZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGlzIHN0cmVhbVxuICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuXG4gIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXG4gIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpXG4gICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+fnRoaXMuaGlnaFdhdGVyTWFyaztcblxuICB0aGlzLm5lZWREcmFpbiA9IGZhbHNlO1xuICAvLyBhdCB0aGUgc3RhcnQgb2YgY2FsbGluZyBlbmQoKVxuICB0aGlzLmVuZGluZyA9IGZhbHNlO1xuICAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkXG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkXG4gIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcblxuICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT9cbiAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nXG4gIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuXG4gIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7XG4gIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTtcblxuICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JztcblxuICAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudFxuICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nXG4gIC8vIHNvY2tldCBvciBmaWxlLlxuICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS5cbiAgdGhpcy53cml0aW5nID0gZmFsc2U7XG5cbiAgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbFxuICB0aGlzLmNvcmtlZCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG4gIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG4gIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG4gIHRoaXMuc3luYyA9IHRydWU7XG5cbiAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaFxuICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndFxuICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi5cbiAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKVxuICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbihlcikge1xuICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7XG4gIH07XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQgdGhlIHVzZXIgc3VwcGxpZXMgdG8gd3JpdGUoY2h1bmssZW5jb2RpbmcsY2IpXG4gIHRoaXMud3JpdGVjYiA9IG51bGw7XG5cbiAgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLlxuICB0aGlzLndyaXRlbGVuID0gMDtcblxuICB0aGlzLmJ1ZmZlciA9IFtdO1xuXG4gIC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzXG4gIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZFxuICB0aGlzLnBlbmRpbmdjYiA9IDA7XG5cbiAgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNic1xuICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtc1xuICB0aGlzLnByZWZpbmlzaGVkID0gZmFsc2U7XG5cbiAgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW5cbiAgdGhpcy5lcnJvckVtaXR0ZWQgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdGhvdWdoIHRoZXkncmUgbm90XG4gIC8vIGluc3RhbmNlb2YgV3JpdGFibGUsIHRoZXkncmUgaW5zdGFuY2VvZiBSZWFkYWJsZS5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdyaXRhYmxlKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKVxuICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeS5cbiAgdGhpcy53cml0YWJsZSA9IHRydWU7XG5cbiAgU3RyZWFtLmNhbGwodGhpcyk7XG59XG5cbi8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy5cbldyaXRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLiBOb3QgcmVhZGFibGUuJykpO1xufTtcblxuXG5mdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG4gIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7XG4gIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiXG4gIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICBjYihlcik7XG4gIH0pO1xufVxuXG4vLyBJZiB3ZSBnZXQgc29tZXRoaW5nIHRoYXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZCxcbi8vIGFuZCB3ZSdyZSBub3QgaW4gb2JqZWN0TW9kZSwgdGhlbiB0aGF0J3MgYW4gZXJyb3IuXG4vLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGVcbi8vIHdhdGVybWFya3MgZGV0ZXJtaW5lIGhvdyBtYW55IG9iamVjdHMgdG8ga2VlcCBpbiB0aGUgYnVmZmVyLCByYXRoZXIgdGhhblxuLy8gaG93IG1hbnkgYnl0ZXMgb3IgY2hhcmFjdGVycy5cbmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7XG4gIHZhciB2YWxpZCA9IHRydWU7XG4gIGlmICghdXRpbC5pc0J1ZmZlcihjaHVuaykgJiZcbiAgICAgICF1dGlsLmlzU3RyaW5nKGNodW5rKSAmJlxuICAgICAgIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspICYmXG4gICAgICAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIHZhciBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgIGNiKGVyKTtcbiAgICB9KTtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuICB2YXIgcmV0ID0gZmFsc2U7XG5cbiAgaWYgKHV0aWwuaXNGdW5jdGlvbihlbmNvZGluZykpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmICh1dGlsLmlzQnVmZmVyKGNodW5rKSlcbiAgICBlbmNvZGluZyA9ICdidWZmZXInO1xuICBlbHNlIGlmICghZW5jb2RpbmcpXG4gICAgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cbiAgaWYgKCF1dGlsLmlzRnVuY3Rpb24oY2IpKVxuICAgIGNiID0gZnVuY3Rpb24oKSB7fTtcblxuICBpZiAoc3RhdGUuZW5kZWQpXG4gICAgd3JpdGVBZnRlckVuZCh0aGlzLCBzdGF0ZSwgY2IpO1xuICBlbHNlIGlmICh2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBzdGF0ZS5jb3JrZWQrKztcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkLS07XG5cbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiZcbiAgICAgICAgIXN0YXRlLmNvcmtlZCAmJlxuICAgICAgICAhc3RhdGUuZmluaXNoZWQgJiZcbiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiZcbiAgICAgICAgc3RhdGUuYnVmZmVyLmxlbmd0aClcbiAgICAgIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykge1xuICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiZcbiAgICAgIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmXG4gICAgICB1dGlsLmlzU3RyaW5nKGNodW5rKSkge1xuICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpO1xuICB9XG4gIHJldHVybiBjaHVuaztcbn1cblxuLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG4vLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cbmZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpO1xuICBpZiAodXRpbC5pc0J1ZmZlcihjaHVuaykpXG4gICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXG4gIHN0YXRlLmxlbmd0aCArPSBsZW47XG5cbiAgdmFyIHJldCA9IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLlxuICBpZiAoIXJldClcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlO1xuXG4gIGlmIChzdGF0ZS53cml0aW5nIHx8IHN0YXRlLmNvcmtlZClcbiAgICBzdGF0ZS5idWZmZXIucHVzaChuZXcgV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikpO1xuICBlbHNlXG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcblxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHN0YXRlLndyaXRlbGVuID0gbGVuO1xuICBzdGF0ZS53cml0ZWNiID0gY2I7XG4gIHN0YXRlLndyaXRpbmcgPSB0cnVlO1xuICBzdGF0ZS5zeW5jID0gdHJ1ZTtcbiAgaWYgKHdyaXRldilcbiAgICBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7XG4gIGVsc2VcbiAgICBzdHJlYW0uX3dyaXRlKGNodW5rLCBlbmNvZGluZywgc3RhdGUub253cml0ZSk7XG4gIHN0YXRlLnN5bmMgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikge1xuICBpZiAoc3luYylcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgICBjYihlcik7XG4gICAgfSk7XG4gIGVsc2Uge1xuICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuICAgIGNiKGVyKTtcbiAgfVxuXG4gIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKVxuICAgIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpO1xuICBlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cbiAgICBpZiAoIWZpbmlzaGVkICYmXG4gICAgICAgICFzdGF0ZS5jb3JrZWQgJiZcbiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiZcbiAgICAgICAgc3RhdGUuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKSB7XG4gIGlmICghZmluaXNoZWQpXG4gICAgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpO1xuICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgY2IoKTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG59XG5cbi8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0XG4vLyBlbWl0ICdkcmFpbicgYmVmb3JlIHRoZSB3cml0ZSgpIGNvbnN1bWVyIGdldHMgdGhlICdmYWxzZScgcmV0dXJuXG4vLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLlxuZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcbiAgfVxufVxuXG5cbi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuXG4gIGlmIChzdHJlYW0uX3dyaXRldiAmJiBzdGF0ZS5idWZmZXIubGVuZ3RoID4gMSkge1xuICAgIC8vIEZhc3QgY2FzZSwgd3JpdGUgZXZlcnl0aGluZyB1c2luZyBfd3JpdGV2KClcbiAgICB2YXIgY2JzID0gW107XG4gICAgZm9yICh2YXIgYyA9IDA7IGMgPCBzdGF0ZS5idWZmZXIubGVuZ3RoOyBjKyspXG4gICAgICBjYnMucHVzaChzdGF0ZS5idWZmZXJbY10uY2FsbGJhY2spO1xuXG4gICAgLy8gY291bnQgdGhlIG9uZSB3ZSBhcmUgYWRkaW5nLCBhcyB3ZWxsLlxuICAgIC8vIFRPRE8oaXNhYWNzKSBjbGVhbiB0aGlzIHVwXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmJ1ZmZlciwgJycsIGZ1bmN0aW9uKGVycikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgICAgIGNic1tpXShlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgYnVmZmVyXG4gICAgc3RhdGUuYnVmZmVyID0gW107XG4gIH0gZWxzZSB7XG4gICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZVxuICAgIGZvciAodmFyIGMgPSAwOyBjIDwgc3RhdGUuYnVmZmVyLmxlbmd0aDsgYysrKSB7XG4gICAgICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJbY107XG4gICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuaztcbiAgICAgIHZhciBlbmNvZGluZyA9IGVudHJ5LmVuY29kaW5nO1xuICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cbiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG5cbiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuXG4gICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLlxuICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseVxuICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBjKys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjIDwgc3RhdGUuYnVmZmVyLmxlbmd0aClcbiAgICAgIHN0YXRlLmJ1ZmZlciA9IHN0YXRlLmJ1ZmZlci5zbGljZShjKTtcbiAgICBlbHNlXG4gICAgICBzdGF0ZS5idWZmZXIubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7XG5cbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDtcblxuV3JpdGFibGUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAodXRpbC5pc0Z1bmN0aW9uKGNodW5rKSkge1xuICAgIGNiID0gY2h1bms7XG4gICAgY2h1bmsgPSBudWxsO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfSBlbHNlIGlmICh1dGlsLmlzRnVuY3Rpb24oZW5jb2RpbmcpKSB7XG4gICAgY2IgPSBlbmNvZGluZztcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH1cblxuICBpZiAoIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQoY2h1bmspKVxuICAgIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblxuICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkID0gMTtcbiAgICB0aGlzLnVuY29yaygpO1xuICB9XG5cbiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpXG4gICAgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTtcbn07XG5cblxuZnVuY3Rpb24gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIHJldHVybiAoc3RhdGUuZW5kaW5nICYmXG4gICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgIXN0YXRlLmZpbmlzaGVkICYmXG4gICAgICAgICAgIXN0YXRlLndyaXRpbmcpO1xufVxuXG5mdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnByZWZpbmlzaGVkKSB7XG4gICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdHJlYW0sIHN0YXRlKTtcbiAgaWYgKG5lZWQpIHtcbiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7XG4gICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7XG4gICAgfSBlbHNlXG4gICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIG5lZWQ7XG59XG5cbmZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG4gIHN0YXRlLmVuZGluZyA9IHRydWU7XG4gIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICBpZiAoY2IpIHtcbiAgICBpZiAoc3RhdGUuZmluaXNoZWQpXG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGNiKTtcbiAgICBlbHNlXG4gICAgICBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpO1xuICB9XG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcblxudmFyIGlzQnVmZmVyRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZ1xuICB8fCBmdW5jdGlvbihlbmNvZGluZykge1xuICAgICAgIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgY2FzZSAnaGV4JzogY2FzZSAndXRmOCc6IGNhc2UgJ3V0Zi04JzogY2FzZSAnYXNjaWknOiBjYXNlICdiaW5hcnknOiBjYXNlICdiYXNlNjQnOiBjYXNlICd1Y3MyJzogY2FzZSAndWNzLTInOiBjYXNlICd1dGYxNmxlJzogY2FzZSAndXRmLTE2bGUnOiBjYXNlICdyYXcnOiByZXR1cm4gdHJ1ZTtcbiAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcbiAgICAgICB9XG4gICAgIH1cblxuXG5mdW5jdGlvbiBhc3NlcnRFbmNvZGluZyhlbmNvZGluZykge1xuICBpZiAoZW5jb2RpbmcgJiYgIWlzQnVmZmVyRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICB9XG59XG5cbi8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2Zcbi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZVxuLy8gY2hhcmFjdGVycy4gQ0VTVS04IGlzIGhhbmRsZWQgYXMgcGFydCBvZiB0aGUgVVRGLTggZW5jb2RpbmcuXG4vL1xuLy8gQFRPRE8gSGFuZGxpbmcgYWxsIGVuY29kaW5ncyBpbnNpZGUgYSBzaW5nbGUgb2JqZWN0IG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0XG4vLyB0byByZWFzb24gYWJvdXQgdGhpcyBjb2RlLCBzbyBpdCBzaG91bGQgYmUgc3BsaXQgdXAgaW4gdGhlIGZ1dHVyZS5cbi8vIEBUT0RPIFRoZXJlIHNob3VsZCBiZSBhIHV0Zjgtc3RyaWN0IGVuY29kaW5nIHRoYXQgcmVqZWN0cyBpbnZhbGlkIFVURi04IGNvZGVcbi8vIHBvaW50cyBhcyB1c2VkIGJ5IENFU1UtOC5cbnZhciBTdHJpbmdEZWNvZGVyID0gZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gZnVuY3Rpb24oZW5jb2RpbmcpIHtcbiAgdGhpcy5lbmNvZGluZyA9IChlbmNvZGluZyB8fCAndXRmOCcpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sICcnKTtcbiAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpO1xuICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcbiAgICBjYXNlICd1dGY4JzpcbiAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlc1xuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgLy8gVVRGLTE2IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAyLWJ5dGVzXG4gICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyO1xuICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLlxuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEVub3VnaCBzcGFjZSB0byBzdG9yZSBhbGwgYnl0ZXMgb2YgYSBzaW5nbGUgY2hhcmFjdGVyLiBVVEYtOCBuZWVkcyA0XG4gIC8vIGJ5dGVzLCBidXQgQ0VTVS04IG1heSByZXF1aXJlIHVwIHRvIDYgKDMgYnl0ZXMgcGVyIHN1cnJvZ2F0ZSkuXG4gIHRoaXMuY2hhckJ1ZmZlciA9IG5ldyBCdWZmZXIoNik7XG4gIC8vIE51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci5cbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSAwO1xuICAvLyBOdW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuXG4gIHRoaXMuY2hhckxlbmd0aCA9IDA7XG59O1xuXG5cbi8vIHdyaXRlIGRlY29kZXMgdGhlIGdpdmVuIGJ1ZmZlciBhbmQgcmV0dXJucyBpdCBhcyBKUyBzdHJpbmcgdGhhdCBpc1xuLy8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsXG4vLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZVxuLy8gcmV0dXJuZWQgd2hlbiBjYWxsaW5nIHdyaXRlIGFnYWluIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcy5cbi8vXG4vLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZ1xuLy8gY3VycmVudGx5IHdvcmtzLCBidXQgY29udmVydGluZyBhIFN0cmluZyB0byBhIEJ1ZmZlciAodmlhIGBuZXcgQnVmZmVyYCwgb3Jcbi8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlXG4vLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIGNoYXJTdHIgPSAnJztcbiAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXJcbiAgd2hpbGUgKHRoaXMuY2hhckxlbmd0aCkge1xuICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXJcbiAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID9cbiAgICAgICAgdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQgOlxuICAgICAgICBidWZmZXIubGVuZ3RoO1xuXG4gICAgLy8gYWRkIHRoZSBuZXcgYnl0ZXMgdG8gdGhlIGNoYXIgYnVmZmVyXG4gICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCB0aGlzLmNoYXJSZWNlaXZlZCwgMCwgYXZhaWxhYmxlKTtcbiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBhdmFpbGFibGU7XG5cbiAgICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQgPCB0aGlzLmNoYXJMZW5ndGgpIHtcbiAgICAgIC8vIHN0aWxsIG5vdCBlbm91Z2ggY2hhcnMgaW4gdGhpcyBidWZmZXI/IHdhaXQgZm9yIG1vcmUgLi4uXG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGJ5dGVzIGJlbG9uZ2luZyB0byB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZnJvbSB0aGUgYnVmZmVyXG4gICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7XG5cbiAgICAvLyBnZXQgdGhlIGNoYXJhY3RlciB0aGF0IHdhcyBzcGxpdFxuICAgIGNoYXJTdHIgPSB0aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCwgdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcblxuICAgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXJcbiAgICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoY2hhclN0ci5sZW5ndGggLSAxKTtcbiAgICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoICs9IHRoaXMuc3Vycm9nYXRlU2l6ZTtcbiAgICAgIGNoYXJTdHIgPSAnJztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB0aGlzLmNoYXJSZWNlaXZlZCA9IHRoaXMuY2hhckxlbmd0aCA9IDA7XG5cbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSBieXRlcyBpbiB0aGlzIGJ1ZmZlciwganVzdCBlbWl0IG91ciBjaGFyXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBjaGFyU3RyO1xuICAgIH1cbiAgICBicmVhaztcbiAgfVxuXG4gIC8vIGRldGVybWluZSBhbmQgc2V0IGNoYXJMZW5ndGggLyBjaGFyUmVjZWl2ZWRcbiAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpO1xuXG4gIHZhciBlbmQgPSBidWZmZXIubGVuZ3RoO1xuICBpZiAodGhpcy5jaGFyTGVuZ3RoKSB7XG4gICAgLy8gYnVmZmVyIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlciBieXRlcyB3ZSBnb3RcbiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIGJ1ZmZlci5sZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCwgZW5kKTtcbiAgICBlbmQgLT0gdGhpcy5jaGFyUmVjZWl2ZWQ7XG4gIH1cblxuICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpO1xuXG4gIHZhciBlbmQgPSBjaGFyU3RyLmxlbmd0aCAtIDE7XG4gIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChlbmQpO1xuICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyXG4gIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7XG4gICAgdmFyIHNpemUgPSB0aGlzLnN1cnJvZ2F0ZVNpemU7XG4gICAgdGhpcy5jaGFyTGVuZ3RoICs9IHNpemU7XG4gICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gc2l6ZTtcbiAgICB0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHNpemUsIDAsIHNpemUpO1xuICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgMCwgc2l6ZSk7XG4gICAgcmV0dXJuIGNoYXJTdHIuc3Vic3RyaW5nKDAsIGVuZCk7XG4gIH1cblxuICAvLyBvciBqdXN0IGVtaXQgdGhlIGNoYXJTdHJcbiAgcmV0dXJuIGNoYXJTdHI7XG59O1xuXG4vLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0XG4vLyB0aGUgZW5kIG9mIHRoZSBnaXZlbiBidWZmZXIuIElmIHNvLCBpdCBzZXRzIHRoaXMuY2hhckxlbmd0aCB0byB0aGUgYnl0ZVxuLy8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzXG4vLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlclxuICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7XG5cbiAgLy8gRmlndXJlIG91dCBpZiBvbmUgb2YgdGhlIGxhc3QgaSBieXRlcyBvZiBvdXIgYnVmZmVyIGFubm91bmNlcyBhblxuICAvLyBpbmNvbXBsZXRlIGNoYXIuXG4gIGZvciAoOyBpID4gMDsgaS0tKSB7XG4gICAgdmFyIGMgPSBidWZmZXJbYnVmZmVyLmxlbmd0aCAtIGldO1xuXG4gICAgLy8gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVRGLTgjRGVzY3JpcHRpb25cblxuICAgIC8vIDExMFhYWFhYXG4gICAgaWYgKGkgPT0gMSAmJiBjID4+IDUgPT0gMHgwNikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTBYWFhYXG4gICAgaWYgKGkgPD0gMiAmJiBjID4+IDQgPT0gMHgwRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMztcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTEwWFhYXG4gICAgaWYgKGkgPD0gMyAmJiBjID4+IDMgPT0gMHgxRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gNDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGk7XG59O1xuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIHJlcyA9ICcnO1xuICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpXG4gICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpO1xuXG4gIGlmICh0aGlzLmNoYXJSZWNlaXZlZCkge1xuICAgIHZhciBjciA9IHRoaXMuY2hhclJlY2VpdmVkO1xuICAgIHZhciBidWYgPSB0aGlzLmNoYXJCdWZmZXI7XG4gICAgdmFyIGVuYyA9IHRoaXMuZW5jb2Rpbmc7XG4gICAgcmVzICs9IGJ1Zi5zbGljZSgwLCBjcikudG9TdHJpbmcoZW5jKTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuXG5mdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikge1xuICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikge1xuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAyO1xuICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDIgOiAwO1xufVxuXG5mdW5jdGlvbiBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHtcbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMztcbiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAzIDogMDtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vc3RyaW5nX2RlY29kZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5cbi8vIGEgdHJhbnNmb3JtIHN0cmVhbSBpcyBhIHJlYWRhYmxlL3dyaXRhYmxlIHN0cmVhbSB3aGVyZSB5b3UgZG9cbi8vIHNvbWV0aGluZyB3aXRoIHRoZSBkYXRhLiAgU29tZXRpbWVzIGl0J3MgY2FsbGVkIGEgXCJmaWx0ZXJcIixcbi8vIGJ1dCB0aGF0J3Mgbm90IGEgZ3JlYXQgbmFtZSBmb3IgaXQsIHNpbmNlIHRoYXQgaW1wbGllcyBhIHRoaW5nIHdoZXJlXG4vLyBzb21lIGJpdHMgcGFzcyB0aHJvdWdoLCBhbmQgb3RoZXJzIGFyZSBzaW1wbHkgaWdub3JlZC4gIChUaGF0IHdvdWxkXG4vLyBiZSBhIHZhbGlkIGV4YW1wbGUgb2YgYSB0cmFuc2Zvcm0sIG9mIGNvdXJzZS4pXG4vL1xuLy8gV2hpbGUgdGhlIG91dHB1dCBpcyBjYXVzYWxseSByZWxhdGVkIHRvIHRoZSBpbnB1dCwgaXQncyBub3QgYVxuLy8gbmVjZXNzYXJpbHkgc3ltbWV0cmljIG9yIHN5bmNocm9ub3VzIHRyYW5zZm9ybWF0aW9uLiAgRm9yIGV4YW1wbGUsXG4vLyBhIHpsaWIgc3RyZWFtIG1pZ2h0IHRha2UgbXVsdGlwbGUgcGxhaW4tdGV4dCB3cml0ZXMoKSwgYW5kIHRoZW5cbi8vIGVtaXQgYSBzaW5nbGUgY29tcHJlc3NlZCBjaHVuayBzb21lIHRpbWUgaW4gdGhlIGZ1dHVyZS5cbi8vXG4vLyBIZXJlJ3MgaG93IHRoaXMgd29ya3M6XG4vL1xuLy8gVGhlIFRyYW5zZm9ybSBzdHJlYW0gaGFzIGFsbCB0aGUgYXNwZWN0cyBvZiB0aGUgcmVhZGFibGUgYW5kIHdyaXRhYmxlXG4vLyBzdHJlYW0gY2xhc3Nlcy4gIFdoZW4geW91IHdyaXRlKGNodW5rKSwgdGhhdCBjYWxscyBfd3JpdGUoY2h1bmssY2IpXG4vLyBpbnRlcm5hbGx5LCBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGVyZSdzIGEgbG90IG9mIHBlbmRpbmcgd3JpdGVzXG4vLyBidWZmZXJlZCB1cC4gIFdoZW4geW91IGNhbGwgcmVhZCgpLCB0aGF0IGNhbGxzIF9yZWFkKG4pIHVudGlsXG4vLyB0aGVyZSdzIGVub3VnaCBwZW5kaW5nIHJlYWRhYmxlIGRhdGEgYnVmZmVyZWQgdXAuXG4vL1xuLy8gSW4gYSB0cmFuc2Zvcm0gc3RyZWFtLCB0aGUgd3JpdHRlbiBkYXRhIGlzIHBsYWNlZCBpbiBhIGJ1ZmZlci4gIFdoZW5cbi8vIF9yZWFkKG4pIGlzIGNhbGxlZCwgaXQgdHJhbnNmb3JtcyB0aGUgcXVldWVkIHVwIGRhdGEsIGNhbGxpbmcgdGhlXG4vLyBidWZmZXJlZCBfd3JpdGUgY2IncyBhcyBpdCBjb25zdW1lcyBjaHVua3MuICBJZiBjb25zdW1pbmcgYSBzaW5nbGVcbi8vIHdyaXR0ZW4gY2h1bmsgd291bGQgcmVzdWx0IGluIG11bHRpcGxlIG91dHB1dCBjaHVua3MsIHRoZW4gdGhlIGZpcnN0XG4vLyBvdXRwdXR0ZWQgYml0IGNhbGxzIHRoZSByZWFkY2IsIGFuZCBzdWJzZXF1ZW50IGNodW5rcyBqdXN0IGdvIGludG9cbi8vIHRoZSByZWFkIGJ1ZmZlciwgYW5kIHdpbGwgY2F1c2UgaXQgdG8gZW1pdCAncmVhZGFibGUnIGlmIG5lY2Vzc2FyeS5cbi8vXG4vLyBUaGlzIHdheSwgYmFjay1wcmVzc3VyZSBpcyBhY3R1YWxseSBkZXRlcm1pbmVkIGJ5IHRoZSByZWFkaW5nIHNpZGUsXG4vLyBzaW5jZSBfcmVhZCBoYXMgdG8gYmUgY2FsbGVkIHRvIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgY2h1bmsuICBIb3dldmVyLFxuLy8gYSBwYXRob2xvZ2ljYWwgaW5mbGF0ZSB0eXBlIG9mIHRyYW5zZm9ybSBjYW4gY2F1c2UgZXhjZXNzaXZlIGJ1ZmZlcmluZ1xuLy8gaGVyZS4gIEZvciBleGFtcGxlLCBpbWFnaW5lIGEgc3RyZWFtIHdoZXJlIGV2ZXJ5IGJ5dGUgb2YgaW5wdXQgaXNcbi8vIGludGVycHJldGVkIGFzIGFuIGludGVnZXIgZnJvbSAwLTI1NSwgYW5kIHRoZW4gcmVzdWx0cyBpbiB0aGF0IG1hbnlcbi8vIGJ5dGVzIG9mIG91dHB1dC4gIFdyaXRpbmcgdGhlIDQgYnl0ZXMge2ZmLGZmLGZmLGZmfSB3b3VsZCByZXN1bHQgaW5cbi8vIDFrYiBvZiBkYXRhIGJlaW5nIG91dHB1dC4gIEluIHRoaXMgY2FzZSwgeW91IGNvdWxkIHdyaXRlIGEgdmVyeSBzbWFsbFxuLy8gYW1vdW50IG9mIGlucHV0LCBhbmQgZW5kIHVwIHdpdGggYSB2ZXJ5IGxhcmdlIGFtb3VudCBvZiBvdXRwdXQuICBJblxuLy8gc3VjaCBhIHBhdGhvbG9naWNhbCBpbmZsYXRpbmcgbWVjaGFuaXNtLCB0aGVyZSdkIGJlIG5vIHdheSB0byB0ZWxsXG4vLyB0aGUgc3lzdGVtIHRvIHN0b3AgZG9pbmcgdGhlIHRyYW5zZm9ybS4gIEEgc2luZ2xlIDRNQiB3cml0ZSBjb3VsZFxuLy8gY2F1c2UgdGhlIHN5c3RlbSB0byBydW4gb3V0IG9mIG1lbW9yeS5cbi8vXG4vLyBIb3dldmVyLCBldmVuIGluIHN1Y2ggYSBwYXRob2xvZ2ljYWwgY2FzZSwgb25seSBhIHNpbmdsZSB3cml0dGVuIGNodW5rXG4vLyB3b3VsZCBiZSBjb25zdW1lZCwgYW5kIHRoZW4gdGhlIHJlc3Qgd291bGQgd2FpdCAodW4tdHJhbnNmb3JtZWQpIHVudGlsXG4vLyB0aGUgcmVzdWx0cyBvZiB0aGUgcHJldmlvdXMgdHJhbnNmb3JtZWQgY2h1bmsgd2VyZSBjb25zdW1lZC5cblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cblxuZnVuY3Rpb24gVHJhbnNmb3JtU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIHRoaXMuYWZ0ZXJUcmFuc2Zvcm0gPSBmdW5jdGlvbihlciwgZGF0YSkge1xuICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTtcbiAgfTtcblxuICB0aGlzLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgdGhpcy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcbiAgdGhpcy53cml0ZWNodW5rID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkge1xuICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlO1xuICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblxuICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXG4gIGlmICghY2IpXG4gICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3MnKSk7XG5cbiAgdHMud3JpdGVjaHVuayA9IG51bGw7XG4gIHRzLndyaXRlY2IgPSBudWxsO1xuXG4gIGlmICghdXRpbC5pc051bGxPclVuZGVmaW5lZChkYXRhKSlcbiAgICBzdHJlYW0ucHVzaChkYXRhKTtcblxuICBpZiAoY2IpXG4gICAgY2IoZXIpO1xuXG4gIHZhciBycyA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgcnMucmVhZGluZyA9IGZhbHNlO1xuICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHtcbiAgICBzdHJlYW0uX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBUcmFuc2Zvcm0ob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSlcbiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblxuICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IG5ldyBUcmFuc2Zvcm1TdGF0ZShvcHRpb25zLCB0aGlzKTtcblxuICAvLyB3aGVuIHRoZSB3cml0YWJsZSBzaWRlIGZpbmlzaGVzLCB0aGVuIGZsdXNoIG91dCBhbnl0aGluZyByZW1haW5pbmcuXG4gIHZhciBzdHJlYW0gPSB0aGlzO1xuXG4gIC8vIHN0YXJ0IG91dCBhc2tpbmcgZm9yIGEgcmVhZGFibGUgZXZlbnQgb25jZSBkYXRhIGlzIHRyYW5zZm9ybWVkLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgLy8gd2UgaGF2ZSBpbXBsZW1lbnRlZCB0aGUgX3JlYWQgbWV0aG9kLCBhbmQgZG9uZSB0aGUgb3RoZXIgdGhpbmdzXG4gIC8vIHRoYXQgUmVhZGFibGUgd2FudHMgYmVmb3JlIHRoZSBmaXJzdCBfcmVhZCBjYWxsLCBzbyB1bnNldCB0aGVcbiAgLy8gc3luYyBndWFyZCBmbGFnLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmMgPSBmYWxzZTtcblxuICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uKCkge1xuICAgIGlmICh1dGlsLmlzRnVuY3Rpb24odGhpcy5fZmx1c2gpKVxuICAgICAgdGhpcy5fZmx1c2goZnVuY3Rpb24oZXIpIHtcbiAgICAgICAgZG9uZShzdHJlYW0sIGVyKTtcbiAgICAgIH0pO1xuICAgIGVsc2VcbiAgICAgIGRvbmUoc3RyZWFtKTtcbiAgfSk7XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZykge1xuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7XG4gIHJldHVybiBEdXBsZXgucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBjaHVuaywgZW5jb2RpbmcpO1xufTtcblxuLy8gVGhpcyBpcyB0aGUgcGFydCB3aGVyZSB5b3UgZG8gc3R1ZmYhXG4vLyBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uIGluIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG4vLyAnY2h1bmsnIGlzIGFuIGlucHV0IGNodW5rLlxuLy9cbi8vIENhbGwgYHB1c2gobmV3Q2h1bmspYCB0byBwYXNzIGFsb25nIHRyYW5zZm9ybWVkIG91dHB1dFxuLy8gdG8gdGhlIHJlYWRhYmxlIHNpZGUuICBZb3UgbWF5IGNhbGwgJ3B1c2gnIHplcm8gb3IgbW9yZSB0aW1lcy5cbi8vXG4vLyBDYWxsIGBjYihlcnIpYCB3aGVuIHlvdSBhcmUgZG9uZSB3aXRoIHRoaXMgY2h1bmsuICBJZiB5b3UgcGFzc1xuLy8gYW4gZXJyb3IsIHRoZW4gdGhhdCdsbCBwdXQgdGhlIGh1cnQgb24gdGhlIHdob2xlIG9wZXJhdGlvbi4gIElmIHlvdVxuLy8gbmV2ZXIgY2FsbCBjYigpLCB0aGVuIHlvdSdsbCBuZXZlciBnZXQgYW5vdGhlciBjaHVuay5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTtcbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcbiAgdHMud3JpdGVjYiA9IGNiO1xuICB0cy53cml0ZWNodW5rID0gY2h1bms7XG4gIHRzLndyaXRlZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgaWYgKCF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICAgIGlmICh0cy5uZWVkVHJhbnNmb3JtIHx8XG4gICAgICAgIHJzLm5lZWRSZWFkYWJsZSB8fFxuICAgICAgICBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKVxuICAgICAgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcbiAgfVxufTtcblxuLy8gRG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgYXJncyBhcmUgaGVyZS5cbi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuXG4vLyBUaGF0IHdlIGdvdCBoZXJlIG1lYW5zIHRoYXQgdGhlIHJlYWRhYmxlIHNpZGUgd2FudHMgbW9yZSBkYXRhLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG5cbiAgaWYgKCF1dGlsLmlzTnVsbCh0cy53cml0ZWNodW5rKSAmJiB0cy53cml0ZWNiICYmICF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB0cy50cmFuc2Zvcm1pbmcgPSB0cnVlO1xuICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpblxuICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LlxuICAgIHRzLm5lZWRUcmFuc2Zvcm0gPSB0cnVlO1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlcikge1xuICBpZiAoZXIpXG4gICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblxuICAvLyBpZiB0aGVyZSdzIG5vdGhpbmcgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhlbiB0aGF0IG1lYW5zXG4gIC8vIHRoYXQgbm90aGluZyBtb3JlIHdpbGwgZXZlciBiZSBwcm92aWRlZFxuICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG4gIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG5cbiAgaWYgKHdzLmxlbmd0aClcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpO1xuXG4gIGlmICh0cy50cmFuc2Zvcm1pbmcpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nJyk7XG5cbiAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uXG4vLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS5cbi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuXG5cbm1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7XG5cbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCcuL19zdHJlYW1fdHJhbnNmb3JtJyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTtcblxuZnVuY3Rpb24gUGFzc1Rocm91Z2gob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKVxuICAgIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cbiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cblBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjYihudWxsLCBjaHVuayk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vbGliL19zdHJlYW1fd3JpdGFibGUuanNcIilcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX2R1cGxleC5qc1wiKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qc1wiKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9yZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzXCIpXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIGV4dHNwcmludGYuanM6IGV4dGVuZGVkIFBPU0lYLXN0eWxlIHNwcmludGZcbiAqL1xuXG52YXIgbW9kX2Fzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpO1xudmFyIG1vZF91dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuXG4vKlxuICogUHVibGljIGludGVyZmFjZVxuICovXG5leHBvcnRzLnNwcmludGYgPSBqc1NwcmludGY7XG5leHBvcnRzLnByaW50ZiA9IGpzUHJpbnRmO1xuZXhwb3J0cy5mcHJpbnRmID0ganNGcHJpbnRmO1xuXG4vKlxuICogU3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHNbbl1wcmludGYoM2MpLiAgV2UgbWFrZSBhIGJlc3QgZWZmb3J0IHRvIHRocm93IGFuXG4gKiBleGNlcHRpb24gd2hlbiBnaXZlbiBhIGZvcm1hdCBzdHJpbmcgd2UgZG9uJ3QgdW5kZXJzdGFuZCwgcmF0aGVyIHRoYW5cbiAqIGlnbm9yaW5nIGl0LCBzbyB0aGF0IHdlIHdvbid0IGJyZWFrIGV4aXN0aW5nIHByb2dyYW1zIGlmL3doZW4gd2UgZ28gaW1wbGVtZW50XG4gKiB0aGUgcmVzdCBvZiB0aGlzLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gY3VycmVudGx5IHN1cHBvcnRzIHNwZWNpZnlpbmdcbiAqXHQtIGZpZWxkIGFsaWdubWVudCAoJy0nIGZsYWcpLFxuICogXHQtIHplcm8tcGFkICgnMCcgZmxhZylcbiAqXHQtIGFsd2F5cyBzaG93IG51bWVyaWMgc2lnbiAoJysnIGZsYWcpLFxuICpcdC0gZmllbGQgd2lkdGhcbiAqXHQtIGNvbnZlcnNpb25zIGZvciBzdHJpbmdzLCBkZWNpbWFsIGludGVnZXJzLCBhbmQgZmxvYXRzIChudW1iZXJzKS5cbiAqXHQtIGFyZ3VtZW50IHNpemUgc3BlY2lmaWVycy4gIFRoZXNlIGFyZSBhbGwgYWNjZXB0ZWQgYnV0IGlnbm9yZWQsIHNpbmNlXG4gKlx0ICBKYXZhc2NyaXB0IGhhcyBubyBub3Rpb24gb2YgdGhlIHBoeXNpY2FsIHNpemUgb2YgYW4gYXJndW1lbnQuXG4gKlxuICogRXZlcnl0aGluZyBlbHNlIGlzIGN1cnJlbnRseSB1bnN1cHBvcnRlZCwgbW9zdCBub3RhYmx5IHByZWNpc2lvbiwgdW5zaWduZWRcbiAqIG51bWJlcnMsIG5vbi1kZWNpbWFsIG51bWJlcnMsIGFuZCBjaGFyYWN0ZXJzLlxuICovXG5mdW5jdGlvbiBqc1NwcmludGYoZm10KVxue1xuXHR2YXIgcmVnZXggPSBbXG5cdCAgICAnKFteJV0qKScsXHRcdFx0XHQvKiBub3JtYWwgdGV4dCAqL1xuXHQgICAgJyUnLFx0XHRcdFx0Lyogc3RhcnQgb2YgZm9ybWF0ICovXG5cdCAgICAnKFtcXCdcXFxcLSsgIzBdKj8pJyxcdFx0XHQvKiBmbGFncyAob3B0aW9uYWwpICovXG5cdCAgICAnKFsxLTldXFxcXGQqKT8nLFx0XHRcdC8qIHdpZHRoIChvcHRpb25hbCkgKi9cblx0ICAgICcoXFxcXC4oWzEtOV1cXFxcZCopKT8nLFx0XHQvKiBwcmVjaXNpb24gKG9wdGlvbmFsKSAqL1xuXHQgICAgJ1tsaGp6dExdKj8nLFx0XHRcdC8qIGxlbmd0aCBtb2RzIChpZ25vcmVkKSAqL1xuXHQgICAgJyhbZGlvdXhYZkZlRWdHYUFjQ3NTcCVqcl0pJ1x0LyogY29udmVyc2lvbiAqL1xuXHRdLmpvaW4oJycpO1xuXG5cdHZhciByZSA9IG5ldyBSZWdFeHAocmVnZXgpO1xuXHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdHZhciBmbGFncywgd2lkdGgsIHByZWNpc2lvbiwgY29udmVyc2lvbjtcblx0dmFyIGxlZnQsIHBhZCwgc2lnbiwgYXJnLCBtYXRjaDtcblx0dmFyIHJldCA9ICcnO1xuXHR2YXIgYXJnbiA9IDE7XG5cblx0bW9kX2Fzc2VydC5lcXVhbCgnc3RyaW5nJywgdHlwZW9mIChmbXQpKTtcblxuXHR3aGlsZSAoKG1hdGNoID0gcmUuZXhlYyhmbXQpKSAhPT0gbnVsbCkge1xuXHRcdHJldCArPSBtYXRjaFsxXTtcblx0XHRmbXQgPSBmbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG5cblx0XHRmbGFncyA9IG1hdGNoWzJdIHx8ICcnO1xuXHRcdHdpZHRoID0gbWF0Y2hbM10gfHwgMDtcblx0XHRwcmVjaXNpb24gPSBtYXRjaFs0XSB8fCAnJztcblx0XHRjb252ZXJzaW9uID0gbWF0Y2hbNl07XG5cdFx0bGVmdCA9IGZhbHNlO1xuXHRcdHNpZ24gPSBmYWxzZTtcblx0XHRwYWQgPSAnICc7XG5cblx0XHRpZiAoY29udmVyc2lvbiA9PSAnJScpIHtcblx0XHRcdHJldCArPSAnJSc7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRpZiAoYXJncy5sZW5ndGggPT09IDApXG5cdFx0XHR0aHJvdyAobmV3IEVycm9yKCd0b28gZmV3IGFyZ3MgdG8gc3ByaW50ZicpKTtcblxuXHRcdGFyZyA9IGFyZ3Muc2hpZnQoKTtcblx0XHRhcmduKys7XG5cblx0XHRpZiAoZmxhZ3MubWF0Y2goL1tcXCcgI10vKSlcblx0XHRcdHRocm93IChuZXcgRXJyb3IoXG5cdFx0XHQgICAgJ3Vuc3VwcG9ydGVkIGZsYWdzOiAnICsgZmxhZ3MpKTtcblxuXHRcdGlmIChwcmVjaXNpb24ubGVuZ3RoID4gMClcblx0XHRcdHRocm93IChuZXcgRXJyb3IoXG5cdFx0XHQgICAgJ25vbi16ZXJvIHByZWNpc2lvbiBub3Qgc3VwcG9ydGVkJykpO1xuXG5cdFx0aWYgKGZsYWdzLm1hdGNoKC8tLykpXG5cdFx0XHRsZWZ0ID0gdHJ1ZTtcblxuXHRcdGlmIChmbGFncy5tYXRjaCgvMC8pKVxuXHRcdFx0cGFkID0gJzAnO1xuXG5cdFx0aWYgKGZsYWdzLm1hdGNoKC9cXCsvKSlcblx0XHRcdHNpZ24gPSB0cnVlO1xuXG5cdFx0c3dpdGNoIChjb252ZXJzaW9uKSB7XG5cdFx0Y2FzZSAncyc6XG5cdFx0XHRpZiAoYXJnID09PSB1bmRlZmluZWQgfHwgYXJnID09PSBudWxsKVxuXHRcdFx0XHR0aHJvdyAobmV3IEVycm9yKCdhcmd1bWVudCAnICsgYXJnbiArXG5cdFx0XHRcdCAgICAnOiBhdHRlbXB0ZWQgdG8gcHJpbnQgdW5kZWZpbmVkIG9yIG51bGwgJyArXG5cdFx0XHRcdCAgICAnYXMgYSBzdHJpbmcnKSk7XG5cdFx0XHRyZXQgKz0gZG9QYWQocGFkLCB3aWR0aCwgbGVmdCwgYXJnLnRvU3RyaW5nKCkpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdkJzpcblx0XHRcdGFyZyA9IE1hdGguZmxvb3IoYXJnKTtcblx0XHRcdC8qanNsOmZhbGx0aHJ1Ki9cblx0XHRjYXNlICdmJzpcblx0XHRcdHNpZ24gPSBzaWduICYmIGFyZyA+IDAgPyAnKycgOiAnJztcblx0XHRcdHJldCArPSBzaWduICsgZG9QYWQocGFkLCB3aWR0aCwgbGVmdCxcblx0XHRcdCAgICBhcmcudG9TdHJpbmcoKSk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ3gnOlxuXHRcdFx0cmV0ICs9IGRvUGFkKHBhZCwgd2lkdGgsIGxlZnQsIGFyZy50b1N0cmluZygxNikpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdqJzogLyogbm9uLXN0YW5kYXJkICovXG5cdFx0XHRpZiAod2lkdGggPT09IDApXG5cdFx0XHRcdHdpZHRoID0gMTA7XG5cdFx0XHRyZXQgKz0gbW9kX3V0aWwuaW5zcGVjdChhcmcsIGZhbHNlLCB3aWR0aCk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ3InOiAvKiBub24tc3RhbmRhcmQgKi9cblx0XHRcdHJldCArPSBkdW1wRXhjZXB0aW9uKGFyZyk7XG5cdFx0XHRicmVhaztcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyAobmV3IEVycm9yKCd1bnN1cHBvcnRlZCBjb252ZXJzaW9uOiAnICtcblx0XHRcdCAgICBjb252ZXJzaW9uKSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0ICs9IGZtdDtcblx0cmV0dXJuIChyZXQpO1xufVxuXG5mdW5jdGlvbiBqc1ByaW50ZigpIHtcblx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRhcmdzLnVuc2hpZnQocHJvY2Vzcy5zdGRvdXQpO1xuXHRqc0ZwcmludGYuYXBwbHkobnVsbCwgYXJncyk7XG59XG5cbmZ1bmN0aW9uIGpzRnByaW50ZihzdHJlYW0pIHtcblx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRyZXR1cm4gKHN0cmVhbS53cml0ZShqc1NwcmludGYuYXBwbHkodGhpcywgYXJncykpKTtcbn1cblxuZnVuY3Rpb24gZG9QYWQoY2hyLCB3aWR0aCwgbGVmdCwgc3RyKVxue1xuXHR2YXIgcmV0ID0gc3RyO1xuXG5cdHdoaWxlIChyZXQubGVuZ3RoIDwgd2lkdGgpIHtcblx0XHRpZiAobGVmdClcblx0XHRcdHJldCArPSBjaHI7XG5cdFx0ZWxzZVxuXHRcdFx0cmV0ID0gY2hyICsgcmV0O1xuXHR9XG5cblx0cmV0dXJuIChyZXQpO1xufVxuXG4vKlxuICogVGhpcyBmdW5jdGlvbiBkdW1wcyBsb25nIHN0YWNrIHRyYWNlcyBmb3IgZXhjZXB0aW9ucyBoYXZpbmcgYSBjYXVzZSgpIG1ldGhvZC5cbiAqIFNlZSBub2RlLXZlcnJvciBmb3IgYW4gZXhhbXBsZS5cbiAqL1xuZnVuY3Rpb24gZHVtcEV4Y2VwdGlvbihleClcbntcblx0dmFyIHJldDtcblxuXHRpZiAoIShleCBpbnN0YW5jZW9mIEVycm9yKSlcblx0XHR0aHJvdyAobmV3IEVycm9yKGpzU3ByaW50ZignaW52YWxpZCB0eXBlIGZvciAlJXI6ICVqJywgZXgpKSk7XG5cblx0LyogTm90ZSB0aGF0IFY4IHByZXBlbmRzIFwiZXguc3RhY2tcIiB3aXRoIGV4LnRvU3RyaW5nKCkuICovXG5cdHJldCA9ICdFWENFUFRJT046ICcgKyBleC5jb25zdHJ1Y3Rvci5uYW1lICsgJzogJyArIGV4LnN0YWNrO1xuXG5cdGlmIChleC5jYXVzZSAmJiB0eXBlb2YgKGV4LmNhdXNlKSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBjZXggPSBleC5jYXVzZSgpO1xuXHRcdGlmIChjZXgpIHtcblx0XHRcdHJldCArPSAnXFxuQ2F1c2VkIGJ5OiAnICsgZHVtcEV4Y2VwdGlvbihjZXgpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiAocmV0KTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92ZXJyb3Ivfi9leHRzcHJpbnRmL2xpYi9leHRzcHJpbnRmLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblxuZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuICB9XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdmVycm9yL34vY29yZS11dGlsLWlzL2xpYi91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yIGV4dGVuZHMgRGlzbEVycm9yIHtcbiAgXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHNlcnZpY2VzXG4gICAqXG4gICAqIEByZXR1cm5zIHtDaXJjdWxhckRlcGVuZGVuY3lFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihzZXJ2aWNlczogQXJyYXk8c3RyaW5nPik6IENpcmN1bGFyRGVwZW5kZW5jeUVycm9yIHtcbiAgICBjb25zdCBwYXRoID0gW10uY29uY2F0KHNlcnZpY2VzKVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLmpvaW4oJyA8LSAnKVxuXG4gICAgcmV0dXJuIG5ldyBDaXJjdWxhckRlcGVuZGVuY3lFcnJvcihcbiAgICAgIHtcbiAgICAgICAgc2VydmljZXNcbiAgICAgIH0sXG4gICAgICAnQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDogJXMnLFxuICAgICAgcGF0aFxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDaXJjdWxhckRlcGVuZGVuY3lFcnJvclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvY2lyY3VsYXItZGVwZW5kZW5jeS1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7RmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IoaWRlbnRpZmllcjogc3RyaW5nKTogRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3Ige1xuICAgIHJldHVybiBuZXcgRmFjdG9yeU1ldGhvZFJldHVybnNOb3RoaW5nRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGlkZW50aWZpZXJcbiAgICAgIH0sXG4gICAgICAnRmFjdG9yeSBtZXRob2QgZm9yIGlkZW50aWZpZXIgXCIlc1wiIHJldHVybnMgbm90aGluZycsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZhY3RvcnlNZXRob2RSZXR1cm5zTm90aGluZ0Vycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL2ZhY3RvcnktbWV0aG9kLXJldHVybnMtbm90aGluZy1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZVxuICAgKlxuICAgKiBAcmV0dXJucyB7TWV0aG9kRG9lc05vdEV4aXN0RXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IobWV0aG9kTmFtZTogc3RyaW5nKTogTWV0aG9kRG9lc05vdEV4aXN0RXJyb3Ige1xuICAgIHJldHVybiBuZXcgTWV0aG9kRG9lc05vdEV4aXN0RXJyb3IoXG4gICAgICB7XG4gICAgICAgIG1ldGhvZE5hbWVcbiAgICAgIH0sXG4gICAgICAnTWV0aG9kIFwiJXNcIiBkb2VzIG5vdCBleGlzdCcsXG4gICAgICBtZXRob2ROYW1lXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1ldGhvZERvZXNOb3RFeGlzdEVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL21ldGhvZC1kb2VzLW5vdC1leGlzdC1lcnJvci5qcyIsImltcG9ydCBEaXNsRXJyb3IgZnJvbSAnLi9kaXNsLWVycm9yJ1xuXG4vKipcbiAqIEBhdXRob3IgQmVuamFtaW4gTWljaGFsc2tpIDxiZW5qYW1pbi5taWNoYWxza2lAZ21haWwuY29tPlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yIGV4dGVuZHMgRGlzbEVycm9yIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge1NlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihpZGVudGlmaWVyOiBzdHJpbmcpOiBTZXJ2aWNlRGVmaW5pdGlvbkFscmVhZHlVc2VkRXJyb3Ige1xuICAgIHJldHVybiBuZXcgU2VydmljZURlZmluaXRpb25BbHJlYWR5VXNlZEVycm9yKFxuICAgICAge1xuICAgICAgICBpZGVudGlmaWVyXG4gICAgICB9LFxuICAgICAgJ1NlcnZpY2UgZGVmaW5pdGlvbiBmb3IgXCIlc1wiIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBpbnN0YW50aWF0ZSBhIHNlcnZpY2UsIHJlZnVzaW5nIHRvIG1vZGlmeSBpdCcsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlcnZpY2VEZWZpbml0aW9uQWxyZWFkeVVzZWRFcnJvclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy9zZXJ2aWNlLWRlZmluaXRpb24tYWxyZWFkeS11c2VkLWVycm9yLmpzIiwiaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Rpc2wtZXJyb3InXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihpZGVudGlmaWVyOiBzdHJpbmcpOiBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBVbmRlZmluZWRQYXJhbWV0ZXJFcnJvcihcbiAgICAgIHtcbiAgICAgICAgaWRlbnRpZmllclxuICAgICAgfSxcbiAgICAgICdVbmRlZmluZWQgcGFyYW1ldGVyIGZvciBpZGVudGlmaWVyIFwiJXNcIicsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVuZGVmaW5lZFBhcmFtZXRlckVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1wYXJhbWV0ZXItZXJyb3IuanMiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvciBleHRlbmRzIERpc2xFcnJvciB7XG4gIFxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXJcbiAgICpcbiAgICogQHJldHVybnMge1VuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihpZGVudGlmaWVyOiBzdHJpbmcpOiBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkFuZEluc3RhbmNlRXJyb3Ige1xuICAgIHJldHVybiBuZXcgVW5kZWZpbmVkU2VydmljZURlZmluaXRpb25BbmRJbnN0YW5jZUVycm9yKFxuICAgICAge1xuICAgICAgICBpZGVudGlmaWVyXG4gICAgICB9LFxuICAgICAgJ1VuZGVmaW5lZCBzZXJ2aWNlIGRlZmluaXRpb24gYW5kIGluc3RhbmNlIGZvciBpZGVudGlmaWVyIFwiJXNcIicsXG4gICAgICBpZGVudGlmaWVyXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uQW5kSW5zdGFuY2VFcnJvclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9lcnJvcnMvdW5kZWZpbmVkLXNlcnZpY2UtZGVmaW5pdGlvbi1hbmQtaW5zdGFuY2UtZXJyb3IuanMiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7VW5kZWZpbmVkU2VydmljZURlZmluaXRpb25FcnJvcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvcihpZGVudGlmaWVyOiBzdHJpbmcpOiBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yIHtcbiAgICByZXR1cm4gbmV3IFVuZGVmaW5lZFNlcnZpY2VEZWZpbml0aW9uRXJyb3IoXG4gICAgICB7XG4gICAgICAgIGlkZW50aWZpZXJcbiAgICAgIH0sXG4gICAgICAnVW5kZWZpbmVkIHNlcnZpY2UgZGVmaW5pdGlvbiBmb3IgaWRlbnRpZmllciBcIiVzXCInLFxuICAgICAgaWRlbnRpZmllclxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVbmRlZmluZWRTZXJ2aWNlRGVmaW5pdGlvbkVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL3VuZGVmaW5lZC1zZXJ2aWNlLWRlZmluaXRpb24tZXJyb3IuanMiLCJpbXBvcnQgRGlzbEVycm9yIGZyb20gJy4vZGlzbC1lcnJvcidcblxuLyoqXG4gKiBAYXV0aG9yIEJlbmphbWluIE1pY2hhbHNraSA8YmVuamFtaW4ubWljaGFsc2tpQGdtYWlsLmNvbT5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFVuc3VwcG9ydGVkQXJndW1lbnRUeXBlRXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2FueX0gYXJnXG4gICAqXG4gICAqIEByZXR1cm5zIHtVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGFyZzogYW55KTogVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBVbnN1cHBvcnRlZEFyZ3VtZW50VHlwZUVycm9yKFxuICAgICAge1xuICAgICAgICBhcmdcbiAgICAgIH0sXG4gICAgICAnVW5zdXBwb3J0ZWQgYXJnIG9mIHR5cGUgXCIlc1wiJyxcbiAgICAgIHR5cGVvZiBhcmdcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVW5zdXBwb3J0ZWRBcmd1bWVudFR5cGVFcnJvclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Vycm9ycy91bnN1cHBvcnRlZC1hcmd1bWVudC10eXBlLWVycm9yLmpzIiwiaW1wb3J0IERpc2xFcnJvciBmcm9tICcuL2Rpc2wtZXJyb3InXG5cbi8qKlxuICogQGF1dGhvciBCZW5qYW1pbiBNaWNoYWxza2kgPGJlbmphbWluLm1pY2hhbHNraUBnbWFpbC5jb20+XG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHZXRTZXJ2aWNlRXJyb3IgZXh0ZW5kcyBEaXNsRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge0Vycm9yfSBjYXVzZVxuICAgKlxuICAgKiBAcmV0dXJucyB7TWV0aG9kRG9lc05vdEV4aXN0RXJyb3J9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRXJyb3IoaWRlbnRpZmllcjogc3RyaW5nLCBjYXVzZTogRXJyb3IpOiBHZXRTZXJ2aWNlRXJyb3Ige1xuICAgIHJldHVybiBuZXcgR2V0U2VydmljZUVycm9yKFxuICAgICAge1xuICAgICAgICBjYXVzZSxcbiAgICAgICAgaW5mbzoge1xuICAgICAgICAgIGlkZW50aWZpZXJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdFcnJvciBnZXR0aW5nIHNlcnZpY2UgXCIlc1wiJyxcbiAgICAgIGlkZW50aWZpZXJcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2V0U2VydmljZUVycm9yXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXJyb3JzL2dldC1zZXJ2aWNlLWVycm9yLmpzIiwiZXhwb3J0IHR5cGUgU2VydmljZSA9IE9iamVjdHxGdW5jdGlvblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3R5cGVzL3NlcnZpY2UuanMiLCJleHBvcnQgdHlwZSBzY2FsYXIgPSAoc3RyaW5nfG51bWJlcnxib29sZWFufG51bGwpXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHlwZXMvc2NhbGFyLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==